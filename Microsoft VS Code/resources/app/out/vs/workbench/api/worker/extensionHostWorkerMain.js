/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var Gp=function(e,t){return Gp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},Gp(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gp(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i}export function __decorate(e,t,i,r){var s=arguments.length,n=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}export function __param(e,t){return function(i,r){t(i,r,e)}}export function __esDecorate(e,t,i,r,s,n){function o(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=i.length-1;p>=0;p--){var m={};for(var w in r)m[w]=w==="access"?{}:r[w];for(var w in r.access)m.access[w]=r.access[w];m.addInitializer=function(k){if(f)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(k||null))};var x=(0,i[p])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=o(x.get))&&(u.get=d),(d=o(x.set))&&(u.set=d),(d=o(x.init))&&s.unshift(d)}else(d=o(x))&&(a==="field"?s.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0}export function __runInitializers(e,t,i){for(var r=arguments.length>2,s=0;s<t.length;s++)i=r?t[s].call(e,i):t[s].call(e);return r?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,s=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1],n=l;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(l);break}n[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],s=0}finally{r=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,r){r===void 0&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,n;r<s;r++)(n||!(r in t))&&(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(m){return Promise.resolve(m).then(p,d)}}function a(p,m){r[p]&&(s[p]=function(w){return new Promise(function(x,k){n.push([p,w,x,k])>1||c(p,w)})},m&&(s[p]=m(s[p])))}function c(p,m){try{l(r[p](m))}catch(w){f(n[0][3],w)}}function l(p){p.value instanceof __await?Promise.resolve(p.value.v).then(u,d):f(n[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function f(p,m){p(m),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,i;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,n){t[s]=e[s]?function(o){return(i=!i)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var WC=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return WC(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,i):s?s.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var zC=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};export function __disposeResources(e){function t(r){e.error=e.hasError?new zC(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function i(){for(;e.stack.length;){var r=e.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(i,function(n){return t(n),i()})}catch(n){t(n)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var yi=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},_C=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?nn.isErrorNoTelemetry(e)?new nn(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},Ka=new _C;function Jp(e){Ka.setUnexpectedErrorHandler(e)}function $u(e){Ka.onUnexpectedError(e)}function Vt(e){ys(e)||Ka.onUnexpectedError(e)}function Wb(e){ys(e)||Ka.onUnexpectedExternalError(e)}function mo(e){if(e instanceof Error){const{name:t,message:i,cause:r}=e,s=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:s,noTelemetry:nn.isErrorNoTelemetry(e),cause:r?mo(r):void 0,code:e.code}}return e}function zb(e){let t;return e.noTelemetry?t=new nn:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=zb(e.cause)),t}var Cu="Canceled";function ys(e){return e instanceof vr?!0:e instanceof Error&&e.name===Cu&&e.message===Cu}var vr=class extends Error{constructor(){super(Cu),this.name=this.message}};function _b(){const e=new Error(Cu);return e.name=e.message,e}function ke(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function Zp(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var sn=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},VC=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},Qp=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},nn=class pb extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof pb)return t;const i=new pb;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Li=class a$ extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,a$.prototype)}};function qC(e,t,i=e.length-1){const r=GC(e,t,i);if(r!==-1)return e[r]}function GC(e,t,i=e.length-1){for(let r=i;r>=0;r--){const s=e[r];if(t(s))return r}return-1}function JC(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}var HH=class c${static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(c$.assertInvariants){if(this.d){for(const r of this.e)if(this.d(r)&&!t(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=JC(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function wr(e,t,i=(r,s)=>r===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!i(e[r],t[r]))return!1;return!0}function ZC(e,t){const i=[];let r;for(const s of e.slice(0).sort(t))!r||t(r[0],s)!==0?(r=[s],i.push(r)):r.push(s);return i}function Vb(e,t,i){const r=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=r[r.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):r.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=i(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return r}function QC(e,t,i){const r=Vb(e,t,i),s=[],n=[];for(const o of r)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function bt(e){return e.filter(t=>!!t)}function YC(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function Yp(e){return!Array.isArray(e)||e.length===0}function vo(e){return Array.isArray(e)&&e.length>0}function wo(e,t=i=>i){const i=new Set;return e.filter(r=>{const s=t(r);return i.has(s)?!1:(i.add(s),!0)})}function qb(e,t){let i;if(typeof t=="number"){let r=t;i=()=>{const s=Math.sin(r++)*179426549;return s-Math.floor(s)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}}function Xp(e,t){return Array.isArray(e)?e.map(t):t(e)}function Ni(e){return Array.isArray(e)?e:[e]}var Kp;(function(e){function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function r(n){return n>0}e.isGreaterThan=r;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(Kp||(Kp={}));function XC(e,t){return(i,r)=>t(e(i),e(r))}var KC=(e,t)=>e-t,BH=class Pp{static{this.empty=new Pp(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new Pp(i=>this.iterate(r=>t(r)?i(r):!0))}map(t){return new Pp(i=>this.iterate(r=>i(t(r))))}some(t){let i=!1;return this.iterate(r=>(i=t(r),!i)),i}findFirst(t){let i;return this.iterate(r=>t(r)?(i=r,!1):!0),i}findLast(t){let i;return this.iterate(r=>(t(r)&&(i=r),!0)),i}findLastMaxBy(t){let i,r=!0;return this.iterate(s=>((r||Kp.isGreaterThan(t(s,i)))&&(r=!1,i=s),!0)),i}},Gb;function Jb(e,t){const i=Object.create(null);for(const r of e){const s=t(r);let n=i[s];n||(n=i[s]=[]),n.push(r)}return i}function eI(e,t){const i=[],r=[];for(const s of e)t.has(s)||i.push(s);for(const s of t)e.has(s)||r.push(s);return{removed:i,added:r}}var jH=class{static{Gb=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[Gb]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},Zb,Qb,Yb;function tI(e,t,i){let r=e.get(t);return r===void 0&&(r=i,e.set(t,r)),r}var iI=class{constructor(e,t){this.uri=e,this.value=t}};function rI(e){return Array.isArray(e)}var Nt=class hu{static{this.c=t=>t.toString()}constructor(t,i){if(this[Zb]="ResourceMap",t instanceof hu)this.d=new Map(t.d),this.e=i??hu.c;else if(rI(t)){this.d=new Map,this.e=i??hu.c;for(const[r,s]of t)this.set(r,s)}else this.d=new Map,this.e=t??hu.c}set(t,i){return this.d.set(this.e(t),new iI(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[r,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(Zb=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},Xb=class{constructor(e,t){this[Qb]="ResourceSet",!e||typeof e=="function"?this.c=new Nt(e):(this.c=new Nt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,r)=>e.call(t,r,r,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(Qb=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},Kb;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(Kb||(Kb={}));var sI=class{constructor(){this[Yb]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const i=this.c.get(e);if(i)return t!==0&&this.n(i,t),i.value}set(e,t,i=0){let r=this.c.get(e);if(r)r.value=t,i!==0&&this.n(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.l(r);break;case 1:this.k(r);break;case 2:this.l(r);break;default:this.l(r);break}this.c.set(e,r),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const i=this.g;let r=this.d;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(Yb=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const i=e.next,r=e.previous;e===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const i=e.next,r=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},nI=class extends sI{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},eg=class extends nI{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},ey=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function tg(e,t){const i=this;let r=!1,s;return function(){if(r)return s;if(r=!0,t)try{s=e.apply(i,arguments)}finally{t()}else s=e.apply(i,arguments);return s}}function ii(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function ig(e,t="Unreachable"){throw new Error(t)}function rg(e,t="unexpected state"){if(!e)throw typeof t=="string"?new Li(`Assertion Failed: ${t}`):t}function ty(e){if(!e()){debugger;e(),Vt(new Li("Assertion Failed"))}}function Me(e){return typeof e=="string"}function oI(e){return Array.isArray(e)&&e.every(t=>Me(t))}function yt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function aI(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function on(e){return typeof e=="number"&&!isNaN(e)}function cI(e){return!!e&&typeof e[Symbol.iterator]=="function"}function ec(e){return typeof e>"u"}function xi(e){return!xt(e)}function xt(e){return ec(e)||e===null}function iy(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function bo(e){return rg(e!=null,"Argument is `undefined` or `null`."),e}var lI=Object.prototype.hasOwnProperty;function ry(e){if(!yt(e))return!1;for(const t in e)if(lI.call(e,t))return!1;return!0}function sy(e){return typeof e=="function"}function uI(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++)ny(e[r],t[r])}function ny(e,t){if(Me(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(sy(t)){try{if(e instanceof t)return}catch{}if(!xt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var qt;(function(e){function t(N){return N&&typeof N=="object"&&typeof N[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function r(){return i}e.empty=r;function*s(N){yield N}e.single=s;function n(N){return t(N)?N:s(N)}e.wrap=n;function o(N){return N||i}e.from=o;function*a(N){for(let W=N.length-1;W>=0;W--)yield N[W]}e.reverse=a;function c(N){return!N||N[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(N){return N[Symbol.iterator]().next().value}e.first=l;function u(N,W){let X=0;for(const K of N)if(W(K,X++))return!0;return!1}e.some=u;function d(N,W){for(const X of N)if(W(X))return X}e.find=d;function*f(N,W){for(const X of N)W(X)&&(yield X)}e.filter=f;function*p(N,W){let X=0;for(const K of N)yield W(K,X++)}e.map=p;function*m(N,W){let X=0;for(const K of N)yield*W(K,X++)}e.flatMap=m;function*w(...N){for(const W of N)cI(W)?yield*W:yield W}e.concat=w;function x(N,W,X){let K=X;for(const Y of N)K=W(K,Y);return K}e.reduce=x;function k(N){let W=0;for(const X of N)W++;return W}e.length=k;function*$(N,W,X=N.length){for(W<-N.length&&(W=0),W<0&&(W+=N.length),X<0?X+=N.length:X>N.length&&(X=N.length);W<X;W++)yield N[W]}e.slice=$;function A(N,W=Number.POSITIVE_INFINITY){const X=[];if(W===0)return[X,N];const K=N[Symbol.iterator]();for(let Y=0;Y<W;Y++){const le=K.next();if(le.done)return[X,e.empty()];X.push(le.value)}return[X,{[Symbol.iterator](){return K}}]}e.consume=A;async function G(N){const W=[];for await(const X of N)W.push(X);return Promise.resolve(W)}e.asyncToArray=G})(qt||(qt={}));var hI=!1,an=null,WH=class l${constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:l$.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const r=this.c(t);r.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const r=i.get(t);if(r)return r;const s=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,r])=>r.source!==null&&!this.f(r,t).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(t=10,i){let r;if(i)r=i;else{const c=new Map,l=[...this.b.values()].filter(d=>d.source!==null&&!this.f(d,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(d=>d.value));if(r=l.filter(d=>!(d.parent&&u.has(d.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function s(c){function l(d,f){for(;d.length>0&&f.some(p=>typeof p=="string"?p===d[0]:d[0].match(p));)d.shift()}const u=c.source.split(`
`).map(d=>d.trim().replace("at ","")).filter(d=>d!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new ey;for(const c of r){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}r.sort(XC(c=>c.idx,KC));let o="",a=0;for(const c of r.slice(0,t)){a++;const l=s(c),u=[];for(let d=0;d<l.length;d++){let f=l[d];f=`(shared with ${n.get(l.slice(0,d+1).join(`
`)).size}/${r.length} leaks) at ${f}`;const m=n.get(l.slice(0,d).join(`
`)),w=Jb([...m].map(x=>s(x)[d]),x=>x);delete w[l[d]];for(const[x,k]of Object.entries(w))u.unshift(`    - stacktraces of ${k.length} other leaks continue with ${x}`);u.unshift(f)}o+=`


==================== Leaking disposable ${a}/${r.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return r.length>t&&(o+=`


... and ${r.length-t} more leaking disposables

`),{leaks:r,details:o}}};function dI(e){an=e}if(hI){const e="__is_disposable_tracked__";dI(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==ne.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==ne.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function yo(e){return an?.trackDisposable(e),e}function xo(e){an?.markAsDisposed(e)}function tc(e,t){an?.setParent(e,t)}function fI(e,t){if(an)for(const i of e)an.setParent(i,t)}function sg(e){return an?.markAsSingleton(e),e}function oy(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function Hr(e){if(qt.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function ng(...e){const t=se(()=>Hr(e));return fI(e,t),t}function se(e){const t=yo({dispose:tg(()=>{xo(t),e()})});return t}var fe=class u${static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,yo(this)}dispose(){this.g||(xo(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{Hr(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return tc(t,this),this.g?u$.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),tc(t,null))}},ne=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new fe,yo(this),tc(this.q,this)}dispose(){xo(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},xs=class{constructor(){this.b=!1,yo(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&tc(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,xo(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&tc(e,null),e}},Iu=class{constructor(){this.a=new Map,this.b=!1,yo(this)}dispose(){xo(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{Hr(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}};function ay(e,t){return new pI(e,t)}var pI=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?Vt(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let i;switch(e){case"data":i=this.c.data;break;case"end":i=this.c.end;break;case"error":i=this.c.error;break}if(i){const r=i.indexOf(t);r>=0&&i.splice(r,1)}}j(){if(this.b.data.length===0)return;if(typeof this.e=="function"){const t=this.e(this.b.data);this.g(t)}else for(const t of this.b.data)this.g(t);this.b.data.length=0;const e=[...this.d];this.d.length=0,e.forEach(t=>t())}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function gI(e,t){const i=[];let r;for(;(r=e.read())!==null;)i.push(r);return t(i)}function cy(e,t){return new Promise((i,r)=>{const s=[];ly(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?r(n):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})})}function ly(e,t,i){e.on("error",r=>{i?.isCancellationRequested||t.onError(r)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",r=>{i?.isCancellationRequested||t.onData(r)})}function mI(e,t){const i=ay(t);return i.end(e),i}var Du=typeof Buffer<"u",vI=new yi(()=>new Uint8Array(256)),og,ag,ae=class Gi{static alloc(t){return Du?new Gi(Buffer.allocUnsafe(t)):new Gi(new Uint8Array(t))}static wrap(t){return Du&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new Gi(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&Du?new Gi(Buffer.from(t)):(og||(og=new TextEncoder),new Gi(og.encode(t)))}static fromByteArray(t){const i=Gi.alloc(t.length);for(let r=0,s=t.length;r<s;r++)i.buffer[r]=t[r];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let n=0,o=t.length;n<o;n++)i+=t[n].byteLength}const r=Gi.alloc(i);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];r.set(a,s),s+=a.byteLength}return r}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=Gi.alloc(this.byteLength);return t.set(this),t}toString(){return Du?this.buffer.toString():(ag||(ag=new TextDecoder),ag.decode(this.buffer))}slice(t,i){return new Gi(this.buffer.subarray(t,i))}set(t,i){if(t instanceof Gi)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Pu(this.buffer,t)}writeUInt32BE(t,i){Au(this.buffer,t,i)}readUInt32LE(t){return xI(this.buffer,t)}writeUInt32LE(t,i){EI(this.buffer,t,i)}readUInt8(t){return SI(this.buffer,t)}writeUInt8(t,i){kI(this.buffer,t,i)}indexOf(t,i=0){return wI(this.buffer,t instanceof Gi?t.buffer:t,i)}equals(t){return this===t?!0:this.byteLength!==t.byteLength?!1:this.buffer.every((i,r)=>i===t.buffer[r])}};function wI(e,t,i=0){const r=t.byteLength,s=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0]);if(r>s-i)return-1;const n=vI.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function bI(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function yI(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function Pu(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Au(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function xI(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function EI(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function SI(e,t){return e[t]}function kI(e,t,i){e[i]=t}function $I(e){return gI(e,t=>ae.concat(t))}function CI(e){return cy(e,t=>ae.concat(t))}function II(e){return mI(e,t=>ae.concat(t))}function Tu(e){let t=0,i=0,r=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(i){case 3:s[r++]=t|a,i=0;break;case 2:s[r++]=t|a>>>2,t=a<<6,i=3;break;case 1:s[r++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=r;for(;i>0;)n(0);return ae.wrap(s).slice(0,o)}var DI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function cg({buffer:e},t=!0,i=!1){const r=i?PI:DI;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[(c<<2|l>>>6)&63],s+=r[l&63]}if(n===1){const a=e[o+0];s+=r[a>>>2],s+=r[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[c<<2&63],t&&(s+="=")}return s}var mt=class Ap{static{this.Undefined=new Ap(void 0)}constructor(t){this.element=t,this.next=Ap.Undefined,this.prev=Ap.Undefined}},Es=class{constructor(){this.a=mt.Undefined,this.b=mt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===mt.Undefined}clear(){let e=this.a;for(;e!==mt.Undefined;){const t=e.next;e.prev=mt.Undefined,e.next=mt.Undefined,e=t}this.a=mt.Undefined,this.b=mt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new mt(e);if(this.a===mt.Undefined)this.a=i,this.b=i;else if(t){const s=this.b;this.b=i,i.prev=s,s.next=i}else{const s=this.a;this.a=i,i.next=s,s.prev=i}this.c+=1;let r=!1;return()=>{r||(r=!0,this.e(i))}}shift(){if(this.a!==mt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==mt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==mt.Undefined&&e.next!==mt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===mt.Undefined&&e.next===mt.Undefined?(this.a=mt.Undefined,this.b=mt.Undefined):e.next===mt.Undefined?(this.b=this.b.prev,this.b.next=mt.Undefined):e.prev===mt.Undefined&&(this.a=this.a.next,this.a.prev=mt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==mt.Undefined;)yield e.element,e=e.next}},AI=globalThis.performance.now.bind(globalThis.performance),cn=class h${static create(t){return new h$(t)}constructor(t){this.c=t===!1?Date.now:AI,this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},uy=!1,TI=!1,ft;(function(e){e.None=()=>ne.None;function t(_){if(TI){const{onDidAddListener:H}=_,Q=lg.create();let q=0;_.onDidAddListener=()=>{++q===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Q.print()),H?.()}}}function i(_,H){return p(_,()=>{},0,void 0,!0,void 0,H)}e.defer=i;function r(_){return(H,Q=null,q)=>{let Z=!1,ve;return ve=_(Te=>{if(!Z)return ve?ve.dispose():Z=!0,H.call(Q,Te)},null,q),Z&&ve.dispose(),ve}}e.once=r;function s(_,H){return e.once(e.filter(_,H))}e.onceIf=s;function n(_,H,Q){return d((q,Z=null,ve)=>_(Te=>q.call(Z,H(Te)),null,ve),Q)}e.map=n;function o(_,H,Q){return d((q,Z=null,ve)=>_(Te=>{H(Te),q.call(Z,Te)},null,ve),Q)}e.forEach=o;function a(_,H,Q){return d((q,Z=null,ve)=>_(Te=>H(Te)&&q.call(Z,Te),null,ve),Q)}e.filter=a;function c(_){return _}e.signal=c;function l(..._){return(H,Q=null,q)=>{const Z=ng(..._.map(ve=>ve(Te=>H.call(Q,Te))));return f(Z,q)}}e.any=l;function u(_,H,Q,q){let Z=Q;return n(_,ve=>(Z=H(Z,ve),Z),q)}e.reduce=u;function d(_,H){let Q;const q={onWillAddFirstListener(){Q=_(Z.fire,Z)},onDidRemoveLastListener(){Q?.dispose()}};H||t(q);const Z=new P(q);return H?.add(Z),Z.event}function f(_,H){return H instanceof Array?H.push(_):H&&H.add(_),_}function p(_,H,Q=100,q=!1,Z=!1,ve,Te){let xe,Ge,Ut,ut=0,zt;const ei={leakWarningThreshold:ve,onWillAddFirstListener(){xe=_(Or=>{ut++,Ge=H(Ge,Or),q&&!Ut&&(st.fire(Ge),Ge=void 0),zt=()=>{const ho=Ge;Ge=void 0,Ut=void 0,(!q||ut>1)&&st.fire(ho),ut=0},typeof Q=="number"?(clearTimeout(Ut),Ut=setTimeout(zt,Q)):Ut===void 0&&(Ut=0,queueMicrotask(zt))})},onWillRemoveListener(){Z&&ut>0&&zt?.()},onDidRemoveLastListener(){zt=void 0,xe.dispose()}};Te||t(ei);const st=new P(ei);return Te?.add(st),st.event}e.debounce=p;function m(_,H=0,Q){return e.debounce(_,(q,Z)=>q?(q.push(Z),q):[Z],H,void 0,!0,void 0,Q)}e.accumulate=m;function w(_,H=(q,Z)=>q===Z,Q){let q=!0,Z;return a(_,ve=>{const Te=q||!H(ve,Z);return q=!1,Z=ve,Te},Q)}e.latch=w;function x(_,H,Q){return[e.filter(_,H,Q),e.filter(_,q=>!H(q),Q)]}e.split=x;function k(_,H=!1,Q=[],q){let Z=Q.slice(),ve=_(Ge=>{Z?Z.push(Ge):xe.fire(Ge)});q&&q.add(ve);const Te=()=>{Z?.forEach(Ge=>xe.fire(Ge)),Z=null},xe=new P({onWillAddFirstListener(){ve||(ve=_(Ge=>xe.fire(Ge)),q&&q.add(ve))},onDidAddFirstListener(){Z&&(H?setTimeout(Te):Te())},onDidRemoveLastListener(){ve&&ve.dispose(),ve=null}});return q&&q.add(xe),xe.event}e.buffer=k;function $(_,H){return(q,Z,ve)=>{const Te=H(new G);return _(function(xe){const Ge=Te.evaluate(xe);Ge!==A&&q.call(Z,Ge)},void 0,ve)}}e.chain=$;const A=Symbol("HaltChainable");class G{constructor(){this.f=[]}map(H){return this.f.push(H),this}forEach(H){return this.f.push(Q=>(H(Q),Q)),this}filter(H){return this.f.push(Q=>H(Q)?Q:A),this}reduce(H,Q){let q=Q;return this.f.push(Z=>(q=H(q,Z),q)),this}latch(H=(Q,q)=>Q===q){let Q=!0,q;return this.f.push(Z=>{const ve=Q||!H(Z,q);return Q=!1,q=Z,ve?Z:A}),this}evaluate(H){for(const Q of this.f)if(H=Q(H),H===A)break;return H}}function N(_,H,Q=q=>q){const q=(...xe)=>Te.fire(Q(...xe)),Z=()=>_.on(H,q),ve=()=>_.removeListener(H,q),Te=new P({onWillAddFirstListener:Z,onDidRemoveLastListener:ve});return Te.event}e.fromNodeEventEmitter=N;function W(_,H,Q=q=>q){const q=(...xe)=>Te.fire(Q(...xe)),Z=()=>_.addEventListener(H,q),ve=()=>_.removeEventListener(H,q),Te=new P({onWillAddFirstListener:Z,onDidRemoveLastListener:ve});return Te.event}e.fromDOMEventEmitter=W;function X(_,H){return new Promise(Q=>r(_)(Q,null,H))}e.toPromise=X;function K(_){const H=new P;return _.then(Q=>{H.fire(Q)},()=>{H.fire(void 0)}).finally(()=>{H.dispose()}),H.event}e.fromPromise=K;function Y(_,H){return _(Q=>H.fire(Q))}e.forward=Y;function le(_,H,Q){return H(Q),_(q=>H(q))}e.runAndSubscribe=le;class We{constructor(H,Q){this._observable=H,this.f=0,this.g=!1;const q={onWillAddFirstListener:()=>{H.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{H.removeObserver(this)}};Q||t(q),this.emitter=new P(q),Q&&Q.add(this.emitter)}beginUpdate(H){this.f++}handlePossibleChange(H){}handleChange(H,Q){this.g=!0}endUpdate(H){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function Ce(_,H){return new We(_,H).emitter.event}e.fromObservable=Ce;function dt(_){return(H,Q,q)=>{let Z=0,ve=!1;const Te={beginUpdate(){Z++},endUpdate(){Z--,Z===0&&(_.reportChanges(),ve&&(ve=!1,H.call(Q)))},handlePossibleChange(){},handleChange(){ve=!0}};_.addObserver(Te),_.reportChanges();const xe={dispose(){_.removeObserver(Te)}};return q instanceof fe?q.add(xe):Array.isArray(q)&&q.push(xe),xe}}e.fromObservableLight=dt})(ft||(ft={}));var RI=class gb{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${gb.f++}`,gb.all.add(this)}start(t){this.g=new cn,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},hy=-1,LI=class d${static{this.f=1}constructor(t,i,r=(d$.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=r,this.h=0}dispose(){this.g?.clear()}check(t,i){const r=this.threshold;if(r<=0||i<r)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=r*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new NI(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[r,s]of this.g)(!t||i<s)&&(t=[r,s],i=s);return t}},lg=class f${static create(){const t=new Error;return new f$(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},NI=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},MI=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},FI=0,Ru=class{constructor(e){this.value=e,this.id=FI++}},OI=2,dy=(e,t)=>{if(e instanceof Ru)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}},P=class{constructor(e){this.z=0,this.f=e,this.g=hy>0||this.f?.leakWarningThreshold?new LI(e?.onListenerError??Vt,this.f?.leakWarningThreshold??hy):void 0,this.j=this.f?._profName?new RI(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(uy){const e=this.u;queueMicrotask(()=>{dy(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,i)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new MI(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||Vt)(l),ne.None}if(this.m)return ne.None;t&&(e=e.bind(t));const r=new Ru(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(r.stack=lg.create(),s=this.g.check(r.stack,this.z+1)),uy&&(r.stack=n??lg.create()),this.u?this.u instanceof Ru?(this.w??=new UI,this.u=[this.u,r]):this.u.push(r):(this.f?.onWillAddFirstListener?.(this),this.u=r,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=se(()=>{s?.(),this.A(r)});return i instanceof fe?i.add(o):Array.isArray(i)&&i.push(o),o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[i]=void 0;const r=this.w.current===this;if(this.z*OI<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:r&&s<this.w.end&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const i=this.f?.onListenerError||Vt;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof Ru)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},UI=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},ic=class extends P{async fireAsync(e,t,i){if(this.u)for(this.h||(this.h=new Es),dy(this.u,r=>this.h.push([r.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[r,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,r)),n.push(a)}};try{r(o)}catch(a){Vt(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&Vt(c.reason)})}}},Lu=class extends P{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new Es,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},HI=class extends Lu{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},BI=class extends P{constructor(e){super(e),this.h=[],this.k=e?.merge}fire(e){this.hasListeners()&&(this.h.push(e),this.h.length===1&&queueMicrotask(()=>{this.k?super.fire(this.k(this.h)):this.h.forEach(t=>super.fire(t)),this.h=[]}))}},rc;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(rc||(rc={}));var fy;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(fy||(fy={}));var py;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(py||(py={}));function gy(e){const t=ae.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function jI(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var my;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(my||(my={}));function ug(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function i(s,n){t.push(s,n?.startTime??Date.now())}function r(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:i,getMarks:r}}function WI(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?ug():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return ug(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),ug()}function zI(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=WI()),e.MonacoPerformanceMarks}var vy=zI(globalThis),ci=vy.mark,_I=vy.getMarks;function VI(){return globalThis._VSCODE_NLS_MESSAGES}function wy(){return globalThis._VSCODE_NLS_LANGUAGE}var qI=wy()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Nu(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(r,s)=>{const n=s[0],o=t[n];let a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),qI&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function h(e,t,...i){return Nu(typeof e=="number"?by(e,t):t,i)}function by(e,t){const i=VI()?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function Mu(e,t,...i){let r;typeof e=="number"?r=by(e,t):r=t;const s=Nu(r,i);return{value:s,original:t===r?s:Nu(t,i)}}var Ss="en",sc=!1,nc=!1,oc=!1,GI=!1,yy=!1,hg=!1,JI=!1,dg=!1,xy=!1,Ey=!1,Fu=void 0,Ou=Ss,Sy=Ss,ZI=void 0,Br=void 0,jr=globalThis,Mi=void 0;typeof jr.vscode<"u"&&typeof jr.vscode.process<"u"?Mi=jr.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Mi=process);var ky=typeof Mi?.versions?.electron=="string",QI=ky&&Mi?.type==="renderer";if(typeof Mi=="object"){sc=Mi.platform==="win32",nc=Mi.platform==="darwin",oc=Mi.platform==="linux",GI=oc&&!!Mi.env.SNAP&&!!Mi.env.SNAP_REVISION,JI=ky,xy=!!Mi.env.CI||!!Mi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Fu=Ss,Ou=Ss;const e=Mi.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Fu=t.userLocale,Sy=t.osLocale,Ou=t.resolvedLanguage||Ss,ZI=t.languagePack?.translationsConfigFile}catch{}yy=!0}else typeof navigator=="object"&&!QI?(Br=navigator.userAgent,sc=Br.indexOf("Windows")>=0,nc=Br.indexOf("Macintosh")>=0,dg=(Br.indexOf("Macintosh")>=0||Br.indexOf("iPad")>=0||Br.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,oc=Br.indexOf("Linux")>=0,Ey=Br?.indexOf("Mobi")>=0,hg=!0,Ou=wy()||Ss,Fu=navigator.language.toLowerCase(),Sy=Fu):console.error("Unable to resolve platform.");var $y;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})($y||($y={}));function YI(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var fg=0;nc?fg=1:sc?fg=3:oc&&(fg=2);var ri=sc,Fi=nc,Wr=oc,Cy=yy,Eo=hg,XI=hg&&typeof jr.importScripts=="function",KI=XI?jr.origin:void 0,e3=dg,t3=Ey,ln=xy,br=Br,ks=Ou,Iy;(function(e){function t(){return ks}e.value=t;function i(){return ks.length===2?ks==="en":ks.length>=3?ks[0]==="e"&&ks[1]==="n"&&ks[2]==="-":!1}e.isDefaultVariant=i;function r(){return ks==="en"}e.isDefault=r})(Iy||(Iy={}));var i3=typeof jr.postMessage=="function"&&!jr.importScripts,Dy=(()=>{if(i3){const e=[];jr.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(r,1),n.callback();return}}});let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),jr.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),Py;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(Py||(Py={}));var ac=nc||dg?2:sc?1:3,Ay=!0,Ty=!1;function Ry(){if(!Ty){Ty=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Ay=new Uint16Array(e.buffer)[0]===513}return Ay}var pg=!!(br&&br.indexOf("Chrome")>=0),r3=!!(br&&br.indexOf("Firefox")>=0),s3=!!(!pg&&br&&br.indexOf("Safari")>=0),Ly=!!(br&&br.indexOf("Edg/")>=0),zH=!!(br&&br.indexOf("Android")>=0),un,gg=globalThis.vscode;if(typeof gg<"u"&&typeof gg.process<"u"){const e=gg.process;un={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?un={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:un={get platform(){return ri?"win32":Fi?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var So=un.cwd,ko=un.env,n3=un.platform,_H=un.arch,o3=65,a3=97,c3=90,l3=122,hn=46,Gt=47,Ei=92,zr=58,u3=63,Ny=class extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${r} of type ${t}`;n+=`. Received type ${typeof i}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function h3(e,t){if(e===null||typeof e!="object")throw new Ny(t,"Object",e)}function Et(e,t){if(typeof e!="string")throw new Ny(t,"string",e)}var Si=n3==="win32";function Pe(e){return e===Gt||e===Ei}function mg(e){return e===Gt}function _r(e){return e>=o3&&e<=c3||e>=a3&&e<=l3}function Uu(e,t,i,r){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(r(c))break;c=Gt}if(r(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==hn||s.charCodeAt(s.length-2)!==hn){if(s.length>2){const u=s.lastIndexOf(i);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(i)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${i}..`:"..",n=2)}else s.length>0?s+=`${i}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===hn&&a!==-1?++a:a=-1}return s}function d3(e){return e?`${e[0]==="."?"":"."}${e}`:""}function My(e,t){h3(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${d3(t.ext)}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}var St={resolve(...e){let t="",i="",r=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Et(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=So():(n=ko[`=${t}`]||So(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Ei)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Pe(u)&&(a=1,l=!0);else if(Pe(u))if(l=!0,Pe(n.charCodeAt(1))){let d=2,f=d;for(;d<o&&!Pe(n.charCodeAt(d));)d++;if(d<o&&d!==f){const p=n.slice(f,d);for(f=d;d<o&&Pe(n.charCodeAt(d));)d++;if(d<o&&d!==f){for(f=d;d<o&&!Pe(n.charCodeAt(d));)d++;(d===o||d!==f)&&(c=`\\\\${p}\\${n.slice(f,d)}`,a=d)}}}else a=1;else _r(u)&&n.charCodeAt(1)===zr&&(c=n.slice(0,2),a=2,o>2&&Pe(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(i=`${n.slice(a)}\\${i}`,r=l,l&&t.length>0)break}return i=Uu(i,!r,"\\",Pe),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){Et(e,"path");const t=e.length;if(t===0)return".";let i=0,r,s=!1;const n=e.charCodeAt(0);if(t===1)return mg(n)?"\\":e;if(Pe(n))if(s=!0,Pe(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Pe(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Pe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Pe(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(r=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else _r(n)&&e.charCodeAt(1)===zr&&(r=e.slice(0,2),i=2,t>2&&Pe(e.charCodeAt(2))&&(s=!0,i=3));let o=i<t?Uu(e.slice(i),!s,"\\",Pe):"";if(o.length===0&&!s&&(o="."),o.length>0&&Pe(e.charCodeAt(t-1))&&(o+="\\"),!s&&r===void 0&&e.includes(":")){if(o.length>=2&&_r(o.charCodeAt(0))&&o.charCodeAt(1)===zr)return`.\\${o}`;let a=e.indexOf(":");do if(a===t-1||Pe(e.charCodeAt(a+1)))return`.\\${o}`;while((a=e.indexOf(":",a+1))!==-1)}return r===void 0?s?`\\${o}`:o:s?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){Et(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Pe(i)||t>2&&_r(i)&&e.charCodeAt(1)===zr&&Pe(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let n=0;n<e.length;++n){const o=e[n];Et(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let r=!0,s=0;if(typeof i=="string"&&Pe(i.charCodeAt(0))){++s;const n=i.length;n>1&&Pe(i.charCodeAt(1))&&(++s,n>2&&(Pe(i.charCodeAt(2))?++s:r=!1))}if(r){for(;s<t.length&&Pe(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return St.normalize(t)},relative(e,t){if(Et(e,"from"),Et(t,"to"),e===t)return"";const i=St.resolve(e),r=St.resolve(t);if(i===r||(e=i.toLowerCase(),t=r.toLowerCase(),e===t))return"";if(i.length!==e.length||r.length!==t.length){const m=i.split("\\"),w=r.split("\\");m[m.length-1]===""&&m.pop(),w[w.length-1]===""&&w.pop();const x=m.length,k=w.length,$=x<k?x:k;let A;for(A=0;A<$&&m[A].toLowerCase()===w[A].toLowerCase();A++);return A===0?r:A===$?k>$?w.slice(A).join("\\"):x>$?"..\\".repeat(x-1-A)+"..":"":"..\\".repeat(x-A)+w.slice(A).join("\\")}let s=0;for(;s<e.length&&e.charCodeAt(s)===Ei;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===Ei;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Ei;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Ei;)c--;const l=c-a,u=o<l?o:l;let d=-1,f=0;for(;f<u;f++){const m=e.charCodeAt(s+f);if(m!==t.charCodeAt(a+f))break;m===Ei&&(d=f)}if(f!==u){if(d===-1)return r}else{if(l>u){if(t.charCodeAt(a+f)===Ei)return r.slice(a+f+1);if(f===2)return r.slice(a+f)}o>u&&(e.charCodeAt(s+f)===Ei?d=f:f===2&&(d=3)),d===-1&&(d=0)}let p="";for(f=s+d+1;f<=n;++f)(f===n||e.charCodeAt(f)===Ei)&&(p+=p.length===0?"..":"\\..");return a+=d,p.length>0?`${p}${r.slice(a,c)}`:(r.charCodeAt(a)===Ei&&++a,r.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=St.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Ei){if(t.charCodeAt(1)===Ei){const i=t.charCodeAt(2);if(i!==u3&&i!==hn)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(_r(t.charCodeAt(0))&&t.charCodeAt(1)===zr&&t.charCodeAt(2)===Ei)return`\\\\?\\${t}`;return t},dirname(e){Et(e,"path");const t=e.length;if(t===0)return".";let i=-1,r=0;const s=e.charCodeAt(0);if(t===1)return Pe(s)?e:".";if(Pe(s)){if(i=r=1,Pe(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Pe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Pe(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Pe(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=r=a+1)}}}}else _r(s)&&e.charCodeAt(1)===zr&&(i=t>2&&Pe(e.charCodeAt(2))?3:2,r=i);let n=-1,o=!0;for(let a=t-1;a>=r;--a)if(Pe(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(i===-1)return".";n=i}return e.slice(0,n)},basename(e,t){t!==void 0&&Et(t,"suffix"),Et(e,"path");let i=0,r=-1,s=!0,n;if(e.length>=2&&_r(e.charCodeAt(0))&&e.charCodeAt(1)===zr&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(Pe(c)){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(Pe(e.charCodeAt(n))){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Et(e,"path");let t=0,i=-1,r=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===zr&&_r(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Pe(c)){if(!n){r=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===hn?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||s===-1||o===0||o===1&&i===s-1&&i===r+1?"":e.slice(i,s)},format:My.bind(null,"\\"),parse(e){Et(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let r=0,s=e.charCodeAt(0);if(i===1)return Pe(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Pe(s)){if(r=1,Pe(e.charCodeAt(1))){let d=2,f=d;for(;d<i&&!Pe(e.charCodeAt(d));)d++;if(d<i&&d!==f){for(f=d;d<i&&Pe(e.charCodeAt(d));)d++;if(d<i&&d!==f){for(f=d;d<i&&!Pe(e.charCodeAt(d));)d++;d===i?r=d:d!==f&&(r=d+1)}}}}else if(_r(s)&&e.charCodeAt(1)===zr){if(i<=2)return t.root=t.dir=e,t;if(r=2,Pe(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let n=-1,o=r,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(s=e.charCodeAt(l),Pe(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===hn?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},f3=(()=>{if(Si){const e=/\\/g;return()=>{const t=So().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>So()})(),Ne={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=0&&!i;r--){const s=e[r];Et(s,`paths[${r}]`),s.length!==0&&(t=`${s}/${t}`,i=s.charCodeAt(0)===Gt)}if(!i){const r=f3();t=`${r}/${t}`,i=r.charCodeAt(0)===Gt}return t=Uu(t,!i,"/",mg),i?`/${t}`:t.length>0?t:"."},normalize(e){if(Et(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Gt,i=e.charCodeAt(e.length-1)===Gt;return e=Uu(e,!t,"/",mg),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Et(e,"path"),e.length>0&&e.charCodeAt(0)===Gt},join(...e){if(e.length===0)return".";const t=[];for(let i=0;i<e.length;++i){const r=e[i];Et(r,"path"),r.length>0&&t.push(r)}return t.length===0?".":Ne.normalize(t.join("/"))},relative(e,t){if(Et(e,"from"),Et(t,"to"),e===t||(e=Ne.resolve(e),t=Ne.resolve(t),e===t))return"";const i=1,r=e.length,s=r-i,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const d=e.charCodeAt(i+l);if(d!==t.charCodeAt(n+l))break;d===Gt&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Gt)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(i+l)===Gt?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=r;++l)(l===r||e.charCodeAt(l)===Gt)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Et(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Gt;let i=-1,r=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Gt){if(!r){i=s;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&Et(t,"suffix"),Et(e,"path");let i=0,r=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Gt){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Gt){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Et(e,"path");let t=-1,i=0,r=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e[o];if(a==="/"){if(!s){i=o+1;break}continue}r===-1&&(s=!1,r=o+1),a==="."?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||r===-1||n===0||n===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:My.bind(null,"/"),parse(e){Et(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===Gt;let r;i?(t.root="/",r=1):r=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=r;--c){const u=e.charCodeAt(c);if(u===Gt){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===hn?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&i?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ne.win32=St.win32=St,Ne.posix=St.posix=Ne;var $o=Si?St.normalize:Ne.normalize,Hu=Si?St.isAbsolute:Ne.isAbsolute,vg=Si?St.join:Ne.join,p3=Si?St.resolve:Ne.resolve,cc=Si?St.relative:Ne.relative,Co=Si?St.dirname:Ne.dirname,ki=Si?St.basename:Ne.basename,wg=Si?St.extname:Ne.extname,VH=Si?St.format:Ne.format,qH=Si?St.parse:Ne.parse,GH=Si?St.toNamespacedPath:Ne.toNamespacedPath,Yi=Si?St.sep:Ne.sep,JH=Si?St.delimiter:Ne.delimiter,g3=/^\w[\w\d+.-]*$/,m3=/^\//,v3=/^\/\//;function w3(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!g3.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!m3.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(v3.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function b3(e,t){return!e&&!t?"file":e}function y3(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==Xi&&(t=Xi+t):t=Xi;break}return t}var ot="",Xi="/",x3=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=class Tp{static isUri(t){return t instanceof Tp?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,i,r,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ot,this.authority=t.authority||ot,this.path=t.path||ot,this.query=t.query||ot,this.fragment=t.fragment||ot):(this.scheme=b3(t,o),this.authority=i||ot,this.path=y3(this.scheme,r||ot),this.query=s||ot,this.fragment=n||ot,w3(this,o))}get fsPath(){return ju(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:r,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=ot),r===void 0?r=this.authority:r===null&&(r=ot),s===void 0?s=this.path:s===null&&(s=ot),n===void 0?n=this.query:n===null&&(n=ot),o===void 0?o=this.fragment:o===null&&(o=ot),i===this.scheme&&r===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new Io(i,r,s,n,o)}static parse(t,i=!1){const r=x3.exec(t);return r?new Io(r[2]||ot,Wu(r[4]||ot),Wu(r[5]||ot),Wu(r[7]||ot),Wu(r[9]||ot),i):new Io(ot,ot,ot,ot,ot)}static file(t){let i=ot;if(ri&&(t=t.replace(/\\/g,Xi)),t[0]===Xi&&t[1]===Xi){const r=t.indexOf(Xi,2);r===-1?(i=t.substring(2),t=Xi):(i=t.substring(2,r),t=t.substring(r)||Xi)}return new Io("file",i,t,ot,ot)}static from(t,i){return new Io(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return ri&&t.scheme==="file"?r=Tp.file(St.join(ju(t,!0),...i)).path:r=Ne.join(t.path,...i),t.with({path:r})}toString(t=!1){return bg(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Tp)return t;{const i=new Io(t);return i._formatted=t.external??null,i._fsPath=t._sep===Fy?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function Bu(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var Fy=ri?1:void 0,Io=class extends y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=ju(this,!1)),this._fsPath}toString(e=!1){return e?bg(this,!0):(this._formatted||(this._formatted=bg(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Fy),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Oy={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Uy(e,t,i){let r,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||i&&o===91||i&&o===93||i&&o===58)s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r!==void 0&&(r+=e.charAt(n));else{r===void 0&&(r=e.substr(0,n));const a=Oy[o];a!==void 0?(s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r+=a):s===-1&&(s=n)}}return s!==-1&&(r+=encodeURIComponent(e.substring(s))),r!==void 0?r:e}function E3(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===35||r===63?(t===void 0&&(t=e.substr(0,i)),t+=Oy[r]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function ju(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,ri&&(i=i.replace(/\//g,"\\")),i}function bg(e,t){const i=t?E3:Uy;let r="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(r+=s,r+=":"),(n||s==="file")&&(r+=Xi,r+=Xi),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?r+=i(u,!1,!1):(r+=i(u.substr(0,l),!1,!1),r+=":",r+=i(u.substr(l+1),!1,!0)),r+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?r+=i(n,!1,!0):(r+=i(n.substr(0,l),!1,!0),r+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),c&&(r+="#",r+=t?c:Uy(c,!1,!1)),r}function Hy(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+Hy(e.substr(3)):e}}var By=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Wu(e){return e.match(By)?e.replace(By,t=>Hy(t)):e}var jy=class p${static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++p$.count}},Wy=[];function M(e){const t=new jy(e);return Wy[t.nid]=t,t}function zu(e){return Wy[e].sid}var si=class{constructor(e){this.value=e}},zy;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(zy||(zy={}));var _y;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(_y||(_y={}));var Vy;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(Vy||(Vy={}));var qy;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(qy||(qy={}));var Gy;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(Gy||(Gy={}));var Jy;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(Jy||(Jy={}));var Zy;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Zy||(Zy={}));var yg;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(yg||(yg={}));var ZH=class g${static{this.a=0}static mixin(t){return t._id=g$.a++,t}},Qy;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(Qy||(Qy={}));var Yy;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(Yy||(Yy={}));var Xy;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(Xy||(Xy={}));var V={MainThreadAuthentication:M("MainThreadAuthentication"),MainThreadBulkEdits:M("MainThreadBulkEdits"),MainThreadLanguageModels:M("MainThreadLanguageModels"),MainThreadEmbeddings:M("MainThreadEmbeddings"),MainThreadChatAgents2:M("MainThreadChatAgents2"),MainThreadCodeMapper:M("MainThreadCodeMapper"),MainThreadLanguageModelTools:M("MainThreadChatSkills"),MainThreadClipboard:M("MainThreadClipboard"),MainThreadCommands:M("MainThreadCommands"),MainThreadComments:M("MainThreadComments"),MainThreadConfiguration:M("MainThreadConfiguration"),MainThreadConsole:M("MainThreadConsole"),MainThreadDebugService:M("MainThreadDebugService"),MainThreadDecorations:M("MainThreadDecorations"),MainThreadDiagnostics:M("MainThreadDiagnostics"),MainThreadDialogs:M("MainThreadDiaglogs"),MainThreadDocuments:M("MainThreadDocuments"),MainThreadDocumentContentProviders:M("MainThreadDocumentContentProviders"),MainThreadTextEditors:M("MainThreadTextEditors"),MainThreadEditorInsets:M("MainThreadEditorInsets"),MainThreadEditorTabs:M("MainThreadEditorTabs"),MainThreadErrors:M("MainThreadErrors"),MainThreadTreeViews:M("MainThreadTreeViews"),MainThreadDownloadService:M("MainThreadDownloadService"),MainThreadLanguageFeatures:M("MainThreadLanguageFeatures"),MainThreadLanguages:M("MainThreadLanguages"),MainThreadLogger:M("MainThreadLogger"),MainThreadMessageService:M("MainThreadMessageService"),MainThreadOutputService:M("MainThreadOutputService"),MainThreadProgress:M("MainThreadProgress"),MainThreadQuickDiff:M("MainThreadQuickDiff"),MainThreadQuickOpen:M("MainThreadQuickOpen"),MainThreadStatusBar:M("MainThreadStatusBar"),MainThreadSecretState:M("MainThreadSecretState"),MainThreadStorage:M("MainThreadStorage"),MainThreadSpeech:M("MainThreadSpeechProvider"),MainThreadTelemetry:M("MainThreadTelemetry"),MainThreadTerminalService:M("MainThreadTerminalService"),MainThreadTerminalShellIntegration:M("MainThreadTerminalShellIntegration"),MainThreadWebviews:M("MainThreadWebviews"),MainThreadWebviewPanels:M("MainThreadWebviewPanels"),MainThreadWebviewViews:M("MainThreadWebviewViews"),MainThreadCustomEditors:M("MainThreadCustomEditors"),MainThreadUrls:M("MainThreadUrls"),MainThreadUriOpeners:M("MainThreadUriOpeners"),MainThreadProfileContentHandlers:M("MainThreadProfileContentHandlers"),MainThreadWorkspace:M("MainThreadWorkspace"),MainThreadFileSystem:M("MainThreadFileSystem"),MainThreadFileSystemEventService:M("MainThreadFileSystemEventService"),MainThreadExtensionService:M("MainThreadExtensionService"),MainThreadSCM:M("MainThreadSCM"),MainThreadSearch:M("MainThreadSearch"),MainThreadShare:M("MainThreadShare"),MainThreadTask:M("MainThreadTask"),MainThreadWindow:M("MainThreadWindow"),MainThreadLabelService:M("MainThreadLabelService"),MainThreadNotebook:M("MainThreadNotebook"),MainThreadNotebookDocuments:M("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:M("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:M("MainThreadNotebookKernels"),MainThreadNotebookRenderers:M("MainThreadNotebookRenderers"),MainThreadInteractive:M("MainThreadInteractive"),MainThreadTheming:M("MainThreadTheming"),MainThreadTunnelService:M("MainThreadTunnelService"),MainThreadManagedSockets:M("MainThreadManagedSockets"),MainThreadTimeline:M("MainThreadTimeline"),MainThreadTesting:M("MainThreadTesting"),MainThreadLocalization:M("MainThreadLocalizationShape"),MainThreadMcp:M("MainThreadMcpShape"),MainThreadAiRelatedInformation:M("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:M("MainThreadAiEmbeddingVector"),MainThreadChatStatus:M("MainThreadChatStatus"),MainThreadAiSettingsSearch:M("MainThreadAiSettingsSearch")},ee={ExtHostCodeMapper:M("ExtHostCodeMapper"),ExtHostCommands:M("ExtHostCommands"),ExtHostConfiguration:M("ExtHostConfiguration"),ExtHostDiagnostics:M("ExtHostDiagnostics"),ExtHostDebugService:M("ExtHostDebugService"),ExtHostDecorations:M("ExtHostDecorations"),ExtHostDocumentsAndEditors:M("ExtHostDocumentsAndEditors"),ExtHostDocuments:M("ExtHostDocuments"),ExtHostDocumentContentProviders:M("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:M("ExtHostDocumentSaveParticipant"),ExtHostEditors:M("ExtHostEditors"),ExtHostTreeViews:M("ExtHostTreeViews"),ExtHostFileSystem:M("ExtHostFileSystem"),ExtHostFileSystemInfo:M("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:M("ExtHostFileSystemEventService"),ExtHostLanguages:M("ExtHostLanguages"),ExtHostLanguageFeatures:M("ExtHostLanguageFeatures"),ExtHostQuickOpen:M("ExtHostQuickOpen"),ExtHostQuickDiff:M("ExtHostQuickDiff"),ExtHostStatusBar:M("ExtHostStatusBar"),ExtHostShare:M("ExtHostShare"),ExtHostExtensionService:M("ExtHostExtensionService"),ExtHostLogLevelServiceShape:M("ExtHostLogLevelServiceShape"),ExtHostTerminalService:M("ExtHostTerminalService"),ExtHostTerminalShellIntegration:M("ExtHostTerminalShellIntegration"),ExtHostSCM:M("ExtHostSCM"),ExtHostSearch:M("ExtHostSearch"),ExtHostTask:M("ExtHostTask"),ExtHostWorkspace:M("ExtHostWorkspace"),ExtHostWindow:M("ExtHostWindow"),ExtHostWebviews:M("ExtHostWebviews"),ExtHostWebviewPanels:M("ExtHostWebviewPanels"),ExtHostCustomEditors:M("ExtHostCustomEditors"),ExtHostWebviewViews:M("ExtHostWebviewViews"),ExtHostEditorInsets:M("ExtHostEditorInsets"),ExtHostEditorTabs:M("ExtHostEditorTabs"),ExtHostProgress:M("ExtHostProgress"),ExtHostComments:M("ExtHostComments"),ExtHostSecretState:M("ExtHostSecretState"),ExtHostStorage:M("ExtHostStorage"),ExtHostUrls:M("ExtHostUrls"),ExtHostUriOpeners:M("ExtHostUriOpeners"),ExtHostProfileContentHandlers:M("ExtHostProfileContentHandlers"),ExtHostOutputService:M("ExtHostOutputService"),ExtHostLabelService:M("ExtHostLabelService"),ExtHostNotebook:M("ExtHostNotebook"),ExtHostNotebookDocuments:M("ExtHostNotebookDocuments"),ExtHostNotebookEditors:M("ExtHostNotebookEditors"),ExtHostNotebookKernels:M("ExtHostNotebookKernels"),ExtHostNotebookRenderers:M("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:M("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:M("ExtHostInteractive"),ExtHostChatAgents2:M("ExtHostChatAgents"),ExtHostLanguageModelTools:M("ExtHostChatSkills"),ExtHostChatProvider:M("ExtHostChatProvider"),ExtHostSpeech:M("ExtHostSpeech"),ExtHostEmbeddings:M("ExtHostEmbeddings"),ExtHostAiRelatedInformation:M("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:M("ExtHostAiEmbeddingVector"),ExtHostAiSettingsSearch:M("ExtHostAiSettingsSearch"),ExtHostTheming:M("ExtHostTheming"),ExtHostTunnelService:M("ExtHostTunnelService"),ExtHostManagedSockets:M("ExtHostManagedSockets"),ExtHostAuthentication:M("ExtHostAuthentication"),ExtHostTimeline:M("ExtHostTimeline"),ExtHostTesting:M("ExtHostTesting"),ExtHostTelemetry:M("ExtHostTelemetry"),ExtHostLocalization:M("ExtHostLocalization"),ExtHostMcp:M("ExtHostMcp")},Ky=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),tt;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof _u?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ft.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ky})})(tt||(tt={}));var _u=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?Ky:(this.b||(this.b=new P),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},lt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new _u),this.f}cancel(){this.f?this.f instanceof _u&&this.f.cancel():this.f=tt.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof _u&&this.f.dispose():this.f=tt.None}};function S3(e){return e}var k3=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=S3):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}};function Vu(e){return!e||typeof e!="string"?!0:e.trim().length===0}var $3=/{([^}]+)}/g;function e4(e,t){return Object.keys(t).length===0?e:e.replace($3,(i,r)=>t[r]??i)}function dn(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function C3(e,t){let i=0,r=e.indexOf(t);for(;r!==-1;)i++,r=e.indexOf(t,r+t.length);return i}function I3(e,t){if(!e||!t)return e;const i=t.length;if(i===0||e.length===0)return e;let r=0;for(;e.indexOf(t,r)===r;)r=r+i;return e.substring(r)}function xg(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(i===0||r===0)return e;let s=r,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+i!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function D3(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=dn(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)}function t4(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function i4(e){return e.split(/\r\n|\r|\n/)}function Eg(e){for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function P3(e,t=e.length-1){for(let i=t;i>=0;i--){const r=e.charCodeAt(i);if(r!==32&&r!==9)return i}return-1}function fn(e,t){return e<t?-1:e>t?1:0}function Sg(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){const c=e.charCodeAt(i),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function kg(e,t){return lc(e,t,0,e.length,0,t.length)}function lc(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){let c=e.charCodeAt(i),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Sg(e.toLowerCase(),t.toLowerCase(),i,r,s,n);r4(c)&&(c-=32),r4(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function r4(e){return e>=97&&e<=122}function $s(e,t){return e.length===t.length&&lc(e,t)===0}function $g(e,t){const i=t.length;return t.length>e.length?!1:lc(e,t,0,i)===0}function A3(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function qu(e){return 55296<=e&&e<=56319}function Gu(e){return 56320<=e&&e<=57343}function Cg(e,t){return(e-55296<<10)+(t-56320)+65536}function s4(e,t,i){const r=e.charCodeAt(i);if(qu(r)&&i+1<t){const s=e.charCodeAt(i+1);if(Gu(s))return Cg(r,s)}return r}function T3(e,t){const i=e.charCodeAt(t-1);if(Gu(i)&&t>1){const r=e.charCodeAt(t-2);if(qu(r))return Cg(r,i)}return i}var R3=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=T3(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=s4(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},L3=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new R3(e,t)}nextGraphemeLength(){const e=h4.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(l4(r,n)){t.setOffset(s);break}r=n}return t.offset-i}prevGraphemeLength(){const e=h4.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(l4(n,r)){t.setOffset(s);break}r=n}return i-t.offset}eol(){return this.c.eol()}};function n4(e,t){return new L3(e,t).nextGraphemeLength()}var Ig=void 0;function N3(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function o4(e){return Ig||(Ig=N3()),Ig.test(e)}var M3=/^[\t\n\r\x20-\x7E]*$/;function F3(e){return M3.test(e)}var O3=/[\u2028\u2029]/;function a4(e){return O3.test(e)}var U3=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,H3=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,B3=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,QH=new RegExp("(?:"+[U3.source,H3.source,B3.source].join("|")+")","g"),j3="\uFEFF";function W3(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function c4(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function z3(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function l4(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var u4;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(u4||(u4={}));var h4=class du{static{this.c=null}static getInstance(){return du.c||(du.c=new du),du.c}constructor(){this.d=_3()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this.d,r=i.length/3;let s=1;for(;s<=r;)if(t<i[3*s])s=2*s;else if(t>i[3*s+1])s=2*s+1;else return i[3*s+2];return 0}};function _3(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var d4;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(d4||(d4={}));var YH=class fu{static{this.c=new yi(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.d=new k3({getCacheKey:JSON.stringify},t=>{function i(u){const d=new Map;for(let f=0;f<u.length;f+=2)d.set(u[f],u[f+1]);return d}function r(u,d){const f=new Map(u);for(const[p,m]of d)f.set(p,m);return f}function s(u,d){if(!u)return d;const f=new Map;for(const[p,m]of u)d.has(p)&&f.set(p,m);return f}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const d=i(n[u]);a=s(a,d)}const c=i(n._common),l=r(c,a);return new fu(l)})}static getInstance(t){return fu.d.get(Array.from(t))}static{this.e=new yi(()=>Object.keys(fu.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return fu.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},XH=class pu{static c(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this.d=void 0}static e(){return this.d||(this.d=new Set([...Object.values(pu.c())].flat())),this.d}static isInvisibleCharacter(t){return pu.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&(pu.isInvisibleCharacter(r)||r===32))return!0}return!1}static get codePoints(){return pu.e()}};function Cs(e){return e===47||e===92}function f4(e){return e.replace(/[\\/]/g,Ne.sep)}function V3(e){return e.indexOf("/")===-1&&(e=f4(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function p4(e,t=Ne.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if(Cs(r)){if(Cs(e.charCodeAt(1))&&!Cs(e.charCodeAt(2))){let n=3;const o=n;for(;n<i&&!Cs(e.charCodeAt(n));n++);if(o!==n&&!Cs(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if(Cs(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(g4(r)&&e.charCodeAt(1)===58)return Cs(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<i;s++)if(Cs(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var q3=/[\\/:\*\?"<>\|]/g,G3=/[/]/g,J3=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function Z3(e,t=ri){const i=t?q3:G3;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&J3.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Ju(e,t,i,r=Yi){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!$g(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function g4(e){return e>=65&&e<=90||e>=97&&e<=122}function Q3(e,t=ri){return t?g4(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}var z;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(z||(z={}));function Dg(e,t){return y.isUri(e)?$s(e.scheme,t):$g(e,t+":")}function Y3(e,...t){return t.some(i=>Dg(e,i))}var X3="tkn",K3=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=Ne.join(t??"/",tD(e))}getServerRootPath(){return this.f}get g(){return Ne.join(this.f,z.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return Vt(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${X3}=${encodeURIComponent(s)}`),y.from({scheme:Eo?this.d:z.vscodeRemoteResource,authority:`${i}:${r}`,path:this.g,query:n})}},eD=new K3;function tD(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var iD="vs/../../node_modules",rD="vs/../../node_modules.asar",m4="vscode-app",sD=class Rp{static{this.a=m4}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===z.vscodeRemote?eD.rewrite(t):t.scheme===z.file&&(Cy||KI===`${z.vscodeFileResource}://${Rp.a}`)?t.with({scheme:z.vscodeFileResource,authority:t.authority||Rp.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===z.vscodeFileResource?t.with({scheme:z.file,authority:t.authority!==Rp.a?t.authority:null,query:null,fragment:null}):t}b(t){if(y.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return y.joinPath(y.parse(i,!0),t);const r=vg(i,t);return y.file(r)}throw new Error("Cannot determine URI for module id!")}},v4=new sD,KH=Object.freeze({"Cache-Control":"no-cache, no-store"}),eB=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"}),w4;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function r(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:y.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=r;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(i,c):n[i]=c}e.addSearchParam=s})(w4||(w4={}));function Ki(e){return ju(e,!0)}var uc=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:fn(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===z.file)return Ju(Ki(e),Ki(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(y4(e.authority,t.authority))return Ju(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return y.joinPath(e,...t)}basenameOrAuthority(e){return er(e)||e.authority}basename(e){return Ne.basename(e.path)}extname(e){return Ne.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===z.file?t=y.file(Co(Ki(e))).path:(t=Ne.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===z.file?t=y.file($o(Ki(e))).path:t=Ne.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!y4(e.authority,t.authority))return;if(e.scheme===z.file){const s=cc(Ki(e),Ki(t));return ri?f4(s):s}let i=e.path||"/";const r=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(i.length,r.length);s<n&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return Ne.relative(i,r)}resolvePath(e,t){if(e.scheme===z.file){const i=y.file(p3(Ki(e),t));return e.with({authority:i.authority,path:i.path})}return t=V3(t),e.with({path:Ne.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&$s(e,t)}hasTrailingPathSeparator(e,t=Yi){if(e.scheme===z.file){const i=Ki(e);return i.length>p4(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Yi){return x4(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Yi){let i=!1;if(e.scheme===z.file){const r=Ki(e);i=r!==void 0&&r.length===p4(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!x4(e,t)?e.with({path:e.path+"/"}):e}},He=new uc(()=>!1),nD=new uc(e=>e.scheme===z.file?!Wr:!0),oD=new uc(e=>!0),Do=He.isEqual.bind(He),tB=He.isEqualOrParent.bind(He),iB=He.getComparisonKey.bind(He),Pg=He.basenameOrAuthority.bind(He),er=He.basename.bind(He),aD=He.extname.bind(He),Zu=He.dirname.bind(He),Jt=He.joinPath.bind(He),rB=He.normalizePath.bind(He),b4=He.relativePath.bind(He),sB=He.resolvePath.bind(He),cD=He.isAbsolutePath.bind(He),y4=He.isEqualAuthority.bind(He),x4=He.hasTrailingPathSeparator.bind(He),nB=He.removeTrailingPathSeparator.bind(He),oB=He.addTrailingPathSeparator.bind(He),E4;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const r=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&r.set(a,c)});const n=i.path.substring(0,i.path.indexOf(";"));return n&&r.set(e.META_DATA_MIME,n),r}e.parseMetaData=t})(E4||(E4={}));var lD=Symbol("MicrotaskDelay");function Is(e){return!!e&&typeof e.then=="function"}function uD(e){const t=new lt,i=e(t.token);let r=!1;const s=new Promise((n,o)=>{const a=t.token.onCancellationRequested(()=>{r=!0,a.dispose(),o(new vr)});Promise.resolve(i).then(c=>{a.dispose(),t.dispose(),r?oy(c)&&c.dispose():n(c)},c=>{a.dispose(),t.dispose(),o(c)})});return new class{cancel(){t.cancel(),t.dispose()}then(n,o){return s.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return s.finally(n)}}}function S4(e,t,i){return new Promise((r,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),r(i)});e.then(r,s).finally(()=>n.dispose())})}function k4(e,t){return new Promise((i,r)=>{const s=t.onCancellationRequested(()=>{s.dispose(),r(new vr)});e.then(i,r).finally(()=>s.dispose())})}function Zt(e){return new Promise((t,i)=>{const r=e();Is(r)?r.then(t,i):t(r)})}function hD(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}var dD=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(),new Promise((t,i)=>{this.a.then(r=>{this.a=null,t(r)},r=>{this.a=null,i(r)})})}dispose(){this.f=!0}},fD=class{constructor(){this.d=Promise.resolve(null)}queue(e){return this.d=this.d.then(()=>e(),()=>e())}},pD=(e,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},gD=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},mD=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((r,s)=>{this.d=r,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const r=this.g;return this.g=null,r()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===lD?gD(i):pD(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new vr),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},vD=class{constructor(e){this.a=new mD(e),this.b=new dD}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},yr=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function tr(e,t){return t?new Promise((i,r)=>{const s=setTimeout(()=>{n.dispose(),i()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),r(new vr)})}):uD(i=>tr(e,i))}function wD(e,t=0,i){const r=setTimeout(()=>{e(),i&&s.dispose()},t),s=se(()=>{clearTimeout(r),i?.delete(s)});return i?.add(s),s}var bD=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new P}whenIdle(){return this.size>0?ft.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},yD=class extends bD{constructor(){super(1)}},xD=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new xr;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=He){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=He){const r=i.getComparisonKey(e);let s=this.a.get(r);if(!s){s=new yD;const n=this.f++,o=ft.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Iu),this.d.set(n,o),this.a.set(r,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},ED=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,i=globalThis){if(this.f)throw new Li("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.d=se(()=>{i.clearInterval(r),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},Po=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},$4,Qu;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Qu=(e,t,i)=>{Dy(()=>{if(r)return;const s=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:Qu=(e,t,i)=>{const r=e.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(r))}}},$4=(e,t)=>Qu(globalThis,e,t)})();var SD=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(i){this.l=i}finally{this.g=!0}},this.f=Qu(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},kD=class extends SD{constructor(e){super(globalThis,e)}},C4;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(C4||(C4={}));var xr=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new vr)}},Ao;(function(e){async function t(r){let s;const n=await Promise.all(r.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function i(r){return new Promise(async(s,n)=>{try{await r(s,n)}catch(o){n(o)}})}e.withAsyncBody=i})(Ao||(Ao={}));var I4;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(I4||(I4={}));var hc=class Bi{static fromArray(t){return new Bi(i=>{i.emitMany(t)})}static fromPromise(t){return new Bi(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new Bi(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new Bi(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=Bi.fromArray([])}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new P,queueMicrotask(async()=>{const r={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(r)),this.k()}catch(s){this.l(s)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await ft.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new Bi(async r=>{for await(const s of t)r.emitOne(i(s))})}map(t){return Bi.map(this,t)}static filter(t,i){return new Bi(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return Bi.filter(this,t)}static coalesce(t){return Bi.filter(t,i=>!!i)}coalesce(){return Bi.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return Bi.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},Ag=class{constructor(e){this.a=new xr,this.b=new hc(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=s=>r.reject(s),this.f=s=>r.emitOne(s),this.a.p},e);let t,i;this.f=r=>{i||(i=[]),i.push(r)},this.d=r=>{t||(t=r)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}},aB=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function D4(e,t,i,r){if(!e||r>200)return null;if(typeof e=="object"){if(e.$mid===1)return i?y.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof ae)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=D4(e[s],t,i,r+1);n!==null&&(e[s]=n)}}return null}function dc(e,t){const i=D4(e,t,!1,0);return i===null?e:i}var P4=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):Vt(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},$D=class extends P4{constructor(){super(),this.h=!0,this.i=new vr}},A4;function Tg(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Rg="$$ref$$",CD={[Rg]:-1};function T4(e,t=null,i=!1){const r=[];return{jsonString:(i?Tg:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return CD;if(typeof o=="object"){if(o instanceof ae){const a=r.push(o)-1;return{[Rg]:a}}if(t)return t(n,o)}return o}),referencedBuffers:r}}function R4(e,t,i){return JSON.parse(e,(r,s)=>{if(s){const n=s[Rg];if(typeof n=="number")return t[n];if(i&&s.$mid===1)return i.transformIncoming(s)}return s})}function L4(e,t){return JSON.stringify(e,t)}function ID(e){return e?(t,i)=>i&&i.$mid===1?e.transformOutgoing(i):i:null}var N4;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(N4||(N4={}));var M4;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(M4||(M4={}));var DD=()=>{},PD=Symbol.for("rpcProtocol"),AD=Symbol.for("rpcProxy"),TD=class mb extends ne{static{A4=PD}static{this.a=3*1e3}constructor(t,i=null,r=null){super(),this[A4]=!0,this.b=this.B(new P),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=r,this.h=ID(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=jy.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new Po(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const i=this.w[t];delete this.w[t],i.resolveErr(_b())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+mb.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+mb.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?dc(t,this.g):t}getProxy(t){const{nid:i,sid:r}=t;return this.s[i]||(this.s[i]=this.J(i,r)),this.s[i]}J(t,i){const r={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===AD?i:s[n])};return new Proxy(Object.create(null),r)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,r=t.length;i<r;i++){const s=t[i];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,r=vt.read(t,0),s=r.readUInt8(),n=r.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=zi.deserializeRequestJSONArgs(r);this.g&&(c=dc(c,this.g)),this.M(i,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=zi.deserializeRequestMixedArgs(r);this.g&&(c=dc(c,this.g)),this.M(i,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(i,n,0,"ack"),this.G(n);break}case 6:{this.N(i,n);break}case 7:{this.O(i,n,void 0);break}case 9:{let o=zi.deserializeReplyOKJSON(r);this.g&&(o=dc(o,this.g)),this.O(i,n,o);break}case 10:{const o=zi.deserializeReplyOKJSONWithBuffers(r,this.g);this.O(i,n,o);break}case 8:{const o=zi.deserializeReplyOKVSBuffer(r);this.O(i,n,o);break}case 11:{let o=zi.deserializeReplyErrError(r);this.g&&(o=dc(o,this.g)),this.P(i,n,o);break}case 12:{this.P(i,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,r,s,n,o){this.f?.logIncoming(t,i,1,`receiveRequest ${zu(r)}.${s}(`,n);const a=String(i);let c,l;if(o){const d=new lt;n.push(d.token),c=this.Q(r,s,n),l=()=>d.cancel()}else c=this.Q(r,s,n),l=DD;this.u[a]=l;const u=zi.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,1,"ack"),this.c.send(u),c.then(d=>{delete this.u[a];const f=zi.serializeReplyOK(i,d,this.h);this.f?.logOutgoing(f.byteLength,i,1,"reply:",d),this.c.send(f)},d=>{delete this.u[a];const f=zi.serializeReplyErr(i,d);this.f?.logOutgoing(f.byteLength,i,1,"replyErr:",d),this.c.send(f)})}N(t,i){this.f?.logIncoming(t,i,1,"receiveCancel");const r=String(i);this.u[r]?.()}O(t,i,r){this.f?.logIncoming(t,i,0,"receiveReply:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(r)}P(t,i,r){this.f?.logIncoming(t,i,0,"receiveReplyErr:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;r&&(r.$isError?(o=new Error,o.name=r.name,o.message=r.message,o.stack=r.stack):o=r),n.resolveErr(o)}Q(t,i,r){try{return Promise.resolve(this.S(t,i,r))}catch(s){return Promise.reject(s)}}S(t,i,r){const s=this.m[t];if(!s)throw new Error("Unknown actor "+zu(t));const n=s[i];if(typeof n!="function")throw new Error("Unknown method "+i+" on actor "+zu(t));return n.apply(s,r)}U(t,i,r){if(this.j)return new $D;let s=null;if(r.length>0&&tt.isCancellationToken(r[r.length-1])&&(s=r.pop()),s&&s.isCancellationRequested)return Promise.reject(_b());const n=zi.serializeRequestArguments(r,this.h),o=++this.t,a=String(o),c=new P4,l=new fe;s&&l.add(s.onCancellationRequested(()=>{const d=zi.serializeCancel(o);this.f?.logOutgoing(d.byteLength,o,0,"cancel"),this.c.send(d)})),this.w[a]=new RD(c,l),this.F(o);const u=zi.serializeRequest(o,t,i,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${zu(t)}.${i}(`,r),this.c.send(u),c}},RD=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},vt=class vb{static alloc(t,i,r){const s=new vb(ae.alloc(r+1+4),0);return s.writeUInt8(t),s.writeUInt32(i),s}static read(t,i){return new vb(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let r=0,s=t.length;r<s;r++){const n=t[r];switch(i+=1,n.type){case 1:i+=this.sizeLongString(n.value);break;case 2:i+=this.sizeVSBuffer(n.value);break;case 3:i+=this.sizeUInt32,i+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)i+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,r=t.length;i<r;i++){const s=t[i];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let r=0;r<t;r++)switch(this.readUInt8()){case 1:i[r]=this.readLongString();break;case 2:i[r]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());i[r]=new si(R4(o,a,null));break}case 4:i[r]=void 0;break}return i}},F4;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(F4||(F4={}));var zi=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof ae||e[t]instanceof si||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n instanceof ae)i[r]={type:2,value:n};else if(typeof n>"u")i[r]={type:4};else if(n instanceof si){const{jsonString:o,referencedBuffers:a}=T4(n.value,t);i[r]={type:3,value:ae.fromString(o),buffers:a}}else i[r]={type:1,value:ae.fromString(L4(n,t))}}return{type:1,args:i}}return{type:0,args:L4(e,t)}}static serializeRequest(e,t,i,r,s){switch(r.type){case 0:return this.b(e,t,i,r.args,s);case 1:return this.c(e,t,i,r.args,s)}}static b(e,t,i,r,s){const n=ae.fromString(i),o=ae.fromString(r);let a=0;a+=vt.sizeUInt8(),a+=vt.sizeShortString(n),a+=vt.sizeLongString(o);const c=vt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static c(e,t,i,r,s){const n=ae.fromString(i);let o=0;o+=vt.sizeUInt8(),o+=vt.sizeShortString(n),o+=vt.sizeMixedArray(r);const a=vt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),s=new Array(r.length);for(let n=0,o=r.length;n<o;n++){const a=r[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:i,args:s}}static serializeAcknowledged(e){return vt.alloc(5,e,0).buffer}static serializeCancel(e){return vt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof ae)return this.e(e,t);if(t instanceof si){const{jsonString:r,referencedBuffers:s}=T4(t.value,i,!0);return this.g(e,r,s)}else return this.f(e,Tg(t,i))}static d(e){return vt.alloc(7,e,0).buffer}static e(e,t){let i=0;i+=vt.sizeVSBuffer(t);const r=vt.alloc(8,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=ae.fromString(t);let r=0;r+=vt.sizeLongString(i);const s=vt.alloc(9,e,r);return s.writeLongString(i),s.buffer}static g(e,t,i){const r=ae.fromString(t);let s=0;s+=vt.sizeUInt32,s+=vt.sizeLongString(r);for(const o of i)s+=vt.sizeVSBuffer(o);const n=vt.alloc(10,e,s);n.writeUInt32(i.length),n.writeLongString(r);for(const o of i)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),s=[];for(let n=0;n<i;++n)s.push(e.readVSBuffer());return new si(R4(r,s,t))}static serializeReplyErr(e,t){const i=t?Tg(mo(t),null):void 0;if(typeof i!="string")return this.h(e);const r=ae.fromString(i);let s=0;s+=vt.sizeLongString(r);const n=vt.alloc(11,e,s);return n.writeLongString(r),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return vt.alloc(12,e,0).buffer}},O4;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(O4||(O4={}));var U4;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(U4||(U4={}));var ir;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(ir||(ir={}));var fc=j("instantiationService");function LD(e,t,i){t[ir.DI_TARGET]===t?t[ir.DI_DEPENDENCIES].push({id:e,index:i}):(t[ir.DI_DEPENDENCIES]=[{id:e,index:i}],t[ir.DI_TARGET]=t)}function j(e){if(ir.serviceIds.has(e))return ir.serviceIds.get(e);const t=function(i,r,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");LD(t,i,s)};return t.toString=()=>e,ir.serviceIds.set(e,t),t}function cB(e){return e}function Lg(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var H4=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],B4;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(B4||(B4={}));var j4;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(j4||(j4={}));var Fe=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,r=typeof t=="string"?t:t.value;return $s(i,r)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},pn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Fe.toKey(e))}delete(e){return this.c.delete(Fe.toKey(e))}has(e){return this.c.has(Fe.toKey(e))}},Vr=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Fe.toKey(e))}get(e){return this.c.get(Fe.toKey(e))}has(e){return this.c.has(Fe.toKey(e))}set(e,t){this.c.set(Fe.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},W4=class extends Error{constructor(e,t,i){super(`Error in extension ${Fe.toKey(e)}: ${i??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},lB=j("IBuiltinExtensionsScannerService");function Ng(e,t){return t&&(e.stack||e.stacktrace)?h(110,null,_4(e),z4(e.stack)||z4(e.stacktrace)):_4(e)}function z4(e){return Array.isArray(e)?e.join(`
`):e}function _4(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?h(111,null,e.message):e.message||h(112,null)}function To(e=null,t=!1){if(!e)return h(113,null);if(Array.isArray(e)){const i=bt(e),r=To(i[0],t);return i.length>1?h(114,null,r,i.length):r}if(Me(e))return e;if(e.detail){const i=e.detail;if(i.error)return Ng(i.error,t);if(i.exception)return Ng(i.exception,t)}return e.stack?Ng(e,t):e.message?e.message:h(115,null)}function pc(e){return Mg(e,0)}function Mg(e,t){switch(typeof e){case"object":return e===null?qr(349,t):Array.isArray(e)?MD(e,t):FD(e,t);case"string":return V4(e,t);case"boolean":return ND(e,t);case"number":return qr(e,t);case"undefined":return qr(937,t);default:return qr(617,t)}}function qr(e,t){return(t<<5)-t+e|0}function ND(e,t){return qr(e?433:863,t)}function V4(e,t){t=qr(149417,t);for(let i=0,r=e.length;i<r;i++)t=qr(e.charCodeAt(i),t);return t}function MD(e,t){return t=qr(104579,t),e.reduce((i,r)=>Mg(r,i),t)}function FD(e,t){return t=qr(181387,t),Object.keys(e).sort().reduce((i,r)=>(i=V4(r,i),Mg(e[r],i)),t)}var q4;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(q4||(q4={}));function Fg(e,t,i=32){const r=i-t,s=~((1<<r)-1);return(e<<t|(s&e)>>>r)>>>0}function gc(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(i=>i.toString(16).padStart(2,"0")).join(""):(e>>>0).toString(16).padStart(t/4,"0")}var uB=class m${static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const r=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(qu(o))if(a+1<i){const l=t.charCodeAt(a+1);Gu(l)?(a++,c=Cg(o,l)):c=65533}else{n=o;break}else Gu(o)&&(c=65533);if(s=this.w(r,s,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,i,r){return r<128?t[i++]=r:r<2048?(t[i++]=192|(r&1984)>>>6,t[i++]=128|(r&63)>>>0):r<65536?(t[i++]=224|(r&61440)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0):(t[i++]=240|(r&1835008)>>>18,t[i++]=128|(r&258048)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0),i>=64&&(this.y(),i-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),gc(this.h)+gc(this.l)+gc(this.m)+gc(this.n)+gc(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=m$.g,i=this.q;for(let d=0;d<64;d+=4)t.setUint32(d,i.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)t.setUint32(d,Fg(t.getUint32(d-12,!1)^t.getUint32(d-32,!1)^t.getUint32(d-56,!1)^t.getUint32(d-64,!1),1),!1);let r=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let d=0;d<80;d++)d<20?(c=s&n|~s&o,l=1518500249):d<40?(c=s^n^o,l=1859775393):d<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=Fg(r,5)+c+a+l+t.getUint32(d*4,!1)&4294967295,a=o,o=n,n=Fg(s,30),s=r,r=u;this.h=this.h+r&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},G4;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(G4||(G4={}));function Og(...e){switch(e.length){case 1:return h(1822,null,e[0]);case 2:return h(1823,null,e[0],e[1]);case 3:return h(1824,null,e[0],e[1],e[2]);default:return}}var OD=h(1825,null),UD=h(1826,null),mc=class wb{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw Zp(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const i=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:i})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const i=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:i})}else this.h(126)?this.k(9):this.l(Og("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Og("&&"));break;case 124:this.h(124)?this.k(16):this.l(Og("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,r=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:r};this.g.push({offset:i,lexeme:r,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),r=wb.b.get(i);r?this.k(r):this.f.push({type:17,lexeme:i,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(OD);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,r=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(UD);return}const n=this.c.charCodeAt(t);if(i)i=!1;else if(n===47&&!r){t++;break}else n===91?r=!0:n===92?i=!0:n===93&&(r=!1);t++}for(;t<this.c.length&&wb.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},jt=new Map;jt.set("false",!1),jt.set("true",!0),jt.set("isMac",Fi),jt.set("isLinux",Wr),jt.set("isWindows",ri),jt.set("isWeb",Eo),jt.set("isMacNative",Fi&&!Eo),jt.set("isEdge",Ly),jt.set("isFirefox",r3),jt.set("isChrome",pg),jt.set("isSafari",s3);var HD=Object.prototype.hasOwnProperty,J4;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(J4||(J4={}));var BD={regexParsingWithErrorRecovery:!0},jD=h(1802,null),WD=h(1803,null),zD=h(1804,null),Z4=h(1805,null),_D=h(1806,null),VD=h(1807,null),qD=h(1808,null),GD=h(1809,null),Q4=class gu{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=BD){this.k=t,this.d=new mc,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:jD,offset:0,lexeme:"",additionalInfo:WD});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const r=this.D(),s=r.type===17?VD:void 0;throw this.h.push({message:_D,offset:r.offset,lexeme:mc.getLexeme(r),additionalInfo:s}),gu.c}return i}catch(i){if(i!==gu.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const i=this.o();t.push(i)}return t.length===1?t[0]:kt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const i=this.s();t.push(i)}return t.length===1?t[0]:kt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),li.INSTANCE;case 12:return this.z(),$i.INSTANCE;case 0:{this.z();const i=this.l();return this.A(1,Z4),i?.negate()}case 17:return this.z(),bc.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),kt.true();case 12:return this.z(),kt.false();case 0:{this.z();const i=this.l();return this.A(1,Z4),i}case 17:{const i=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return zg.create(i,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let f=0;f<s.lexeme.length;f++)s.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--}if(a<0)break;n.push(mc.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let d;try{d=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return kt.regex(i,d)}case 18:{const n=s.lexeme;this.z();let o=null;if(!Vu(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return zg.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,zD);const s=this.u();return kt.notIn(i,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return kt.equals(i,s);switch(s){case"true":return kt.has(i);case"false":return kt.not(i);default:return kt.equals(i,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return kt.notEquals(i,s);switch(s){case"true":return kt.not(i);case"false":return kt.has(i);default:return kt.notEquals(i,s)}}case 5:return this.z(),jg.create(i,this.u());case 6:return this.z(),Wg.create(i,this.u());case 7:return this.z(),Xu.create(i,this.u());case 8:return this.z(),Bg.create(i,this.u());case 13:return this.z(),kt.in(i,this.u());default:return kt.has(i)}}case 20:throw this.h.push({message:qD,offset:t.offset,lexeme:"",additionalInfo:GD}),gu.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,r){const s=h(1810,null,t,mc.getLexeme(i)),n=i.offset,o=mc.getLexeme(i);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:r}),gu.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},kt=class{static false(){return li.INSTANCE}static true(){return $i.INSTANCE}static has(e){return wc.create(e)}static equals(e,t){return Ug.create(e,t)}static notEquals(e,t){return Hg.create(e,t)}static regex(e,t){return zg.create(e,t)}static in(e,t){return Y4.create(e,t)}static notIn(e,t){return X4.create(e,t)}static not(e){return bc.create(e)}static and(...e){return e5.create(e,null,!0)}static or(...e){return _g.create(e,null,!0)}static greater(e,t){return Xu.create(e,t)}static greaterEquals(e,t){return Bg.create(e,t)}static smaller(e,t){return jg.create(e,t)}static smallerEquals(e,t){return Wg.create(e,t)}static{this.c=new Q4({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function JD(e){const t=new Q4({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(r=>({errorMessage:r.additionalInfo?h(1811,null,r.additionalInfo):h(1812,null),offset:r.offset,length:r.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(r=>({errorMessage:r.additionalInfo?`${r.message}. ${r.additionalInfo}`:r.message,offset:r.offset,length:r.lexeme.length})):[]))}function vc(e,t){return e.cmp(t)}var li=class v${static{this.INSTANCE=new v$}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return $i.INSTANCE}},$i=class w${static{this.INSTANCE=new w$}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return li.INSTANCE}},wc=class b${static create(t,i=null){const r=jt.get(t);return typeof r=="boolean"?r?$i.INSTANCE:li.INSTANCE:new b$(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:t5(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=jt.get(this.key);return typeof t=="boolean"?t?$i.INSTANCE:li.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=bc.create(this.key,this)),this.c}},Ug=class y${static create(t,i,r=null){if(typeof i=="boolean")return i?wc.create(t,r):bc.create(t,r);const s=jt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?$i.INSTANCE:li.INSTANCE:new y$(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=jt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?$i.INSTANCE:li.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=Hg.create(this.c,this.d,this)),this.f}},Y4=class x${static create(t,i){return new x$(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:gn(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),r=t.getValue(this.d);return Array.isArray(i)?i.includes(r):typeof r=="string"&&typeof i=="object"&&i!==null?HD.call(i,r):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=X4.create(this.d,this.f)),this.c}},X4=class E${static create(t,i){return new E$(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=11,this.c=Y4.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},Hg=class S${static create(t,i,r=null){if(typeof i=="boolean")return i?bc.create(t,r):wc.create(t,r);const s=jt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?li.INSTANCE:$i.INSTANCE:new S$(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=jt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?li.INSTANCE:$i.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=Ug.create(this.c,this.d,this)),this.f}},bc=class k${static create(t,i=null){const r=jt.get(t);return typeof r=="boolean"?r?li.INSTANCE:$i.INSTANCE:new k$(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:t5(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=jt.get(this.c);return typeof t=="boolean"?t?li.INSTANCE:$i.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=wc.create(this.c,this)),this.d}};function Yu(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):li.INSTANCE}var Xu=class $${static create(t,i,r=null){return Yu(i,s=>new $$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=Wg.create(this.c,this.d,this)),this.f}},Bg=class C${static create(t,i,r=null){return Yu(i,s=>new C$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=jg.create(this.c,this.d,this)),this.f}},jg=class I${static create(t,i,r=null){return Yu(i,s=>new I$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=Bg.create(this.c,this.d,this)),this.f}},Wg=class D${static create(t,i,r=null){return Yu(i,s=>new D$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Xu.create(this.c,this.d,this)),this.f}},zg=class P${static create(t,i){return new P$(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return i<r?-1:i>r?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return this.d===t.d&&i===r}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=ZD.create(this)),this.c}},ZD=class bb{static create(t){return new bb(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new bb(this.c.map(t))}negate(){return this.c}};function K4(e){let t=null;for(let i=0,r=e.length;i<r;i++){const s=e[i].substituteConstants();if(e[i]!==s&&t===null){t=[];for(let n=0;n<i;n++)t[n]=e[n]}t!==null&&(t[i]=s)}return t===null?e:t}var e5=class qa{static create(t,i,r){return qa.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=vc(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=K4(this.expr);return t===this.expr?this:qa.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,r){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return li.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return $i.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(vc);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=_g.create(o.expr.map(u=>qa.create([u,a],null,r)),null,c);l&&(s.push(l),s.sort(vc))}if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return li.INSTANCE;if(s.length===1)return s[0]}return new qa(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new qa(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=_g.create(t,this,!0)}return this.c}},_g=class co{static create(t,i,r){return co.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=vc(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=K4(this.expr);return t===this.expr?this:co.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,r){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return $i.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return li.INSTANCE;s.sort(vc)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return $i.INSTANCE;if(s.length===1)return s[0]}return new co(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new co(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),r=t.shift(),s=[];for(const n of i5(i))for(const o of i5(r))s.push(e5.create([n,o],null,!1));t.unshift(co.create(s,null,!1))}this.c=co.create(t,this,!0)}return this.c}},I=class Lp extends wc{static{this.d=[]}static all(){return Lp.d.values()}constructor(t,i,r){super(t,null),this.f=i,typeof r=="object"?Lp.d.push({...r,key:t}):r!==!0&&Lp.d.push({key:t,description:r,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Ug.create(this.key,t)}notEqualsTo(t){return Hg.create(this.key,t)}greater(t){return Xu.create(this.key,t)}},Vg=j("contextKeyService");function t5(e,t){return e<t?-1:e>t?1:0}function gn(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function i5(e){return e.type===9?e.expr:[e]}var Ve=j("logService"),yc=j("loggerService"),$e;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})($e||($e={}));var QD=$e.Info;function YD(e,t){return e!==$e.Off&&e<=t}function XD(e,t,i){switch(t){case $e.Trace:e.trace(i);break;case $e.Debug:e.debug(i);break;case $e.Info:e.info(i);break;case $e.Warning:e.warn(i);break;case $e.Error:e.error(i);break;case $e.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function Ro(e,t=!1){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(s instanceof Error&&(s=To(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}i+=(r>0?" ":"")+s}return i}var r5=class extends ne{constructor(){super(...arguments),this.b=QD,this.c=this.B(new P),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return YD(this.b,e)}g(e){return this.q.isDisposed?!1:this.f(e)}},s5=class extends r5{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g($e.Trace)&&this.m($e.Trace,Ro([e,...t],!0))}debug(e,...t){this.g($e.Debug)&&this.m($e.Debug,Ro([e,...t]))}info(e,...t){this.g($e.Info)&&this.m($e.Info,Ro([e,...t]))}warn(e,...t){this.g($e.Warning)&&this.m($e.Warning,Ro([e,...t]))}error(e,...t){if(this.g($e.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.m($e.Error,Ro(i))}else this.m($e.Error,Ro([e,...t]))}flush(){}},KD=class extends r5{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.h)i.trace(e,...t)}debug(e,...t){for(const i of this.h)i.debug(e,...t)}info(e,...t){for(const i of this.h)i.info(e,...t)}warn(e,...t){for(const i of this.h)i.warn(e,...t)}error(e,...t){for(const i of this.h)i.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},e2=class extends ne{constructor(e,t,i){if(super(),this.j=e,this.m=t,this.b=new Nt,this.f=this.B(new P),this.onDidChangeLoggers=this.f.event,this.g=this.B(new P),this.onDidChangeLogLevel=this.g.event,this.h=this.B(new P),this.onDidChangeVisibility=this.h.event,i)for(const r of i)this.b.set(r.resource,{logger:void 0,info:r})}n(e){return Me(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const i=this.s(e),r=Me(e)?e:t?.id??pc(i.toString()).toString(16);let s=this.b.get(i)?.logger;const n=t?.logLevel==="always"?$e.Trace:t?.logLevel;s||(s=this.t(i,n??this.getLogLevel(i)??this.j,{...t,id:r}));const o={logger:s,info:{resource:i,id:r,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),s}s(e){return Me(e)?Jt(this.m,`${e}.log`):e}setLogLevel(e,t){if(y.isUri(e)){const i=e,r=t,s=this.b.get(i);s&&r!==s.info.logLevel&&(s.info.logLevel=r===this.j?void 0:r,s.logger?.setLevel(r),this.b.set(s.info.resource,s),this.g.fire([i,r]))}else{this.j=e;for(const[i,r]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&r.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const i=this.n(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.h.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.s(e),i=this.b.get(t);i&&(i.logger&&i.logger.dispose(),this.b.delete(t),this.f.fire({added:[],removed:[i.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function t2(e){switch(e){case $e.Trace:return"trace";case $e.Debug:return"debug";case $e.Info:return"info";case $e.Warning:return"warn";case $e.Error:return"error";case $e.Off:return"off"}}function i2(e){switch(e){case"trace":return $e.Trace;case"debug":return $e.Debug;case"info":return $e.Info;case"warn":return $e.Warning;case"error":return $e.Error;case"critical":return $e.Error;case"off":return $e.Off}}var hB=new I("logLevel",t2($e.Info)),Er=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},n5=[],o5;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(o5||(o5={}));function Je(e,t,i){t instanceof Er||(t=new Er(t,[],!!i)),n5.push([e,t])}function r2(){return n5}var qg=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Qt=j("IExtHostInitDataService"),s2=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},a5=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new s2(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),r=this.c(t,i);if(r)return r}}c(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this.c(r,t);if(s)return s;t.delete(i)}}},n2=!1,c5=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},o2=class yb{constructor(t=new qg,i=!1,r,s=n2){this.i=t,this.j=i,this.k=r,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(fc,this),this._globalGraph=s?r?._globalGraph??new a5(n=>n):void 0}dispose(){if(!this.f){this.f=!0,Hr(this.h),this.h.clear();for(const t of this.g)oy(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const r=this,s=new class extends yb{dispose(){r.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),i?.add(s),s}invokeFunction(t,...i){this.m();const r=Gg.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw Zp("service accessor is only valid during the invocation of its target method");const a=this.s(o,r);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...i)}finally{s=!0,r.stop()}}createInstance(t,...i){this.m();let r,s;return t instanceof Er?(r=Gg.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(i),r)):(r=Gg.traceCreation(this.l,t),s=this.o(t,i,r)),r.stop(),s}o(t,i=[],r){const s=ir.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,r);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(n))}q(t,i){if(this.i.get(t)instanceof Er)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const r=this.r(t);return r instanceof Er?this.u(t,r,i.branch(t,!0)):(i.branch(t,!1),r)}u(t,i,r){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,r)}finally{this.t.delete(t)}}v(t,i,r){const s=new a5(c=>c.id.toString());let n=0;const o=[{id:t,desc:i,_trace:r}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new c5(s);for(const l of ir.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Er){const d={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,d),o.push(d)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new c5(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Er){const d=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,d)}s.removeNode(l)}}return this.r(t)}w(t,i,r=[],s,n){if(this.i.get(t)instanceof Er)return this.x(t,i,r,s,n,this.g);if(this.k)return this.k.w(t,i,r,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,r=[],s,n,o){if(s){const a=new yb(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new kD(()=>{const u=a.o(i,r,n);for(const[d,f]of c){const p=u[d];if(typeof p=="function")for(const m of f)m.disposable=p.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,d){if(!l.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let m=c.get(d);return m||(m=new Es,c.set(d,m)),(x,k,$)=>{if(l.isInitialized)return l.value[d](x,k,$);{const A={listener:[x,k,$],disposable:void 0},G=m.push(A);return se(()=>{G(),A.disposable?.dispose()})}}}if(d in u)return u[d];const f=l.value;let p=f[d];return typeof p!="function"||(p=p.bind(f),u[d]=p),p},set(u,d,f){return l.value[d]=f,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,r,n);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},l5;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(l5||(l5={}));var Gg=class Nr{static{this.all=new Set}static{this.c=new class extends Nr{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new Nr(2,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Nr.c}static traceCreation(t,i){return t?new Nr(1,i.name):Nr.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const r=new Nr(3,t.toString());return this.h.push([t,i,r]),r}stop(){const t=Date.now()-this.g;Nr.f+=t;let i=!1;function r(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,d]of o.h)if(u&&d){i=!0,a.push(`${c}CREATES -> ${l}`);const f=r(n+1,d);f&&a.push(f)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${Nr.f.toFixed(2)}ms)`];(t>2||i)&&Nr.all.add(s.join(`
`))}},Be=j("IExtHostRpcService"),a2=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},Ku=j("IURITransformerService"),c2=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},l2=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},u2=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Sg(e,this.b,0,e.length,this.c,this.d):lc(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},u5=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===47||this.f&&i===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Sg(e,this.b,0,e.length,this.d,this.e):lc(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},h5;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(h5||(h5={}));var d5=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new u5(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return kg(e,this.c.scheme);if(this.d[this.e]===2)return kg(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return fn(e,this.c.query);if(this.d[this.e]===5)return fn(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},mn=class xb{static{this.Val=Symbol("undefined_placeholder")}static wrap(t){return t===void 0?xb.Val:t}static unwrap(t){return t===xb.Val?void 0:t}},eh=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},f5;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(f5||(f5={}));var Ds=class mu{static forUris(t=()=>!1,i=()=>!1){return new mu(new d5(t,i))}static forPaths(t=!1){return new mu(new u5(void 0,!t))}static forStrings(){return new mu(new l2)}static forConfigKeys(){return new mu(new u2)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const r=i.slice(0);qb(r);for(const s of r)this.set(s,t)}else{const r=t.slice(0);qb(r);for(const s of r)this.set(s[0],s[1])}}set(t,i){const r=this.b.reset(t);let s;this.c||(this.c=new eh,this.c.segment=r.value());const n=[];for(s=this.c;;){const a=r.cmp(s.segment);if(a>0)s.left||(s.left=new eh,s.left.segment=r.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new eh,s.right.segment=r.value()),n.push([1,s]),s=s.right;else if(r.hasNext())r.next(),s.mid||(s.mid=new eh,s.mid.segment=r.value()),n.push([0,s]),s=s.mid;else break}const o=mn.unwrap(s.value);s.value=mn.wrap(i),s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],d=n[a+1][0];if(u===1&&d===1)n[a][1]=c.rotateLeft();else if(u===-1&&d===-1)n[a][1]=c.rotateRight();else if(u===1&&d===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&d===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return mn.unwrap(this.d(t)?.value)}d(t){const i=this.b.reset(t);let r=this.c;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const r=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=r.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(r.hasNext())r.next(),s.push([0,n]),n=n.mid;else break}if(n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=[[1,n]],a=this.f(n.right,o);if(a.key){n.key=a.key,n.value=a.value,n.segment=a.segment;const c=a.right;if(o.length>1){const[u,d]=o[o.length-1];switch(u){case-1:d.left=c;break;case 0:rg(!1);case 1:rg(!1)}}else n.right=c;const l=this.g(o);if(s.length>0){const[u,d]=s[s.length-1];switch(u){case-1:d.left=l;break;case 0:d.mid=l;break;case 1:d.right=l;break}}else this.c=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}this.c=this.g(s)??this.c}}f(t,i){for(;t.left;)i.push([-1,t]),t=t.left;return t}g(t){for(let i=t.length-1;i>=0;i--){const r=t[i][1];r.updateHeight();const s=r.balanceFactor();if(s>1?(r.right.balanceFactor()>=0||(r.right=r.right.rotateRight()),t[i][1]=r.rotateLeft()):s<-1&&(r.left.balanceFactor()<=0||(r.left=r.left.rotateLeft()),t[i][1]=r.rotateRight()),i>0)switch(t[i-1][0]){case-1:t[i-1][1].left=t[i][1];break;case 1:t[i-1][1].right=t[i][1];break;case 0:t[i-1][1].mid=t[i][1];break}else return t[0][1]}}findSubstr(t){const i=this.b.reset(t);let r=this.c,s;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),s=mn.unwrap(r.value)||s,r=r.mid;else break}return r&&mn.unwrap(r.value)||s}findSuperstr(t){return this.h(t,!1)}h(t,i){const r=this.b.reset(t);let s=this.c;for(;s;){const n=r.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(r.hasNext())r.next(),s=s.mid;else return s.mid?this.j(s.mid):i?mn.unwrap(s.value):void 0}}hasElementOrSubtree(t){return this.h(t,!0)!==void 0}forEach(t){for(const[i,r]of this)t(r,i)}*[Symbol.iterator](){yield*this.j(this.c)}j(t){const i=[];return this.l(t,i),i[Symbol.iterator]()}l(t,i){t&&(t.left&&this.l(t.left,i),t.value!==void 0&&i.push([t.key,mn.unwrap(t.value)]),t.mid&&this.l(t.mid,i),t.right&&this.l(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const r=i.balanceFactor();return r<-1||r>1?!1:t(i.left)&&t(i.right)};return t(this.c)}};function it(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,r])=>{t[i]=r&&typeof r=="object"?it(r):r}),t}function p5(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const r in i)if(g5.call(i,r)){const s=i[r];typeof s=="object"&&!Object.isFrozen(s)&&!aI(s)&&t.push(s)}}return e}var g5=Object.prototype.hasOwnProperty;function Lo(e,t){return Jg(e,t,new Set)}function Jg(e,t,i){if(xt(e))return e;const r=t(e);if(typeof r<"u")return r;if(Array.isArray(e)){const s=[];for(const n of e)s.push(Jg(n,t,i));return s}if(yt(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const s={};for(const n in e)g5.call(e,n)&&(s[n]=Jg(e[n],t,i));return i.delete(e),s}return e}function vn(e,t,i=!0){return yt(e)?(yt(t)&&Object.keys(t).forEach(r=>{r in e?i&&(yt(e[r])&&yt(t[r])?vn(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function ui(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!ui(e[i],t[i]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const n=[];for(r in t)n.push(r);if(n.sort(),!ui(s,n))return!1;for(i=0;i<s.length;i++)if(!ui(e[s[i]],t[s[i]]))return!1}return!0}function h2(e){const t=new Set;return JSON.stringify(e,(i,r)=>{if(yt(r)||Array.isArray(r)){if(t.has(r))return"[Circular]";t.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}function m5(e,t){const i=Object.create(null);for(const[r,s]of Object.entries(e))t(r,s)&&(i[r]=s);return i}var d2=class{constructor(){this.a=0}getNext(){return this.a++}},xc;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(xc||(xc={})),function(e){const t="error",i="warning",r="warn",s="info",n="ignore";function o(c){return c?$s(t,c)?e.Error:$s(i,c)||$s(r,c)?e.Warning:$s(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return s;default:return n}}e.toString=a}(xc||(xc={}));var wt=xc,f2=wt,dB=j("notificationService"),v5;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.SILENT=2]="SILENT",e[e.URGENT=3]="URGENT"})(v5||(v5={}));var w5;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(w5||(w5={}));var b5;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(b5||(b5={}));var Zg=j("contextService");function p2(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.uri)}function g2(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.configPath)}var y5;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(y5||(y5={}));var m2=class{get folders(){return this.g}set folders(e){this.g=e,this.n()}constructor(e,t,i,r,s){this.h=e,this.j=i,this.k=r,this.l=s,this.c=Ds.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=Ds.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},x5=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Jt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function Qg(e){return new x5({uri:e,index:0,name:Pg(e)},{uri:e.toString()})}var E5="code-workspace",fB=`.${E5}`,pB=[{name:h(2665,null),extensions:[E5]}],v2=class{constructor(){this.a=new Set(Object.keys(z)),this.b=new Map,this.extUri=new uc(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},No=j("IExtHostFileSystemInfo"),Mt=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=0,s="";return s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s}}(),Yg=Object.freeze({create:e=>wo(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>Yg.split(e).filter(t=>!t.startsWith("#"))}),gB=new Uint32Array(10),S5;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(S5||(S5={}));var k5;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(k5||(k5={}));var $5;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})($5||($5={}));var mB=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),vB=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),wB=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),bB=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function C5(...e){return function(t,i){for(let r=0,s=e.length;r<s;r++){const n=e[r](t,i);if(n)return n}return null}}var yB=D5.bind(void 0,!1),I5=D5.bind(void 0,!0);function D5(e,t,i){if(!i||i.length<t.length)return null;let r;return e?r=$g(i,t):r=i.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function w2(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function b2(e,t){return Xg(e.toLowerCase(),t.toLowerCase(),0,0)}function Xg(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]===t[r]){let s=null;return(s=Xg(e,t,i+1,r+1))?A5({start:r,end:r+1},s):null}return Xg(e,t,i,r+1)}function Kg(e){return 97<=e&&e<=122}function th(e){return 65<=e&&e<=90}function em(e){return 48<=e&&e<=57}function y2(e){return e===32||e===9||e===10||e===13}var x2=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>x2.add(e.charCodeAt(0)));function P5(e){return Kg(e)||th(e)||em(e)}function A5(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function T5(e,t){for(let i=t;i<e.length;i++){const r=e.charCodeAt(i);if(th(r)||em(r)||i>0&&!P5(e.charCodeAt(i-1)))return i}return e.length}function tm(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]!==t[r].toLowerCase())return null;{let s=null,n=r+1;for(s=tm(e,t,i+1,r+1);!s&&(n=T5(t,n))<t.length;)s=tm(e,t,i+1,n),n++;return s===null?null:A5({start:r,end:r+1},s)}}function E2(e){let t=0,i=0,r=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),th(n)&&t++,Kg(n)&&i++,P5(n)&&r++,em(n)&&s++;const o=t/e.length,a=i/e.length,c=r/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function S2(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function k2(e){const{upperPercent:t,lowerPercent:i,alphaPercent:r,numericPercent:s}=e;return i>.2&&t<.8&&r>.6&&s<.2}function $2(e){let t=0,i=0,r=0,s=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n),th(r)&&t++,Kg(r)&&i++,y2(r)&&s++;return(t===0||i===0)&&s===0?e.length<=30:t<=5}function R5(e,t){if(!t||(t=t.trim(),t.length===0)||!$2(e))return null;t.length>60&&(t=t.substring(0,60));const i=E2(t);if(!k2(i)){if(!S2(i))return null;t=t.toLowerCase()}let r=null,s=0;for(e=e.toLowerCase();s<t.length&&(r=tm(e,t,0,s))===null;)s=T5(t,s+1);return r}var xB=C5(I5,R5,w2),EB=C5(I5,R5,b2),SB=new eg(1e4),ih=128;function im(){const e=[],t=[];for(let i=0;i<=ih;i++)t[i]=0;for(let i=0;i<=ih;i++)e.push(t.slice(0));return e}function L5(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var kB=L5(2*ih),$B=L5(2*ih),CB=im(),IB=im(),DB=im(),N5;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(N5||(N5={}));var M5;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(M5||(M5={}));var PB=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},rm=Object.create(null);function g(e,t){if(Me(t)){const i=rm[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return rm[e]=t,{id:e}}function C2(){return rm}var I2={add:g("add",6e4),plus:g("plus",6e4),gistNew:g("gist-new",6e4),repoCreate:g("repo-create",6e4),lightbulb:g("lightbulb",60001),lightBulb:g("light-bulb",60001),repo:g("repo",60002),repoDelete:g("repo-delete",60002),gistFork:g("gist-fork",60003),repoForked:g("repo-forked",60003),gitPullRequest:g("git-pull-request",60004),gitPullRequestAbandoned:g("git-pull-request-abandoned",60004),recordKeys:g("record-keys",60005),keyboard:g("keyboard",60005),tag:g("tag",60006),gitPullRequestLabel:g("git-pull-request-label",60006),tagAdd:g("tag-add",60006),tagRemove:g("tag-remove",60006),person:g("person",60007),personFollow:g("person-follow",60007),personOutline:g("person-outline",60007),personFilled:g("person-filled",60007),gitBranch:g("git-branch",60008),gitBranchCreate:g("git-branch-create",60008),gitBranchDelete:g("git-branch-delete",60008),sourceControl:g("source-control",60008),mirror:g("mirror",60009),mirrorPublic:g("mirror-public",60009),star:g("star",60010),starAdd:g("star-add",60010),starDelete:g("star-delete",60010),starEmpty:g("star-empty",60010),comment:g("comment",60011),commentAdd:g("comment-add",60011),alert:g("alert",60012),warning:g("warning",60012),search:g("search",60013),searchSave:g("search-save",60013),logOut:g("log-out",60014),signOut:g("sign-out",60014),logIn:g("log-in",60015),signIn:g("sign-in",60015),eye:g("eye",60016),eyeUnwatch:g("eye-unwatch",60016),eyeWatch:g("eye-watch",60016),circleFilled:g("circle-filled",60017),primitiveDot:g("primitive-dot",60017),closeDirty:g("close-dirty",60017),debugBreakpoint:g("debug-breakpoint",60017),debugBreakpointDisabled:g("debug-breakpoint-disabled",60017),debugHint:g("debug-hint",60017),terminalDecorationSuccess:g("terminal-decoration-success",60017),primitiveSquare:g("primitive-square",60018),edit:g("edit",60019),pencil:g("pencil",60019),info:g("info",60020),issueOpened:g("issue-opened",60020),gistPrivate:g("gist-private",60021),gitForkPrivate:g("git-fork-private",60021),lock:g("lock",60021),mirrorPrivate:g("mirror-private",60021),close:g("close",60022),removeClose:g("remove-close",60022),x:g("x",60022),repoSync:g("repo-sync",60023),sync:g("sync",60023),clone:g("clone",60024),desktopDownload:g("desktop-download",60024),beaker:g("beaker",60025),microscope:g("microscope",60025),vm:g("vm",60026),deviceDesktop:g("device-desktop",60026),file:g("file",60027),fileText:g("file-text",60027),more:g("more",60028),ellipsis:g("ellipsis",60028),kebabHorizontal:g("kebab-horizontal",60028),mailReply:g("mail-reply",60029),reply:g("reply",60029),organization:g("organization",60030),organizationFilled:g("organization-filled",60030),organizationOutline:g("organization-outline",60030),newFile:g("new-file",60031),fileAdd:g("file-add",60031),newFolder:g("new-folder",60032),fileDirectoryCreate:g("file-directory-create",60032),trash:g("trash",60033),trashcan:g("trashcan",60033),history:g("history",60034),clock:g("clock",60034),folder:g("folder",60035),fileDirectory:g("file-directory",60035),symbolFolder:g("symbol-folder",60035),logoGithub:g("logo-github",60036),markGithub:g("mark-github",60036),github:g("github",60036),terminal:g("terminal",60037),console:g("console",60037),repl:g("repl",60037),zap:g("zap",60038),symbolEvent:g("symbol-event",60038),error:g("error",60039),stop:g("stop",60039),variable:g("variable",60040),symbolVariable:g("symbol-variable",60040),array:g("array",60042),symbolArray:g("symbol-array",60042),symbolModule:g("symbol-module",60043),symbolPackage:g("symbol-package",60043),symbolNamespace:g("symbol-namespace",60043),symbolObject:g("symbol-object",60043),symbolMethod:g("symbol-method",60044),symbolFunction:g("symbol-function",60044),symbolConstructor:g("symbol-constructor",60044),symbolBoolean:g("symbol-boolean",60047),symbolNull:g("symbol-null",60047),symbolNumeric:g("symbol-numeric",60048),symbolNumber:g("symbol-number",60048),symbolStructure:g("symbol-structure",60049),symbolStruct:g("symbol-struct",60049),symbolParameter:g("symbol-parameter",60050),symbolTypeParameter:g("symbol-type-parameter",60050),symbolKey:g("symbol-key",60051),symbolText:g("symbol-text",60051),symbolReference:g("symbol-reference",60052),goToFile:g("go-to-file",60052),symbolEnum:g("symbol-enum",60053),symbolValue:g("symbol-value",60053),symbolRuler:g("symbol-ruler",60054),symbolUnit:g("symbol-unit",60054),activateBreakpoints:g("activate-breakpoints",60055),archive:g("archive",60056),arrowBoth:g("arrow-both",60057),arrowDown:g("arrow-down",60058),arrowLeft:g("arrow-left",60059),arrowRight:g("arrow-right",60060),arrowSmallDown:g("arrow-small-down",60061),arrowSmallLeft:g("arrow-small-left",60062),arrowSmallRight:g("arrow-small-right",60063),arrowSmallUp:g("arrow-small-up",60064),arrowUp:g("arrow-up",60065),bell:g("bell",60066),bold:g("bold",60067),book:g("book",60068),bookmark:g("bookmark",60069),debugBreakpointConditionalUnverified:g("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:g("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:g("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:g("debug-breakpoint-data-unverified",60072),debugBreakpointData:g("debug-breakpoint-data",60073),debugBreakpointDataDisabled:g("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:g("debug-breakpoint-log-unverified",60074),debugBreakpointLog:g("debug-breakpoint-log",60075),debugBreakpointLogDisabled:g("debug-breakpoint-log-disabled",60075),briefcase:g("briefcase",60076),broadcast:g("broadcast",60077),browser:g("browser",60078),bug:g("bug",60079),calendar:g("calendar",60080),caseSensitive:g("case-sensitive",60081),check:g("check",60082),checklist:g("checklist",60083),chevronDown:g("chevron-down",60084),chevronLeft:g("chevron-left",60085),chevronRight:g("chevron-right",60086),chevronUp:g("chevron-up",60087),chromeClose:g("chrome-close",60088),chromeMaximize:g("chrome-maximize",60089),chromeMinimize:g("chrome-minimize",60090),chromeRestore:g("chrome-restore",60091),circleOutline:g("circle-outline",60092),circle:g("circle",60092),debugBreakpointUnverified:g("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:g("terminal-decoration-incomplete",60092),circleSlash:g("circle-slash",60093),circuitBoard:g("circuit-board",60094),clearAll:g("clear-all",60095),clippy:g("clippy",60096),closeAll:g("close-all",60097),cloudDownload:g("cloud-download",60098),cloudUpload:g("cloud-upload",60099),code:g("code",60100),collapseAll:g("collapse-all",60101),colorMode:g("color-mode",60102),commentDiscussion:g("comment-discussion",60103),creditCard:g("credit-card",60105),dash:g("dash",60108),dashboard:g("dashboard",60109),database:g("database",60110),debugContinue:g("debug-continue",60111),debugDisconnect:g("debug-disconnect",60112),debugPause:g("debug-pause",60113),debugRestart:g("debug-restart",60114),debugStart:g("debug-start",60115),debugStepInto:g("debug-step-into",60116),debugStepOut:g("debug-step-out",60117),debugStepOver:g("debug-step-over",60118),debugStop:g("debug-stop",60119),debug:g("debug",60120),deviceCameraVideo:g("device-camera-video",60121),deviceCamera:g("device-camera",60122),deviceMobile:g("device-mobile",60123),diffAdded:g("diff-added",60124),diffIgnored:g("diff-ignored",60125),diffModified:g("diff-modified",60126),diffRemoved:g("diff-removed",60127),diffRenamed:g("diff-renamed",60128),diff:g("diff",60129),diffSidebyside:g("diff-sidebyside",60129),discard:g("discard",60130),editorLayout:g("editor-layout",60131),emptyWindow:g("empty-window",60132),exclude:g("exclude",60133),extensions:g("extensions",60134),eyeClosed:g("eye-closed",60135),fileBinary:g("file-binary",60136),fileCode:g("file-code",60137),fileMedia:g("file-media",60138),filePdf:g("file-pdf",60139),fileSubmodule:g("file-submodule",60140),fileSymlinkDirectory:g("file-symlink-directory",60141),fileSymlinkFile:g("file-symlink-file",60142),fileZip:g("file-zip",60143),files:g("files",60144),filter:g("filter",60145),flame:g("flame",60146),foldDown:g("fold-down",60147),foldUp:g("fold-up",60148),fold:g("fold",60149),folderActive:g("folder-active",60150),folderOpened:g("folder-opened",60151),gear:g("gear",60152),gift:g("gift",60153),gistSecret:g("gist-secret",60154),gist:g("gist",60155),gitCommit:g("git-commit",60156),gitCompare:g("git-compare",60157),compareChanges:g("compare-changes",60157),gitMerge:g("git-merge",60158),githubAction:g("github-action",60159),githubAlt:g("github-alt",60160),globe:g("globe",60161),grabber:g("grabber",60162),graph:g("graph",60163),gripper:g("gripper",60164),heart:g("heart",60165),home:g("home",60166),horizontalRule:g("horizontal-rule",60167),hubot:g("hubot",60168),inbox:g("inbox",60169),issueReopened:g("issue-reopened",60171),issues:g("issues",60172),italic:g("italic",60173),jersey:g("jersey",60174),json:g("json",60175),kebabVertical:g("kebab-vertical",60176),key:g("key",60177),law:g("law",60178),lightbulbAutofix:g("lightbulb-autofix",60179),linkExternal:g("link-external",60180),link:g("link",60181),listOrdered:g("list-ordered",60182),listUnordered:g("list-unordered",60183),liveShare:g("live-share",60184),loading:g("loading",60185),location:g("location",60186),mailRead:g("mail-read",60187),mail:g("mail",60188),markdown:g("markdown",60189),megaphone:g("megaphone",60190),mention:g("mention",60191),milestone:g("milestone",60192),gitPullRequestMilestone:g("git-pull-request-milestone",60192),mortarBoard:g("mortar-board",60193),move:g("move",60194),multipleWindows:g("multiple-windows",60195),mute:g("mute",60196),noNewline:g("no-newline",60197),note:g("note",60198),octoface:g("octoface",60199),openPreview:g("open-preview",60200),package:g("package",60201),paintcan:g("paintcan",60202),pin:g("pin",60203),play:g("play",60204),run:g("run",60204),plug:g("plug",60205),preserveCase:g("preserve-case",60206),preview:g("preview",60207),project:g("project",60208),pulse:g("pulse",60209),question:g("question",60210),quote:g("quote",60211),radioTower:g("radio-tower",60212),reactions:g("reactions",60213),references:g("references",60214),refresh:g("refresh",60215),regex:g("regex",60216),remoteExplorer:g("remote-explorer",60217),remote:g("remote",60218),remove:g("remove",60219),replaceAll:g("replace-all",60220),replace:g("replace",60221),repoClone:g("repo-clone",60222),repoForcePush:g("repo-force-push",60223),repoPull:g("repo-pull",60224),repoPush:g("repo-push",60225),report:g("report",60226),requestChanges:g("request-changes",60227),rocket:g("rocket",60228),rootFolderOpened:g("root-folder-opened",60229),rootFolder:g("root-folder",60230),rss:g("rss",60231),ruby:g("ruby",60232),saveAll:g("save-all",60233),saveAs:g("save-as",60234),save:g("save",60235),screenFull:g("screen-full",60236),screenNormal:g("screen-normal",60237),searchStop:g("search-stop",60238),server:g("server",60240),settingsGear:g("settings-gear",60241),settings:g("settings",60242),shield:g("shield",60243),smiley:g("smiley",60244),sortPrecedence:g("sort-precedence",60245),splitHorizontal:g("split-horizontal",60246),splitVertical:g("split-vertical",60247),squirrel:g("squirrel",60248),starFull:g("star-full",60249),starHalf:g("star-half",60250),symbolClass:g("symbol-class",60251),symbolColor:g("symbol-color",60252),symbolConstant:g("symbol-constant",60253),symbolEnumMember:g("symbol-enum-member",60254),symbolField:g("symbol-field",60255),symbolFile:g("symbol-file",60256),symbolInterface:g("symbol-interface",60257),symbolKeyword:g("symbol-keyword",60258),symbolMisc:g("symbol-misc",60259),symbolOperator:g("symbol-operator",60260),symbolProperty:g("symbol-property",60261),wrench:g("wrench",60261),wrenchSubaction:g("wrench-subaction",60261),symbolSnippet:g("symbol-snippet",60262),tasklist:g("tasklist",60263),telescope:g("telescope",60264),textSize:g("text-size",60265),threeBars:g("three-bars",60266),thumbsdown:g("thumbsdown",60267),thumbsup:g("thumbsup",60268),tools:g("tools",60269),triangleDown:g("triangle-down",60270),triangleLeft:g("triangle-left",60271),triangleRight:g("triangle-right",60272),triangleUp:g("triangle-up",60273),twitter:g("twitter",60274),unfold:g("unfold",60275),unlock:g("unlock",60276),unmute:g("unmute",60277),unverified:g("unverified",60278),verified:g("verified",60279),versions:g("versions",60280),vmActive:g("vm-active",60281),vmOutline:g("vm-outline",60282),vmRunning:g("vm-running",60283),watch:g("watch",60284),whitespace:g("whitespace",60285),wholeWord:g("whole-word",60286),window:g("window",60287),wordWrap:g("word-wrap",60288),zoomIn:g("zoom-in",60289),zoomOut:g("zoom-out",60290),listFilter:g("list-filter",60291),listFlat:g("list-flat",60292),listSelection:g("list-selection",60293),selection:g("selection",60293),listTree:g("list-tree",60294),debugBreakpointFunctionUnverified:g("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:g("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:g("debug-breakpoint-function-disabled",60296),debugStackframeActive:g("debug-stackframe-active",60297),circleSmallFilled:g("circle-small-filled",60298),debugStackframeDot:g("debug-stackframe-dot",60298),terminalDecorationMark:g("terminal-decoration-mark",60298),debugStackframe:g("debug-stackframe",60299),debugStackframeFocused:g("debug-stackframe-focused",60299),debugBreakpointUnsupported:g("debug-breakpoint-unsupported",60300),symbolString:g("symbol-string",60301),debugReverseContinue:g("debug-reverse-continue",60302),debugStepBack:g("debug-step-back",60303),debugRestartFrame:g("debug-restart-frame",60304),debugAlt:g("debug-alt",60305),callIncoming:g("call-incoming",60306),callOutgoing:g("call-outgoing",60307),menu:g("menu",60308),expandAll:g("expand-all",60309),feedback:g("feedback",60310),gitPullRequestReviewer:g("git-pull-request-reviewer",60310),groupByRefType:g("group-by-ref-type",60311),ungroupByRefType:g("ungroup-by-ref-type",60312),account:g("account",60313),gitPullRequestAssignee:g("git-pull-request-assignee",60313),bellDot:g("bell-dot",60314),debugConsole:g("debug-console",60315),library:g("library",60316),output:g("output",60317),runAll:g("run-all",60318),syncIgnored:g("sync-ignored",60319),pinned:g("pinned",60320),githubInverted:g("github-inverted",60321),serverProcess:g("server-process",60322),serverEnvironment:g("server-environment",60323),pass:g("pass",60324),issueClosed:g("issue-closed",60324),stopCircle:g("stop-circle",60325),playCircle:g("play-circle",60326),record:g("record",60327),debugAltSmall:g("debug-alt-small",60328),vmConnect:g("vm-connect",60329),cloud:g("cloud",60330),merge:g("merge",60331),export:g("export",60332),graphLeft:g("graph-left",60333),magnet:g("magnet",60334),notebook:g("notebook",60335),redo:g("redo",60336),checkAll:g("check-all",60337),pinnedDirty:g("pinned-dirty",60338),passFilled:g("pass-filled",60339),circleLargeFilled:g("circle-large-filled",60340),circleLarge:g("circle-large",60341),circleLargeOutline:g("circle-large-outline",60341),combine:g("combine",60342),gather:g("gather",60342),table:g("table",60343),variableGroup:g("variable-group",60344),typeHierarchy:g("type-hierarchy",60345),typeHierarchySub:g("type-hierarchy-sub",60346),typeHierarchySuper:g("type-hierarchy-super",60347),gitPullRequestCreate:g("git-pull-request-create",60348),runAbove:g("run-above",60349),runBelow:g("run-below",60350),notebookTemplate:g("notebook-template",60351),debugRerun:g("debug-rerun",60352),workspaceTrusted:g("workspace-trusted",60353),workspaceUntrusted:g("workspace-untrusted",60354),workspaceUnknown:g("workspace-unknown",60355),terminalCmd:g("terminal-cmd",60356),terminalDebian:g("terminal-debian",60357),terminalLinux:g("terminal-linux",60358),terminalPowershell:g("terminal-powershell",60359),terminalTmux:g("terminal-tmux",60360),terminalUbuntu:g("terminal-ubuntu",60361),terminalBash:g("terminal-bash",60362),arrowSwap:g("arrow-swap",60363),copy:g("copy",60364),personAdd:g("person-add",60365),filterFilled:g("filter-filled",60366),wand:g("wand",60367),debugLineByLine:g("debug-line-by-line",60368),inspect:g("inspect",60369),layers:g("layers",60370),layersDot:g("layers-dot",60371),layersActive:g("layers-active",60372),compass:g("compass",60373),compassDot:g("compass-dot",60374),compassActive:g("compass-active",60375),azure:g("azure",60376),issueDraft:g("issue-draft",60377),gitPullRequestClosed:g("git-pull-request-closed",60378),gitPullRequestDraft:g("git-pull-request-draft",60379),debugAll:g("debug-all",60380),debugCoverage:g("debug-coverage",60381),runErrors:g("run-errors",60382),folderLibrary:g("folder-library",60383),debugContinueSmall:g("debug-continue-small",60384),beakerStop:g("beaker-stop",60385),graphLine:g("graph-line",60386),graphScatter:g("graph-scatter",60387),pieChart:g("pie-chart",60388),bracket:g("bracket",60175),bracketDot:g("bracket-dot",60389),bracketError:g("bracket-error",60390),lockSmall:g("lock-small",60391),azureDevops:g("azure-devops",60392),verifiedFilled:g("verified-filled",60393),newline:g("newline",60394),layout:g("layout",60395),layoutActivitybarLeft:g("layout-activitybar-left",60396),layoutActivitybarRight:g("layout-activitybar-right",60397),layoutPanelLeft:g("layout-panel-left",60398),layoutPanelCenter:g("layout-panel-center",60399),layoutPanelJustify:g("layout-panel-justify",60400),layoutPanelRight:g("layout-panel-right",60401),layoutPanel:g("layout-panel",60402),layoutSidebarLeft:g("layout-sidebar-left",60403),layoutSidebarRight:g("layout-sidebar-right",60404),layoutStatusbar:g("layout-statusbar",60405),layoutMenubar:g("layout-menubar",60406),layoutCentered:g("layout-centered",60407),target:g("target",60408),indent:g("indent",60409),recordSmall:g("record-small",60410),errorSmall:g("error-small",60411),terminalDecorationError:g("terminal-decoration-error",60411),arrowCircleDown:g("arrow-circle-down",60412),arrowCircleLeft:g("arrow-circle-left",60413),arrowCircleRight:g("arrow-circle-right",60414),arrowCircleUp:g("arrow-circle-up",60415),layoutSidebarRightOff:g("layout-sidebar-right-off",60416),layoutPanelOff:g("layout-panel-off",60417),layoutSidebarLeftOff:g("layout-sidebar-left-off",60418),blank:g("blank",60419),heartFilled:g("heart-filled",60420),map:g("map",60421),mapHorizontal:g("map-horizontal",60421),foldHorizontal:g("fold-horizontal",60421),mapFilled:g("map-filled",60422),mapHorizontalFilled:g("map-horizontal-filled",60422),foldHorizontalFilled:g("fold-horizontal-filled",60422),circleSmall:g("circle-small",60423),bellSlash:g("bell-slash",60424),bellSlashDot:g("bell-slash-dot",60425),commentUnresolved:g("comment-unresolved",60426),gitPullRequestGoToChanges:g("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:g("git-pull-request-new-changes",60428),searchFuzzy:g("search-fuzzy",60429),commentDraft:g("comment-draft",60430),send:g("send",60431),sparkle:g("sparkle",60432),insert:g("insert",60433),mic:g("mic",60434),thumbsdownFilled:g("thumbsdown-filled",60435),thumbsupFilled:g("thumbsup-filled",60436),coffee:g("coffee",60437),snake:g("snake",60438),game:g("game",60439),vr:g("vr",60440),chip:g("chip",60441),piano:g("piano",60442),music:g("music",60443),micFilled:g("mic-filled",60444),repoFetch:g("repo-fetch",60445),copilot:g("copilot",60446),lightbulbSparkle:g("lightbulb-sparkle",60447),robot:g("robot",60448),sparkleFilled:g("sparkle-filled",60449),diffSingle:g("diff-single",60450),diffMultiple:g("diff-multiple",60451),surroundWith:g("surround-with",60452),share:g("share",60453),gitStash:g("git-stash",60454),gitStashApply:g("git-stash-apply",60455),gitStashPop:g("git-stash-pop",60456),vscode:g("vscode",60457),vscodeInsiders:g("vscode-insiders",60458),codeOss:g("code-oss",60459),runCoverage:g("run-coverage",60460),runAllCoverage:g("run-all-coverage",60461),coverage:g("coverage",60462),githubProject:g("github-project",60463),mapVertical:g("map-vertical",60464),foldVertical:g("fold-vertical",60464),mapVerticalFilled:g("map-vertical-filled",60465),foldVerticalFilled:g("fold-vertical-filled",60465),goToSearch:g("go-to-search",60466),percentage:g("percentage",60467),sortPercentage:g("sort-percentage",60467),attach:g("attach",60468),goToEditingSession:g("go-to-editing-session",60469),editSession:g("edit-session",60470),codeReview:g("code-review",60471),copilotWarning:g("copilot-warning",60472),python:g("python",60473),copilotLarge:g("copilot-large",60474),copilotWarningLarge:g("copilot-warning-large",60475),keyboardTab:g("keyboard-tab",60476),copilotBlocked:g("copilot-blocked",60477),copilotNotConnected:g("copilot-not-connected",60478),flag:g("flag",60479),lightbulbEmpty:g("lightbulb-empty",60480),symbolMethodArrow:g("symbol-method-arrow",60481),copilotUnavailable:g("copilot-unavailable",60482),repoPinned:g("repo-pinned",60483),keyboardTabAbove:g("keyboard-tab-above",60484),keyboardTabBelow:g("keyboard-tab-below",60485),gitPullRequestDone:g("git-pull-request-done",60486)},D2={dialogError:g("dialog-error","error"),dialogWarning:g("dialog-warning","warning"),dialogInfo:g("dialog-info","info"),dialogClose:g("dialog-close","close"),treeItemExpanded:g("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:g("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:g("tree-filter-on-type-off","list-selection"),treeFilterClear:g("tree-filter-clear","close"),treeItemLoading:g("tree-item-loading","loading"),menuSelection:g("menu-selection","check"),menuSubmenu:g("menu-submenu","chevron-right"),menuBarMore:g("menubar-more","more"),scrollbarButtonLeft:g("scrollbar-button-left","triangle-left"),scrollbarButtonRight:g("scrollbar-button-right","triangle-right"),scrollbarButtonUp:g("scrollbar-button-up","triangle-up"),scrollbarButtonDown:g("scrollbar-button-down","triangle-down"),toolBarMore:g("toolbar-more","more"),quickInputBack:g("quick-input-back","arrow-left"),dropDownButton:g("drop-down-button",60084),symbolCustomColor:g("symbol-customcolor",60252),exportIcon:g("export",60332),workspaceUnspecified:g("workspace-unspecified",60355),newLine:g("newline",60394),thumbsDownFilled:g("thumbsdown-filled",60435),thumbsUpFilled:g("thumbsup-filled",60436),gitFetch:g("git-fetch",60445),lightbulbSparkleAutofix:g("lightbulb-sparkle-autofix",60447),debugBreakpointPending:g("debug-breakpoint-pending",60377)},re={...I2,...D2},Mo;(function(e){function t(i){return i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(Mo||(Mo={}));var $t;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(f){const p=t.exec(f.id);if(!p)return i(re.error);const[,m,w]=p,x=["codicon","codicon-"+m];return w&&x.push("codicon-modifier-"+w.substring(1)),x}e.asClassNameArray=i;function r(f){return i(f).join(" ")}e.asClassName=r;function s(f){return"."+i(f).join(".")}e.asCSSSelector=s;function n(f){return f&&typeof f=="object"&&typeof f.id=="string"&&(typeof f.color>"u"||Mo.isThemeColor(f.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(f){const p=o.exec(f);if(!p)return;const[,m]=p;return{id:m}}e.fromString=a;function c(f){return{id:f}}e.fromId=c;function l(f,p){let m=f.id;const w=m.lastIndexOf("~");return w!==-1&&(m=m.substring(0,w)),p&&(m=`${m}~${p}`),{id:m}}e.modify=l;function u(f){const p=f.id.lastIndexOf("~");if(p!==-1)return f.id.substring(p+1)}e.getModifier=u;function d(f,p){return f.id===p.id&&f.color?.id===p.color?.id}e.isEqual=d})($t||($t={}));var sm=new RegExp(`\\$\\(${$t.iconNameExpression}(?:${$t.iconModifierExpression})?\\)`,"g"),P2=new RegExp(`(\\\\)?${sm.source}`,"g");function A2(e){return e.replace(P2,(t,i)=>i?t:`\\${t}`)}var AB=new RegExp(`\\\\${sm.source}`,"g"),TB=new RegExp(`(\\s)?(\\\\)?${sm.source}(\\s)?`,"g"),RB=new RegExp(`\\$\\(${$t.iconNameCharacter}+\\)`,"g"),F5;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(F5||(F5={}));var Fo=class A${static lift(t){const i=new A$(t.value,t);return i.uris=t.uris,i.baseUri=t.baseUri?y.revive(t.baseUri):void 0,i}constructor(t="",i=!1){if(this.value=t,typeof this.value!="string")throw ke("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=i.isTrusted??void 0,this.supportThemeIcons=i.supportThemeIcons??!1,this.supportHtml=i.supportHtml??!1)}appendText(t,i=0){return this.value+=T2(this.supportThemeIcons?A2(t):t).replace(/([ \t]+)/g,(r,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\
`:`

`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,i){return this.value+=`
${R2(i,t)}
`,this}appendLink(t,i,r){return this.value+="[",this.value+=this.c(i,"]"),this.value+="](",this.value+=this.c(String(t),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(t,i){const r=new RegExp(dn(i),"g");return t.replace(r,(s,n)=>t.charAt(n-1)!=="\\"?`\\${s}`:s)}};function Gr(e){return e instanceof Fo?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function T2(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function R2(e,t){const i=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,r=i>=3?i+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function L2(e){const t=[],i=e.split("|").map(s=>s.trim());e=i[0];const r=i[1];if(r){const s=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function nm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var wn=nm();function O5(e){wn=e}var U5=/[&<>"']/,N2=new RegExp(U5.source,"g"),H5=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,M2=new RegExp(H5.source,"g"),F2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},B5=e=>F2[e];function Oi(e,t){if(t){if(U5.test(e))return e.replace(N2,B5)}else if(H5.test(e))return e.replace(M2,B5);return e}var O2=/(^|[^\[])\^/g;function nt(e,t){let i=typeof e=="string"?e:e.source;t=t||"";const r={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(O2,"$1"),i=i.replace(s,o),r},getRegex:()=>new RegExp(i,t)};return r}function j5(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var Ec={exec:()=>null};function W5(e,t){const i=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=i.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function Sc(e,t,i){const r=e.length;if(r===0)return"";let s=0;for(;s<r;){const n=e.charAt(r-s-1);if(n===t&&!i)s++;else if(n!==t&&i)s++;else break}return e.slice(0,r-s)}function U2(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return-1}function z5(e,t,i,r){const s=t.href,n=t.title?Oi(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:i,href:s,title:n,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:i,href:s,title:n,text:Oi(o)}}function H2(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const r=i[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var rh=class{options;rules;lexer;constructor(e){this.options=e||wn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Sc(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=H2(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=Sc(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Sc(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=Sc(t[0],`
`).split(`
`),r="",s="";const n=[];for(;i.length>0;){let o=!1;const a=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))a.push(i[c]),o=!0;else if(!o)a.push(i[c]);else break;i=i.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${l}`:l,s=s?`${s}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=d,i.length===0)break;const f=n[n.length-1];if(f?.type==="code")break;if(f?.type==="blockquote"){const p=f,m=p.raw+`
`+i.join(`
`),w=this.blockquote(m);n[n.length-1]=w,r=r.substring(0,r.length-p.raw.length)+w.raw,s=s.substring(0,s.length-p.text.length)+w.text;break}else if(f?.type==="list"){const p=f,m=p.raw+`
`+i.join(`
`),w=this.list(m);n[n.length-1]=w,r=r.substring(0,r.length-f.raw.length)+w.raw,s=s.substring(0,s.length-p.raw.length)+w.raw,i=m.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const n=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),d=e.split(`
`,1)[0],f=!u.trim(),p=0;if(this.options.pedantic?(p=2,l=u.trimStart()):f?p=t[1].length+1:(p=t[2].search(/[^ ]/),p=p>4?1:p,l=u.slice(p),p+=t[1].length),f&&/^ *$/.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),a=!0),!a){const x=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),k=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),$=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),A=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const G=e.split(`
`,1)[0];if(d=G,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),$.test(d)||A.test(d)||x.test(d)||k.test(e))break;if(d.search(/[^ ]/)>=p||!d.trim())l+=`
`+d.slice(p);else{if(f||u.search(/[^ ]/)>=4||$.test(u)||A.test(u)||k.test(u))break;l+=`
`+d}!f&&!d.trim()&&(f=!0),c+=G+`
`,e=e.substring(G.length+1),u=d.slice(p)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let m=null,w;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(w=m[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!m,checked:w,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=W5(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<i.length;o++)n.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(W5(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Oi(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const n=Sc(i.slice(0,-1),"\\");if((i.length-n.length)%2===0)return}else{const n=U2(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);n&&(r=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),z5(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=t[r.toLowerCase()];if(!s){const n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return z5(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const n=[...r[0]].length-1;let o,a,c=n,l=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(r=u.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const d=[...r[0]][0].length,f=e.slice(0,n+r.index+d+a);if(Math.min(n,a)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Oi(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return t[2]==="@"?(i=Oi(t[1]),r="mailto:"+i):(i=Oi(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=Oi(t[0]),r="mailto:"+i;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);i=Oi(t[0]),t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=Oi(t[0]),{type:"text",raw:t[0],text:i}}}},B2=/^(?: *(?:\n|$))+/,j2=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,W2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,kc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,z2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,_5=/(?:[*+-]|\d{1,9}[.)])/,V5=nt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,_5).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),om=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_2=/^[^\n]+/,am=/(?!\s*\])(?:\\.|[^\[\]\\])+/,V2=nt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",am).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),q2=nt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_5).getRegex(),sh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",cm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,G2=nt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",cm).replace("tag",sh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),q5=nt(om).replace("hr",kc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sh).getRegex(),J2=nt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",q5).getRegex(),lm={blockquote:J2,code:j2,def:V2,fences:W2,heading:z2,hr:kc,html:G2,lheading:V5,list:q2,newline:B2,paragraph:q5,table:Ec,text:_2},G5=nt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",kc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sh).getRegex(),Z2={...lm,table:G5,paragraph:nt(om).replace("hr",kc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",G5).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sh).getRegex()},Q2={...lm,html:nt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",cm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ec,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:nt(om).replace("hr",kc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",V5).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},J5=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Y2=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Z5=/^( {2,}|\\)\n(?!\s*$)/,X2=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,$c="\\p{P}\\p{S}",K2=nt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,$c).getRegex(),eP=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,tP=nt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,$c).getRegex(),iP=nt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,$c).getRegex(),rP=nt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,$c).getRegex(),sP=nt(/\\([punct])/,"gu").replace(/punct/g,$c).getRegex(),nP=nt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),oP=nt(cm).replace("(?:-->|$)","-->").getRegex(),aP=nt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",oP).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),nh=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,cP=nt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",nh).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Q5=nt(/^!?\[(label)\]\[(ref)\]/).replace("label",nh).replace("ref",am).getRegex(),Y5=nt(/^!?\[(ref)\](?:\[\])?/).replace("ref",am).getRegex(),lP=nt("reflink|nolink(?!\\()","g").replace("reflink",Q5).replace("nolink",Y5).getRegex(),um={_backpedal:Ec,anyPunctuation:sP,autolink:nP,blockSkip:eP,br:Z5,code:Y2,del:Ec,emStrongLDelim:tP,emStrongRDelimAst:iP,emStrongRDelimUnd:rP,escape:J5,link:cP,nolink:Y5,punctuation:K2,reflink:Q5,reflinkSearch:lP,tag:aP,text:X2,url:Ec},uP={...um,link:nt(/^!?\[(label)\]\((.*?)\)/).replace("label",nh).getRegex(),reflink:nt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",nh).getRegex()},hm={...um,escape:nt(J5).replace("])","~|])").getRegex(),url:nt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},hP={...hm,br:nt(Z5).replace("{2,}","*").getRegex(),text:nt(hm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},oh={normal:lm,gfm:Z2,pedantic:Q2},Cc={normal:um,gfm:hm,breaks:hP,pedantic:uP},bn=class Eb{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||wn,this.options.tokenizer=this.options.tokenizer||new rh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:oh.normal,inline:Cc.normal};this.options.pedantic?(i.block=oh.pedantic,i.inline=Cc.pedantic):this.options.gfm&&(i.block=oh.gfm,this.options.breaks?i.inline=Cc.breaks:i.inline=Cc.gfm),this.tokenizer.rules=i}static get rules(){return{block:oh,inline:Cc}}static lex(t,i){return new Eb(i).lex(t)}static lexInline(t,i){return new Eb(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],r=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=i[i.length-1],r&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s),r=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let r,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.emStrong(t,o,l)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),i.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),i.push(r);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=t.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(n)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,s=i[i.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},ah=class{options;parser;constructor(e){this.options=e||wn}space(e){return""}code({text:e,lang:t,escaped:i}){const r=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+Oi(r)+'">'+(i?s:Oi(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Oi(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let r="";for(let o=0;o<e.items.length;o++){const a=e.items[o];r+=this.listitem(a)}const s=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+s+n+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let r="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];i="";for(let o=0;o<n.length;o++)i+=this.tablecell(n[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const r=this.parser.parseInline(i),s=j5(e);if(s===null)return r;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image({href:e,title:t,text:i}){const r=j5(e);if(r===null)return i;e=r;let s=`<img src="${e}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},dm=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},yn=class Sb{options;renderer;textRenderer;constructor(t){this.options=t||wn,this.options.renderer=this.options.renderer||new ah,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new dm}static parse(t,i){return new Sb(i).parse(t)}static parseInline(t,i){return new Sb(i).parseInline(t)}parse(t,i=!0){let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}const o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);i?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):r+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,i){i=i||this.renderer;let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}const o=n;switch(o.type){case"escape":{r+=i.text(o);break}case"html":{r+=i.html(o);break}case"link":{r+=i.link(o);break}case"image":{r+=i.image(o);break}case"strong":{r+=i.strong(o);break}case"em":{r+=i.em(o);break}case"codespan":{r+=i.codespan(o);break}case"br":{r+=i.br(o);break}case"del":{r+=i.del(o);break}case"text":{r+=i.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},ch=class{options;constructor(e){this.options=e||wn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},dP=class{defaults=nm();options=this.setOptions;parse=this.parseMarkdown(bn.lex,yn.parse);parseInline=this.parseMarkdown(bn.lexInline,yn.parseInline);Parser=yn;Renderer=ah;TextRenderer=dm;Lexer=bn;Tokenizer=rh;Hooks=ch;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const n of s.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)i=i.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=r;i=i.concat(this.walkTokens(s.items,t));break}default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new ah(this.defaults);for(const n in i.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=i.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new rh(this.defaults);for(const n in i.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=i.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new ch;for(const n in i.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=i.hooks[o],c=s[o];ch.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(d=>c.call(s,d));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,n=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return bn.lex(e,t??this.defaults)}parser(e,t){return yn.parse(e,t??this.defaults)}parseMarkdown(e,t){return(r,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Oi(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}},xn=new dP;function rt(e,t){return xn.parse(e,t)}rt.options=rt.setOptions=function(e){return xn.setOptions(e),rt.defaults=xn.defaults,O5(rt.defaults),rt},rt.getDefaults=nm,rt.defaults=wn,rt.use=function(...e){return xn.use(...e),rt.defaults=xn.defaults,O5(rt.defaults),rt},rt.walkTokens=function(e,t){return xn.walkTokens(e,t)},rt.parseInline=xn.parseInline,rt.Parser=yn,rt.parser=yn.parse,rt.Renderer=ah,rt.TextRenderer=dm,rt.Lexer=bn,rt.lexer=bn.lex,rt.Tokenizer=rh,rt.Hooks=ch,rt.parse=rt;var LB=rt.options,NB=rt.setOptions,MB=rt.use,FB=rt.walkTokens,OB=rt.parseInline,UB=yn.parse,HB=bn.lex;function fP(e){return JSON.stringify(e,pP)}function X5(e){let t=JSON.parse(e);return t=Ct(t),t}function pP(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function Ct(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return y.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof ae||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Ct(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Ct(e[i],t+1))}return e}var Jr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),gP=/^(.+)\/(.+?)(;.+)?$/;function K5(e,t){const i=gP.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}var ni=Symbol("unset"),mP=class{constructor(){this.root=new fm,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||qt.empty()}get entries(){return this.root.children?.entries()||qt.empty()}insert(e,t,i){this.c(e,r=>r._value=t,i)}mutate(e,t){this.c(e,i=>i._value=t(i._value===ni?void 0:i._value))}mutatePath(e,t){this.c(e,()=>{},i=>t(i))}delete(e){const t=this.b(e);if(!t)return;let i=t.length-1;const r=t[i].node._value;if(r!==ni){for(this.a--,t[i].node._value=ni;i>0;i--){const{node:s,part:n}=t[i];if(s.children?.size||s._value!==ni)break;t[i-1].node.children.delete(n)}return r}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const i=t[t.length-1].node;for(let r=t.length-1;r>0;r--){const s=t[r-1];if(s.node.children.delete(t[r].part),s.node.children.size>0||s.node._value!==ni)break}for(const r of e6(i))r._value!==ni&&(this.a--,yield r._value);i===this.root&&(this.root._value=ni,this.root.children=void 0)}find(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return;t=r}return t._value===ni?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;if(r._value!==ni)return!0;t=r}return!1}hasKeyOrChildren(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return!0}hasKey(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return t._value!==ni}b(e){const t=[{part:"",node:this.root}];let i=0;for(const r of e){const s=t[i].node.children?.get(r);if(!s)return;t.push({part:r,node:s}),i++}return t}c(e,t,i){let r=this.root;for(const o of e){if(r.children)if(r.children.has(o))r=r.children.get(o);else{const a=new fm;r.children.set(o,a),r=a}else{const a=new fm;r.children=new Map([[o,a]]),r=a}i?.(r)}const s=r._value===ni?0:1;t(r);const n=r._value===ni?0:1;this.a+=n-s}*values(){for(const{_value:e}of e6(this.root))e!==ni&&(yield e)}};function*e6(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const r of i.children.values())t.push(r)}}var fm=class{constructor(){this._value=ni}get value(){return this._value===ni?void 0:this._value}set value(e){this._value=e===void 0?ni:e}},Ui=class lo{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new lo(t,i)}delta(t=0,i=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+i))}equals(t){return lo.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return lo.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return lo.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const r=t.lineNumber|0,s=i.lineNumber|0;if(r===s){const n=t.column|0,o=i.column|0;return n-o}return r-s}clone(){return new lo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new lo(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Oe=class Tt{constructor(t,i,r,s){t>r||t===r&&i>s?(this.startLineNumber=r,this.startColumn=s,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=r,this.endColumn=s)}isEmpty(){return Tt.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Tt.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return Tt.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return Tt.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return Tt.plusRange(this,t)}static plusRange(t,i){let r,s,n,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,s=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,s=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,s=t.startColumn),i.endLineNumber>t.endLineNumber?(n=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(n=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Tt(r,s,n,o)}intersectRanges(t){return Tt.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return r<a?(r=a,s=c):r===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),r>n||r===n&&s>o?null:new Tt(r,s,n,o)}equalsRange(t){return Tt.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return Tt.getEndPosition(this)}static getEndPosition(t){return new Ui(t.endLineNumber,t.endColumn)}getStartPosition(){return Tt.getStartPosition(this)}static getStartPosition(t){return new Ui(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new Tt(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new Tt(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return Tt.collapseToStart(this)}static collapseToStart(t){return new Tt(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Tt.collapseToEnd(this)}static collapseToEnd(t){return new Tt(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Tt(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,i=t){return new Tt(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new Tt(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static areOnlyIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber-1||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn-1||i.endLineNumber<t.startLineNumber-1||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn-1)}static compareRangesUsingStarts(t,i){if(t&&i){const n=t.startLineNumber|0,o=i.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const d=t.endColumn|0,f=i.endColumn|0;return d-f}return l-u}return a-c}return n-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},vP=class{static insert(e,t){return{range:new Oe(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}},t6=class{constructor(){this.a=new Map,this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),se(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new wP(this,e,t);return this.b.set(e,i),se(()=>{const r=this.b.get(e);!r||r!==i||(this.b.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},wP=class extends ne{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},i6;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(i6||(i6={}));var r6;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(r6||(r6={}));var s6;(function(e){const t=new Map;t.set(0,re.symbolMethod),t.set(1,re.symbolFunction),t.set(2,re.symbolConstructor),t.set(3,re.symbolField),t.set(4,re.symbolVariable),t.set(5,re.symbolClass),t.set(6,re.symbolStruct),t.set(7,re.symbolInterface),t.set(8,re.symbolModule),t.set(9,re.symbolProperty),t.set(10,re.symbolEvent),t.set(11,re.symbolOperator),t.set(12,re.symbolUnit),t.set(13,re.symbolValue),t.set(15,re.symbolEnum),t.set(14,re.symbolConstant),t.set(15,re.symbolEnum),t.set(16,re.symbolEnumMember),t.set(17,re.symbolKeyword),t.set(27,re.symbolSnippet),t.set(18,re.symbolText),t.set(19,re.symbolColor),t.set(20,re.symbolFile),t.set(21,re.symbolReference),t.set(22,re.symbolCustomColor),t.set(23,re.symbolFolder),t.set(24,re.symbolTypeParameter),t.set(25,re.account),t.set(26,re.issues);function i(o){let a=t.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=re.symbolProperty),a}e.toIcon=i;function r(o){switch(o){case 0:return h(820,null);case 1:return h(821,null);case 2:return h(822,null);case 3:return h(823,null);case 4:return h(824,null);case 5:return h(825,null);case 6:return h(826,null);case 7:return h(827,null);case 8:return h(828,null);case 9:return h(829,null);case 10:return h(830,null);case 11:return h(831,null);case 12:return h(832,null);case 13:return h(833,null);case 14:return h(834,null);case 15:return h(835,null);case 16:return h(836,null);case 17:return h(837,null);case 18:return h(838,null);case 19:return h(839,null);case 20:return h(840,null);case 21:return h(841,null);case 22:return h(842,null);case 23:return h(843,null);case 24:return h(844,null);case 25:return h(845,null);case 26:return h(846,null);case 27:return h(847,null);default:return""}}e.toLabel=r;const s=new Map;s.set("method",0),s.set("function",1),s.set("constructor",2),s.set("field",3),s.set("variable",4),s.set("class",5),s.set("struct",6),s.set("interface",7),s.set("module",8),s.set("property",9),s.set("event",10),s.set("operator",11),s.set("unit",12),s.set("value",13),s.set("constant",14),s.set("enum",15),s.set("enum-member",16),s.set("enumMember",16),s.set("keyword",17),s.set("snippet",27),s.set("text",18),s.set("color",19),s.set("file",20),s.set("reference",21),s.set("customcolor",22),s.set("folder",23),s.set("type-parameter",24),s.set("typeParameter",24),s.set("account",25),s.set("issue",26);function n(o,a){let c=s.get(o);return typeof c>"u"&&!a&&(c=9),c}e.fromString=n})(s6||(s6={}));var n6;(function(e){e[e.Deprecated=1]="Deprecated"})(n6||(n6={}));var o6;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(o6||(o6={}));var a6;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(a6||(a6={}));var c6;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(c6||(c6={}));var lh;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(lh||(lh={}));var uh;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(uh||(uh={}));var l6;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(l6||(l6={}));var u6;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(u6||(u6={}));var h6;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(h6||(h6={}));var d6;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(d6||(d6={}));function bP(e){return e&&y.isUri(e.uri)&&Oe.isIRange(e.range)&&(Oe.isIRange(e.originSelectionRange)||Oe.isIRange(e.targetSelectionRange))}var f6;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(f6||(f6={}));var BB={17:h(848,null),16:h(849,null),4:h(850,null),13:h(851,null),8:h(852,null),9:h(853,null),21:h(854,null),23:h(855,null),7:h(856,null),0:h(857,null),11:h(858,null),10:h(859,null),19:h(860,null),5:h(861,null),1:h(862,null),2:h(863,null),20:h(864,null),15:h(865,null),18:h(866,null),24:h(867,null),3:h(868,null),6:h(869,null),14:h(870,null),22:h(871,null),25:h(872,null),12:h(873,null)},p6;(function(e){e[e.Deprecated=1]="Deprecated"})(p6||(p6={}));var g6;(function(e){const t=new Map;t.set(0,re.symbolFile),t.set(1,re.symbolModule),t.set(2,re.symbolNamespace),t.set(3,re.symbolPackage),t.set(4,re.symbolClass),t.set(5,re.symbolMethod),t.set(6,re.symbolProperty),t.set(7,re.symbolField),t.set(8,re.symbolConstructor),t.set(9,re.symbolEnum),t.set(10,re.symbolInterface),t.set(11,re.symbolFunction),t.set(12,re.symbolVariable),t.set(13,re.symbolConstant),t.set(14,re.symbolString),t.set(15,re.symbolNumber),t.set(16,re.symbolBoolean),t.set(17,re.symbolArray),t.set(18,re.symbolObject),t.set(19,re.symbolKey),t.set(20,re.symbolNull),t.set(21,re.symbolEnumMember),t.set(22,re.symbolStruct),t.set(23,re.symbolEvent),t.set(24,re.symbolOperator),t.set(25,re.symbolTypeParameter);function i(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=re.symbolProperty),o}e.toIcon=i;const r=new Map;r.set(0,20),r.set(1,8),r.set(2,8),r.set(3,8),r.set(4,5),r.set(5,0),r.set(6,9),r.set(7,3),r.set(8,2),r.set(9,15),r.set(10,7),r.set(11,1),r.set(12,4),r.set(13,14),r.set(14,18),r.set(15,13),r.set(16,13),r.set(17,13),r.set(18,13),r.set(19,17),r.set(20,13),r.set(21,16),r.set(22,6),r.set(23,10),r.set(24,11),r.set(25,24);function s(n){let o=r.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(g6||(g6={}));var yP=class{static asEditOperation(e){return vP.replace(Oe.lift(e.range),e.text)}static isTextEdit(e){const t=e;return typeof t.text=="string"&&Oe.isIRange(t.range)}},Oo=class Ks{static{this.Comment=new Ks("comment")}static{this.Imports=new Ks("imports")}static{this.Region=new Ks("region")}static fromValue(t){switch(t){case"comment":return Ks.Comment;case"imports":return Ks.Imports;case"region":return Ks.Region}return new Ks(t)}constructor(t){this.value=t}},m6;(function(e){e[e.AIGenerated=1]="AIGenerated"})(m6||(m6={}));var hh;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(hh||(hh={}));var pm;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(pm||(pm={}));var Uo;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Uo||(Uo={}));var Ic;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Ic||(Ic={}));var Dc;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Dc||(Dc={}));var v6;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(v6||(v6={}));var w6;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(w6||(w6={}));var b6;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(b6||(b6={}));var jB=new t6,WB=new t6,y6;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(y6||(y6={}));var dh;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(dh||(dh={}));var x6;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(x6||(x6={}));var hi;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(hi||(hi={})),function(e){function t(c,l){return l-c}e.compare=t;const i=Object.create(null);i[e.Error]=h(2112,null),i[e.Warning]=h(2113,null),i[e.Info]=h(2114,null);function r(c){return i[c]||""}e.toString=r;const s=Object.create(null);s[e.Error]=h(2115,null),s[e.Warning]=h(2116,null),s[e.Info]=h(2117,null);function n(c){return s[c]||""}e.toStringPlural=n;function o(c){switch(c){case wt.Error:return e.Error;case wt.Warning:return e.Warning;case wt.Info:return e.Info;case wt.Ignore:return e.Hint}}e.fromSeverity=o;function a(c){switch(c){case e.Error:return wt.Error;case e.Warning:return wt.Warning;case e.Info:return wt.Info;case e.Hint:return wt.Ignore}}e.toSeverity=a}(hi||(hi={}));var E6;(function(e){const t="";function i(s){return r(s,!0)}e.makeKey=i;function r(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(hi.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=r})(E6||(E6={}));var zB=j("markerService"),xP=class{constructor(){this.a=new Map}add(e,t){ii(Me(e)),ii(yt(t)),ii(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}dispose(){this.a.forEach(e=>{sy(e.dispose)&&e.dispose()}),this.a.clear()}},Ft=new xP,S6=j("fileService"),En;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(En||(En={}));var Ho;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(Ho||(Ho={}));var k6;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(k6||(k6={}));var $6;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})($6||($6={}));var ye;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(ye||(ye={}));var C6=class T$ extends Error{static create(t,i){const r=new T$(t.toString(),i);return I6(r,i),r}constructor(t,i){super(t),this.code=i}};function I6(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function fh(e){if(!e)return ye.Unknown;if(e instanceof C6)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return ye.Unknown;switch(t[1]){case ye.FileExists:return ye.FileExists;case ye.FileIsADirectory:return ye.FileIsADirectory;case ye.FileNotADirectory:return ye.FileNotADirectory;case ye.FileNotFound:return ye.FileNotFound;case ye.FileTooLarge:return ye.FileTooLarge;case ye.FileWriteLocked:return ye.FileWriteLocked;case ye.NoPermissions:return ye.NoPermissions;case ye.Unavailable:return ye.Unavailable}return ye.Unknown}function EP(e){if(e instanceof gm)return e.fileOperationResult;switch(fh(e)){case ye.FileNotFound:return 1;case ye.FileIsADirectory:return 0;case ye.FileNotADirectory:return 9;case ye.FileWriteLocked:return 5;case ye.NoPermissions:return 6;case ye.FileExists:return 4;case ye.FileTooLarge:return 7;default:return 10}}var D6;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(D6||(D6={}));var P6;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(P6||(P6={}));var _B=class Np{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new yi(()=>{const r=Ds.forUris(()=>this.c);return r.fill(this.rawAdded.map(s=>[s,!0])),r}),this.f=new yi(()=>{const r=Ds.forUris(()=>this.c);return r.fill(this.rawUpdated.map(s=>[s,!0])),r}),this.g=new yi(()=>{const r=Ds.forUris(()=>this.c);return r.fill(this.rawDeleted.map(s=>[s,!0])),r}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const r of t){switch(r.type){case 1:this.rawAdded.push(r.resource);break;case 0:this.rawUpdated.push(r.resource);break;case 2:this.rawDeleted.push(r.resource);break}this.b!==Np.a&&(typeof r.cId=="number"?this.b===void 0?this.b=r.cId:this.b!==r.cId&&(this.b=Np.a):this.b!==void 0&&(this.b=Np.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...r){if(!t)return!1;const s=r.length>0;return!!((!s||r.includes(1))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!s||r.includes(0))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!s||r.includes(2))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},gm=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},A6;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(A6||(A6={}));var T6;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(T6||(T6={}));var SP="";function R6(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var VB=class vi{static{this.KB=1024}static{this.MB=vi.KB*vi.KB}static{this.GB=vi.MB*vi.KB}static{this.TB=vi.GB*vi.KB}static formatSize(t){return on(t)||(t=0),t<vi.KB?h(2025,null,t.toFixed(0)):t<vi.MB?h(2026,null,(t/vi.KB).toFixed(2)):t<vi.GB?h(2027,null,(t/vi.MB).toFixed(2)):t<vi.TB?h(2028,null,(t/vi.GB).toFixed(2)):h(2029,null,(t/vi.TB).toFixed(2))}},kP=class extends ne{constructor(e,t="",i="",r=!0,s){super(),this.j=this.B(new P),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=i,this.z=r,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},qB=class kb{constructor(){this.id=kb.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const r of t)r.length&&(i.length?i=[...i,new kb,...r]:i=r);return i}static{this.ID="vs.actions.separator"}async run(){}},GB=class R$ extends kP{static{this.ID="vs.actions.empty"}constructor(){super(R$.ID,h(44,null),void 0,!1)}},$P={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},CP={id:"default",displayName:h(4278,null),providerDisplayName:h(4279,null)},L6;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(L6||(L6={}));var N6;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(N6||(N6={}));function ph(e){if(Ps(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function M6(e){if(Ps(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function mm(e){if(Ps(e)||ph(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function gh(e){if(Ps(e))return!1;const t=e;return y.isUri(t?.base?.resource)&&y.isUri(t?.input1?.resource)&&y.isUri(t?.input2?.resource)&&y.isUri(t?.result?.resource)}var F6;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(F6||(F6={}));var O6;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(O6||(O6={}));var IP=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},JB=new IP,U6;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(U6||(U6={}));var DP=class extends ne{};function Ps(e){return e instanceof DP}function PP(e){const t=e;return y.isUri(t?.preferredResource)}function AP(e){const t=e;return Ps(t?.primary)&&Ps(t?.secondary)}function TP(e){const t=e;return Ps(t?.modified)&&Ps(t?.original)}var H6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(H6||(H6={}));var B6;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(B6||(B6={}));var As;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(As||(As={}));var RP=class{getOriginalUri(e,t){if(!e)return;if(gh(e))return W6.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===As.BOTH)return{primary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===As.ANY)return this.getOriginalUri(r,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===As.PRIMARY?r:s}}if(ph(e)||M6(e)||mm(e)||gh(e))return;const i=PP(e)?e.preferredResource:e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return AP(e)||mm(e)?{primary:e.primary,secondary:e.secondary}:TP(e)||ph(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(gh(e))return W6.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===As.BOTH)return{primary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===As.ANY)return this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===As.PRIMARY?r:s}}if(ph(e)||M6(e)||mm(e)||gh(e))return;const i=e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},j6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(j6||(j6={}));var W6=new RP,z6;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(z6||(z6={}));var LP=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(fc);for(const[i,r]of this.c)this.e(i,r,t);this.c.clear()}e(e,t,i){const r=i.createInstance(t);this.d.set(e,r)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return bo(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),se(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Ft.add($P.EditorFactory,new LP);var _6;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(_6||(_6={}));var Pc=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return NP(e,this)}},V6=new Map,vm=new WeakMap;function NP(e,t){const i=vm.get(e);if(i)return i;const r=MP(e,t);if(r){let s=V6.get(r)??0;s++,V6.set(r,s);const n=s===1?r:`${r}#${s}`;return vm.set(e,n),n}}function MP(e,t){const i=vm.get(e);if(i)return i;const r=t.owner?OP(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return r+s}else return r+n;const o=t.referenceFn;if(o!==void 0&&(s=wm(o),s!==void 0))return r+s;if(t.owner!==void 0){const a=FP(t.owner,e);if(a!==void 0)return r+a}}function FP(e,t){for(const i in e)if(e[i]===t)return i}var q6=new Map,G6=new WeakMap;function OP(e){const t=G6.get(e);if(t)return t;const i=J6(e)??"Object";let r=q6.get(i)??0;r++,q6.set(i,r);const s=r===1?i:`${i}#${r}`;return G6.set(e,s),s}function J6(e){const t=e.constructor;if(t)return t.name==="Object"?void 0:t.name}function wm(e){const t=e.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(r?r[1]:void 0)?.trim()}var bm=(e,t)=>e===t;function ym(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!ym(e[i],t[i]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const i=e,r=t,s=Object.keys(i),n=Object.keys(r),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!ym(i[a],r[a]))return!1;return!0}return!1}var Sn;function xm(e){Sn?Sn instanceof Z6?Sn.loggers.push(e):Sn=new Z6([Sn,e]):Sn=e}function Wt(){return Sn}var Em=void 0;function UP(e){Em=e}function HP(e){Em&&Em(e)}var Z6=class{constructor(e){this.loggers=e}handleObservableCreated(e){for(const t of this.loggers)t.handleObservableCreated(e)}handleOnListenerCountChanged(e,t){for(const i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e){for(const t of this.loggers)t.handleAutorunCreated(e)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(const r of this.loggers)r.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(const r of this.loggers)r.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}},Q6;function BP(e){Q6=e}var Y6;function jP(e){Y6=e}var Sm;function WP(e){Sm=e}var zP=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,r=t===void 0?e:t;return Sm({owner:i,debugName:()=>{const s=wm(r);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(o)return`${this.debugName}.${o[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:r},s=>r(this.read(s),s))}flatten(){return Sm({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(Q6(this,t)),this}keepObserved(e){return e.add(Y6(this)),this}get a(){return this.get()}},km=class extends zP{constructor(){super(),this.b=new Set,Wt()?.handleObservableCreated(this)}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c(),t!==this.b.size&&Wt()?.handleOnListenerCountChanged(this,this.b.size)}removeObserver(e){const t=this.b.delete(e);t&&this.b.size===0&&this.f(),t&&Wt()?.handleOnListenerCountChanged(this,this.b.size)}c(){}f(){}log(){const e=!!Wt();return HP(this),e||Wt()?.handleObservableCreated(this),this}debugGetObservers(){return this.b}};function mh(e,t){const i=new X6(e,t);try{e(i)}finally{i.finish()}}function _P(e,t,i){e?t(e):mh(t,i)}var X6=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],Wt()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():wm(this._fn)}updateObserver(e,t){if(!this.a){K6("Transaction already finished!"),mh(i=>{i.updateObserver(e,t)});return}this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;if(!e){K6("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.a=null,Wt()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this.a}};function K6(e){const t=new Error("BugIndicatingErrorRecovery: "+e);Vt(t),console.error("recovered from an error that indicates a bug",t)}function $m(e,t){let i;return typeof e=="string"?i=new Pc(void 0,e,void 0):i=new Pc(e,void 0,void 0),new Cm(i,t,bm)}var Cm=class extends km{get debugName(){return this.g.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this.g=e,this.h=i,this.d=t,Wt()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this.d}set(e,t,i){if(i===void 0&&this.h(this.d,e))return;let r;t||(t=r=new X6(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.j(e),Wt()?.handleObservableUpdated(this,{oldValue:s,newValue:e,change:i,didChange:!0,hadValue:!0});for(const n of this.b)t.updateObserver(n,this),n.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.d}`}j(e){this.d=e}debugGetState(){return{value:this.d}}debugSetValue(e){this.d=e}};function Im(e){return new Dm(new Pc(void 0,void 0,e),e,void 0)}var e7;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(e7||(e7={}));var Dm=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i){this._debugNameData=e,this._runFn=t,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.i=!1,this.h=this.j?.createChangeSummary(void 0),Wt()?.handleAutorunCreated(this),this.k(),yo(this)}dispose(){if(!this.c){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),Wt()?.handleAutorunDisposed(this),xo(this)}}k(){const e=this.g;this.g=this.f,this.f=e,this.a=3;try{if(!this.c){Wt()?.handleAutorunStarted(this);const t=this.h;try{this.i=!0,this.j&&(this.j.beforeUpdate?.(this,t),this.h=this.j.createChangeSummary(t)),this._runFn(this,t)}catch(i){$u(i)}finally{this.i=!1}}}finally{this.c||Wt()?.handleAutorunFinished(this);for(const t of this.g)t.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.a===3&&(this.a=1),this.b++}endUpdate(e){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const t of this.f)if(t.reportChanges(),this.a===2)break}this.a!==3&&this.k()}while(this.a!==3)}finally{this.b--}ty(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.l(e)&&(this.a=1)}handleChange(e,t){if(this.l(e)){Wt()?.handleAutorunDependencyChanged(this,e,t);try{(this.j?this.j.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.h):!0)&&(this.a=2)}catch(i){$u(i)}}}l(e){return this.f.has(e)&&!this.g.has(e)}readObservable(e){if(!this.i)throw new Li("The reader object cannot be used outside its compute function!");if(this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}debugGetState(){return{isRunning:this.i,updateCount:this.b,dependencies:this.f,state:this.a}}debugRerun(){this.i?this.a=2:this.k()}};(function(e){e.Observer=Dm})(Im||(Im={}));function VP(e,t){return new Zr(new Pc(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,e.equalsFn??bm)}WP(VP);var t7;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(t7||(t7={}));var Zr=class extends km{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r=void 0,s){super(),this._debugNameData=e,this._computeFn=t,this.s=i,this.t=r,this.u=s,this.g=0,this.h=void 0,this.j=0,this.k=new Set,this.l=new Set,this.m=void 0,this.n=!1,this.p=!1,this.q=!1,this.x=null,this.y=!1,this.m=this.s?.createChangeSummary(void 0)}f(){this.g=0,this.h=void 0,Wt()?.handleDerivedCleared(this);for(const e of this.k)e.removeObserver(this);this.k.clear(),this.t?.()}get(){if(this.p,this.b.size===0){let t;try{this.y=!0;let i;this.s&&(i=this.s.createChangeSummary(void 0),this.s.beforeUpdate?.(this,i)),t=this._computeFn(this,i)}finally{this.y=!1}return this.f(),t}else{do{if(this.g===1){for(const t of this.k)if(t.reportChanges(),this.g===2)break}this.g===1&&(this.g=3),this.g!==3&&this.w()}while(this.g!==3);return this.h}}w(){const e=this.l;this.l=this.k,this.k=e;const t=this.g!==0,i=this.h;this.g=3;let r=!1;this.p=!0,this.q=!1;try{const s=this.m;try{this.y=!0,this.s&&(this.s.beforeUpdate?.(this,s),this.m=this.s?.createChangeSummary(s)),this.h=this._computeFn(this,s)}finally{this.y=!1;for(const n of this.l)n.removeObserver(this);this.l.clear()}r=this.q||t&&!this.u(i,this.h),Wt()?.handleObservableUpdated(this,{oldValue:i,newValue:this.h,change:void 0,didChange:r,hadValue:t})}catch(s){$u(s)}if(this.p=!1,!this.q&&r)for(const s of this.b)s.handleChange(this,void 0);else this.q=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.n)throw new Li("Cyclic deriveds are not supported yet!");this.j++,this.n=!0;try{const t=this.j===1;if(this.g===3&&(this.g=1,!t))for(const i of this.b)i.handlePossibleChange(this);if(t)for(const i of this.b)i.beginUpdate(this)}finally{this.n=!1}}endUpdate(e){if(this.j--,this.j===0){const t=[...this.b];for(const i of t)i.endUpdate(this);if(this.x){const i=[...this.x];this.x=null;for(const r of i)r.endUpdate(this)}}ty(()=>this.j>=0)}handlePossibleChange(e){if(this.g===3&&this.k.has(e)&&!this.l.has(e)){this.g=1;for(const t of this.b)t.handlePossibleChange(this)}}handleChange(e,t){if(this.k.has(e)&&!this.l.has(e)){Wt()?.handleDerivedDependencyChanged(this,e,t);let i=!1;try{i=this.s?this.s.handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.m):!0}catch(s){$u(s)}const r=this.g===3;if(i&&(this.g===1||r)&&(this.g=2,r))for(const s of this.b)s.handlePossibleChange(this)}}readObservable(e){if(!this.y)throw new Li("The reader object cannot be used outside its compute function!");e.addObserver(this);const t=e.get();return this.k.add(e),this.l.delete(e),t}reportChange(e){if(!this.y)throw new Li("The reader object cannot be used outside its compute function!");this.q=!0;for(const t of this.b)t.handleChange(this,e)}addObserver(e){const t=!this.b.has(e)&&this.j>0;super.addObserver(e),t&&(this.x&&this.x.has(e)?this.x.delete(e):e.beginUpdate(this))}removeObserver(e){this.b.has(e)&&this.j>0&&(this.x||(this.x=new Set),this.x.add(e)),super.removeObserver(e)}debugGetState(){return{state:this.g,updateCount:this.j,isComputing:this.p,dependencies:this.k,value:this.h}}debugSetValue(e){this.h=e}setValue(e,t,i){this.h=e;const r=this.b;t.updateObserver(this,this);for(const s of r)s.handleChange(this,i)}},qP=class L${static fromFn(t){return new L$(t())}constructor(t){this.a=$m(this,void 0),this.promiseResult=this.a,this.promise=t.then(i=>(mh(r=>{this.a.set(new i7(i,void 0),r)}),i),i=>{throw mh(r=>{this.a.set(new i7(void 0,i),r)}),i})}},i7=class{constructor(e,t){this.data=e,this.error=t}getDataOrThrow(){if(this.error)throw this.error;return this.data}};function r7(...e){let t,i,r;return e.length===3?[t,i,r]=e:[i,r]=e,new kn(new Pc(t,void 0,r),i,r,()=>kn.globalTransaction,bm)}var kn=class extends km{constructor(e,t,i,r,s){super(),this.k=e,this.l=t,this._getValue=i,this.n=r,this.p=s,this.h=!1,this.s=n=>{const o=this._getValue(n),a=this.g,c=!this.h||!this.p(a,o);let l=!1;c&&(this.g=o,this.h&&(l=!0,_P(this.n(),u=>{Wt()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h});for(const d of this.b)u.updateObserver(d,this),d.handleChange(this,void 0)},()=>{const u=this.q();return"Event fired"+(u?`: ${u}`:"")})),this.h=!0),l||Wt()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h})}}q(){return this.k.getDebugName(this)}get debugName(){const e=this.q();return"From Event"+(e?`: ${e}`:"")}c(){this.j=this.l(this.s)}f(){this.j.dispose(),this.j=void 0,this.h=!1,this.g=void 0}get(){return this.j?(this.h||this.s(void 0),this.g):this._getValue(void 0)}debugSetValue(e){this.g=e}};(function(e){e.Observer=kn;function t(i,r){let s=!1;kn.globalTransaction===void 0&&(kn.globalTransaction=i,s=!0);try{r()}finally{s&&(kn.globalTransaction=void 0)}}e.batchEventsGlobally=t})(r7||(r7={}));function GP(e){const t=new s7(!1,void 0);return e.addObserver(t),se(()=>{e.removeObserver(t)})}jP(GP);function JP(e,t){const i=new s7(!0,t);e.addObserver(i);try{i.beginUpdate(e)}finally{i.endUpdate(e)}return se(()=>{e.removeObserver(i)})}BP(JP);var s7=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a===1&&this.b&&(this.c?this.c(e.get()):e.reportChanges()),this.a--}handlePossibleChange(e){}handleChange(e,t){}},vh;function ZP(e){vh||(vh=new n7,xm(vh)),vh.addFilteredObj(e)}var n7=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return QP([Bo(KP("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[Bo(" "),_i(Qr(e.oldValue,70),{color:"red",strikeThrough:!0}),Bo(" "),_i(Qr(e.newValue,60),{color:"green"})]:[Bo(" (unchanged)")]:[Bo(" "),_i(Qr(e.newValue,60),{color:"green"}),Bo(" (initial)")]}handleObservableCreated(e){if(e instanceof Zr){const t=e;if(this.f.set(t,new Set),!1){const r=[];t.__debugUpdating=r;const s=t.beginUpdate;t.beginUpdate=o=>(r.push(o),s.apply(t,[o]));const n=t.endUpdate;t.endUpdate=o=>{const a=r.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",t.debugName,o.debugName),r.splice(a,1),n.apply(t,[o])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this.c(e)){if(e instanceof Zr){this._handleDerivedRecomputed(e,t);return}console.log(...this.d([jo("observable value changed"),_i(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}}formatChanges(e){if(e.size!==0)return _i(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,i){this.c(e)&&this.f.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this.c(e))return;const i=this.f.get(e);i&&(console.log(...this.d([jo("derived recomputed"),_i(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([jo("derived cleared"),_i(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([jo("observable from event triggered"),_i(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this.c(e)&&this.f.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,i){this.c(e)&&this.f.get(e).add(t)}handleAutorunStarted(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([jo("autorun"),_i(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([jo("transaction"),_i(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function QP(e){const t=new Array,i=[];let r="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(r+=`%c${o.text}`,t.push(o.style),o.data&&i.push(...o.data)):"data"in o&&i.push(...o.data)}s(e);const n=[r,...t];return n.push(...i),n}function Bo(e){return _i(e,{color:"black"})}function jo(e){return _i(eA(`${e}: `,10),{color:"black",bold:!0})}function _i(e,t={color:"black"}){function i(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const r={color:t.color};return t.strikeThrough&&(r["text-decoration"]="line-through"),t.bold&&(r["font-weight"]="bold"),{text:e,style:i(r)}}function Qr(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?YP(e,t):XP(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function YP(e,t){let i="[ ",r=!0;for(const s of e){if(r||(i+=", "),i.length-5>t){i+="...";break}r=!1,i+=`${Qr(s,t-i.length)}`}return i+=" ]",i}function XP(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const n=e.toString();return n.length<=t?n:n.substring(0,t-3)+"..."}const i=J6(e);let r=i?i+"(":"{ ",s=!0;for(const[n,o]of Object.entries(e)){if(s||(r+=", "),r.length-5>t){r+="...";break}s=!1,r+=`${n}: ${Qr(o,t-r.length)}`}return r+=i?")":" }",r}function KP(e,t){let i="";for(let r=1;r<=t;r++)i+=e;return i}function eA(e,t){for(;e.length<t;)e+=" ";return e}var tA=class $b{static createHost(t,i){return new $b(t,i)}static createClient(t,i){return new $b(t,i)}constructor(t,i){this.b=t,this.c=i,this.a=this.b({handleNotification:n=>{const o=n,a=this.c().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:n=>{const o=n;try{return{type:"result",value:this.c().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const r=new Proxy({},{get:(n,o)=>async(...a)=>{const c=await this.a.sendRequest([o,a]);if(c.type==="error")throw c.value;return c.value}}),s=new Proxy({},{get:(n,o)=>(...a)=>{this.a.sendNotification([o,a])}});this.api={notifications:s,requests:r}}};function iA(e,t){const i=globalThis;let r=[],s;const{channel:n,handler:o}=rA({sendNotification:c=>{s?s.sendNotification(c):r.push(c)}});let a;return(i.$$debugValueEditor_debugChannels??(i.$$debugValueEditor_debugChannels={}))[e]=c=>{a=t(),s=c;for(const l of r)c.sendNotification(l);return r=[],o},tA.createClient(n,()=>{if(!a)throw new Error("Not supported");return a})}function rA(e){let t;return{channel:r=>(t=r,{sendNotification:s=>{e.sendNotification(s)},sendRequest:s=>{throw new Error("not supported")}}),handler:{handleRequest:r=>r.type==="notification"?t?.handleNotification(r.data):t?.handleRequest(r.data)}}}function o7(e,t){const i=e.split(`
`);let r=-1;for(const s of i.slice(1)){if(r++,t&&t.test(s))continue;const n=sA(s);if(n)return n}}function sA(e){const t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};const i=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(i)return{fileName:i[1],line:parseInt(i[2]),column:parseInt(i[3]),id:e}}var nA=class{constructor(){this.a=void 0}throttle(e,t){this.a===void 0&&(this.a=setTimeout(()=>{this.a=void 0,e()},t))}dispose(){this.a!==void 0&&clearTimeout(this.a)}};function a7(e,t){for(const i in t)e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?a7(e[i],t[i]):e[i]=t[i]}function c7(e,t){for(const i in t)t[i]===null?delete e[i]:e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?c7(e[i],t[i]):e[i]=t[i]}var oA=class vu{static{this.a=void 0}static getInstance(){return vu.a===void 0&&(vu.a=new vu),vu.a}j(){const t=[],i=[...this.h];if(i.length===0)return;const r=i.flatMap(n=>n.debugGetUpdatingObservers()??[]).map(n=>n.observer),s=new Set;for(;r.length>0;){const n=r.shift();if(s.has(n))continue;s.add(n);const o=this.n(n,a=>{s.has(a)||r.push(a)});o&&t.push(o)}return{names:i.map(n=>n.getDebugName()??"tx"),affected:t}}k(t){const i=this.f.get(t);if(!i){Vt(new Li("No info found"));return}return i}m(t){const i=this.f.get(t);if(!i){Vt(new Li("No info found"));return}return i}n(t,i){if(t instanceof Zr){const r=[...t.debugGetObservers()];for(const c of r)i(c);const s=this.k(t);if(!s)return;const n=t.debugGetState(),o={name:t.debugName,instanceId:s.instanceId,updateCount:n.updateCount},a=[...s.changedObservables].map(c=>this.f.get(c)?.instanceId).filter(xi);if(n.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(n.state){case 0:return{...o,type:"observable/derived",state:"noValue"};case 3:return{...o,type:"observable/derived",state:"upToDate"};case 2:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(t instanceof Dm){const r=this.m(t);if(!r)return;const s={name:t.debugName,instanceId:r.instanceId,updateCount:r.updateCount},n=[...r.changedObservables].map(o=>this.f.get(o).instanceId);if(t.debugGetState().isRunning)return{...s,type:"autorun",state:"updating",changedDependencies:n};switch(t.debugGetState().state){case 3:return{...s,type:"autorun",state:"upToDate"};case 2:return{...s,type:"autorun",state:"stale",changedDependencies:n};case 1:return{...s,type:"autorun",state:"possiblyStale"}}}}p(t){const i=this.k(t);if(i)return{name:t.debugName,instanceId:i.instanceId}}q(t){if(t instanceof Zr)return{name:t.toString(),instanceId:this.k(t)?.instanceId};const i=this.m(t);if(i)return{name:t.toString(),instanceId:i.instanceId}}constructor(){this.b=0,this.c=0,this.e=new Map,this.f=new WeakMap,this.g=new Map,this.h=new Set,this.i=iA("observableDevTools",()=>({notifications:{setDeclarationIdFilter:t=>{},logObservableValue:t=>{console.log("logObservableValue",t)},flushUpdates:()=>{this.w()},resetUpdates:()=>{this.r=null,this.i.api.notifications.handleChange(this.u,!0)}},requests:{getDeclarations:()=>{const t={};for(const i of this.e.values())t[i.id]=i;return{decls:t}},getSummarizedInstances:()=>null,getObservableValueInfo:t=>({observers:[...this.g.get(t).debugGetObservers()].map(r=>this.q(r)).filter(xi)}),getDerivedInfo:t=>{const i=this.g.get(t);return{dependencies:[...i.debugGetState().dependencies].map(r=>this.p(r)).filter(xi),observers:[...i.debugGetObservers()].map(r=>this.q(r)).filter(xi)}},getAutorunInfo:t=>({dependencies:[...this.g.get(t).debugGetState().dependencies].map(r=>this.p(r)).filter(xi)}),getTransactionState:()=>this.j(),setValue:(t,i)=>{const r=this.g.get(t);if(r instanceof Zr)r.debugSetValue(i);else if(r instanceof Cm)r.debugSetValue(i);else if(r instanceof kn)r.debugSetValue(i);else throw new Li("Observable is not supported");const s=[...r.debugGetObservers()];for(const n of s)n.beginUpdate(r);for(const n of s)n.handleChange(r,void 0);for(const n of s)n.endUpdate(r)},getValue:t=>{const i=this.g.get(t);if(i instanceof Zr)return Qr(i.debugGetState().value,200);if(i instanceof Cm)return Qr(i.debugGetState().value,200)}}})),this.r=null,this.s=new nA,this.u={},this.w=()=>{this.r!==null&&(this.i.api.notifications.handleChange(this.r,!1),this.r=null)}}v(t){c7(this.u,t),this.r===null?this.r=t:a7(this.r,t),this.s.throttle(this.w,10)}x(t){let i=!0,r;const s=Error;for(;;){const o=s.stackTraceLimit;s.stackTraceLimit=i?6:20;const a=new Error().stack;s.stackTraceLimit=o;let c=o7(a,/[/\\]observableInternal[/\\]|\.observe|[/\\]util(s)?\./);if(!i&&!c&&(c=o7(a,/[/\\]observableInternal[/\\]|\.observe/)),c){r=c;break}if(!i){console.error("Could not find location for declaration",new Error().stack),r={fileName:"unknown",line:0,column:0,id:"unknown"};break}i=!1}let n=this.e.get(r.id);return n===void 0&&(n={id:this.b++,type:t,url:r.fileName,line:r.line,column:r.column},this.e.set(r.id,n),this.v({decls:{[n.id]:n}})),n.id}handleObservableCreated(t){const r={declarationId:this.x("observable/value"),instanceId:this.c++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this.f.set(t,r)}handleOnListenerCountChanged(t,i){const r=this.k(t);if(r){if(r.listenerCount===0&&i>0){const s=t instanceof Zr?"observable/derived":"observable/value";this.g.set(r.instanceId,t),this.v({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,formattedValue:r.lastValue,type:s,name:t.debugName}}})}else r.listenerCount>0&&i===0&&(this.v({instances:{[r.instanceId]:null}}),this.g.delete(r.instanceId));r.listenerCount=i}}handleObservableUpdated(t,i){if(t instanceof Zr){this._handleDerivedRecomputed(t,i);return}const r=this.k(t);r&&i.didChange&&(r.lastValue=Qr(i.newValue,30),r.listenerCount>0&&this.v({instances:{[r.instanceId]:{formattedValue:r.lastValue}}}))}handleAutorunCreated(t){const r={declarationId:this.x("autorun"),instanceId:this.c++,updateCount:0,changedObservables:new Set};this.f.set(t,r),this.g.set(r.instanceId,t),r&&this.v({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,runCount:0,type:"autorun",name:t.debugName}}})}handleAutorunDisposed(t){const i=this.m(t);i&&(this.v({instances:{[i.instanceId]:null}}),this.f.delete(t),this.g.delete(i.instanceId))}handleAutorunDependencyChanged(t,i,r){const s=this.m(t);s&&s.changedObservables.add(i)}handleAutorunStarted(t){}handleAutorunFinished(t){const i=this.m(t);i&&(i.changedObservables.clear(),i.updateCount++,this.v({instances:{[i.instanceId]:{runCount:i.updateCount}}}))}handleDerivedDependencyChanged(t,i,r){const s=this.k(t);s&&s.changedObservables.add(i)}_handleDerivedRecomputed(t,i){const r=this.k(t);if(!r)return;const s=Qr(i.newValue,30);r.updateCount++,r.changedObservables.clear(),r.lastValue=s,r.listenerCount>0&&this.v({instances:{[r.instanceId]:{formattedValue:s,recomputationCount:r.updateCount}}})}handleDerivedCleared(t){const i=this.k(t);i&&(i.lastValue=void 0,i.changedObservables.clear(),i.listenerCount>0&&this.v({instances:{[i.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(t){this.h.add(t)}handleEndTransaction(t){this.h.delete(t)}};UP(ZP);var aA=!1;aA&&xm(new n7),ko&&ko.VSCODE_DEV_DEBUG&&xm(oA.getInstance());var Yr=class Ji{static fromTo(t,i){return new Ji(t,i)}static addRange(t,i){let r=0;for(;r<i.length&&i[r].endExclusive<t.start;)r++;let s=r;for(;s<i.length&&i[s].start<=t.endExclusive;)s++;if(r===s)i.splice(r,0,t);else{const n=Math.min(t.start,i[r].start),o=Math.max(t.endExclusive,i[s-1].endExclusive);i.splice(r,s-r,new Ji(n,o))}}static tryCreate(t,i){if(!(t>i))return new Ji(t,i)}static ofLength(t){return new Ji(0,t)}static ofStartAndLength(t,i){return new Ji(t,t+i)}static emptyAt(t){return new Ji(t,t)}constructor(t,i){if(this.start=t,this.endExclusive=i,t>i)throw new Li(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(t){return new Ji(this.start+t,this.endExclusive+t)}deltaStart(t){return new Ji(this.start+t,this.endExclusive)}deltaEnd(t){return new Ji(this.start,this.endExclusive+t)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(t){return this.start===t.start&&this.endExclusive===t.endExclusive}containsRange(t){return this.start<=t.start&&t.endExclusive<=this.endExclusive}contains(t){return this.start<=t&&t<this.endExclusive}join(t){return new Ji(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}intersect(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);if(i<=r)return new Ji(i,r)}intersectionLength(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return Math.max(0,r-i)}intersects(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return i<r}intersectsOrTouches(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return i<=r}isBefore(t){return this.endExclusive<=t.start}isAfter(t){return this.start>=t.endExclusive}slice(t){return t.slice(this.start,this.endExclusive)}substring(t){return t.substring(this.start,this.endExclusive)}clip(t){if(this.isEmpty)throw new Li(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,t))}clipCyclic(t){if(this.isEmpty)throw new Li(`Invalid clipping range: ${this.toString()}`);return t<this.start?this.endExclusive-(this.start-t)%this.length:t>=this.endExclusive?this.start+(t-this.start)%this.length:t}map(t){const i=[];for(let r=this.start;r<this.endExclusive;r++)i.push(t(r));return i}forEach(t){for(let i=this.start;i<this.endExclusive;i++)t(i)}},$n="**",Pm="/",wh="[/\\\\]",bh="[^/\\\\]",cA=/\//g;function l7(e,t){switch(e){case 0:return"";case 1:return`${bh}*?`;default:return`(?:${wh}|${bh}+${wh}${t?`|${wh}${bh}+`:""})*?`}}function Am(e,t){if(!e)return[];const i=[];let r=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!r&&!s){i.push(n),n="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&i.push(n),i}function u7(e){if(!e)return"";let t="";const i=Am(e,Pm);if(i.every(r=>r===$n))t=".*";else{let r=!1;i.forEach((s,n)=>{if(s===$n){if(r)return;t+=l7(2,n===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let d;u==="-"?d=u:(u==="^"||u==="!")&&!l?d="^":u===Pm?d="":d=dn(u),l+=d;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const f=`(?:${Am(a,",").map(p=>u7(p)).join("|")})`;t+=f,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=bh;continue;case"*":t+=l7(1);continue;default:t+=dn(u)}}n<i.length-1&&(i[n+1]!==$n||n+2<i.length)&&(t+=wh)}r=s===$n})}return t}var lA=/^\*\*\/\*\.[\w\.-]+$/,uA=/^\*\*\/([\w\.-]+)\/?$/,hA=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,dA=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,fA=/^\*\*((\/[\w\.-]+)+)\/?$/,pA=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,h7=new eg(1e4),d7=function(){return!1},Sr=function(){return null};function Tm(e,t){if(!e)return Sr;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const r=`${i}_${!!t.trimForExclusions}`;let s=h7.get(r);if(s)return f7(s,e);let n;return lA.test(i)?s=gA(i.substr(4),i):(n=uA.exec(Rm(i,t)))?s=mA(n[1],i):(t.trimForExclusions?dA:hA).test(i)?s=vA(i,t):(n=fA.exec(Rm(i,t)))?s=p7(n[1].substr(1),i,!0):(n=pA.exec(Rm(i,t)))?s=p7(n[1],i,!1):s=wA(i),h7.set(r,s),f7(s,e)}function f7(e,t){if(typeof t=="string")return e;const i=function(r,s){return Ju(r,t.base,!Wr)?e(I3(r.substr(t.base.length),Yi),s):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function Rm(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function gA(e,t){return function(i,r){return typeof i=="string"&&i.endsWith(e)?t:null}}function mA(e,t){const i=`/${e}`,r=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(i)||o.endsWith(r)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function vA(e,t){const i=g7(e.slice(1,-1).split(",").map(a=>Tm(a,t)).filter(a=>a!==Sr),e),r=i.length;if(!r)return Sr;if(r===1)return i[0];const s=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function p7(e,t,i){const r=Yi===Ne.sep,s=r?e:e.replace(cA,Yi),n=Yi+s,o=Ne.sep+e;let a;return i?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!r&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!r&&c===e)?t:null},a.allPaths=[(i?"*/":"./")+e],a}function wA(e){try{const t=new RegExp(`^${u7(e)}$`);return function(i){return t.lastIndex=0,typeof i=="string"&&t.test(i)?e:null}}catch{return Sr}}function Ac(e,t,i){return!e||typeof t!="string"?!1:Wo(e)(t,void 0,i)}function Wo(e,t={}){if(!e)return d7;if(typeof e=="string"||bA(e)){const i=Tm(e,t);if(i===Sr)return d7;const r=function(s,n){return!!i(s,n)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return yA(e,t)}function bA(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function yA(e,t){const i=g7(Object.getOwnPropertyNames(e).map(a=>xA(a,e[a],t)).filter(a=>a!==Sr)),r=i.length;if(!r)return Sr;if(!i.some(a=>!!a.requiresSiblings)){if(r===1)return i[0];const a=function(u,d){let f;for(let p=0,m=i.length;p<m;p++){const w=i[p](u,d);if(typeof w=="string")return w;Is(w)&&(f||(f=[]),f.push(w))}return f?(async()=>{for(const p of f){const m=await p;if(typeof m=="string")return m}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,d)=>d.allPaths?u.concat(d.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,d;for(let f=0,p=i.length;f<p;f++){const m=i[f];m.requiresSiblings&&l&&(c||(c=ki(a)),u||(u=c.substr(0,c.length-wg(a).length)));const w=m(a,c,u,l);if(typeof w=="string")return w;Is(w)&&(d||(d=[]),d.push(w))}return d?(async()=>{for(const f of d){const p=await f;if(typeof p=="string")return p}return null})():null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function xA(e,t,i){if(t===!1)return Sr;const r=Tm(e,i);if(r===Sr)return Sr;if(typeof t=="boolean")return r;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!r(o,a))return null;const u=s.replace("$(basename)",()=>c),d=l(u);return Is(d)?d.then(f=>f?e:null):d?e:null};return n.requiresSiblings=!0,n}}return r}function g7(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const r=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=r.length;a<c;a++)s.push(t)}else s=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const d=a.charCodeAt(u-1);if(d===47||d===92)break}c=a.substr(u)}const l=r.indexOf(c);return l!==-1?s[l]:null};n.basenames=r,n.patterns=s,n.allBasenames=r;const o=e.filter(a=>!a.basenames);return o.push(n),o}var EA=j("notebookDocumentService"),Lm=["W","X","Y","Z","a","b","c","d","e","f"],SA=new RegExp(`^[${Lm.join("")}]+`),m7=7;function Nm(e){if(e.scheme!==z.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(SA,""),m7),r=Tu(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:r,fragment:null})}}function kA(e,t){const i=t.toString(m7),s=`${i.length<Lm.length?Lm[i.length-1]:"z"}${i}s${cg(ae.fromString(e.scheme),!0,!0)}`;return e.with({scheme:z.vscodeNotebookCell,fragment:s})}function $A(e){if(e.scheme!==z.vscodeNotebookMetadata)return;const t=Tu(e.fragment).toString();return e.with({scheme:t,fragment:null})}function CA(e){const t=`${cg(ae.fromString(e.scheme),!0,!0)}`;return e.with({scheme:z.vscodeNotebookMetadata,fragment:t})}function v7(e){if(e.scheme!==z.vscodeNotebookCellOutput)return;const t=new URLSearchParams(e.query),i=t.get("openIn");if(!i)return;const r=t.get("outputId")??void 0,s=Nm(e.with({scheme:z.vscodeNotebookCell,query:null})),n=t.get("outputIndex")?parseInt(t.get("outputIndex")||"",10):void 0,o=s?s.notebook:e.with({scheme:t.get("notebookScheme")||z.file,fragment:null,query:null}),a=t.get("cellIndex")?parseInt(t.get("cellIndex")||"",10):void 0;return{notebook:o,openIn:i,outputId:r,outputIndex:n,cellHandle:s?.handle,cellFragment:e.fragment,cellIndex:a}}var IA=class{constructor(){this.a=new Nt}getNotebook(e){if(e.scheme===z.vscodeNotebookCell){const t=Nm(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}if(e.scheme===z.vscodeNotebookCellOutput){const t=v7(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Je(EA,IA,1);var zo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(zo||(zo={}));var ZB=["application/json","application/javascript","text/html","image/svg+xml",Jr.latex,Jr.markdown,"image/png","image/jpeg",Jr.text],QB=[Jr.latex,Jr.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",Jr.text],w7;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(w7||(w7={}));var Tc;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Tc||(Tc={}));var b7;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(b7||(b7={}));var y7;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(y7||(y7={}));var x7;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(x7||(x7={}));var rr;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(rr||(rr={}));var E7;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(E7||(E7={}));var S7;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(S7||(S7={}));var k7;(function(e){e.scheme=z.vscodeNotebookMetadata;function t(r){return CA(r)}e.generate=t;function i(r){return $A(r)}e.parse=i})(k7||(k7={}));var yh;(function(e){e.scheme=z.vscodeNotebookCell;function t(l,u){return kA(l,u)}e.generate=t;function i(l){return Nm(l)}e.parse=i;function r(l,u){return l.with({scheme:z.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"editor",outputId:u??"",notebookScheme:l.scheme!==z.file?l.scheme:""}).toString()})}e.generateCellOutputUriWithId=r;function s(l,u,d){return l.with({scheme:z.vscodeNotebookCellOutput,fragment:u.fragment,query:new URLSearchParams({openIn:"notebook",outputIndex:String(d)}).toString()})}e.generateCellOutputUriWithIndex=s;function n(l,u,d,f,p){return l.with({scheme:z.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"notebookOutputEditor",notebook:l.toString(),cellIndex:String(d),outputId:f,outputIndex:String(p)}).toString()})}e.generateOutputEditorUri=n;function o(l){return v7(l)}e.parseCellOutputUri=o;function a(l,u,d){return e.generate(l,u).with({scheme:d})}e.generateCellPropertyUri=a;function c(l,u){if(l.scheme===u)return e.parse(l.with({scheme:e.scheme}))}e.parseCellPropertyUri=c})(yh||(yh={}));var YB=new I("notebookEditorCursorAtBoundary","none"),XB=new I("notebookEditorCursorAtLineBoundary","none"),$7;(function(e){e.default="default",e.option="option"})($7||($7={}));var C7;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(C7||(C7={}));var I7;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(I7||(I7={}));var KB=class Mp{static{this.d="notebook/"}static create(t,i){return`${Mp.d}${t}/${i??t}`}static parse(t){if(t.startsWith(Mp.d)){const i=t.substring(Mp.d.length).split("/");if(i.length===2)return{notebookType:i[0],viewType:i[1]}}}};function D7(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var DA=new TextDecoder;function PA(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let r=TA(t);const s=ae.concat(t.map(o=>ae.wrap(o))),n=FA(s);return r=r||n.byteLength!==s.byteLength,{data:n,didCompression:r}}var xh="\x1B[A",Mm=xh.split("").map(e=>e.charCodeAt(0)),AA=10;function TA(e){let t=!1;return e.forEach((i,r)=>{if(r===0||i.length<xh.length)return;const s=e[r-1],n=i.subarray(0,xh.length);if(n[0]===Mm[0]&&n[1]===Mm[1]&&n[2]===Mm[2]){const o=s.lastIndexOf(AA);if(o===-1)return;t=!0,e[r-1]=s.subarray(0,o),e[r]=i.subarray(xh.length)}}),t}function RA(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function LA(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var NA=8,MA=13;function FA(e){return!e.buffer.includes(NA)&&!e.buffer.includes(MA)?e:ae.fromString(LA(RA(DA.decode(e.buffer))))}var OA=j("productService"),UA="vscode://schemas/vscode-product",Eh=j("configurationService"),P7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(P7||(P7={}));function Fm(e,t){const i=Object.create(null);for(const r in e)A7(i,r,e[r],t);return i}function A7(e,t,i,r){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=i}catch{r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function HA(e,t){const i=t.split(".");T7(e,i)}function T7(e,t){if(!e)return;const i=t.shift();if(t.length===0){delete e[i];return}if(Object.keys(e).indexOf(i)!==-1){const r=e[i];typeof r=="object"&&!Array.isArray(r)&&(T7(r,t),Object.keys(r).length===0&&delete e[i])}}function Sh(e,t,i){function r(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=r(e,s);return typeof n>"u"?i:n}function BA(e){return e.replace(/[\[\]]/g,"")}function jA(e){let t=!1;const i=new Map,r=new Map;if(WA(e,u=>{if(e===u)return!0;const d=JSON.stringify(u);if(d.length<30)return!0;const f=i.get(d);if(!f){const p={schemas:[u]};return i.set(d,p),r.set(u,p),!0}return f.schemas.push(u),r.set(u,f),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(d,f)=>{if(f!==u){const p=r.get(f);if(p&&p.schemas.length>1)return p.id||(p.id=`_${o.length}`,o.push(p.schemas[0])),{$ref:`#/${n}/${p.id}`}}return f})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function _o(e){return typeof e=="object"&&e!==null}function WA(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)_o(l)&&o.push(l)},r=(...c)=>{for(const l of c)if(_o(l))for(const u in l){const d=l[u];_o(d)&&o.push(d)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)_o(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)_o(l)&&o.push(l);else _o(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),r(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var kh={JSONContribution:"base.contributions.json"};function R7(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var zA=class extends ne{constructor(){super(...arguments),this.a={},this.b={},this.c=this.B(new P),this.onDidChangeSchema=this.c.event,this.f=this.B(new P),this.onDidChangeSchemaAssociations=this.f.event}registerSchema(e,t,i){const r=R7(e);this.a[r]=t,this.c.fire(e),i&&i.add(se(()=>{delete this.a[r],this.c.fire(e)}))}registerSchemaAssociation(e,t){const i=R7(e);return this.b[i]||(this.b[i]=[]),this.b[i].includes(t)||(this.b[i].push(t),this.f.fire()),se(()=>{const r=this.b[i];if(r){const s=r.indexOf(t);s!==-1&&(r.splice(s,1),r.length===0&&delete this.b[i],this.f.fire())}})}notifySchemaChanged(e){this.c.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?jA(t):void 0}hasSchemaContent(e){return!!this.a[e]}getSchemaAssociations(){return this.b}},_A=new zA;Ft.add(kh.JSONContribution,_A);var L7;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(L7||(L7={}));var Cn={Configuration:"base.contributions.configuration"},N7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(N7||(N7={}));var $h={properties:{},patternProperties:{}},Ch={properties:{},patternProperties:{}},Ih={properties:{},patternProperties:{}},Dh={properties:{},patternProperties:{}},Ph={properties:{},patternProperties:{}},Ah={properties:{},patternProperties:{}},Rc={properties:{},patternProperties:{}},In="vscode://schemas/settings/resourceLanguage",Th=Ft.as(kh.JSONContribution),VA=class extends ne{constructor(){super(),this.a=[],this.n=new Set,this.r=this.B(new P),this.onDidSchemaChange=this.r.event,this.s=this.B(new P),this.onDidUpdateConfiguration=this.s.event,this.b=new Map,this.c={id:"defaultOverrides",title:h(1791,null),properties:{}},this.f=[this.c],this.m={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.g={},this.h=new Map,this.j={},Th.registerSchema(In,this.m),this.N()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const i=new Set;this.F(e,t,i),Th.registerSchema(In,this.m),this.r.fire(),this.s.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.G(e,t),Th.registerSchema(In,this.m),this.r.fire(),this.s.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.G(t,i),this.F(e,!1,i),Th.registerSchema(In,this.m),this.r.fire(),this.s.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.u(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}u(e,t){this.a.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const n in r){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=r[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),kr.test(n)){const c=this.z(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.y(n,c,s),i.push(...Lc(n))}else{const c=this.C(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.g[n];l&&(this.O(n,l),this.J(n,l))}}this.D(i)}deregisterDefaultConfigurations(e){const t=new Set;this.w(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}w(e,t){for(const i of e){const r=this.a.indexOf(i);r!==-1&&this.a.splice(r,1)}for(const{overrides:i,source:r}of e)for(const s in i){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>r?a.source?.id===r.id:a.value===i[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),kr.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.z(s,c.value,c.source,a);a&&!ry(a.value)?(n.configurationDefaultOverrideValue=a,this.y(s,a,r)):(this.b.delete(s),delete this.g[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.C(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.g[s];c&&(this.O(s,c),this.J(s,c))}t.add(s)}}this.M()}y(e,t,i){const r={type:"object",default:t.value,description:h(1792,null,BA(e)),$ref:In,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.g[e]=r,this.c.properties[e]=r}z(e,t,i,r){const s=r?.value||{},n=r?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(yt(a)&&(ec(s[o])||yt(s[o]))){if(s[o]={...s[o]??{},...a},i)for(const l in a)n.set(`${o}.${l}`,i)}else s[o]=a,i?n.set(o,i):n.delete(o)}return{value:s,source:n}}C(e,t,i,r){const s=this.g[e],n=r?.value??s?.defaultDefaultValue;let o=i;if(yt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(ec(n)||yt(n)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...yt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.w(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.u(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.G(e.removedConfigurations,i),e.addedConfigurations&&this.F(e.addedConfigurations,!1,i),this.r.fire(),this.s.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.r.fire()}registerOverrideIdentifiers(e){this.D(e),this.r.fire()}D(e){for(const t of e)this.n.add(t);this.M()}F(e,t,i){e.forEach(r=>{this.H(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.f.push(r),this.I(r)})}G(e,t){const i=r=>{if(r.properties)for(const s in r.properties){t.add(s);const n=this.g[s];n?.policy?.name&&this.h.delete(n.policy.name),delete this.g[s],this.L(s,r.properties[s])}r.allOf?.forEach(s=>i(s))};for(const r of e){i(r);const s=this.f.indexOf(r);s!==-1&&this.f.splice(s,1)}}H(e,t=!0,i,r,s=4,n){s=xt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&GA(c,l)){delete o[c];continue}l.source=i,l.defaultDefaultValue=o[c].default,this.O(c,l),kr.test(c)?l.scope=void 0:(l.scope=xt(l.scope)?s:l.scope,l.restricted=xt(l.restricted)?!!r?.includes(c):l.restricted);const u=o[c].hasOwnProperty("included")&&!o[c].included,d=o[c].policy?.name;u?(this.j[c]=o[c],d&&(this.h.set(d,c),n.add(c)),delete o[c]):(n.add(c),d&&this.h.set(d,c),this.g[c]=o[c],!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage))}const a=e.allOf;if(a)for(const c of a)this.H(c,t,i,r,s,n)}getConfigurations(){return this.f}getConfigurationProperties(){return this.g}getPolicyConfigurations(){return this.h}getExcludedConfigurationProperties(){return this.j}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}I(e){const t=i=>{const r=i.properties;if(r)for(const n in r)this.J(n,r[n]);i.allOf?.forEach(t)};t(e)}J(e,t){switch($h.properties[e]=t,t.scope){case 1:Ch.properties[e]=t;break;case 2:Dh.properties[e]=t;break;case 3:Ih.properties[e]=t;break;case 7:Ph.properties[e]=t;break;case 4:Ah.properties[e]=t;break;case 5:Rc.properties[e]=t;break;case 6:Rc.properties[e]=t,this.m.properties[e]=t;break}}L(e,t){switch(delete $h.properties[e],t.scope){case 1:delete Ch.properties[e];break;case 2:delete Dh.properties[e];break;case 3:delete Ih.properties[e];break;case 7:delete Ph.properties[e];break;case 4:delete Ah.properties[e];break;case 5:case 6:delete Rc.properties[e],delete this.m.properties[e];break}}M(){for(const e of this.n.values()){const t=`[${e}]`,i={type:"object",description:h(1793,null),errorMessage:h(1794,null),$ref:In};this.O(t,i),$h.properties[t]=i,Ch.properties[t]=i,Ih.properties[t]=i,Dh.properties[t]=i,Ph.properties[t]=i,Ah.properties[t]=i,Rc.properties[t]=i}}N(){const e={type:"object",description:h(1795,null),errorMessage:h(1796,null),$ref:In};$h.patternProperties[Ts]=e,Ch.patternProperties[Ts]=e,Ih.patternProperties[Ts]=e,Dh.patternProperties[Ts]=e,Ph.patternProperties[Ts]=e,Ah.patternProperties[Ts]=e,Rc.patternProperties[Ts]=e,this.r.fire()}O(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),ec(r)&&(r=t.defaultDefaultValue,s=void 0),ec(r)&&(r=qA(t.type)),t.default=r,t.defaultValueSource=s}},M7="\\[([^\\]]+)\\]",F7=new RegExp(M7,"g"),Ts=`^(${M7})+$`,kr=new RegExp(Ts);function Lc(e){const t=[];if(kr.test(e)){let i=F7.exec(e);for(;i?.length;){const r=i[1].trim();r&&t.push(r),i=F7.exec(e)}}return wo(t)}function qA(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Rh=new VA;Ft.add(Cn.Configuration,Rh);function GA(e,t){return e.trim()?kr.test(e)?h(1798,null,e):Rh.getConfigurationProperties()[e]!==void 0?h(1799,null,e):t.policy?.name&&Rh.getPolicyConfigurations().get(t.policy?.name)!==void 0?h(1800,null,e,t.policy?.name,Rh.getPolicyConfigurations().get(t.policy?.name)):null:h(1797,null)}var JA=j("requestService");function ZA(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function QA(e){return e.res.statusCode===204}async function YA(e){if(!ZA(e))throw new Error("Server returned "+e.res.statusCode);if(QA(e))return null;const i=(await CI(e.stream)).toString();try{return JSON.parse(i)}catch(r){throw r.message+=`:
`+i,r}}var Om=[],O7=void 0,U7=void 0;function XA(e=!0,t=!0){if(O7===e&&U7===t)return;O7=e,U7=t;const i=Ft.as(Cn.Configuration),r=Om;Om=[{id:"http",order:15,title:h(2209,null),type:"object",scope:2,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:t,markdownDescription:h(2210,null),restricted:!0}}},{id:"http",order:15,title:h(2211,null),type:"object",scope:1,properties:{"http.electronFetch":{type:"boolean",default:!1,description:h(2212,null),restricted:!0}}},{id:"http",order:15,title:h(2213,null),type:"object",scope:e?1:2,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:h(2214,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:h(2215,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:h(2216,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:h(2217,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:h(2218,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[h(2219,null),h(2220,null),h(2221,null),h(2222,null)],default:"override",markdownDescription:h(2223,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:h(2224,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:h(2225,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:h(2226,null,"`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}}],i.updateConfigurations({add:Om,remove:r})}XA();var Nc;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Nc||(Nc={}));var sr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(sr||(sr={}));var ej=class N$ extends ne{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.r=t,this.s=i,this.b=this.B(new Lu),this.onDidChangeStorage=this.b.event,this.c=sr.None,this.f=new Map,this.g=this.B(new vD(N$.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((i,r)=>this.w(r,i)),t.deleted?.forEach(i=>this.w(i,void 0))}finally{this.b.resume()}}w(t,i){if(this.c===sr.Closed)return;let r=!1;xt(i)?r=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),r=!0),r&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===sr.None&&(this.c=sr.Initialized,this.s.hint!==Nc.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,i){const r=this.f.get(t);return xt(r)?i:r}getBoolean(t,i){const r=this.get(t);return xt(r)?i:r==="true"}getNumber(t,i){const r=this.get(t);return xt(r)?i:parseInt(r,10)}getObject(t,i){const r=this.get(t);return xt(r)?i:X5(r)}async set(t,i,r=!1){if(this.c===sr.Closed)return;if(xt(i))return this.delete(t,r);const s=yt(i)||Array.isArray(i)?fP(i):String(i);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:r}),this.D()}async delete(t,i=!1){if(!(this.c===sr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.D()}async optimize(){if(this.c!==sr.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=sr.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===sr.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===Nc.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===Nc.STORAGE_IN_MEMORY}},Um=j("environmentService"),tj=Um,H7=j("IUriIdentityService"),B7;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(B7||(B7={}));function KA(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&y.isUri(t.location)&&y.isUri(t.globalStorageHome)&&y.isUri(t.settingsResource)&&y.isUri(t.keybindingsResource)&&y.isUri(t.tasksResource)&&y.isUri(t.snippetsHome)&&y.isUri(t.promptsHome)&&y.isUri(t.extensionsResource))}var eT=j("IUserDataProfilesService");function Lh(e,t,i,r,s,n){return{id:e,name:t,location:i,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Jt(i,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Jt(i,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Jt(i,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Jt(i,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Jt(i,"snippets"),promptsHome:n&&s?.useDefaultFlags?.prompts?n.promptsHome:Jt(i,"prompts"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Jt(i,"extensions.json"),cacheHome:Jt(r,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var j7=class extends ne{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,i,r,s){super(),this.s=t,this.t=i,this.u=r,this.y=s,this.g=this.B(new P),this.onDidChangeProfiles=this.g.event,this.h=this.B(new P),this.onWillCreateProfile=this.h.event,this.j=this.B(new P),this.onWillRemoveProfile=this.j.event,this.m=this.B(new P),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=Jt(this.s.userRoamingDataHome,"profiles"),this.f=Jt(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),i=[t];try{for(const s of this.N()){if(!s.name||!Me(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}i.push(Lh(er(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const r=new Map;if(i.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=y.parse(n),c=i.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=i.find(c=>c.id===o);a&&r.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:i,emptyWindows:r}}return this.z}D(){const t=Lh("__default__profile__",h(2618,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",r=new RegExp(`${dn(i)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=r.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${i} ${s+1}`;return this.createProfile(pc(Mt()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,i,r){return this.createProfile(pc(Mt()).toString(16),t,i,r)}async createProfile(t,i,r,s){return await this.F(t,i,r,s)}async F(t,i,r,s){if(!Me(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(i);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!r?.transient&&u.name===i))throw new Error(`Profile with ${i} name already exists`);const a=s?this.G(s):void 0;y.isUri(a)&&(r={...r,workspaces:[a]});const c=Lh(t,i,Jt(this.profilesHome,t),this.f,r,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await Ao.settled(l),a&&!y.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(i)}})(),this.n.set(i,n)),n}async updateProfile(t,i){const r=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?i.workspaces&&(o=n,o.workspaces=i.workspaces):o=Lh(n.id,i.name??n.name,n.location,this.f,{icon:i.icon===null?void 0:i.icon??n.icon,transient:i.transient??n.isTransient,useDefaultFlags:i.useDefaultFlags??n.useDefaultFlags,workspaces:i.workspaces??n.workspaces},this.defaultProfile);else if(i.workspaces){const a=n.workspaces?.filter(c=>!i.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&r.push(o)}if(!r.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],r);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(s=>s.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const r=[];this.j.fire({profile:i,join(s){r.push(s)}});try{await Promise.allSettled(r)}catch(s){this.y.error(s)}this.I([],[i],[]);try{await this.t.del(i.cacheHome,{recursive:!0})}catch(s){EP(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,i){const r=this.profiles.find(n=>n.id===i.id);if(!r)throw new Error(`Profile '${i.name}' does not exist`);const s=this.G(t);if(y.isUri(s)){const n=r.workspaces?[...r.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(r,{workspaces:n}))}else this.L(s,r,!1),this.M(this.profiles)}unsetWorkspace(t,i=!1){const r=this.G(t);if(y.isUri(r)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,r))})}else this.L(r,void 0,i),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(r=>!this.u.extUri.isEqual(r.location,i.resource))).map(i=>this.t.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t);return y.isUri(i)?this.profiles.find(r=>r.workspaces?.some(s=>this.u.extUri.isEqual(s,i))):this.C.emptyWindows.get(i)??this.r.emptyWindows.get(i)}G(t){return p2(t)?t.uri:g2(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location))||[...this.r.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location)))}I(t,i,r){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(i.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=r.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,i,r)}J(t,i,r){this.g.fire({added:t,removed:i,updated:r,all:this.profiles})}L(t,i,r){r=i?.isTransient?!0:r,r?i?this.r.emptyWindows.set(t,i):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),i?this.C.emptyWindows.set(t,i):this.C.emptyWindows.delete(t))}M(t){const i=[],r={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||i.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)r[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:r,emptyWindows:s}),this.O(i),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};j7=__decorate([__param(0,Um),__param(1,S6),__param(2,H7),__param(3,Ve)],j7);var tT="__$__isNewStorageMarker",Nh="__$__targetStorageMarker",iT=j("storageService"),Vo;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(Vo||(Vo={}));var W7;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(W7||(W7={}));var z7;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(z7||(z7={}));function rT(e){const t=e.get(Nh);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var rj=class M$ extends ne{static{this.a=60*1e3}constructor(t={flushInterval:M$.a}){super(),this.b=this.B(new Lu),this.f=this.B(new Lu),this.onDidChangeTarget=this.f.event,this.g=this.B(new P),this.onWillSaveState=this.g.event,this.m=this.B(new xs),this.C=void 0,this.F=void 0,this.H=void 0,this.j=this.B(new Po(()=>this.n(),t.flushInterval))}onDidChangeValue(t,i,r){return ft.filter(this.b.event,s=>s.scope===t&&(i===void 0||s.key===i),r)}n(){this.m.value=$4(()=>{this.r()&&this.flush(),this.j.schedule()})}r(){return!0}t(){Hr([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{ci("code/willInitStorage");try{await this.O()}finally{ci("code/didInitStorage")}this.j.schedule()})()),this.h}u(t,i){const{key:r,external:s}=i;if(r===Nh){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:r,target:this.J(t)[r],external:s})}w(t){this.g.fire({reason:t})}get(t,i,r){return this.P(i)?.get(t,r)}getBoolean(t,i,r){return this.P(i)?.getBoolean(t,r)}getNumber(t,i,r){return this.P(i)?.getNumber(t,r)}getObject(t,i,r){return this.P(i)?.getObject(t,r)}storeAll(t,i){this.y(()=>{for(const r of t)this.store(r.key,r.value,r.scope,r.target,i)})}store(t,i,r,s,n=!1){if(xt(i)){this.remove(t,r,n);return}this.y(()=>{this.z(t,r,s),this.P(r)?.set(t,i,n)})}remove(t,i,r=!1){this.y(()=>{this.z(t,i,void 0),this.P(i)?.delete(t,r)})}y(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,i){const r=[],s=this.J(t);for(const n of Object.keys(s))s[n]===i&&r.push(n);return r}z(t,i,r,s=!1){const n=this.J(i);typeof r=="number"?n[t]!==r&&(n[t]=r,this.P(i)?.set(Nh,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(i)?.set(Nh,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const i=this.P(t);return i?rT(i):Object.create(null)}isNew(t){return this.getBoolean(tT,t)===!0}async flush(t=Vo.NONE){this.g.fire({reason:t});const i=this.P(-1),r=this.P(0),s=this.P(1);switch(t){case Vo.NONE:await Ao.settled([i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case Vo.SHUTDOWN:await Ao.settled([i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,i=this.P(0)?.items??new Map,r=this.P(1)?.items??new Map;return sT(t,i,r,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,i){return this.w(Vo.NONE),KA(t)?this.R(t,i):this.S(t,i)}M(t,i){return!(t.id===i.id||_7(i)&&_7(t))}N(t,i,r){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),i.get(n)!==o&&this.u(r,{key:n,external:!0});for(const[n]of i.items)s.has(n)||this.u(r,{key:n,external:!0})})}};function _7(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function sT(e,t,i,r,s,n){const o=w=>{try{return JSON.parse(w)}catch{return w}},a=new Map,c=new Map;e.forEach((w,x)=>{a.set(x,w),c.set(x,o(w))});const l=new Map,u=new Map;t.forEach((w,x)=>{l.set(x,w),u.set(x,o(w))});const d=new Map,f=new Map;i.forEach((w,x)=>{d.set(x,w),f.set(x,o(w))}),console.group(r!==s?`Storage: Application (path: ${r})`:`Storage: Application & Profile (path: ${r}, default profile)`);const p=[];if(a.forEach((w,x)=>{p.push({key:x,value:w})}),console.table(p),console.groupEnd(),console.log(c),r!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const w=[];l.forEach((x,k)=>{w.push({key:k,value:x})}),console.table(w),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const m=[];d.forEach((w,x)=>{m.push({key:x,value:w})}),console.table(m),console.groupEnd(),console.log(f)}var sj=new I("isMac",Fi,h(1813,null)),nj=new I("isLinux",Wr,h(1814,null)),oj=new I("isWindows",ri,h(1815,null)),nT=new I("isWeb",Eo,h(1816,null)),aj=new I("isMacNative",Fi&&!Eo,h(1817,null)),cj=new I("isIOS",e3,h(1818,null)),lj=new I("isMobile",t3,h(1819,null)),uj=new I("isDevelopment",!1,!0),hj=new I("productQualityType","",h(1820,null)),oT="inputFocus",dj=new I(oT,!1,h(1821,null)),aT=j("languageService"),cT=j("modelService"),nr,fj=new I("workbenchState",void 0,{type:"string",description:h(4205,null)}),pj=new I("workspaceFolderCount",0,h(4206,null)),gj=new I("openFolderWorkspaceSupport",!0,!0),mj=new I("enterMultiRootWorkspaceSupport",!0,!0),vj=new I("emptyWorkspaceSupport",!0,!0),wj=new I("dirtyWorkingCopies",!1,h(4207,null)),lT=new I("remoteName","",h(4208,null)),bj=new I("virtualWorkspace","",h(4209,null)),yj=new I("temporaryWorkspace",!1,h(4210,null)),xj=new I("isFullscreen",!1,h(4211,null)),Ej=new I("isAuxiliaryWindowFocusedContext",!1,h(4212,null)),Sj=new I("isWindowAlwaysOnTop",!1,h(4213,null)),kj=new I("hasWebFileSystemAccess",!1,!0),$j=new I("embedderIdentifier",void 0,h(4214,null)),Cj=new I("activeEditorIsDirty",!1,h(4215,null)),Ij=new I("activeEditorIsNotPreview",!1,h(4216,null)),Dj=new I("activeEditorIsFirstInGroup",!1,h(4217,null)),Pj=new I("activeEditorIsLastInGroup",!1,h(4218,null)),Aj=new I("activeEditorIsPinned",!1,h(4219,null)),Tj=new I("activeEditorIsReadonly",!1,h(4220,null)),Rj=new I("activeCompareEditorCanSwap",!1,h(4221,null)),Lj=new I("activeEditorCanToggleReadonly",!0,h(4222,null)),Nj=new I("activeEditorCanRevert",!1,h(4223,null)),Mj=new I("activeEditorCanSplitInGroup",!0),Fj=new I("activeEditor",null,{type:"string",description:h(4224,null)}),Oj=new I("activeEditorAvailableEditorIds","",h(4225,null)),Uj=new I("textCompareEditorVisible",!1,h(4226,null)),Hj=new I("textCompareEditorActive",!1,h(4227,null)),Bj=new I("sideBySideEditorActive",!1,h(4228,null)),jj=new I("groupEditorsCount",0,h(4229,null)),Wj=new I("activeEditorGroupEmpty",!1,h(4230,null)),zj=new I("activeEditorGroupIndex",0,h(4231,null)),_j=new I("activeEditorGroupLast",!1,h(4232,null)),Vj=new I("activeEditorGroupLocked",!1,h(4233,null)),uT=new I("multipleEditorGroups",!1,h(4234,null)),qj=uT.toNegated(),Gj=new I("multipleEditorsSelectedInGroup",!1,h(4235,null)),Jj=new I("twoEditorsSelectedInGroup",!1,h(4236,null)),Zj=new I("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,h(4237,null)),hT=new I("editorPartMultipleEditorGroups",!1,h(4238,null)),Qj=hT.toNegated(),Yj=new I("editorPartMaximizedEditorGroup",!1,h(4239,null)),Xj=new I("isAuxiliaryEditorPart",!1,h(4240,null)),Kj=new I("editorIsOpen",!1,h(4241,null)),eW=new I("inZenMode",!1,h(4242,null)),tW=new I("isCenteredLayout",!1,h(4243,null)),iW=new I("splitEditorsVertically",!1,h(4244,null)),rW=new I("mainEditorAreaVisible",!0,h(4245,null)),sW=new I("editorTabsVisible",!0,h(4246,null)),nW=new I("sideBarVisible",!1,h(4247,null)),oW=new I("sideBarFocus",!1,h(4248,null)),aW=new I("activeViewlet","",h(4249,null)),cW=new I("statusBarFocused",!1,h(4250,null)),lW=new I("titleBarStyle","custom",h(4251,null)),uW=new I("titleBarVisible",!1,h(4252,null)),hW=new I("isAuxiliaryTitleBar",!1,h(4253,null)),dW=new I("isCompactTitleBar",!1,h(4254,null)),fW=new I("bannerFocused",!1,h(4255,null)),pW=new I("notificationFocus",!0,h(4256,null)),gW=new I("notificationCenterVisible",!1,h(4257,null)),mW=new I("notificationToastsVisible",!1,h(4258,null)),vW=new I("activeAuxiliary","",h(4259,null)),wW=new I("auxiliaryBarFocus",!1,h(4260,null)),bW=new I("auxiliaryBarVisible",!1,h(4261,null)),yW=new I("activePanel","",h(4262,null)),xW=new I("panelFocus",!1,h(4263,null)),EW=new I("panelPosition","bottom",h(4264,null)),SW=new I("panelAlignment","center",h(4265,null)),kW=new I("panelVisible",!1,h(4266,null)),$W=new I("panelMaximized",!1,h(4267,null)),CW=new I("focusedView","",h(4268,null)),V7=class{static{nr=this}static{this.Scheme=new I("resourceScheme",void 0,{type:"string",description:h(4269,null)})}static{this.Filename=new I("resourceFilename",void 0,{type:"string",description:h(4270,null)})}static{this.Dirname=new I("resourceDirname",void 0,{type:"string",description:h(4271,null)})}static{this.Path=new I("resourcePath",void 0,{type:"string",description:h(4272,null)})}static{this.LangId=new I("resourceLangId",void 0,{type:"string",description:h(4273,null)})}static{this.Resource=new I("resource",void 0,{type:"URI",description:h(4274,null)})}static{this.Extension=new I("resourceExtname",void 0,{type:"string",description:h(4275,null)})}static{this.HasResource=new I("resourceSet",void 0,{type:"boolean",description:h(4276,null)})}static{this.IsFileSystemResource=new I("isFileSystemResource",void 0,{type:"boolean",description:h(4277,null)})}constructor(t,i,r,s){this.m=t,this.n=i,this.o=r,this.p=s,this.a=new fe,this.d=nr.Scheme.bindTo(this.m),this.f=nr.Filename.bindTo(this.m),this.g=nr.Dirname.bindTo(this.m),this.h=nr.Path.bindTo(this.m),this.i=nr.LangId.bindTo(this.m),this.c=nr.Resource.bindTo(this.m),this.j=nr.Extension.bindTo(this.m),this.k=nr.HasResource.bindTo(this.m),this.l=nr.IsFileSystemResource.bindTo(this.m),this.a.add(i.onDidChangeFileSystemProviderRegistrations(()=>{const n=this.get();this.l.set(!!(n&&i.hasProvider(n)))})),this.a.add(s.onModelAdded(n=>{Do(n.uri,this.get())&&this.q()})),this.a.add(s.onModelLanguageChanged(n=>{Do(n.model.uri,this.get())&&this.q()}))}dispose(){this.a.dispose()}q(){const t=this.get();if(!t){this.i.set(null);return}const i=this.p.getModel(t)?.getLanguageId()??this.o.guessLanguageIdByFilepathOrFirstLine(t);this.i.set(i)}set(t){t=t??void 0,!Do(this.b,t)&&(this.b=t,this.m.bufferChangeEvents(()=>{this.c.set(t?t.toString():null),this.d.set(t?t.scheme:null),this.f.set(t?er(t):null),this.g.set(t?this.r(Zu(t)):null),this.h.set(t?this.r(t):null),this.q(),this.j.set(t?aD(t):null),this.k.set(!!t),this.l.set(t?this.n.hasProvider(t):!1)}))}r(t){return t.scheme===z.file?t.fsPath:t.path}reset(){this.b=void 0,this.m.bufferChangeEvents(()=>{this.c.reset(),this.d.reset(),this.f.reset(),this.g.reset(),this.h.reset(),this.i.reset(),this.j.reset(),this.k.reset(),this.l.reset()})}get(){return this.b}};V7=nr=__decorate([__param(0,Vg),__param(1,S6),__param(2,aT),__param(3,cT)],V7);var q7;(function(e){e.UseFileStorage="chat.useFileStorage",e.AgentEnabled="chat.agent.enabled",e.Edits2Enabled="chat.edits2.enabled",e.ExtensionToolsEnabled="chat.extensionTools.enabled"})(q7||(q7={}));var $r;(function(e){e.Ask="ask",e.Edit="edit",e.Agent="agent"})($r||($r={}));var Kt;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})(Kt||(Kt={})),function(e){function t(i){switch(i){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}(Kt||(Kt={}));var Rs;(function(e){e.responseVote=new I("chatSessionResponseVote","",{type:"string",description:h(5497,null)}),e.responseDetectedAgentCommand=new I("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:h(5498,null)}),e.responseSupportsIssueReporting=new I("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:h(5499,null)}),e.responseIsFiltered=new I("chatSessionResponseFiltered",!1,{type:"boolean",description:h(5500,null)}),e.responseHasError=new I("chatSessionResponseError",!1,{type:"boolean",description:h(5501,null)}),e.requestInProgress=new I("chatSessionRequestInProgress",!1,{type:"boolean",description:h(5502,null)}),e.isRequestPaused=new I("chatRequestIsPaused",!1,{type:"boolean",description:h(5503,null)}),e.canRequestBePaused=new I("chatCanRequestBePaused",!1,{type:"boolean",description:h(5504,null)}),e.isResponse=new I("chatResponse",!1,{type:"boolean",description:h(5505,null)}),e.isRequest=new I("chatRequest",!1,{type:"boolean",description:h(5506,null)}),e.itemId=new I("chatItemId","",{type:"string",description:h(5507,null)}),e.lastItemId=new I("chatLastItemId",[],{type:"string",description:h(5508,null)}),e.editApplied=new I("chatEditApplied",!1,{type:"boolean",description:h(5509,null)}),e.inputHasText=new I("chatInputHasText",!1,{type:"boolean",description:h(5510,null)}),e.inputHasFocus=new I("chatInputHasFocus",!1,{type:"boolean",description:h(5511,null)}),e.inChatInput=new I("inChatInput",!1,{type:"boolean",description:h(5512,null)}),e.inChatSession=new I("inChat",!1,{type:"boolean",description:h(5513,null)}),e.hasPromptFile=new I("chatPromptFileAttached",!1,{type:"boolean",description:h(5514,null)}),e.chatMode=new I("chatMode",$r.Ask,{type:"string",description:h(5515,null)}),e.supported=kt.or(nT.negate(),lT.notEqualsTo("")),e.enabled=new I("chatIsEnabled",!1,{type:"boolean",description:h(5516,null)}),e.extensionParticipantRegistered=new I("chatPanelExtensionParticipantRegistered",!1,{type:"boolean",description:h(5517,null)}),e.panelParticipantRegistered=new I("chatPanelParticipantRegistered",!1,{type:"boolean",description:h(5518,null)}),e.editingParticipantRegistered=new I("chatEditingParticipantRegistered",!1,{type:"boolean",description:h(5519,null)}),e.chatEditingCanUndo=new I("chatEditingCanUndo",!1,{type:"boolean",description:h(5520,null)}),e.chatEditingCanRedo=new I("chatEditingCanRedo",!1,{type:"boolean",description:h(5521,null)}),e.extensionInvalid=new I("chatExtensionInvalid",!1,{type:"boolean",description:h(5522,null)}),e.inputCursorAtTop=new I("chatCursorAtTop",!1),e.inputHasAgent=new I("chatInputHasAgent",!1),e.location=new I("chatLocation",void 0),e.inQuickChat=new I("quickChatHasFocus",!1,{type:"boolean",description:h(5523,null)}),e.hasFileAttachments=new I("chatHasFileAttachments",!1,{type:"boolean",description:h(5524,null)}),e.languageModelsAreUserSelectable=new I("chatModelsAreUserSelectable",!1,{type:"boolean",description:h(5525,null)}),e.Setup={hidden:new I("chatSetupHidden",!1,!0),installed:new I("chatSetupInstalled",!1,!0),disabled:new I("chatSetupDisabled",!1,!0)},e.Entitlement={signedOut:new I("chatSetupSignedOut",!1,!0),canSignUp:new I("chatPlanCanSignUp",!1,!0),limited:new I("chatPlanLimited",!1,!0),pro:new I("chatPlanPro",!1,!0),proPlus:new I("chatPlanProPlus",!1,!0),business:new I("chatPlanBusiness",!1,!0),enterprise:new I("chatPlanEnterprise",!1,!0)},e.chatQuotaExceeded=new I("chatQuotaExceeded",!1,!0),e.completionsQuotaExceeded=new I("completionsQuotaExceeded",!1,!0),e.Editing={agentModeDisallowed:new I("chatAgentModeDisallowed",void 0,{type:"boolean",description:h(5526,null)}),hasToolConfirmation:new I("chatHasToolConfirmation",!1,{type:"boolean",description:h(5527,null)})},e.Tools={toolsCount:new I("toolsCount",0,{type:"number",description:h(5528,null)})}})(Rs||(Rs={}));var G7;(function(e){e.inEditingMode=kt.or(Rs.chatMode.isEqualTo($r.Edit),Rs.chatMode.isEqualTo($r.Agent))})(G7||(G7={}));var Mc,dT=j("chatAgentService"),J7=class extends ne{static{this.AGENT_LEADER="@"}constructor(t){super(),this.t=t,this.b=new Map,this.f=new P,this.onDidChangeAgents=this.f.event,this.g=new Set,this.r=!1,this.s=new Map,this.y=new Map,this.h=Rs.enabled.bindTo(this.t),this.j=Rs.extensionParticipantRegistered.bindTo(this.t),this.m=Rs.panelParticipantRegistered.bindTo(this.t),this.n=Rs.editingParticipantRegistered.bindTo(this.t),this.B(t.onDidChangeContext(i=>{i.affectsSome(this.g)&&this.w()}))}registerAgent(t,i){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=i.slashCommands;i={...i,get slashCommands(){return n.filter(a=>!a.when||s.t.contextMatchesRules(kt.deserialize(a.when)))}};const o={data:i};return this.b.set(t,o),this.u(),this.w(),this.f.fire(void 0),se(()=>{this.b.delete(t),this.u(),this.w(),this.f.fire(void 0)})}u(){this.g.clear();for(const t of this.b.values())if(t.data.when){const i=kt.deserialize(t.data.when);for(const r of i?.keys()||[])this.g.add(r)}}w(){let t=!1,i=!1,r=!1,s=!1;for(const n of this.getAgents())n.isDefault&&(n.isCore||(i=!0),n.modes.includes($r.Agent)?s=!0:n.modes.includes($r.Edit)?t=!0:r=!0);this.n.set(t),this.m.set(r),this.j.set(i),s!==this.r&&(this.r=s,this.f.fire(this.getDefaultAgent(Kt.Panel,$r.Agent)))}registerAgentImplementation(t,i){const r=this.b.get(t);if(!r)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(r.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return r.data.isDefault&&this.h.set(!0),r.impl=i,this.f.fire(new Mh(r.data,i)),se(()=>{r.impl=void 0,this.f.fire(void 0),r.data.isDefault&&this.h.set(!1)})}registerDynamicAgent(t,i){t.isDynamic=!0;const r={data:t,impl:i};return this.b.set(t.id,r),this.f.fire(new Mh(t,i)),se(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,i){return this.y.set(t,i),{dispose:()=>{this.y.delete(t)}}}async getAgentCompletionItems(t,i,r){return await this.y.get(t)?.(i,r)??[]}updateAgent(t,i){const r=this.b.get(t);if(!r?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);r.data.metadata={...r.data.metadata,...i},this.f.fire(new Mh(r.data,r.impl))}getDefaultAgent(t,i=$r.Ask){return this.z(this.getActivatedAgents().filter(r=>i&&!r.modes.includes(i)?!1:!!r.isDefault&&r.locations.includes(t)))}get hasToolsAgent(){return!!this.r}getContributedDefaultAgent(t){return this.z(this.getAgents().filter(i=>!!i.isDefault&&i.locations.includes(t)))}z(t){return qC(t,i=>!i.isCore)??t.at(-1)}getAgent(t,i=!1){if(!(!this.C(t)&&!i))return this.b.get(t)?.data}C(t){const i=typeof t=="string"?this.b.get(t):t;return!i?.data.when||this.t.contextMatchesRules(kt.deserialize(i.data.when))}getAgentByFullyQualifiedId(t){const i=qt.find(this.b.values(),r=>fT(r.data)===t)?.data;if(!(i&&!this.C(i.id)))return i}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.C(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.C(t.data.id)).map(t=>new Mh(t.data,t.impl))}getAgentsByName(t){return this.D(this.getAgents().filter(i=>i.name===t))}D(t){const i=t.filter(r=>!r.isCore);return i.length>0?i:t}agentHasDupeName(t){const i=this.getAgent(t);return i?this.getAgentsByName(i.name).filter(r=>r.extensionId.value!==i.extensionId.value).length>0:!1}async invokeAgent(t,i,r,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(i,r,s,n)}setRequestPaused(t,i,r){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);s.impl.setRequestPaused?.(i,r)}async getFollowups(t,i,r,s,n){const o=this.b.get(t);return o?.impl?.provideFollowups?o.impl.provideFollowups(i,r,s,n):[]}async getChatTitle(t,i,r){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(i,r)}registerChatParticipantDetectionProvider(t,i){return this.s.set(t,i),se(()=>{this.s.delete(t)})}hasChatParticipantDetectionProviders(){return this.s.size>0}async detectAgentOrCommand(t,i,r,s){const n=qt.first(this.s.values());if(!n)return;const o=this.getAgents().reduce((u,d)=>{if(d.locations.includes(r.location)){u.push({participant:d.id,disambiguation:d.disambiguation??[]});for(const f of d.slashCommands)u.push({participant:d.id,command:f.name,disambiguation:f.disambiguation??[]})}return u},[]),a=await n.provideParticipantDetection(t,i,{...r,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};J7=__decorate([__param(0,Vg)],J7);var Mh=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get isCore(){return this.b.isCore}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get modes(){return this.b.modes}get disambiguation(){return this.b.disambiguation}async invoke(e,t,i,r){return this.d.invoke(e,t,i,r)}setRequestPaused(e,t){this.d.setRequestPaused&&this.d.setRequestPaused(e,t)}async provideFollowups(e,t,i,r){return this.d.provideFollowups?this.d.provideFollowups(e,t,i,r):[]}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},PW=j("chatAgentNameService"),Z7=class{static{Mc=this}static{this.b="chat.participantNameRegistry"}constructor(t,i,r,s){if(this.h=i,this.i=r,this.j=s,this.f=$m(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(Mc.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(Mc.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>tr(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},tt.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const i=await YA(t);if(!i||i.version!==1)throw new Error("Unexpected chat participant registry response.");const r=i.restrictedChatParticipants;this.f.set(r,void 0),this.j.store(Mc.b,JSON.stringify(r),-1,1)}getAgentNameRestriction(t){if(t.isCore)return!0;const i=this.m(t.name,t).get(),r=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return i&&r}m(t,i){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>$s(n,n.includes(".")?i.extensionId.value:i.extensionPublisherId)):!0)}dispose(){this.g=!0}};Z7=Mc=__decorate([__param(0,OA),__param(1,JA),__param(2,Ve),__param(3,iT)],Z7);function fT(e){return`${e.extensionId.value}.${e.id}`}function Q7(e){const t="name"in e?e:{...e,name:e.id};return"extensionPublisherId"in t||(t.extensionPublisherId=t.extensionPublisher??""),"extensionDisplayName"in t||(t.extensionDisplayName=""),"extensionId"in t||(t.extensionId=new Fe("")),Ct(t)}var pT=j("chatEditingService"),Y7;(function(e){e[e.Modified=0]="Modified",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"})(Y7||(Y7={}));var X7;(function(e){e[e.Initial=0]="Initial",e[e.StreamingEdits=1]="StreamingEdits",e[e.Idle=2]="Idle",e[e.Disposed=3]="Disposed"})(X7||(X7={}));var TW=new I("chatEditingWidgetFileState",void 0,h(5529,null)),RW=new I("chatEditingAgentSupportsReadonlyReferences",void 0,h(5530,null)),LW=new I("decidedChatEditingResource",[]),NW=new I("chatEditingResource",void 0),MW=new I("inChatEditingSession",void 0),FW=new I("hasUndecidedChatEditingResource",!1),OW=new I("hasAppliedChatEdits",!1),UW=new I("applyingChatEditsFailed",!1),K7;(function(e){e[e.Created=0]="Created",e[e.Modified=1]="Modified"})(K7||(K7={}));var Hm=class F${static{this.Kind="text"}constructor(t,i,r){this.range=t,this.editorRange=i,this.text=r,this.kind=F$.Kind}get promptText(){return this.text}},Bm="#",gT="@",Fc="/",e9=class O${static{this.Kind="var"}constructor(t,i,r,s,n){this.range=t,this.editorRange=i,this.variableName=r,this.variableArg=s,this.variableId=n,this.kind=O$.Kind}get text(){const t=this.variableArg?`:${this.variableArg}`:"";return`${Bm}${this.variableName}${t}`}get promptText(){return this.text}},t9=class U${static{this.Kind="tool"}constructor(t,i,r,s,n,o){this.range=t,this.editorRange=i,this.toolName=r,this.toolId=s,this.displayName=n,this.icon=o,this.kind=U$.Kind}get text(){return`${Bm}${this.toolName}`}get promptText(){return this.text}toVariableEntry(){return{kind:"tool",id:this.toolId,name:this.toolName,range:this.range,value:void 0,icon:$t.isThemeIcon(this.icon)?this.icon:void 0,fullName:this.displayName}}},i9=class H${static{this.Kind="agent"}constructor(t,i,r){this.range=t,this.editorRange=i,this.agent=r,this.kind=H$.Kind}get text(){return`${gT}${this.agent.name}`}get promptText(){return""}},r9=class B${static{this.Kind="subcommand"}constructor(t,i,r){this.range=t,this.editorRange=i,this.command=r,this.kind=B$.Kind}get text(){return`${Fc}${this.command.name}`}get promptText(){return""}},s9=class j${static{this.Kind="slash"}constructor(t,i,r){this.range=t,this.editorRange=i,this.slashCommand=r,this.kind=j$.Kind}get text(){return`${Fc}${this.slashCommand.command}`}get promptText(){return`${Fc}${this.slashCommand.command}`}},n9=class W${static{this.Kind="prompt"}constructor(t,i,r){this.range=t,this.editorRange=i,this.slashPromptCommand=r,this.kind=W$.Kind}get text(){return`${Fc}${this.slashPromptCommand.command}`}get promptText(){return`${Fc}${this.slashPromptCommand.command}`}},o9=class z${static{this.Kind="dynamic"}constructor(t,i,r,s,n,o,a,c,l,u){this.range=t,this.editorRange=i,this.text=r,this.id=s,this.modelDescription=n,this.data=o,this.fullName=a,this.icon=c,this.isFile=l,this.isDirectory=u,this.kind=z$.Kind}get referenceText(){return this.text.replace(Bm,"")}get promptText(){return this.text}toVariableEntry(){return this.id==="vscode.problems"?Wm.toEntry(this.data.filter):{kind:this.isDirectory?"directory":this.isFile?"file":"generic",id:this.id,name:this.referenceText,range:this.range,value:this.data,fullName:this.fullName,icon:this.icon}}};function mT(e){return{text:e.text,parts:e.parts.map(t=>{if(t.kind===Hm.Kind)return new Hm(new Yr(t.range.start,t.range.endExclusive),t.editorRange,t.text);if(t.kind===e9.Kind)return new e9(new Yr(t.range.start,t.range.endExclusive),t.editorRange,t.variableName,t.variableArg,t.variableId||"");if(t.kind===t9.Kind)return new t9(new Yr(t.range.start,t.range.endExclusive),t.editorRange,t.toolName,t.toolId,t.displayName,t.icon);if(t.kind===i9.Kind){let i=t.agent;return i=Q7(i),new i9(new Yr(t.range.start,t.range.endExclusive),t.editorRange,i)}else{if(t.kind===r9.Kind)return new r9(new Yr(t.range.start,t.range.endExclusive),t.editorRange,t.command);if(t.kind===s9.Kind)return new s9(new Yr(t.range.start,t.range.endExclusive),t.editorRange,t.slashCommand);if(t.kind===n9.Kind)return new n9(new Yr(t.range.start,t.range.endExclusive),t.editorRange,t.slashPromptCommand);if(t.kind===o9.Kind)return new o9(new Yr(t.range.start,t.range.endExclusive),t.editorRange,t.text,t.id,t.modelDescription,Ct(t.data),t.fullName,t.icon,t.isFile,t.isDirectory);throw new Error(`Unknown chat request part: ${t.kind}`)}})}}var a9;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(a9||(a9={}));function vT(e){return!!e&&typeof e=="object"&&"uri"in e&&e.uri instanceof y&&"version"in e&&typeof e.version=="number"&&"ranges"in e&&Array.isArray(e.ranges)&&e.ranges.every(Oe.isIRange)}function wT(e){return!!e&&typeof e=="object"&&"documents"in e&&Array.isArray(e.documents)&&e.documents.every(vT)}var c9;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(c9||(c9={}));var Fh;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Fh||(Fh={}));var l9;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(l9||(l9={}));var u9;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(u9||(u9={}));var bT=j("IChatService"),jm,h9;(function(e){e[e.NotOmitted=0]="NotOmitted",e[e.Partial=1]="Partial",e[e.Full=2]="Full"})(h9||(h9={}));var Wm;(function(e){e.icon=re.error;function t(n){return{filterUri:n.resource,owner:n.owner,problemMessage:n.message,filterRange:{startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}}}e.fromMarker=t;function i(n){return{id:r(n),name:s(n),icon:e.icon,value:n,kind:"diagnostic",...n}}e.toEntry=i;function r(n){return[n.filterUri,n.owner,n.filterSeverity,n.filterRange?.startLineNumber].join(":")}e.id=r;function s(n){let o;if(function(c){c[c.MaxChars=30]="MaxChars",c[c.MaxSpaceLookback=10]="MaxSpaceLookback"}(o||(o={})),n.problemMessage){if(n.problemMessage.length<30)return n.problemMessage;const c=n.problemMessage.lastIndexOf(" ",30);return c===-1||c+10<30?n.problemMessage.substring(0,30)+"\u2026":n.problemMessage.substring(0,c)+"\u2026"}let a=h(5540,null);return n.filterUri&&(a=h(5541,null,er(n.filterUri))),a}e.label=s})(Wm||(Wm={}));function yT(e){return e.kind==="image"}var Ci={reason:"other"},d9=class{get session(){return this.a}get username(){return this.session.requesterUsername}get avatarIconUri(){return this.session.requesterAvatarIconUri}get attempt(){return this.b}get variableData(){return this.d}set variableData(e){this.d=e}get confirmation(){return this.e}get locationData(){return this.g}get attachedContext(){return this.h}get editedFileEvents(){return this.j}constructor(e){this.a=e.session,this.message=e.message,this.d=e.variableData,this.timestamp=e.timestamp,this.b=e.attempt??0,this.e=e.confirmation,this.g=e.locationData,this.h=e.attachedContext,this.isCompleteAddedRequest=e.isCompleteAddedRequest??!1,this.modelId=e.modelId,this.id=e.restoredId??"request_"+Mt(),this.j=e.editedFileEvents}adoptTo(e){this.a=e}},f9=class{get value(){return this.a}constructor(e){this.b="",this.d="",this.a=e,this.e()}toString(){return this.b}getMarkdown(){return this.d}e(){this.b=this.g(this.a),this.d=this.a.map(e=>e.kind==="inlineReference"?this.h(e):e.kind==="markdownContent"||e.kind==="markdownVuln"?e.content.value:"").filter(e=>e.length>0).join("")}g(e){const t=[];let i=[];for(const r of e){let s;switch(r.kind){case"treeData":case"progressMessage":case"codeblockUri":case"toolInvocation":case"toolInvocationSerialized":case"extensions":case"undoStop":continue;case"inlineReference":s={text:this.h(r)};break;case"command":s={text:r.command.title,isBlock:!0};break;case"textEditGroup":case"notebookEditGroup":s={text:h(5542,null),isBlock:!0};break;case"confirmation":s={text:`${r.title}
${r.message}`,isBlock:!0};break;default:s={text:r.content.value};break}s.isBlock?(i.length&&(t.push(i.join("")),i=[]),t.push(s.text)):i.push(s.text)}return i.length&&t.push(i.join("")),t.join(`

`)}h(e){return"uri"in e.inlineReference?this.j(e.inlineReference.uri):"name"in e.inlineReference?"`"+e.inlineReference.name+"`":this.j(e.inlineReference)}j(e){return e.scheme===z.http||e.scheme===z.https?e.toString(!1):er(e)}},xT=class extends f9{constructor(e,t){const i=e.value.findIndex(r=>r.kind==="undoStop"&&r.id===t);super(i===-1?e.value.slice():e.value.slice(0,i)),this.undoStop=t}},ET=class extends f9{get onDidChangeValue(){return this.k.event}constructor(e){super(Ni(e).map(t=>Gr(t)?{content:t,kind:"markdownContent"}:"kind"in t?t:{kind:"treeData",treeData:t})),this.k=new P,this.l=[]}dispose(){this.k.dispose()}clear(){this.a=[],this.e(!0)}updateContent(e,t){if(e.kind==="markdownContent"){const i=this.a.filter(r=>r.kind!=="textEditGroup").at(-1);if(!i||i.kind!=="markdownContent"||!$T(i.content,e.content))this.a.push(e);else{const r=this.a.indexOf(i);this.a[r]={...i,content:CT(i.content,e.content)}}this.e(t)}else if(e.kind==="textEdit"||e.kind==="notebookEdit"){const r=e.uri.scheme===z.vscodeNotebookCell&&!this.a.find(c=>c.kind==="notebookEditGroup")?void 0:yh.parse(e.uri)?.notebook,s=r??e.uri;let n=!1;const o=e.kind==="textEdit"&&!r?"textEditGroup":"notebookEditGroup",a=o==="textEditGroup"?e.edits:e.edits.map(c=>yP.isTextEdit(c)?{uri:e.uri,edit:c}:c);for(let c=0;!n&&c<this.a.length;c++){const l=this.a[c];l.kind===o&&!l.done&&Do(l.uri,s)&&(l.edits.push(a),l.done=e.done,n=!0)}n||this.a.push({kind:o,uri:s,edits:o==="textEditGroup"?[a]:a,done:e.done}),this.e(t)}else if(e.kind==="progressTask"){const i=this.a.push(e)-1;this.e(t);const r=e.onDidAddProgress(()=>{this.e(!1)});e.task?.().then(s=>{r.dispose(),typeof s=="string"&&(this.a[i].content=new Fo(s)),this.e(!1)})}else e.kind==="toolInvocation"?(e.confirmationMessages&&e.confirmed.p.then(()=>{this.e(!1)}),e.isCompletePromise.then(()=>{this.e(!1)}),this.a.push(e),this.e(t)):(this.a.push(e),this.e(t))}addCitation(e){this.l.push(e),this.e()}e(e){super.e(),this.k&&(this.b+=this.l.length?`

`+IT(this.l):"",e||this.k.fire())}},Oh=class extends ne{get session(){return this.b}get shouldBeRemovedOnSend(){return this.w}get isComplete(){return this.j}set shouldBeRemovedOnSend(e){this.w=e,this.a.fire(Ci)}get isCanceled(){return this.m}get vote(){return this.n}get voteDownReason(){return this.t}get followups(){return this.C}get entireResponse(){return this.z||this.y}get result(){return this.u}get username(){return this.session.responderUsername}get avatarIcon(){return this.session.responderAvatarIcon}get agent(){return this.g}get slashCommand(){return this.h}get agentOrSlashCommandDetected(){return this.D??!1}get usedContext(){return this.F}get contentReferences(){return Array.from(this.G)}get codeCitations(){return this.H}get progressMessages(){return this.I}get isStale(){return this.J}get isPaused(){return this.L}get isPendingConfirmation(){return this.y.value.some(e=>e.kind==="toolInvocation"&&e.isConfirmed===void 0||e.kind==="confirmation"&&e.isUsed===!1)}get response(){const e=this.w?.afterUndoStop;return e?(this.M?.undoStop!==e&&(this.M=new xT(this.y,e)),this.M):this.z||this.y}constructor(e){super(),this.a=this.B(new P),this.onDidChange=this.a.event,this.G=[],this.H=[],this.I=[],this.J=!1,this.L=$m("isPaused",!1),this.b=e.session,this.g=e.agent,this.h=e.slashCommand,this.requestId=e.requestId,this.j=e.isComplete??!1,this.m=e.isCanceled??!1,this.n=e.vote,this.t=e.voteDownReason,this.u=e.result,this.C=e.followups?[...e.followups]:void 0,this.isCompleteAddedRequest=e.isCompleteAddedRequest??!1,this.w=e.shouldBeRemovedOnSend,this.J=Array.isArray(e.responseContent)&&(e.responseContent.length!==0||Gr(e.responseContent)&&e.responseContent.value.length!==0),this.y=this.B(new ET(e.responseContent)),this.B(this.y.onDidChangeValue(()=>this.a.fire(Ci))),this.id=e.restoredId??"response_"+Mt()}updateContent(e,t){this.O(()=>this.y.updateContent(e,t))}addUndoStop(e){this.O(()=>{this.a.fire({reason:"undoStop",id:e.id}),this.y.updateContent(e,!0)})}applyReference(e){e.kind==="usedContext"?this.F=e:e.kind==="reference"&&(this.G.push(e),this.a.fire(Ci))}applyCodeCitation(e){this.H.push(e),this.y.addCitation(e),this.a.fire(Ci)}setAgent(e,t){this.g=e,this.h=t,this.D=!e.isDefault||!!t,this.a.fire(Ci)}setResult(e){this.u=e,this.a.fire(Ci)}complete(){this.u?.errorDetails?.responseIsRedacted&&this.y.clear(),this.j=!0,this.a.fire(Ci)}cancel(){this.j=!0,this.m=!0,this.a.fire(Ci)}setFollowups(e){this.C=e,this.a.fire(Ci)}setVote(e){this.n=e,this.a.fire(Ci)}setVoteDownReason(e){this.t=e,this.a.fire(Ci)}setEditApplied(e,t){return!this.response.value.includes(e)||!e.state?!1:(e.state.applied=t,this.a.fire(Ci),!0)}adoptTo(e){this.b=e,this.a.fire(Ci)}setPaused(e,t){this.L.set(e,t),this.a.fire(Ci),this.N?.forEach(i=>i()),this.N=void 0}finalizeUndoState(){this.z=this.response,this.M=void 0,this.w=void 0}O(e){this.L.get()?(this.N??=[],this.N.push(e)):e()}},p9;(function(e){e[e.NotPausable=0]="NotPausable",e[e.Paused=1]="Paused",e[e.Unpaused=2]="Unpaused"})(p9||(p9={}));function ST(e){const t=e;return typeof t=="object"&&typeof t.requesterUsername=="string"}function kT(e){const t=e;return ST(e)&&typeof t.creationDate=="number"&&typeof t.sessionId=="string"&&e.requests.every(i=>!i.usedContext||wT(i.usedContext))}var g9;(function(e){e[e.Removal=0]="Removal",e[e.Resend=1]="Resend",e[e.Adoption=2]="Adoption"})(g9||(g9={}));var Vi;(function(e){e[e.Created=0]="Created",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Vi||(Vi={}));var m9=jm=class extends ne{static getDefaultTitle(t){const i=t.at(0)?.message??"";return(typeof i=="string"?i:i.text).split(`
`)[0].substring(0,50)}get sampleQuestions(){return this.m}get sessionId(){return this.n}get requestInProgress(){const t=this.lastRequest;return!t?.response||t.response.isPendingConfirmation?!1:!t.response.isComplete}get requestPausibility(){const t=this.lastRequest;return!t?.response?.agent||t.response.isComplete||t.response.isPendingConfirmation?0:t.response.isPaused.get()?1:2}get hasRequests(){return this.g.length>0}get lastRequest(){return this.g.at(-1)}get creationDate(){return this.t}get lastMessageDate(){return this.u}get w(){return this.J.getDefaultAgent(Kt.Panel,$r.Ask)}get requesterUsername(){return this.w?.metadata.requester?.name??this.G?.requesterUsername??""}get responderUsername(){return this.w?.fullName??this.G?.responderUsername??""}get requesterAvatarIconUri(){return this.w?.metadata.requester?.icon??this.y}get responderAvatarIcon(){return this.w?.metadata.themeIcon??this.z}get initState(){return this.h}get isImported(){return this.C}get customTitle(){return this.D}get title(){return this.D||jm.getDefaultTitle(this.g)}get initialLocation(){return this.H}get editingSessionObs(){return this.F}get editingSession(){return this.F?.promiseResult.get()?.data}constructor(t,i,r,s,n){super(),this.G=t,this.H=i,this.I=r,this.J=s,this.L=n,this.a=this.B(new P),this.onDidDispose=this.a.event,this.b=this.B(new P),this.onDidChange=this.b.event,this.h=Vi.Created,this.j=new xr,this.C=!1,this.M=new Nt,this.Q=void 0;const o=kT(t);t&&!o&&this.I.warn(`ChatModel#constructor: Loaded malformed session data: ${JSON.stringify(t)}`),this.C=!!t&&!o||(t?.isImported??!1),this.n=o&&t.sessionId||Mt(),this.g=t?this.N(t):[],this.t=o&&t.creationDate||Date.now(),this.u=o&&t.lastMessageDate||this.t,this.D=o?t.customTitle:void 0,this.y=t?.requesterAvatarIconUri&&y.revive(t.requesterAvatarIconUri),this.z=Bu(t?.responderAvatarIconUri)?y.revive(t.responderAvatarIconUri):t?.responderAvatarIconUri}startEditingSession(t){const i=t?this.L.startOrContinueGlobalEditingSession(this):this.L.createEditingSession(this);this.F=new qP(i),this.F.promise.then(r=>{this.q.isDisposed?r.dispose():this.B(r)})}notifyEditingAction(t){const i=t.outcome==="accepted"?qo.Keep:t.outcome==="rejected"?qo.Undo:t.outcome==="userModified"?qo.UserModification:null;i!==null&&(!this.M.has(t.uri)||this.M.get(t.uri)?.eventKind===qo.Keep)&&this.M.set(t.uri,{eventKind:i,uri:t.uri})}N(t){const i=t.requests;if(!Array.isArray(i))return this.I.error(`Ignoring malformed session data: ${JSON.stringify(t)}`),[];try{return i.map(r=>{const s=typeof r.message=="string"?this.P(r.message):mT(r.message),n=this.O(r.variableData),o=new d9({session:this,message:s,variableData:n,timestamp:r.timestamp??-1,restoredId:r.requestId,confirmation:r.confirmation,editedFileEvents:r.editedFileEvents});if(o.shouldBeRemovedOnSend=r.isHidden?{requestId:r.requestId}:r.shouldBeRemovedOnSend,r.response||r.result||r.responseErrorDetails){const a=r.agent&&"metadata"in r.agent?Q7(r.agent):void 0,c="responseErrorDetails"in r?{errorDetails:r.responseErrorDetails}:r.result;o.response=new Oh({responseContent:r.response??[new Fo(r.response)],session:this,agent:a,slashCommand:r.slashCommand,requestId:o.id,isComplete:!0,isCanceled:r.isCanceled,vote:r.vote,voteDownReason:r.voteDownReason,result:c,followups:r.followups,restoredId:r.responseId}),o.response.shouldBeRemovedOnSend=r.isHidden?{requestId:r.requestId}:r.shouldBeRemovedOnSend,r.usedContext&&o.response.applyReference(Ct(r.usedContext)),r.contentReferences?.forEach(l=>o.response.applyReference(Ct(l))),r.codeCitations?.forEach(l=>o.response.applyCodeCitation(Ct(l)))}return o})}catch(r){return this.I.error("Failed to parse chat data",r),[]}}O(t){const i=t&&Array.isArray(t.variables)?t:{variables:[]};return i.variables=i.variables.map(r=>r&&"values"in r&&Array.isArray(r.values)?{kind:"generic",id:r.id??"",name:r.name,value:r.values[0]?.value,range:r.range,modelDescription:r.modelDescription,references:r.references}:r),i}P(t){const i=[new Hm(new Yr(0,t.length),{startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1},t)];return{text:t,parts:i}}toggleLastRequestPaused(t){if(this.requestPausibility!==0&&this.lastRequest?.response?.agent){const i=t??!this.lastRequest.response.isPaused.get();this.lastRequest.response.setPaused(i),this.J.setRequestPaused(this.lastRequest.response.agent.id,this.lastRequest.id,i),this.b.fire({kind:"changedRequest",request:this.lastRequest})}}startInitialize(){if(this.initState!==Vi.Created)throw new Error(`ChatModel is in the wrong state for startInitialize: ${Vi[this.initState]}`);this.h=Vi.Initializing}deinitialize(){this.h=Vi.Created,this.j=new xr}initialize(t){if(this.initState!==Vi.Initializing)throw new Error(`ChatModel is in the wrong state for initialize: ${Vi[this.initState]}`);this.h=Vi.Initialized,this.m=t,this.j.complete(),this.b.fire({kind:"initialize"})}setInitializationError(t){if(this.initState!==Vi.Initializing)throw new Error(`ChatModel is in the wrong state for setInitializationError: ${Vi[this.initState]}`);this.j.isSettled||this.j.error(t)}waitForInitialization(){return this.j.p}getRequests(){return this.g}get checkpoint(){return this.Q}setDisabledRequests(t){this.g.forEach(i=>{const r=t.find(s=>s.requestId===i.id);i.shouldBeRemovedOnSend=r,i.response&&(i.response.shouldBeRemovedOnSend=r)}),this.b.fire({kind:"setHidden",hiddenRequestIds:t})}addRequest(t,i,r,s,n,o,a,c,l,u){const d=[...this.M.values()];this.M.clear();const f=new d9({session:this,message:t,variableData:i,timestamp:Date.now(),attempt:r,confirmation:o,locationData:a,attachedContext:c,isCompleteAddedRequest:l,modelId:u,editedFileEvents:d.length?d:void 0});return f.response=new Oh({responseContent:[],session:this,agent:s,slashCommand:n,requestId:f.id,isCompleteAddedRequest:l}),this.g.push(f),this.u=Date.now(),this.b.fire({kind:"addRequest",request:f}),f}setCustomTitle(t){this.D=t}updateRequest(t,i){t.variableData=i,this.b.fire({kind:"changedRequest",request:t})}adoptRequest(t){const i=t.session,r=i.g.findIndex(s=>s.id===t.id);r!==-1&&(i.g.splice(r,1),t.adoptTo(this),t.response?.adoptTo(this),this.g.push(t),i.b.fire({kind:"removeRequest",requestId:t.id,responseId:t.response?.id,reason:2}),this.b.fire({kind:"addRequest",request:t}))}acceptResponseProgress(t,i,r){if(t.response||(t.response=new Oh({responseContent:[],session:this,requestId:t.id})),t.response.isComplete)throw new Error("acceptResponseProgress: Adding progress to a completed response");i.kind==="markdownContent"||i.kind==="treeData"||i.kind==="inlineReference"||i.kind==="codeblockUri"||i.kind==="markdownVuln"||i.kind==="progressMessage"||i.kind==="command"||i.kind==="textEdit"||i.kind==="notebookEdit"||i.kind==="warning"||i.kind==="progressTask"||i.kind==="confirmation"||i.kind==="extensions"||i.kind==="toolInvocation"?t.response.updateContent(i,r):i.kind==="usedContext"||i.kind==="reference"?t.response.applyReference(i):i.kind==="codeCitation"?t.response.applyCodeCitation(i):i.kind==="move"?this.b.fire({kind:"move",target:i.uri,range:i.range}):i.kind==="undoStop"?t.response.addUndoStop(i):this.I.error(`Couldn't handle progress: ${JSON.stringify(i)}`)}removeRequest(t,i=0){const r=this.g.findIndex(n=>n.id===t),s=this.g[r];r!==-1&&(this.b.fire({kind:"removeRequest",requestId:s.id,responseId:s.response?.id,reason:i}),this.g.splice(r,1),s.response?.dispose())}cancelRequest(t){t.response&&t.response.cancel()}setResponse(t,i){t.response||(t.response=new Oh({responseContent:[],session:this,requestId:t.id})),t.response.setResult(i)}completeResponse(t){if(!t.response)throw new Error("Call setResponse before completeResponse");t.response.complete(),this.b.fire({kind:"completedRequest",request:t})}setFollowups(t,i){t.response&&t.response.setFollowups(i)}setResponseModel(t,i){t.response=i,this.b.fire({kind:"addResponse",response:i})}toExport(){return{requesterUsername:this.requesterUsername,requesterAvatarIconUri:this.requesterAvatarIconUri,responderUsername:this.responderUsername,responderAvatarIconUri:this.responderAvatarIcon,initialLocation:this.initialLocation,requests:this.g.map(t=>{const i={...t.message,parts:t.message.parts.map(n=>n&&"toJSON"in n?n.toJSON():n)},r=t.response?.agent,s=r&&"toJSON"in r?r.toJSON():r?{...r}:void 0;return{requestId:t.id,message:i,variableData:t.variableData,response:t.response?t.response.entireResponse.value.map(n=>n.kind==="treeData"?n.treeData:n.kind==="markdownContent"?n.content:n):void 0,responseId:t.response?.id,shouldBeRemovedOnSend:t.shouldBeRemovedOnSend,result:t.response?.result,followups:t.response?.followups,isCanceled:t.response?.isCanceled,vote:t.response?.vote,voteDownReason:t.response?.voteDownReason,agent:s,slashCommand:t.response?.slashCommand,usedContext:t.response?.usedContext,contentReferences:t.response?.contentReferences,codeCitations:t.response?.codeCitations,timestamp:t.timestamp,confirmation:t.confirmation,editedFileEvents:t.editedFileEvents}})}}toJSON(){return{version:3,...this.toExport(),sessionId:this.sessionId,creationDate:this.t,isImported:this.C,lastMessageDate:this.u,customTitle:this.D}}dispose(){this.g.forEach(t=>t.response?.dispose()),this.a.fire(),super.dispose()}};m9=jm=__decorate([__param(2,Ve),__param(3,dT),__param(4,pT)],m9);function $T(e,t){if(e.baseUri&&t.baseUri){if(!(e.baseUri.scheme===t.baseUri.scheme&&e.baseUri.authority===t.baseUri.authority&&e.baseUri.path===t.baseUri.path&&e.baseUri.query===t.baseUri.query&&e.baseUri.fragment===t.baseUri.fragment))return!1}else if(e.baseUri||t.baseUri)return!1;return ui(e.isTrusted,t.isTrusted)&&e.supportHtml===t.supportHtml&&e.supportThemeIcons===t.supportThemeIcons}function CT(e,t){const i=typeof t=="string"?t:t.value;return{value:e.value+i,isTrusted:e.isTrusted,supportThemeIcons:e.supportThemeIcons,supportHtml:e.supportHtml,baseUri:e.baseUri}}function IT(e){if(e.length===0)return"";const t=e.reduce((r,s)=>r.add(s.license),new Set);return t.size===1?h(5543,null,t.size):h(5544,null,t.size)}var qo;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(qo||(qo={}));var v9;(function(e){e.Delimiter="\0"})(v9||(v9={}));var w9;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(w9||(w9={}));var Re=class Zi{static fromExtHostTestItem(t,i,r=t.parent){if(t._isRoot)return new Zi([i]);const s=[t.id];for(let n=r;n&&n.id!==i;n=n.parent)s.push(n.id);return s.push(i),new Zi(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const i=t.indexOf("\0");return i===-1?t:t.slice(0,i)}static fromString(t){return new Zi(t.split("\0"))}static join(t,i){return new Zi([...t.path,i])}static split(t){return t.split("\0")}static joinToString(t,i){return t.toString()+"\0"+i}static parentId(t){const i=t.lastIndexOf("\0");return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf("\0");return i===-1?t:t.slice(i+1)}static isChild(t,i){return i[t.length]==="\0"&&i.startsWith(t)}static compare(t,i){return t===i?0:Zi.isChild(t,i)?2:Zi.isChild(i,t)?3:1}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let r=0;for(;r<t-1;){for(let s=1;s<t;s++){const n=i(s-1),o=i(s);if(n.path[r]!==o.path[r])return r}r++}return r}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new Zi(this.path,1)}get parentId(){return this.d>1?new Zi(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new Zi(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new Zi(this.path,t)}compare(t){if(typeof t=="string")return Zi.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},b9;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(b9||(b9={}));var y9;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(y9||(y9={}));var x9;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(x9||(x9={}));var E9;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(E9||(E9={}));var BW={2:h(12173,null),4:h(12174,null),8:h(12175,null)},DT=e=>"runId"in e,Go;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:Oe.lift(i.range),uri:t.asCanonicalUri(y.revive(i.uri))})})(Go||(Go={}));var S9;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(S9||(S9={}));var Uh;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,position:i.position?Ui.lift(i.position):void 0})})(Uh||(Uh={}));var Hh;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Go.serialize(t.location),stackTrace:t.stackTrace?.map(Uh.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Go.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(r=>Uh.deserialize(t,r))})})(Hh||(Hh={}));var Bh;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Go.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&Go.deserialize(t,i.location)})})(Bh||(Bh={}));var jh;(function(e){e.serialize=t=>t.type===0?Hh.serialize(t):Bh.serialize(t),e.deserialize=(t,i)=>i.type===0?Hh.deserialize(t,i):Bh.deserialize(t,i),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(jh||(jh={}));var Oc;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(jh.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(r=>jh.deserialize(t,r))})})(Oc||(Oc={}));var k9="\0",Wh=(e,t)=>e+k9+t,$9=e=>{const t=e.indexOf(k9);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},zh;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,range:i.range?Oe.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(zh||(zh={}));var C9;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(C9||(C9={}));var Ls;(function(e){e.serialize=t=>({expand:t.expand,item:zh.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Re.root(i.item.extId),expand:i.expand,item:zh.deserialize(t,i.item)})})(Ls||(Ls={}));var Uc;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?Oe.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(Uc||(Uc={}));var zm=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},I9;(function(e){e.serializeWithoutMessages=t=>({...Ls.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Oc.serializeWithoutMessages)}),e.serialize=t=>({...Ls.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Oc.serialize)}),e.deserialize=(t,i)=>({...Ls.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(r=>Oc.deserialize(t,r)),retired:!0})})(I9||(I9={}));var _m;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(_m||(_m={}));var D9;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(y.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:_m.empty()})})(D9||(D9={}));function Vm(e){return{...e,location:e.location?.toJSON()}}function qm(e){return e.location=e.location?Ui.isIPosition(e.location)?Ui.lift(e.location):Oe.lift(e.location):void 0,e}var P9;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(P9||(P9={}));var A9;(function(e){e.serialize=t=>t.type===0?Vh.serialize(t):qh.serialize(t),e.deserialize=t=>t.type===0?Vh.deserialize(t):qh.deserialize(t)})(A9||(A9={}));var _h;(function(e){e.serialize=Vm,e.deserialize=qm})(_h||(_h={}));var Vh;(function(e){e.serialize=Vm,e.deserialize=qm})(Vh||(Vh={}));var qh;(function(e){e.serialize=t=>({...Vm(t),branches:t.branches?.map(_h.serialize)}),e.deserialize=t=>({...qm(t),branches:t.branches?.map(_h.deserialize)})})(qh||(qh={}));var T9;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(T9||(T9={}));var Gh;(function(e){e.deserialize=(t,i)=>i.op===0?{op:i.op,item:Ls.deserialize(t,i.item)}:i.op===1?{op:i.op,item:Uc.deserialize(i.item)}:i.op===2?{op:i.op,uri:t.asCanonicalUri(y.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===0?{op:t.op,item:Ls.serialize(t.item)}:t.op===1?{op:t.op,item:Uc.serialize(t.item)}:t})(Gh||(Gh={}));var PT=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case 0:this.p(Ls.deserialize(this.l,i.item),t);break;case 1:this.q(Uc.deserialize(i.item),t);break;case 3:this.v(i.itemId,t);break;case 5:this.w(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this.f.set(i.tag.id,i.tag);break;case 7:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Re.parentId(e.item.extId)?.toString();let r;if(!i)r=this.y(e),this.h.add(r),this.g.set(e.item.extId,r);else if(this.g.has(i)){const s=this.g.get(i);s.children.add(e.item.extId),r=this.y(e,s),this.g.set(e.item.extId,r)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(r),e.expand===2&&this.j++,r}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.j--,e.expand===2&&this.j++),zm(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const r=Re.parentId(i.item.extId)?.toString();r?this.g.get(r).children.delete(i.item.extId):this.h.delete(i);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==i),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},AT=j("editorGroupsService"),R9;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(R9||(R9={}));var L9;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(L9||(L9={}));var N9;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(N9||(N9={}));var M9;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(M9||(M9={}));var F9;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(F9||(F9={}));var O9;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(O9||(O9={}));var U9;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(U9||(U9={}));var jW=j("editorService"),TT=-1,RT=-2,Gm="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",WW=new RegExp(Gm),H9;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(H9||(H9={}));var B9;(function(e){e.NoneOrRelevance="NoneOrRelevance",e.LastUpdatedDate="LastUpdatedDate",e.Title="Title",e.PublisherName="PublisherName",e.InstallCount="InstallCount",e.PublishedDate="PublishedDate",e.AverageRating="AverageRating",e.WeightedRating="WeightedRating"})(B9||(B9={}));var j9;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(j9||(j9={}));var W9;(function(e){e.Category="Category",e.ExtensionId="ExtensionId",e.ExtensionName="ExtensionName",e.ExcludeWithFlags="ExcludeWithFlags",e.Featured="Featured",e.SearchText="SearchText",e.Tag="Tag",e.Target="Target"})(W9||(W9={}));var z9;(function(e){e.Install="install",e.Uninstall="uninstall"})(z9||(z9={}));var _9;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(_9||(_9={}));var zW=j("extensionGalleryService"),V9;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(V9||(V9={}));var q9;(function(e){e.NotFound="NotFound",e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(q9||(q9={}));var G9;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(G9||(G9={}));var _W=j("extensionManagementService"),VW=j("IGlobalExtensionEnablementService"),qW=j("IExtensionTipsService"),GW=j("IAllowedExtensionsService"),JW=Mu(1937,"Extensions"),ZW=Mu(1938,"Preferences"),LT="extensions.allowed";Ft.as(Cn.Configuration).registerConfiguration({id:"extensions",order:30,title:h(1920,null),type:"object",properties:{[LT]:{type:"object",markdownDescription:h(1921,null),default:"*",defaultSnippets:[{body:{},description:h(1922,null)},{body:{"*":!0},description:h(1923,null)}],scope:1,policy:{name:"AllowedExtensions",minimumVersion:"1.96",description:h(1924,null)},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:h(1925,null),enumDescriptions:[h(1926,null),h(1927,null),h(1928,null)]},{type:"array",items:{type:"string"},description:h(1929,null)}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:h(1930,null),enumDescriptions:[h(1931,null),h(1932,null),h(1933,null)]},"\\*":{type:"boolean",enum:[!0,!1],description:h(1934,null),enumDescriptions:[h(1935,null),h(1936,null)]}}}}});var QW=j("telemetryService"),YW=j("customEndpointTelemetryService"),J9;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(J9||(J9={}));var Z9;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(Z9||(Z9={}));var Jm=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},NT=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},XW=new NT,MT="telemetry",FT={id:MT,name:h(2250,null)},OT=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function UT(e){if(!e)return"none";const t=Lg(e);return OT.has(t)?t:"other"}function HT(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;r.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=n.exec(e);if(!a)break;const c=r.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function BT(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function Q9(e,t){return Lo(e,i=>{if(i instanceof Jm||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let r=i.replaceAll("%20"," ");r=HT(r,t);for(const s of t)r=r.replace(s,"");return r=BT(r),r}})}function jT(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id?!0:kg(e.id,t.id)===0}var KW=new Fe("pprice.better-merge"),WT=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const r=this.readActivationEvents(i);r.length>0&&(t[Fe.toKey(i.identifier)]=r)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${Fe.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this.a.get(i);if(!r)continue;const s=e.contributes[i],n=Array.isArray(s)?s:[s];try{r(n,t)}catch(o){Vt(o)}}return t}},zT=new WT,_T=Object.freeze({identifier:new Fe("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:y.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),ez=j("extensionService"),Y9=class{constructor(e){this.dependency=e}},X9;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(X9||(X9={}));function Ze(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function L(e,t){if(!Ze(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var K9;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(K9||(K9={}));var e8;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(e8||(e8={}));var Hc=(e,t)=>e===t,VT={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Hc,label:Hc,description:Hc,error:Hc,sortText:Hc,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},qT=Object.entries(VT),GT=(e,t)=>{let i;for(const[r,s]of qT)s(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i},JT=class extends ne{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new Po(()=>this.flushDiff(),200)),this.g=this.B(new P),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){zm(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){zm(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const r=this.M(i);return r.isOpen()?this.L(i,t-1):r.wait().then(()=>this.L(i,t-1))}else if(i.expand===3)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Re.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const i of t.ops)this.w(e,i);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:ig(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const i=Re.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.s.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.s.getChildren(r.parent).delete(e.id);let s=this.tree.get(i.toString());if(!s){s={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=GT(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,i.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Re.joinToString(i,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(i.toString(),c))}),this.y(s.actual.uri)}C(e,t,i){const r=new Set(t.map(s=>s.id));for(const s of e)r.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(s=>Wh(this.s.controllerId,s.id))}}}),r.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Wh(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Wh(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const r=this.s.getApiFor(e);r.parent=i?.actual,r.listener=s=>this.w(t,s),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[r,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[r,s]of this.s.getChildren(e.actual)){const n=this.expand(Re.joinToString(e.fullId,s.id),t);Is(n)&&i.push(n)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new yr;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new yr,i=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let r;try{r=this.h(e.actual===this.root?void 0:e.actual)}catch(s){i(s)}return Is(r)?r.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const r=i.pop();if(r){this.s.getApiFor(r.actual).listener=void 0;for(const s of r.actual.tags)this.F(s.id);this.tree.delete(r.fullId.toString());for(const[s,n]of this.s.getChildren(r.actual))i.push(this.tree.get(Re.joinToString(r.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},ZT=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},Jh=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},QT=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},YT=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(s,n){for(const o of r.values())s.call(n,o,this)},[Symbol.iterator](){return r.entries()},replace(s){const n=new Map,o=new Set(r.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof i))throw new Jh(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new QT(c.id,l,e.controllerId);if(n.has(c.id))throw new ZT(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),r=n},add(s){if(!(s instanceof i))throw new Jh(s.id);r.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){r.delete(s)&&e.listener?.({op:3,id:s})},get(s){return r.get(s)},toJSON(){return Array.from(r.values())}}},t8=new WeakMap,XT=(e,t)=>{const i={controllerId:t};return t8.set(e,i),i},Zh=e=>{const t=t8.get(e);if(!t)throw new Jh(e?.id||"<unknown>");return t},tz=j("remoteAuthorityResolverService"),i8;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(i8||(i8={}));var KT=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},eR=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Xr;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Xr||(Xr={}));function r8(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var Zm,Dn,Kr,Qm,Pn,Ns,An,Ym,Xm,Qh,Bc,Km,Cr,Ir,e1,di,t1;function ie(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const r=i.length===1?[]:i[1];return Reflect.construct(e,r,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[r,...s]=i;return Reflect.construct(e,s,r.constructor)}}})}var i1;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(i1||(i1={}));var s8;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(s8||(s8={}));var Ae=Zm=class{static from(...t){let i=t;return new Zm(function(){if(i){for(const r of i)r&&typeof r.dispose=="function"&&r.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Ae=Zm=__decorate([ie],Ae);var Ie=Dn=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isBefore(i)&&(i=s)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isAfter(i)&&(i=s)}return i}static isPosition(t){if(!t)return!1;if(t instanceof Dn)return!0;const{line:i,character:r}=t;return typeof i=="number"&&typeof r=="number"}static of(t){if(t instanceof Dn)return t;if(this.isPosition(t))return new Dn(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,i){if(t<0)throw ke("line must be non-negative");if(i<0)throw ke("character must be non-negative");this.c=t,this.e=i}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,i=0){if(t===null||i===null)throw ke();let r;return typeof t>"u"?r=0:typeof t=="number"?r=t:(r=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),r===0&&i===0?this:new Dn(this.line+r,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw ke();let r;return typeof t>"u"?r=this.line:typeof t=="number"?r=t:(r=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),r===this.line&&i===this.character?this:new Dn(r,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Ie=Dn=__decorate([ie],Ie);var Ee=Kr=class{static isRange(t){return t instanceof Kr?!0:t?Ie.isPosition(t.start)&&Ie.isPosition(t.end):!1}static of(t){if(t instanceof Kr)return t;if(this.isRange(t))return new Kr(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Ie(t,i),o=new Ie(r,s)):Ie.isPosition(t)&&Ie.isPosition(i)&&(n=Ie.of(t),o=Ie.of(i)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Kr.isRange(t)?this.contains(t.start)&&this.contains(t.end):Ie.isPosition(t)?!(Ie.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const i=Ie.Max(t.start,this.c),r=Ie.Min(t.end,this.e);if(!i.isAfter(r))return new Kr(i,r)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=Ie.Min(t.start,this.c),r=Ie.Max(t.end,this.end);return new Kr(i,r)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,i=this.end){if(t===null||i===null)throw ke();let r;return t?Ie.isPosition(t)?r=t:(r=t.start||this.start,i=t.end||this.end):r=this.start,r.isEqual(this.c)&&i.isEqual(this.end)?this:new Kr(r,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return n8(this)}};Ee=Kr=__decorate([ie],Ee);var es=Qm=class extends Ee{static isSelection(t){return t instanceof Qm?!0:t?Ee.isRange(t)&&Ie.isPosition(t.anchor)&&Ie.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Ie(t,i),o=new Ie(r,s)):Ie.isPosition(t)&&Ie.isPosition(i)&&(n=Ie.of(t),o=Ie.of(i)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return tR(this)}};es=Qm=__decorate([ie],es);function n8(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function tR(e){let t=n8(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var o8=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw ke("connectionToken")},iR=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw ke("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw ke("port");typeof i<"u"&&o8(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},Yh=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&o8(t)}},Jo=class Fp extends Error{static NotAvailable(t,i){return new Fp(t,Xr.NotAvailable,i)}static TemporarilyNotAvailable(t){return new Fp(t,Xr.TemporarilyNotAvailable)}constructor(t,i=Xr.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,Object.setPrototypeOf(this,Fp.prototype)}},or;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(or||(or={}));var Zo;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Zo||(Zo={}));var Ms=Pn=class{static isTextEdit(t){return t instanceof Pn?!0:t?Ee.isRange(t)&&typeof t.newText=="string":!1}static replace(t,i){return new Pn(t,i)}static insert(t,i){return Pn.replace(new Ee(t,t),i)}static delete(t){return Pn.replace(t,"")}static setEndOfLine(t){const i=new Pn(new Ee(new Ie(0,0),new Ie(0,0)),"");return i.newEol=t,i}get range(){return this.c}set range(t){if(t&&!Ee.isRange(t))throw ke("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw ke("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw ke("newEol");this.f=t}constructor(t,i){this.c=t,this.e=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};Ms=Pn=__decorate([ie],Ms);var Xh=Ns=class{static isNotebookCellEdit(t){return t instanceof Ns?!0:t?is.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new Ns(t,i)}static insertCells(t,i){return new Ns(new is(t,t),i)}static deleteCells(t){return new Ns(t,[])}static updateCellMetadata(t,i){const r=new Ns(new is(t,t),[]);return r.newCellMetadata=i,r}static updateNotebookMetadata(t){const i=new Ns(new is(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};Xh=Ns=__decorate([ie],Xh);var r1=class Op{static isSnippetTextEdit(t){return t instanceof Op?!0:t?Ee.isRange(t.range)&&Rn.isSnippetString(t.snippet):!1}static replace(t,i){return new Op(t,i)}static insert(t,i){return Op.replace(new Ee(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},a8;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(a8||(a8={}));var Tn=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,i,r,s){this.c.push({_type:1,from:t,to:i,options:r,metadata:s})}createFile(t,i,r){this.c.push({_type:1,from:void 0,to:t,options:i,metadata:r})}deleteFile(t,i,r){this.c.push({_type:1,from:t,to:void 0,options:i,metadata:r})}e(t,i,r){this.c.push({_type:3,metadata:r,uri:t,edit:{editType:5,metadata:i}})}f(t,i,r,s){const n=i.start,o=i.end;(n!==o||r.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:r,metadata:s})}g(t,i,r,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:i,metadata:r}})}replace(t,i,r,s){this.c.push({_type:2,uri:t,edit:new Ms(i,r),metadata:s})}insert(t,i,r,s){this.replace(t,new Ee(i,i),r,s)}delete(t,i,r){this.replace(t,i,"",r)}has(t){return this.c.some(i=>i._type===2&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const r of i){if(!r)continue;let s,n;Array.isArray(r)?(s=r[0],n=r[1]):s=r,Xh.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):r1.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n,keepWhitespace:s.keepWhitespace}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let r=0;r<this.c.length;r++){const s=this.c[r];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[r]=void 0);break}}YC(this.c)}}get(t){const i=[];for(const r of this.c)r._type===2&&r.uri.toString()===t.toString()&&i.push(r.edit);return i}entries(){const t=new Nt;for(const i of this.c)if(i._type===2){let r=t.get(i.uri);r||(r=[i.uri,[]],t.set(i.uri,r)),r[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Tn=__decorate([ie],Tn);var Rn=An=class{static isSnippetString(t){return t instanceof An?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=An.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.e++){if(typeof t=="function"){const r=new An;r.e=this.e,t(r),this.e=r.e,t=r.value}else t=An.c(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.e++){const r=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=r,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const r=new An;r.e=this.e,i(r),this.e=r.e,i=r.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};Rn=An=__decorate([ie],Rn);var Ln;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(Ln||(Ln={}));var Yt;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(Yt||(Yt={}));var Hi=Ym=class{static isLocation(t){return t instanceof Ym?!0:t?Ee.isRange(t.range)&&y.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if(Ee.isRange(i))this.range=Ee.of(i);else if(Ie.isPosition(i))this.range=new Ee(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};Hi=Ym=__decorate([ie],Hi);var jc=class{static is(t){return t?typeof t.message=="string"&&t.location&&Ee.isRange(t.location.range)&&y.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};jc=__decorate([ie],jc);var Kh=class{constructor(t,i,r=Yt.Error){if(!Ee.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=r}toJSON(){return{severity:Yt[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&wr(t.tags,i.tags)&&wr(t.relatedInformation,i.relatedInformation,jc.isEqual)}};Kh=__decorate([ie],Kh);var ed=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};ed=__decorate([ie],ed);var td=class extends ed{constructor(t,i,r,s){super(t,i),this.canIncreaseVerbosity=r,this.canDecreaseVerbosity=s}};td=__decorate([ie],td);var s1;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(s1||(s1={}));var Wc;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Wc||(Wc={}));var id=class{constructor(t,i=Wc.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:Wc[this.kind]}}};id=__decorate([ie],id);var rd=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};rd=__decorate([ie],rd);var Ye;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(Ye||(Ye={}));var zc;(function(e){e[e.Deprecated=1]="Deprecated"})(zc||(zc={}));var _c=Xm=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,r,s,n){this.name=t,this.kind=i,this.containerName=n,typeof r=="string"&&(this.containerName=r),s instanceof Hi?this.location=s:r instanceof Ee&&(this.location=new Hi(s,r)),Xm.validate(this)}toJSON(){return{name:this.name,kind:Ye[this.kind],location:this.location,containerName:this.containerName}}};_c=Xm=__decorate([ie],_c);var Vc=Qh=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Qh.validate)}constructor(t,i,r,s,n){this.name=t,this.detail=i,this.kind=r,this.range=s,this.selectionRange=n,this.children=[],Qh.validate(this)}};Vc=Qh=__decorate([ie],Vc);var qc;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(qc||(qc={}));var Gc=class{constructor(t,i){this.title=t,this.kind=i}};Gc=__decorate([ie],Gc);var at=class{static{Bc=this}static{this.c="."}constructor(t){this.value=t}append(t){return new Bc(this.value?this.value+Bc.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Bc.c)}};at=Bc=__decorate([ie],at),at.Empty=new at(""),at.QuickFix=at.Empty.append("quickfix"),at.Refactor=at.Empty.append("refactor"),at.RefactorExtract=at.Refactor.append("extract"),at.RefactorInline=at.Refactor.append("inline"),at.RefactorMove=at.Refactor.append("move"),at.RefactorRewrite=at.Refactor.append("rewrite"),at.Source=at.Empty.append("source"),at.SourceOrganizeImports=at.Source.append("organizeImports"),at.SourceFixAll=at.Source.append("fixAll"),at.Notebook=at.Empty.append("notebook");var Jc=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Jc=__decorate([ie],Jc);var n1=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},c8=class{constructor(e,t){this.fromRanges=t,this.from=e}},l8=class{constructor(e,t){this.fromRanges=t,this.to=e}},Qo;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Qo||(Qo={}));var sd=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};sd=__decorate([ie],sd);var Ii=Km=class{#e;static isMarkdownString(t){return t instanceof Km?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new Fo(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};Ii=Km=__decorate([ie],Ii);var o1=class{constructor(t,i){this.label=t,this.documentation=i}};o1=__decorate([ie],o1);var a1=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};a1=__decorate([ie],a1);var c1=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};c1=__decorate([ie],c1);var l1;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(l1||(l1={}));var u1;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(u1||(u1={}));var nd=class{constructor(t){this.value=t}};nd=__decorate([ie],nd);var od=class{constructor(t,i,r){this.position=t,this.label=i,this.kind=r}};od=__decorate([ie],od);var Yo;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Yo||(Yo={}));var ce;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(ce||(ce={}));var Zc;(function(e){e[e.Deprecated=1]="Deprecated"})(Zc||(Zc={}));var ad=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&ce[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};ad=__decorate([ie],ad);var Xo=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};Xo=__decorate([ie],Xo);var h1=class{constructor(t,i,r){this.insertText=t,this.range=i,this.command=r}};h1=__decorate([ie],h1);var d1=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};d1=__decorate([ie],d1);var Nn;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(Nn||(Nn={}));var Ko;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(Ko||(Ko={}));var Qc;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Qc||(Qc={}));var Fs;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Fs||(Fs={}));function rR(e,t){return`${Fe.toKey(e)}.${t}`}var ar;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(ar||(ar={}));var ea;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(ea||(ea={}));var cd;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(cd||(cd={}));var ta;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(ta||(ta={}));var ia;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(ia||(ia={}));var Yc;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Yc||(Yc={}));var Mn;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(Mn||(Mn={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(ta||(ta={}));var ra;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(ra||(ra={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(ra||(ra={}));var ld=class{constructor(t,i){if(i&&!y.isUri(i))throw ke("target");if(!Ee.isRange(t)||t.isEmpty)throw ke("range");this.range=t,this.target=i}};ld=__decorate([ie],ld);var sa=class{constructor(t,i,r,s){this.red=t,this.green=i,this.blue=r,this.alpha=s}};sa=__decorate([ie],sa);var ud=class{constructor(t,i){if(i&&!(i instanceof sa))throw ke("color");if(!Ee.isRange(t)||t.isEmpty)throw ke("range");this.range=t,this.color=i}};ud=__decorate([ie],ud);var hd=class{constructor(t){if(!t||typeof t!="string")throw ke("label");this.label=t}};hd=__decorate([ie],hd);var u8;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(u8||(u8={}));var f1;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(f1||(f1={}));var p1;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(p1||(p1={}));var Xc;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Xc||(Xc={}));var g1;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(g1||(g1={}));var sR=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw ke("startIndex");if(typeof t!="number"||t<1)throw ke("length");if(i!==void 0&&typeof i!="string")throw ke("tooltip")}},nR=class{constructor(e){this.uri=e}},oR=class{constructor(e){this.terminalCommand=e}},m1;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(m1||(m1={}));var aR=class{constructor(e){if(this.options=e,typeof e!="object")throw ke("options")}},v1;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Method=2]="Method",e[e.Alias=3]="Alias",e[e.Argument=4]="Argument",e[e.Option=5]="Option",e[e.OptionValue=6]="OptionValue",e[e.Flag=7]="Flag"})(v1||(v1={}));var cR=class{constructor(e,t,i,r,s,n,o,a,c){this.label=e,this.icon=t,this.detail=i,this.documentation=r,this.isFile=s,this.isDirectory=n,this.isKeyword=o,this.replacementIndex=a??0,this.replacementLength=c??0}},lR=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},w1;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(w1||(w1={}));var b1;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(b1||(b1={}));var y1;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(y1||(y1={}));var Kc=class{static{Cr=this}static{this.Clean=new Cr("clean","Clean")}static{this.Build=new Cr("build","Build")}static{this.Rebuild=new Cr("rebuild","Rebuild")}static{this.Test=new Cr("test","Test")}static from(t){switch(t){case"clean":return Cr.Clean;case"build":return Cr.Build;case"rebuild":return Cr.Rebuild;case"test":return Cr.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw ke("name");this.c=t}get id(){return this.c}};Kc=Cr=__decorate([ie],Kc);function h8(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var na=class{constructor(t,i,r){if(typeof t!="string")throw ke("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=r):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw ke("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return h8(t)}};na=__decorate([ie],na);var Fn=class{constructor(t,i,r){if(this.f=[],Array.isArray(i)){if(!t)throw ke("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw ke("command");this.e=t,i&&(this.f=i),this.g=r}else{if(typeof t!="string")throw ke("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw ke("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw ke("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return h8(t)}};Fn=__decorate([ie],Fn);var x1;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(x1||(x1={}));var Os;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Os||(Os={}));var E1=class{constructor(e){this.c=e}computeId(){return"customExecution"+Mt()}set callback(e){this.c=e}get callback(){return this.c}},dd=class{static{Ir=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,r,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.w=this.source=r,this.execution=s,a=n,this.k=!0):i===Os.Global||i===Os.Workspace?(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o):(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof na?this.l={type:Ir.e,id:this.q.computeId()}:this.q instanceof Fn?this.l={type:Ir.f,id:this.q.computeId()}:this.q instanceof E1?this.l={type:Ir.c,id:this.q.computeId()}:this.l={type:Ir.g,id:Mt()}}get definition(){return this.l}set definition(t){if(t==null)throw ke("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw ke("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const i=this.l.type;(Ir.g===i||Ir.e===i||Ir.f===i||Ir.c===i)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw ke("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};dd=Ir=__decorate([ie],dd);var On;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(On||(On={}));var S1;(function(e){function t(i){const r=i;return on(r.value)?r.tooltip&&!Me(r.tooltip)?(console.log("INVALID view badge, invalid tooltip",r.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",r.value),!1)}e.isViewBadge=t})(S1||(S1={}));var fd=e1=class{static isTreeItem(t,i){const r=t;if(r.checkboxState!==void 0){const s=on(r.checkboxState)?r.checkboxState:yt(r.checkboxState)&&on(r.checkboxState.state)?r.checkboxState.state:void 0,n=!on(r.checkboxState)&&yt(r.checkboxState)?r.checkboxState.tooltip:void 0;if(s===void 0||s!==Dr.Checked&&s!==Dr.Unchecked||n!==void 0&&!Me(n))return console.log("INVALID tree item, invalid checkboxState",r.checkboxState),!1}if(t instanceof e1)return!0;if(r.label!==void 0&&!Me(r.label)&&!r.label?.label)return console.log("INVALID tree item, invalid label",r.label),!1;if(r.id!==void 0&&!Me(r.id))return console.log("INVALID tree item, invalid id",r.id),!1;if(r.iconPath!==void 0&&!Me(r.iconPath)&&!y.isUri(r.iconPath)&&(!r.iconPath||!Me(r.iconPath.id))){const s=r.iconPath;if(!s||!Me(s.light)&&!y.isUri(s.light)&&!Me(s.dark)&&!y.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",r.iconPath),!1}return r.description!==void 0&&!Me(r.description)&&typeof r.description!="boolean"?(console.log("INVALID tree item, invalid description",r.description),!1):r.resourceUri!==void 0&&!y.isUri(r.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",r.resourceUri),!1):r.tooltip!==void 0&&!Me(r.tooltip)&&!(r.tooltip instanceof Ii)?(console.log("INVALID tree item, invalid tooltip",r.tooltip),!1):r.command!==void 0&&!r.command.command?(console.log("INVALID tree item, invalid command",r.command),!1):r.collapsibleState!==void 0&&r.collapsibleState<Un.None&&r.collapsibleState>Un.Expanded?(console.log("INVALID tree item, invalid collapsibleState",r.collapsibleState),!1):r.contextValue!==void 0&&!Me(r.contextValue)?(console.log("INVALID tree item, invalid contextValue",r.contextValue),!1):r.accessibilityInformation!==void 0&&!r.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",r.accessibilityInformation),!1):!0}constructor(t,i=Un.None){this.collapsibleState=i,y.isUri(t)?this.resourceUri=t:this.label=t}};fd=e1=__decorate([ie],fd);var Un;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Un||(Un={}));var Dr;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(Dr||(Dr={}));var pd=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};pd=__decorate([ie],pd);var gd=class extends pd{},uR=class extends gd{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},hR=class{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this.c=r}data(){return this.c()}},oa=class{#e=new Map;constructor(t){for(const[i,r]of t??[]){const s=this.#e.get(this.#t(i));s?s.push(r):this.#e.set(this.#t(i),[r])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[r,s]of this.#e)for(const n of s)t.call(i,n,r,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const r of i)yield[t,r]}#t(t){return t.toLowerCase()}};oa=__decorate([ie],oa);var k1=class{constructor(t,i,r){this.insertText=t,this.title=i,this.kind=r}};k1=__decorate([ie],k1);var $1;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})($1||($1={}));var Us=class Up{static{this.c="."}constructor(t){this.value=t}append(...t){return new Up((this.value?[this.value,...t]:t).join(Up.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Up.c)}};Us.Empty=new Us(""),Us.Text=new Us("text"),Us.TextUpdateImports=Us.Text.append("updateImports");var dR=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},oi=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};oi=__decorate([ie],oi),oi.File=new oi("file"),oi.Folder=new oi("folder");var el=class{constructor(t){this.id=t}};el=__decorate([ie],el);var aa;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(aa||(aa={}));var ca=class{get base(){return this.c}set base(t){this.c=t,this.e=y.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!y.isUri(t)&&!y.isUri(t.uri)))throw ke("base");if(typeof i!="string")throw ke("pattern");typeof t=="string"?this.baseUri=y.file(t):y.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};ca=__decorate([ie],ca);var d8=new WeakMap;function fR(e,t){d8.set(e,t)}var la=class{constructor(t,i,r,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof r=="string"&&(this.hitCondition=r),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=d8.get(this)??Mt()),this.c}};la=__decorate([ie],la);var Hn=class extends la{constructor(t,i,r,s,n,o){if(super(i,r,s,n,o),t===null)throw ke("location");this.location=t}};Hn=__decorate([ie],Hn);var Bn=class extends la{constructor(t,i,r,s,n,o){super(i,r,s,n,o),this.functionName=t}};Bn=__decorate([ie],Bn);var md=class extends la{constructor(t,i,r,s,n,o,a,c){if(super(s,n,o,a,c),!i)throw ke("dataId");this.label=t,this.dataId=i,this.canPersist=r}};md=__decorate([ie],md);var vd=class{constructor(t,i,r){this.command=t,this.args=i||[],this.options=r}};vd=__decorate([ie],vd);var tl=class{constructor(t,i){this.port=t,this.host=i}};tl=__decorate([ie],tl);var wd=class{constructor(t){this.path=t}};wd=__decorate([ie],wd);var il=class{constructor(t){this.implementation=t}};il=__decorate([ie],il);var f8=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},p8=class{constructor(e,t){this.session=e,this.threadId=t}},bd=class{constructor(t,i){this.range=t,this.expression=i}};bd=__decorate([ie],bd);var rl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(rl||(rl={}));var yd=class{constructor(t,i){this.range=t,this.text=i}};yd=__decorate([ie],yd);var xd=class{constructor(t,i,r=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=r}};xd=__decorate([ie],xd);var Ed=class{constructor(t,i){this.range=t,this.expression=i}};Ed=__decorate([ie],Ed);var C1=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};C1=__decorate([ie],C1);var I1;(function(e){e[e.AIGenerated=1]="AIGenerated"})(I1||(I1={}));var sl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(sl||(sl={}));var pR=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},ua;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(ua||(ua={}));var Dt=di=class extends Error{static FileExists(t){return new di(t,ye.FileExists,di.FileExists)}static FileNotFound(t){return new di(t,ye.FileNotFound,di.FileNotFound)}static FileNotADirectory(t){return new di(t,ye.FileNotADirectory,di.FileNotADirectory)}static FileIsADirectory(t){return new di(t,ye.FileIsADirectory,di.FileIsADirectory)}static NoPermissions(t){return new di(t,ye.NoPermissions,di.NoPermissions)}static Unavailable(t){return new di(t,ye.Unavailable,di.Unavailable)}constructor(t,i=ye.Unknown,r){super(y.isUri(t)?t.toString(!0):t),this.code=r?.name??"Unknown",I6(this,i),Object.setPrototypeOf(this,di.prototype),typeof Error.captureStackTrace=="function"&&typeof r=="function"&&Error.captureStackTrace(this,r)}};Dt=di=__decorate([ie],Dt);var D1=class{constructor(t,i,r){this.start=t,this.end=i,this.kind=r}};D1=__decorate([ie],D1);var ts;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(ts||(ts={}));var nl;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(nl||(nl={}));var P1;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(P1||(P1={}));var A1;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(A1||(A1={}));var ol;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(ol||(ol={}));var al;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(al||(al={}));var cl;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(cl||(cl={}));var T1=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function gR(e){return typeof e>"u"||oI(e)}var mR=class _${constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,r=t.tokenTypes.length;i<r;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,r=t.tokenModifiers.length;i<r;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,r,s,n){if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,i,r,s,n);if(Ee.isRange(t)&&typeof i=="string"&&gR(r))return this.o(t,i,r);throw ke()}o(t,i,r){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(r)for(const l of r){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,i,r,s,n){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let d=0;d<c;d++){let f=this.g[5*d],p=this.g[5*d+1];f===0?(f=l,p+=u):f+=l,this.g[5*d]=f,this.g[5*d+1]=p,l=f,u=p}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=r,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=i}static r(t){const i=[],r=t.length/5|0;for(let a=0;a<r;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const d=t[5*a+1],f=t[5*c+1];return d-f}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<r;a++){const c=5*i[a],l=t[c+0],u=t[c+1],d=t[c+2],f=t[c+3],p=t[c+4],m=l-n,w=m===0?u-o:u,x=5*a;s[x+0]=m,s[x+1]=w,s[x+2]=d,s[x+3]=f,s[x+4]=p,n=l,o=u}return s}build(t){return this.f?new ha(new Uint32Array(this.g),t):new ha(_$.r(this.g),t)}},ha=class{constructor(e,t){this.resultId=t,this.data=e}},g8=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},Sd=class{constructor(e,t){this.resultId=t,this.edits=e}},kd;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(kd||(kd={}));var vR=class{constructor(e){this.name=e}},R1;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(R1||(R1={}));var ll=class{static{this.Back={iconPath:new oi("arrow-left")}}constructor(){}};ll=__decorate([ie],ll);var ul;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(ul||(ul={}));var da;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(da||(da={}));var jn;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(jn||(jn={}));var L1=class{static validate(e){if(typeof e.badge=="string"){let t=n4(e.badge,0);if(t<e.badge.length&&(t+=n4(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!oi.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},$d=class{constructor(t){this.kind=t}};$d=__decorate([ie],$d);var Hs;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Hs||(Hs={}));var is=class Cb{static isNotebookRange(t){return t instanceof Cb?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,i){if(t<0)throw ke("start must be positive");if(i<0)throw ke("end must be positive");t<=i?(this.c=t,this.e=i):(this.c=i,this.e=t)}with(t){let i=this.c,r=this.e;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(r=t.end),i===this.c&&r===this.e?this:new Cb(i,r)}},Cd=class Ib{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>Ib.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,r,s,n,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,Ib.validate(this)}},m8=class{constructor(e){this.cells=e}},v8=class ms{static isNotebookCellOutputItem(t){return t instanceof ms?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return ms.json(i,"application/vnd.code.notebook.error")}static stdout(t){return ms.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return ms.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new ms(t,i)}static#e=new TextEncoder;static text(t,i=Jr.text){const r=ms.#e.encode(String(t));return new ms(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return ms.text(r,i)}constructor(t,i){this.data=t,this.mime=i;const r=K5(i,!0);if(!r)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=r}},Id=class Db{static isNotebookCellOutput(t){return t instanceof Db?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const r=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=K5(o.mime);if(!r.has(a)||D7(a)){r.add(a);continue}s.add(n),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,i,r){this.items=Db.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=r):(this.id=Mt(),this.metadata=i??r)}},wR=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Wn;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Wn||(Wn={}));var fa;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(fa||(fa={}));var Dd;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Dd||(Dd={}));var Pd;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Pd||(Pd={}));var bR=class{constructor(e,t){this.text=e,this.alignment=t}},N1;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(N1||(N1={}));var Ad;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Ad||(Ad={}));var w8=class{constructor(e,t=[]){this.uri=e,this.provides=Ni(t)}},yR=class{constructor(e){this.label=e}},hl;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(hl||(hl={}));var M1=class{constructor(t,i){this.label=t,this.timestamp=i}};M1=__decorate([ie],M1);var pa;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(pa||(pa={}));var Td;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(Td||(Td={}));var Bs;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Bs||(Bs={}));var xR=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},ER=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},F1;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(F1||(F1={}));var ga;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(ga||(ga={}));var b8=class{constructor(e,t,i){this.controllerId=e,this.profileId=t,this.kind=i}},Rd=class{constructor(t=void 0,i=void 0,r=void 0,s=!1,n=!0){this.include=t,this.exclude=i,this.profile=r,this.continuous=s,this.preserveFocus=n}};Rd=__decorate([ie],Rd);var Ld=t1=class{static diff(t,i,r){const s=new t1(t);return s.expectedOutput=i,s.actualOutput=r,s}constructor(t){this.message=t}};Ld=t1=__decorate([ie],Ld);var dl=class{constructor(t){this.id=t}};dl=__decorate([ie],dl);var SR=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Nd=class{constructor(e,t){this.covered=e,this.total=t,Md(this)}};function Md(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Fd=class V${static fromDetails(t,i){const r=new Nd(0,0),s=new Nd(0,0),n=new Nd(0,0);for(const a of i)if("branches"in a){r.total+=1,r.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new V$(t,r,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=i,o}constructor(t,i,r,s,n=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=r,this.declarationCoverage=s,this.includesTests=n}},y8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},x8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},E8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},O1;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(O1||(O1={}));var U1;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(U1||(U1={}));var H1;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(H1||(H1={}));var B1=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},j1=class{constructor(e){this.uri=e}},Od=class{constructor(e,t){this.original=e,this.modified=t}},S8=class{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}},W1=class{constructor(e,t){this.uri=e,this.viewType=t}},k8=class{constructor(e){this.viewType=e}},z1=class{constructor(e,t){this.uri=e,this.notebookType=t}},_1=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},$8=class{constructor(){}},C8=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},I8=class{constructor(){}},D8=class{constructor(e){this.textDiffs=e}},V1;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(V1||(V1={}));var q1;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(q1||(q1={}));var G1;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(G1||(G1={}));var kR=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},zn;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(zn||(zn={}));var J1;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(J1||(J1={}));var Z1;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(Z1||(Z1={}));var fl;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(fl||(fl={}));var Ud=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ii(e):e}},pl=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ii(e):e,this.vulnerabilities=t}},Hd=class{constructor(e,t,i,r){this.title=e,this.message=t,this.data=i,this.buttons=r}},Bd=class{constructor(e,t){this.value=e,this.baseUri=t}},gl=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},Q1=class{constructor(e){this.value=e}},jd=class{constructor(e,t){this.value=e,this.task=t}},ml=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ii(e):e}},Wd=class{constructor(e){this.value=e}},_n=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},zd=class{constructor(e,t){this.value=e,this.isEdit=t}},_d=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},Vd=class{constructor(e,t){this.uri=e,this.range=t}},Y1=class{constructor(e){this.extensions=e}},vl=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},qd=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},X1=class{constructor(e,t,i,r,s,n){this.prompt=e,this.command=t,this.references=i,this.participant=r,this.toolReferences=s,this.editedFileEvents=n}},P8=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},cr;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(cr||(cr={}));var K1;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(K1||(K1={}));var A8=class{constructor(e,t,i){this.document=e,this.selection=t,this.wholeRange=i}},T8=class{constructor(e){this.cell=e}},R8=class{constructor(e,t,i){this.mimeType=e,this.data=t,this.reference=i}},L8=class{constructor(e){this.diagnostics=e}},Di;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Di||(Di={}));var Gd=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},ev=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},$R=class{constructor(e,t,i){this.command=e,this.language=t,this.confirmationMessages=i}},tv;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(tv||(tv={}));var N8=class Pb{static User(t,i){return new Pb(Di.User,t,i)}static Assistant(t,i){return new Pb(Di.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new pt(t)]:this.c=t}get content(){return this.c}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},M8=class Ab{static User(t,i){return new Ab(Di.User,t,i)}static Assistant(t,i){return new Ab(Di.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new pt(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(i=>typeof i=="string"?new pt(i):i))}get content2(){return this.content.map(t=>t instanceof pt?t.value:t)}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},Vn=class{constructor(e,t,i){this.callId=e,this.name=t,this.input=i}},pt=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},js=class Hp{constructor(t,i){this.mimeType=i,this.data=t}static image(t,i){return new Hp(t,i)}static json(t){const i=JSON.stringify(t,void 0,"	");return new Hp(ae.fromString(i).buffer,"json")}static text(t){return new Hp(ae.fromString(t).buffer,"text/plain")}toJSON(){return{$mid:23,mimeType:this.mimeType,data:this.data}}},Jd;(function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e.WEBP="image/webp",e.BMP="image/bmp"})(Jd||(Jd={}));var iv=class{constructor(e,t){this.kind=e,this.data=t}toJSON(){return{$mid:24,kind:this.kind,data:this.data}}},Pr=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},rs=class Mr extends Error{static#e="LanguageModelError";static NotFound(t){return new Mr(t,Mr.NotFound.name)}static NoPermissions(t){return new Mr(t,Mr.NoPermissions.name)}static Blocked(t){return new Mr(t,Mr.Blocked.name)}static tryDeserialize(t){if(t.name===Mr.#e)return new Mr(t.message,t.code,t.cause)}constructor(t,i,r){super(t,{cause:r}),this.name=Mr.#e,this.code=i??""}},Zd=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},F8=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},CR=class extends Zd{},rv;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(rv||(rv={}));var sv;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(sv||(sv={}));var nv;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(nv||(nv={}));var ov;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(ov||(ov={}));var av;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(av||(av={}));var cv;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(cv||(cv={}));var IR=class{constructor(e,t){this.text=e,this.range=t}},wl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(wl||(wl={}));var DR=class{constructor(e,t,i,r={},s){this.label=e,this.command=t,this.args=i,this.env=r,this.version=s}},PR=class{constructor(e,t,i={},r){this.label=e,this.uri=t,this.headers=i,this.version=r}},g_=j("IAiSettingsSearchService"),Ws;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(Ws||(Ws={}));function AR(e,t){return Fe.toKey(e)+"/"+t}var O8;(function(e){e[e.WorkspaceFolder=0]="WorkspaceFolder",e[e.Workspace=100]="Workspace",e[e.User=200]="User",e[e.Extension=300]="Extension",e[e.Filesystem=400]="Filesystem",e[e.RemoteBoost=-50]="RemoteBoost"})(O8||(O8={}));var U8;(function(e){function t(i,r){return i.id===r.id&&i.remoteAuthority===r.remoteAuthority&&i.label===r.label&&i.isTrustedByDefault===r.isTrustedByDefault}e.equals=t})(U8||(U8={}));var H8;(function(e){function t(s){return s}e.toSerialized=t;function i(s){return{id:s.id,label:s.label,cacheNonce:s.cacheNonce,launch:bl.fromSerialized(s.launch),variableReplacement:s.variableReplacement?lv.fromSerialized(s.variableReplacement):void 0}}e.fromSerialized=i;function r(s,n){return s.id===n.id&&s.label===n.label&&wr(s.roots,n.roots,(o,a)=>o.toString()===a.toString())&&ui(s.launch,n.launch)&&ui(s.presentation,n.presentation)&&ui(s.variableReplacement,n.variableReplacement)}e.equals=r})(H8||(H8={}));var lv;(function(e){function t(r){return r}e.toSerialized=t;function i(r){return{section:r.section,folder:r.folder?{...r.folder,uri:y.revive(r.folder.uri)}:void 0,target:r.target}}e.fromSerialized=i})(lv||(lv={}));var B8;(function(e){e[e.HasUnknown=0]="HasUnknown",e[e.LoadingUnknown=1]="LoadingUnknown",e[e.AllKnown=2]="AllKnown"})(B8||(B8={}));var m_=j("IMcpService"),j8;(function(e){e[e.Unknown=0]="Unknown",e[e.Cached=1]="Cached",e[e.Outdated=2]="Outdated",e[e.RefreshingFromUnknown=3]="RefreshingFromUnknown",e[e.RefreshingFromCached=4]="RefreshingFromCached",e[e.Live=5]="Live"})(j8||(j8={}));var W8;(function(e){e[e.Stdio=1]="Stdio",e[e.HTTP=2]="HTTP"})(W8||(W8={}));var bl;(function(e){function t(r){return r}e.toSerialized=t;function i(r){switch(r.type){case 2:return{type:r.type,uri:y.revive(r.uri),headers:r.headers};case 1:return{type:r.type,cwd:r.cwd?y.revive(r.cwd):void 0,command:r.command,args:r.args,env:r.env,envFile:r.envFile}}}e.fromSerialized=i})(bl||(bl={}));var z8;(function(e){let t;(function(i){i[i.Stopped=0]="Stopped",i[i.Starting=1]="Starting",i[i.Running=2]="Running",i[i.Error=3]="Error"})(t=e.Kind||(e.Kind={})),e.toString=i=>{switch(i.state){case 0:return h(8572,null);case 1:return h(8573,null);case 2:return h(8574,null);case 3:return h(8575,null,i.message);default:ig(i)}},e.toKindString=i=>{switch(i){case 0:return"stopped";case 1:return"starting";case 2:return"running";case 3:return"error";default:ig(i)}},e.canBeStarted=i=>i===3||i===0,e.isRunning=i=>!e.canBeStarted(i.state)})(z8||(z8={}));var lr;(function(e){function t(r){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=r,c=new Ie(s-1,n-1),l=new Ie(o-1,a-1);return new es(c,l)}e.to=t;function i(r){const{anchor:s,active:n}=r;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=i})(lr||(lr={}));var O;(function(e){function t(r){if(!r)return;const{start:s,end:n}=r;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function i(r){if(!r)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=r;return new Ee(s-1,n-1,o-1,a-1)}e.to=i})(O||(O={}));var Ar;(function(e){function t(r){return{uri:r.uri,range:O.from(r.range)}}e.from=t;function i(r){return new Hi(y.revive(r.uri),O.to(r.range))}e.to=i})(Ar||(Ar={}));var uv;(function(e){function t(i){switch(i){case 1:return Bs.Comment;case 0:return Bs.Other;case 3:return Bs.RegEx;case 2:return Bs.String}}e.to=t})(uv||(uv={}));var je;(function(e){function t(r){return new Ie(r.lineNumber-1,r.column-1)}e.to=t;function i(r){return{lineNumber:r.line+1,column:r.character+1}}e.from=i})(je||(je={}));var ma;(function(e){function t(s,n,o){return bt(Ni(s).map(a=>i(a,n,o)))}e.from=t;function i(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:r(s.scheme,n),pattern:Ai.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function r(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(ma||(ma={}));var Qd;(function(e){function t(r){switch(r){case Ln.Unnecessary:return 1;case Ln.Deprecated:return 2}}e.from=t;function i(r){switch(r){case 1:return Ln.Unnecessary;case 2:return Ln.Deprecated;default:return}}e.to=i})(Qd||(Qd={}));var va;(function(e){function t(r){let s;return r.code&&(Me(r.code)||on(r.code)?s=String(r.code):s={value:String(r.code.value),target:r.code.target}),{...O.from(r.range),message:r.message,source:r.source,code:s,severity:yl.from(r.severity),relatedInformation:r.relatedInformation&&r.relatedInformation.map(Yd.from),tags:Array.isArray(r.tags)?bt(r.tags.map(Qd.from)):void 0}}e.from=t;function i(r){const s=new Kh(O.to(r),r.message,yl.to(r.severity));return s.source=r.source,s.code=Me(r.code)?r.code:r.code?.value,s.relatedInformation=r.relatedInformation&&r.relatedInformation.map(Yd.to),s.tags=r.tags&&bt(r.tags.map(Qd.to)),s}e.to=i})(va||(va={}));var Yd;(function(e){function t(r){return{...O.from(r.location.range),message:r.message,resource:r.location.uri}}e.from=t;function i(r){return new jc(new Hi(r.resource,O.to(r)),r.message)}e.to=i})(Yd||(Yd={}));var yl;(function(e){function t(r){switch(r){case Yt.Error:return hi.Error;case Yt.Warning:return hi.Warning;case Yt.Information:return hi.Info;case Yt.Hint:return hi.Hint}return hi.Error}e.from=t;function i(r){switch(r){case hi.Info:return Yt.Information;case hi.Warning:return Yt.Warning;case hi.Error:return Yt.Error;case hi.Hint:return Yt.Hint;default:return Yt.Error}}e.to=i})(yl||(yl={}));var Pt;(function(e){function t(r){return typeof r=="number"&&r>=Qc.One?r-1:r===Qc.Beside?RT:TT}e.from=t;function i(r){if(typeof r=="number"&&r>=0)return r+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(Pt||(Pt={}));function TR(e){return typeof e.range<"u"}function _8(e){return e.length===0?!0:!!TR(e[0])}var me;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function r(a){let c;if(i(a)){const{language:d,value:f}=a;c={value:"```"+d+`
`+f+"\n```\n"}}else Ii.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:d})=>{try{let f=y.parse(d,!0);f=f.with({query:s(f.query,l)}),l[d]=f}catch{}return""};return rt.walkTokens(rt.lexer(c.value),d=>{d.type==="link"?u({href:d.href}):d.type==="image"&&typeof d.href=="string"&&u(L2(d.href))}),c}e.from=r;function s(a,c){if(!a)return a;let l;try{l=X5(a)}catch{}if(!l)return a;let u=!1;return l=Lo(l,d=>{if(y.isUri(d)){const f=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[f]=d,u=!0,f}else return}),u?JSON.stringify(l):a}function n(a){const c=new Ii(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?y.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(me||(me={}));function RR(e){return _8(e)?e.map(t=>({range:O.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?me.fromMany(t.hoverMessage):t.hoverMessage?me.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:O.from(t)}))}function Xd(e){return typeof e>"u"?e:typeof e=="string"?y.file(e):e}var wa;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?Xd(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height}}e.from=t})(wa||(wa={}));var Kd;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Xd(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?wa.from(i.before):void 0,after:i.after?wa.from(i.after):void 0}}e.from=t})(Kd||(Kd={}));var hv;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case Mn.OpenOpen:return 0;case Mn.ClosedClosed:return 1;case Mn.OpenClosed:return 2;case Mn.ClosedOpen:return 3}}e.from=t})(hv||(hv={}));var dv;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?hv.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?Kd.from(i.light):void 0,dark:i.dark?Kd.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Xd(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?wa.from(i.before):void 0,after:i.after?wa.from(i.after):void 0}}e.from=t})(dv||(dv={}));var At;(function(e){function t(r){return{text:r.newText,eol:r.newEol&&Ea.from(r.newEol),range:O.from(r.range)}}e.from=t;function i(r){const s=new Ms(O.to(r.range),r.text);return s.newEol=typeof r.eol>"u"?void 0:Ea.to(r.eol),s}e.to=i})(At||(At={}));var Pi;(function(e){function t(r,s){const n={edits:[]};if(r instanceof Tn){const o=new Xb;for(const a of r._allEntries())a._type===1&&y.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of r._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:cg(ae.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:At.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:O.from(a.range),text:a.edit.value,insertAsSnippet:!0,keepWhitespace:a.keepWhitespace},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(ka.from)}})}return n}e.from=t;function i(r){const s=new Tn,n=new Nt;for(const o of r.edits)if(o.textEdit){const a=o,c=y.revive(a.resource),l=O.to(a.textEdit.range),u=a.textEdit.text,d=a.textEdit.insertAsSnippet;let f;d?f=r1.replace(l,new Rn(u)):f=Ms.replace(l,u);const p=n.get(c);p?p.push(f):n.set(c,[f])}else s.renameFile(y.revive(o.oldResource),y.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=i})(Pi||(Pi={}));var qi;(function(e){const t=Object.create(null);t[Ye.File]=0,t[Ye.Module]=1,t[Ye.Namespace]=2,t[Ye.Package]=3,t[Ye.Class]=4,t[Ye.Method]=5,t[Ye.Property]=6,t[Ye.Field]=7,t[Ye.Constructor]=8,t[Ye.Enum]=9,t[Ye.Interface]=10,t[Ye.Function]=11,t[Ye.Variable]=12,t[Ye.Constant]=13,t[Ye.String]=14,t[Ye.Number]=15,t[Ye.Boolean]=16,t[Ye.Array]=17,t[Ye.Object]=18,t[Ye.Key]=19,t[Ye.Null]=20,t[Ye.EnumMember]=21,t[Ye.Struct]=22,t[Ye.Event]=23,t[Ye.Operator]=24,t[Ye.TypeParameter]=25;function i(s){return typeof t[s]=="number"?t[s]:6}e.from=i;function r(s){for(const n in t)if(t[n]===s)return Number(n);return Ye.Property}e.to=r})(qi||(qi={}));var ss;(function(e){function t(r){switch(r){case zc.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return zc.Deprecated}}e.to=i})(ss||(ss={}));var qn;(function(e){function t(r){return{name:r.name,kind:qi.from(r.kind),tags:r.tags&&r.tags.map(ss.from),containerName:r.containerName,location:fi.from(r.location)}}e.from=t;function i(r){const s=new _c(r.name,qi.to(r.kind),r.containerName,fi.to(r.location));return s.tags=r.tags&&r.tags.map(ss.to),s}e.to=i})(qn||(qn={}));var fv;(function(e){function t(r){const s={name:r.name||"!!MISSING: name!!",detail:r.detail,range:O.from(r.range),selectionRange:O.from(r.selectionRange),kind:qi.from(r.kind),tags:r.tags?.map(ss.from)??[]};return r.children&&(s.children=r.children.map(t)),s}e.from=t;function i(r){const s=new Vc(r.name,r.detail,qi.to(r.kind),O.to(r.range),O.to(r.selectionRange));return vo(r.tags)&&(s.tags=r.tags.map(ss.to)),r.children&&(s.children=r.children.map(i)),s}e.to=i})(fv||(fv={}));var Gn;(function(e){function t(r){const s=new n1(qi.to(r.kind),r.name,r.detail||"",y.revive(r.uri),O.to(r.range),O.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:r.name,detail:r.detail,kind:qi.from(r.kind),uri:r.uri,range:O.from(r.range),selectionRange:O.from(r.selectionRange),tags:r.tags?.map(ss.from)}}e.from=i})(Gn||(Gn={}));var pv;(function(e){function t(i){return new c8(Gn.to(i.from),i.fromRanges.map(r=>O.to(r)))}e.to=t})(pv||(pv={}));var gv;(function(e){function t(i){return new l8(Gn.to(i.to),i.fromRanges.map(r=>O.to(r)))}e.to=t})(gv||(gv={}));var fi;(function(e){function t(r){return{range:r.range&&O.from(r.range),uri:r.uri}}e.from=t;function i(r){return new Hi(y.revive(r.uri),O.to(r.range))}e.to=i})(fi||(fi={}));var xl;(function(e){function t(r){const s=r,n=r;return{originSelectionRange:s.originSelectionRange?O.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:O.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?O.from(s.targetSelectionRange):void 0}}e.from=t;function i(r){return{targetUri:y.revive(r.uri),targetRange:O.to(r.range),targetSelectionRange:r.targetSelectionRange?O.to(r.targetSelectionRange):void 0,originSelectionRange:r.originSelectionRange?O.to(r.originSelectionRange):void 0}}e.to=i})(xl||(xl={}));var El;(function(e){function t(r){return{range:O.from(r.range),contents:me.fromMany(r.contents),canIncreaseVerbosity:r.canIncreaseVerbosity,canDecreaseVerbosity:r.canDecreaseVerbosity}}e.from=t;function i(r){const s=r.contents.map(me.to),n=O.to(r.range),o=r.canIncreaseVerbosity,a=r.canDecreaseVerbosity;return new td(s,n,o,a)}e.to=i})(El||(El={}));var mv;(function(e){function t(r){return{range:O.from(r.range),expression:r.expression}}e.from=t;function i(r){return new bd(O.to(r.range),r.expression)}e.to=i})(mv||(mv={}));var ef;(function(e){function t(r){if(r instanceof yd)return{type:"text",range:O.from(r.range),text:r.text};if(r instanceof xd)return{type:"variable",range:O.from(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};if(r instanceof Ed)return{type:"expression",range:O.from(r.range),expression:r.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(r){switch(r.type){case"text":return{range:O.to(r.range),text:r.text};case"variable":return{range:O.to(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};case"expression":return{range:O.to(r.range),expression:r.expression}}}e.to=i})(ef||(ef={}));var tf;(function(e){function t(r){return{frameId:r.frameId,stoppedLocation:O.from(r.stoppedLocation)}}e.from=t;function i(r){return new C1(r.frameId,O.to(r.stoppedLocation))}e.to=i})(tf||(tf={}));var ba;(function(e){function t(r){return{range:O.from(r.range),kind:r.kind}}e.from=t;function i(r){return new id(O.to(r.range),r.kind)}e.to=i})(ba||(ba={}));var vv;(function(e){function t(r){return{uri:r.uri,highlights:r.highlights.map(ba.from)}}e.from=t;function i(r){return new rd(y.revive(r.uri),r.highlights.map(ba.to))}e.to=i})(vv||(vv={}));var wv;(function(e){function t(i){switch(i){case 1:return Yo.TriggerCharacter;case 2:return Yo.TriggerForIncompleteCompletions;case 0:default:return Yo.Invoke}}e.to=t})(wv||(wv={}));var bv;(function(e){function t(i){return{triggerKind:wv.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(bv||(bv={}));var rf;(function(e){function t(r){switch(r){case Zc.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Zc.Deprecated}}e.to=i})(rf||(rf={}));var sf;(function(e){const t=new Map([[ce.Method,0],[ce.Function,1],[ce.Constructor,2],[ce.Field,3],[ce.Variable,4],[ce.Class,5],[ce.Interface,7],[ce.Struct,6],[ce.Module,8],[ce.Property,9],[ce.Unit,12],[ce.Value,13],[ce.Constant,14],[ce.Enum,15],[ce.EnumMember,16],[ce.Keyword,17],[ce.Snippet,27],[ce.Text,18],[ce.Color,19],[ce.File,20],[ce.Reference,21],[ce.Folder,23],[ce.Event,10],[ce.Operator,11],[ce.TypeParameter,24],[ce.Issue,26],[ce.User,25]]);function i(n){return t.get(n)??9}e.from=i;const r=new Map([[0,ce.Method],[1,ce.Function],[2,ce.Constructor],[3,ce.Field],[4,ce.Variable],[5,ce.Class],[7,ce.Interface],[6,ce.Struct],[8,ce.Module],[9,ce.Property],[12,ce.Unit],[13,ce.Value],[14,ce.Constant],[15,ce.Enum],[16,ce.EnumMember],[17,ce.Keyword],[27,ce.Snippet],[18,ce.Text],[19,ce.Color],[20,ce.File],[21,ce.Reference],[23,ce.Folder],[10,ce.Event],[11,ce.Operator],[24,ce.TypeParameter],[25,ce.User],[26,ce.Issue]]);function s(n){return r.get(n)??ce.Property}e.to=s})(sf||(sf={}));var yv;(function(e){function t(i,r){const s=new ad(i.label);return s.insertText=i.insertText,s.kind=sf.to(i.kind),s.tags=i.tags?.map(rf.to),s.detail=i.detail,s.documentation=Gr(i.documentation)?me.to(i.documentation):i.documentation,s.sortText=i.sortText,s.filterText=i.filterText,s.preselect=i.preselect,s.commitCharacters=i.commitCharacters,Oe.isIRange(i.range)?s.range=O.to(i.range):typeof i.range=="object"&&(s.range={inserting:O.to(i.range.insert),replacing:O.to(i.range.replace)}),s.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&1),typeof i.insertTextRules<"u"&&i.insertTextRules&4?s.insertText=new Rn(i.insertText):(s.insertText=i.insertText,s.textEdit=s.range instanceof Ee?new Ms(s.range,s.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>At.to(n))),s.command=r&&i.command?r.fromInternal(i.command):void 0,s}e.to=t})(yv||(yv={}));var nf;(function(e){function t(r){if(typeof r.label!="string"&&!Array.isArray(r.label))throw new TypeError("Invalid label");return{label:r.label,documentation:me.fromStrict(r.documentation)}}e.from=t;function i(r){return{label:r.label,documentation:Gr(r.documentation)?me.to(r.documentation):r.documentation}}e.to=i})(nf||(nf={}));var of;(function(e){function t(r){return{label:r.label,documentation:me.fromStrict(r.documentation),parameters:Array.isArray(r.parameters)?r.parameters.map(nf.from):[],activeParameter:r.activeParameter}}e.from=t;function i(r){return{label:r.label,documentation:Gr(r.documentation)?me.to(r.documentation):r.documentation,parameters:Array.isArray(r.parameters)?r.parameters.map(nf.to):[],activeParameter:r.activeParameter}}e.to=i})(of||(of={}));var Sl;(function(e){function t(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(of.from):[]}}e.from=t;function i(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(of.to):[]}}e.to=i})(Sl||(Sl={}));var xv;(function(e){function t(i,r){const s=new od(je.to(r.position),typeof r.label=="string"?r.label:r.label.map(Ev.to.bind(void 0,i)),r.kind&&af.to(r.kind));return s.textEdits=r.textEdits&&r.textEdits.map(At.to),s.tooltip=Gr(r.tooltip)?me.to(r.tooltip):r.tooltip,s.paddingLeft=r.paddingLeft,s.paddingRight=r.paddingRight,s}e.to=t})(xv||(xv={}));var Ev;(function(e){function t(i,r){const s=new nd(r.label);return s.tooltip=Gr(r.tooltip)?me.to(r.tooltip):r.tooltip,pm.is(r.command)&&(s.command=i.fromInternal(r.command)),r.location&&(s.location=fi.to(r.location)),s}e.to=t})(Ev||(Ev={}));var af;(function(e){function t(r){return r}e.from=t;function i(r){return r}e.to=i})(af||(af={}));var Jn;(function(e){function t(r){return{range:O.from(r.range),url:r.target,tooltip:r.tooltip}}e.from=t;function i(r){let s;if(r.url)try{s=typeof r.url=="string"?y.parse(r.url,!0):y.revive(r.url)}catch{}const n=new ld(O.to(r.range),s);return n.tooltip=r.tooltip,n}e.to=i})(Jn||(Jn={}));var cf;(function(e){function t(r){const s=new hd(r.label);return r.textEdit&&(s.textEdit=At.to(r.textEdit)),r.additionalTextEdits&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>At.to(n))),s}e.to=t;function i(r){return{label:r.label,textEdit:r.textEdit?At.from(r.textEdit):void 0,additionalTextEdits:r.additionalTextEdits?r.additionalTextEdits.map(s=>At.from(s)):void 0}}e.from=i})(cf||(cf={}));var ya;(function(e){function t(r){return new sa(r[0],r[1],r[2],r[3])}e.to=t;function i(r){return[r.red,r.green,r.blue,r.alpha]}e.from=i})(ya||(ya={}));var Sv;(function(e){function t(r){return{range:O.from(r.range)}}e.from=t;function i(r){return new Jc(O.to(r.range))}e.to=i})(Sv||(Sv={}));var lf;(function(e){function t(i){switch(i){case 2:return ea.AfterDelay;case 1:return ea.Manual;case 3:case 4:return ea.FocusOut}}e.to=t})(lf||(lf={}));var xa;(function(e){function t(r){switch(r){case ar.Off:return 0;case ar.Relative:return 2;case ar.Interval:return 3;case ar.On:default:return 1}}e.from=t;function i(r){switch(r){case 0:return ar.Off;case 2:return ar.Relative;case 3:return ar.Interval;case 1:default:return ar.On}}e.to=i})(xa||(xa={}));var Ea;(function(e){function t(r){if(r===or.CRLF)return 1;if(r===or.LF)return 0}e.from=t;function i(r){if(r===1)return or.CRLF;if(r===0)return or.LF}e.to=i})(Ea||(Ea={}));var kv;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case On.SourceControl:return 3;case On.Window:return 10;case On.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(kv||(kv={}));var uf;(function(e){function t(r){const s={start:r.start+1,end:r.end+1};return r.kind&&(s.kind=hf.from(r.kind)),s}e.from=t;function i(r){const s={start:r.start-1,end:r.end-1};return r.kind&&(s.kind=hf.to(r.kind)),s}e.to=i})(uf||(uf={}));var hf;(function(e){function t(r){if(r)switch(r){case ts.Comment:return Oo.Comment;case ts.Imports:return Oo.Imports;case ts.Region:return Oo.Region}}e.from=t;function i(r){if(r)switch(r.value){case Oo.Comment.value:return ts.Comment;case Oo.Imports.value:return ts.Imports;case Oo.Region.value:return ts.Region}}e.to=i})(hf||(hf={}));var kl;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?O.from(i.selection):void 0,override:typeof i.override=="boolean"?CP.id:void 0}}e.from=t})(kl||(kl={}));var Ai;(function(e){function t(n){return n instanceof ca?n.toJSON():typeof n=="string"?n:i(n)||r(n)?new ca(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function i(n){const o=n;return o?y.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function r(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new ca(y.revive(n.baseUri),n.pattern)}e.to=s})(Ai||(Ai={}));var $v;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const r=i;return{language:r.language,scheme:r.scheme,pattern:Ai.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType}}}else return}e.from=t})($v||($v={}));var Tr;(function(e){function t(r){return{start:r.start,end:r.end}}e.from=t;function i(r){return new is(r.start,r.end)}e.to=i})(Tr||(Tr={}));var Sa;(function(e){function t(r){return{timing:typeof r.runStartTime=="number"&&typeof r.runEndTime=="number"?{startTime:r.runStartTime,endTime:r.runEndTime}:void 0,executionOrder:r.executionOrder,success:r.lastRunSuccess}}e.to=t;function i(r){return{lastRunSuccess:r.success,runStartTime:r.timing?.startTime,runEndTime:r.timing?.endTime,executionOrder:r.executionOrder}}e.from=i})(Sa||(Sa={}));var Cv;(function(e){function t(i){if(i===Tc.Unconfirmed)return fa.Pending;if(i===Tc.Pending)return;if(i===Tc.Executing)return fa.Executing;throw new Error(`Unknown state: ${i}`)}e.to=t})(Cv||(Cv={}));var $l;(function(e){function t(r){switch(r){case Wn.Markup:return zo.Markup;case Wn.Code:default:return zo.Code}}e.from=t;function i(r){switch(r){case zo.Markup:return Wn.Markup;case zo.Code:default:return Wn.Code}}e.to=i})($l||($l={}));var zs;(function(e){function t(r){const s={metadata:r.metadata??Object.create(null),cells:[]};for(const n of r.cells)Cd.validate(n),s.cells.push(ka.from(n));return s}e.from=t;function i(r){const s=new m8(r.cells.map(ka.to));return ry(r.metadata)||(s.metadata=r.metadata),s}e.to=i})(zs||(zs={}));var ka;(function(e){function t(r){return{cellKind:$l.from(r.kind),language:r.languageId,mime:r.mime,source:r.value,metadata:r.metadata,internalMetadata:Sa.from(r.executionSummary??{}),outputs:r.outputs?r.outputs.map(_s.from):[]}}e.from=t;function i(r){return new Cd($l.to(r.cellKind),r.source,r.language,r.mime,r.outputs?r.outputs.map(_s.to):void 0,r.metadata,r.internalMetadata?Sa.to(r.internalMetadata):void 0)}e.to=i})(ka||(ka={}));var $a;(function(e){function t(r){return{mime:r.mime,valueBytes:ae.wrap(r.data)}}e.from=t;function i(r){return new v8(r.valueBytes.buffer,r.mime)}e.to=i})($a||($a={}));var _s;(function(e){function t(r){return{outputId:r.id,items:r.items.map($a.from),metadata:r.metadata}}e.from=t;function i(r){const s=r.items.map($a.to);return new Id(s,r.outputId,r.metadata)}e.to=i})(_s||(_s={}));var df;(function(e){function t(s){return r(s)?{include:Ai.from(s.include)??void 0,exclude:Ai.from(s.exclude)??void 0}:Ai.from(s)??void 0}e.from=t;function i(s){return r(s)?{include:Ai.to(s.include),exclude:Ai.to(s.exclude)}:Ai.to(s)}e.to=i;function r(s){const n=s;return n?!xt(n.include)&&!xt(n.exclude):!1}})(df||(df={}));var Iv;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===Dd.Left?1:2,command:r.toInternal(n,s),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(Iv||(Iv={}));var Dv;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:r.toInternal(n,s),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})(Dv||(Dv={}));var Pv;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(Pv||(Pv={}));var ff;(function(e){function t(r){return{uri:r.uri,provides:r.provides}}e.from=t;function i(r){return new w8(y.revive(r.uri),r.provides)}e.to=i})(ff||(ff={}));var Ca;(function(e){function t(r){return{message:me.fromStrict(r.message)||"",type:0,expected:r.expectedOutput,actual:r.actualOutput,contextValue:r.contextValue,location:r.location&&{range:O.from(r.location.range),uri:r.location.uri},stackTrace:r.stackTrace?.map(s=>({label:s.label,position:s.position&&je.from(s.position),uri:s.uri&&y.revive(s.uri).toJSON()}))}}e.from=t;function i(r){const s=new Ld(typeof r.message=="string"?r.message:me.to(r.message));return s.actualOutput=r.actual,s.expectedOutput=r.expected,s.contextValue=r.contextValue,s.location=r.location?fi.to(r.location):void 0,s}e.to=i})(Ca||(Ca={}));var ur;(function(e){e.namespace=Wh,e.denamespace=$9})(ur||(ur={}));var Av;(function(e){function t(i){return{controllerId:i.controllerId,profileId:i.profileId,group:Ia.from(i.kind)}}e.from=t})(Av||(Av={}));var Ia;(function(e){const t={[ga.Coverage]:8,[ga.Debug]:4,[ga.Run]:2};function i(r){return t.hasOwnProperty(r)?t[r]:2}e.from=i})(Ia||(Ia={}));var Vs;(function(e){function t(r){const s=Zh(r).controllerId;return{extId:Re.fromExtHostTestItem(r,s).toString(),label:r.label,uri:y.revive(r.uri),busy:r.busy,tags:r.tags.map(n=>ur.namespace(s,n.id)),range:Oe.lift(O.from(r.range)),description:r.description||null,sortText:r.sortText||null,error:r.error&&me.fromStrict(r.error)||null}}e.from=t;function i(r){return{parent:void 0,error:void 0,id:Re.fromString(r.extId).localId,label:r.label,uri:y.revive(r.uri),tags:(r.tags||[]).map(s=>{const{tagId:n}=ur.denamespace(s);return new dl(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:O.to(r.range||void 0),canResolveChildren:!1,busy:r.busy,description:r.description||void 0,sortText:r.sortText||void 0}}e.toPlain=i})(Vs||(Vs={})),function(e){function t(r){return{id:r.id}}e.from=t;function i(r){return new dl(r.id)}e.to=i}(ur||(ur={}));var Tv;(function(e){const t=(r,s)=>{const n=r.value;if(!n)return;const o={...Vs.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(Ca.to)})),children:[]};if(r.children)for(const a of r.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(r){const s=new mP;for(const a of r.items)s.insert(Re.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:r.completedAt,results:o.map(a=>t(a)).filter(xi)}}e.to=i})(Tv||(Tv={}));var Cl;(function(e){function t(a){return{covered:a.covered,total:a.total}}function i(a){return"line"in a?je.from(a):O.from(a)}function r(a){if(a)return"endLineNumber"in a?O.to(a):je.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:r(l.location),label:l.label});return new y8(a.count,r(a.location),a.branches?.map(l=>new x8(l.count,r(l.location),l.label)))}else return new E8(a.name,a.count,r(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:i(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&i(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:i(a.location)}}e.fromDetails=n;function o(a,c,l){return Md(l.statementCoverage),Md(l.branchCoverage),Md(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Fd&&l.includesTests.length?l.includesTests.map(u=>Re.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Cl||(Cl={}));var Rv;(function(e){function t(i){switch(i){case 1:return qc.Invoke;case 2:return qc.Automatic}}e.to=t})(Rv||(Rv={}));var Zn;(function(e){function t(r){const s=new B1(qi.to(r.kind),r.name,r.detail||"",y.revive(r.uri),O.to(r.range),O.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:qi.from(r.kind),name:r.name,detail:r.detail??"",uri:r.uri,range:O.from(r.range),selectionRange:O.from(r.selectionRange),tags:r.tags?.map(ss.from)}}e.from=i})(Zn||(Zn={}));var pf;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(pf||(pf={}));var Qn;(function(e){function t(n,o,a){const c=o.fileData;return c?new uR(new hR(c.name,y.revive(c.uri),c.id,tg(()=>a(c.id)))):n===Jr.uriList&&o.uriListData?new gd(s(o.uriListData)):new gd(o.asString)}e.to=t;async function i(n,o,a=Mt()){const c=await o.asString();if(n===Jr.uriList)return{id:a,asString:c,fileData:void 0,uriListData:r(c)};const l=o.asFile();return{id:a,asString:c,fileData:l?{name:l.name,uri:l.uri,id:l._itemId??l.id}:void 0}}e.from=i;function r(n){return Yg.split(n).map(o=>{if(o.startsWith("#"))return o;try{return y.parse(o)}catch{}return o})}function s(n){return Yg.create(n.map(o=>typeof o=="string"?o:y.revive(o)))}})(Qn||(Qn={}));var Da;(function(e){function t(s,n){const o=s.items.map(([a,c])=>[a,Qn.to(a,c,n)]);return new oa(o)}e.toDataTransfer=t;async function i(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Qn.from(o,a)]))}}e.from=i;async function r(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Qn.from(o,a,a.id)]))}}e.fromList=r})(Da||(Da={}));var Il;(function(e){function t(r,s){return{kind:"reply",agentId:r.participant??s?.agentId??"",subCommand:r.command??s?.command,message:r.prompt,title:r.label}}e.from=t;function i(r){return{prompt:r.message,label:r.title,participant:r.agentId,command:r.subCommand}}e.to=i})(Il||(Il={}));var Pa;(function(e){function t(r){switch(r){case 0:return Di.System;case 1:return Di.User;case 2:return Di.Assistant}}e.to=t;function i(r){switch(r){case Di.System:return 0;case Di.User:return 1;case Di.Assistant:return 2}return 1}e.from=i})(Pa||(Pa={}));var V8;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new pt(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new pt(l.value):new Pr(l.value));return new Gd(a.toolCallId,c,a.isError)}else return a.type==="image_url"||a.type==="extra_data"?void 0:new Vn(a.toolCallId,a.name,a.parameters)}).filter(a=>a!==void 0),n=Pa.to(r.role);return new N8(n,s,r.name)}e.to=t;function i(r){const s=Pa.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new pt(o)]);const a=o.map(c=>{if(c instanceof Gd)return{type:"tool_result",toolCallId:c.callId,value:bt(c.content.map(l=>l instanceof pt?{type:"text",value:l.value}:l instanceof Pr?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof Vn)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof pt)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(V8||(V8={}));var Dl;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new pt(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new pt(l.value):l.type==="data"?new js(l.value.data.buffer,l.value.mimeType):new Pr(l.value));return new ev(a.toolCallId,c,a.isError)}else return a.type==="image_url"?new js(a.value.data.buffer,a.value.mimeType):a.type==="extra_data"?new iv(a.kind,a.data):new Vn(a.toolCallId,a.name,a.parameters)}),n=Pa.to(r.role);return new M8(n,s,r.name)}e.to=t;function i(r){const s=Pa.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new pt(o)]);const a=o.map(c=>{if(c instanceof ev||c instanceof Gd)return{type:"tool_result",toolCallId:c.callId,value:bt(c.content.map(l=>l instanceof pt?{type:"text",value:l.value}:l instanceof Pr?{type:"prompt_tsx",value:l.value}:l instanceof js?{type:"data",value:{mimeType:l.mimeType,data:ae.wrap(l.data)}}:void 0)),isError:c.isError};if(c instanceof js)return{type:"image_url",value:{mimeType:c.mimeType,data:ae.wrap(c.data)}};if(c instanceof Vn)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof pt)return{type:"text",value:c.value};if(c instanceof iv)return{type:"extra_data",kind:c.kind,data:c.data};if(typeof c!="string")throw new Error("Unexpected chat message content type llm 2");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(Dl||(Dl={}));var Pl;(function(e){function t(r){return{kind:"markdownContent",content:me.from(r.value)}}e.from=t;function i(r){return new Ud(me.to(r.content))}e.to=i})(Pl||(Pl={}));var gf;(function(e){function t(r){return{kind:"codeblockUri",uri:r.value,isEdit:r.isEdit}}e.from=t;function i(r){return new zd(y.revive(r.uri),r.isEdit)}e.to=i})(gf||(gf={}));var mf;(function(e){function t(r){return{kind:"markdownVuln",content:me.from(r.value),vulnerabilities:r.vulnerabilities}}e.from=t;function i(r){return new pl(me.to(r.content),r.vulnerabilities)}e.to=i})(mf||(mf={}));var vf;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:i.message,data:i.data,buttons:i.buttons}}e.from=t})(vf||(vf={}));var Al;(function(e){function t(r){const{value:s,baseUri:n}=r;function o(a,c){return a.map(l=>{const u=y.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:er(n),uri:n,children:o(s,n)}}}e.from=t;function i(r){const s=Ct(r.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Bd(a,o)}e.to=i})(Al||(Al={}));var Aa;(function(e){function t(r){const s=o=>y.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:r.title,inlineReference:s(r.value)?r.value:n(r.value)?qn.from(r.value):Ar.from(r.value)}}e.from=t;function i(r){const s=Ct(r);return new gl(y.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?qn.to(s.inlineReference):Ar.to(s.inlineReference),r.name)}e.to=i})(Aa||(Aa={}));var Tl;(function(e){function t(r){return{kind:"progressMessage",content:me.from(r.value)}}e.from=t;function i(r){return new Q1(r.content.value)}e.to=i})(Tl||(Tl={}));var Rl;(function(e){function t(r){return{kind:"warning",content:me.from(r.value)}}e.from=t;function i(r){return new ml(r.content.value)}e.to=i})(Rl||(Rl={}));var Lv;(function(e){function t(i){return{kind:"extensions",extensions:i.extensions}}e.from=t})(Lv||(Lv={}));var Nv;(function(e){function t(r){return{kind:"move",uri:r.uri,range:O.from(r.range)}}e.from=t;function i(r){return new Vd(y.revive(r.uri),O.to(r.range))}e.to=i})(Nv||(Nv={}));var wf;(function(e){function t(i){return{kind:"progressTask",content:me.from(i.value)}}e.from=t})(wf||(wf={}));var Mv;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?me.from(i):void 0}}e.from=t})(Mv||(Mv={}));var Ll;(function(e){function t(r,s,n){return{kind:"command",command:s.toInternal(r.value,n)??{command:r.value.command,title:r.value.title}}}e.from=t;function i(r,s){return new Wd(s.fromInternal(r.command)??{command:r.command.id,title:r.command.title})}e.to=i})(Ll||(Ll={}));var bf;(function(e){function t(r){return{kind:"textEdit",uri:r.uri,edits:r.edits.map(s=>At.from(s)),done:r.isDone}}e.from=t;function i(r){const s=new vl(y.revive(r.uri),r.edits.map(n=>At.to(n)));return s.isDone=r.done,s}e.to=i})(bf||(bf={}));var yf;(function(e){function t(i){return i.newCellMetadata?{editType:3,index:i.range.start,metadata:i.newCellMetadata}:i.newNotebookMetadata?{editType:5,metadata:i.newNotebookMetadata}:{editType:1,index:i.range.start,count:i.range.end-i.range.start,cells:i.newCells.map(ka.from)}}e.from=t})(yf||(yf={}));var xf;(function(e){function t(i){return{kind:"notebookEdit",uri:i.uri,edits:i.edits.map(yf.from),done:i.isDone}}e.from=t})(xf||(xf={}));var Yn;(function(e){function t(r){const s=$t.isThemeIcon(r.iconPath)?r.iconPath:y.isUri(r.iconPath)?{light:y.revive(r.iconPath)}:r.iconPath&&"light"in r.iconPath&&"dark"in r.iconPath&&y.isUri(r.iconPath.light)&&y.isUri(r.iconPath.dark)?{light:y.revive(r.iconPath.light),dark:y.revive(r.iconPath.dark)}:void 0;return typeof r.value=="object"&&"variableName"in r.value?{kind:"reference",reference:{variableName:r.value.variableName,value:y.isUri(r.value.value)||!r.value.value?r.value.value:Ar.from(r.value.value)},iconPath:s,options:r.options}:{kind:"reference",reference:y.isUri(r.value)||typeof r.value=="string"?r.value:Ar.from(r.value),iconPath:s,options:r.options}}e.from=t;function i(r){const s=Ct(r),n=o=>y.isUri(o)?o:Ar.to(o);return new _n(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=i})(Yn||(Yn={}));var Ef;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(Ef||(Ef={}));var Sf;(function(e){function t(s,n,o){return s instanceof Ud?Pl.from(s):s instanceof gl?Aa.from(s):s instanceof _n?Yn.from(s):s instanceof Q1?Tl.from(s):s instanceof Bd?Al.from(s):s instanceof Wd?Ll.from(s,n,o):s instanceof vl?bf.from(s):s instanceof qd?xf.from(s):s instanceof pl?mf.from(s):s instanceof zd?gf.from(s):s instanceof ml?Rl.from(s):s instanceof Hd?vf.from(s):s instanceof _d?Ef.from(s):s instanceof Vd?Nv.from(s):s instanceof Y1?Lv.from(s):{kind:"markdownContent",content:me.from("")}}e.from=t;function i(s,n){switch(s.kind){case"reference":return Yn.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return r(s,n)}}e.to=i;function r(s,n){switch(s.kind){case"markdownContent":return Pl.to(s);case"inlineReference":return Aa.to(s);case"progressMessage":return;case"treeData":return Al.to(s);case"command":return Ll.to(s,n)}}e.toContent=r})(Sf||(Sf={}));var kf;(function(e){function t(i,r,s,n,o,a,c,l){const u=i.variables.variables.filter(p=>p.kind==="tool"),d=i.variables.variables.filter(p=>p.kind!=="tool"),f={id:i.requestId,prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,isParticipantDetected:i.isParticipantDetected??!1,references:d.map(p=>$f.to(p,n,l)).filter(xi),toolReferences:u.map(Cf.to),location:Nl.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:r,toolInvocationToken:Object.freeze({sessionId:i.sessionId}),toolSelection:o,tools:a,model:s,editedFileEvents:i.editedFileEvents};return Ze(c,"chatParticipantPrivate")||(delete f.id,delete f.attempt,delete f.enableCommandDetection,delete f.isParticipantDetected,delete f.location,delete f.location2,delete f.editedFileEvents),Ze(c,"chatParticipantAdditions")||(delete f.acceptedConfirmationData,delete f.rejectedConfirmationData,delete f.tools),f}e.to=t})(kf||(kf={}));var Fv;(function(e){function t(i){return{prompt:i.prompt,files:i.files.map(r=>y.revive(r))}}e.to=t})(Fv||(Fv={}));var Nl;(function(e){function t(r){switch(r){case Kt.Notebook:return cr.Notebook;case Kt.Terminal:return cr.Terminal;case Kt.Panel:return cr.Panel;case Kt.Editor:return cr.Editor}}e.to=t;function i(r){switch(r){case cr.Notebook:return Kt.Notebook;case cr.Terminal:return Kt.Terminal;case cr.Panel:return Kt.Panel;case cr.Editor:return Kt.Editor}}e.from=i})(Nl||(Nl={}));var $f;(function(e){function t(i,r,s){let n=i.value;if(!n){let o;try{o=JSON.stringify(i)}catch{o=`kind=${i.kind}, id=${i.id}, name=${i.name}`}s.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${o}`);return}if(Bu(n))n=y.revive(n);else if(n&&typeof n=="object"&&"uri"in n&&"range"in n&&Bu(n.uri))n=Ar.to(Ct(n));else if(yT(i)){const o=i.references?.[0]?.reference;n=new R8(i.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i.value))),o&&y.isUri(o)?o:void 0)}else if(i.kind==="diagnostic"){const o=i.filterSeverity&&yl.to(i.filterSeverity),a=i.filterUri&&y.revive(i.filterUri).toString();n=new L8(r.map(([c,l])=>i.filterUri&&c.toString()!==a?[c,[]]:[c,l.filter(u=>!(o&&u.severity>o||i.filterRange&&!Oe.areIntersectingOrTouching(i.filterRange,O.from(u.range))))]).filter(([,c])=>c.length>0))}return{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],value:n,modelDescription:i.modelDescription}}e.to=t})($f||($f={}));var Cf;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{name:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(Cf||(Cf={}));var Ov;(function(e){function t(i,r,s){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:r.toInternal(i.command,s)}}e.from=t})(Ov||(Ov={}));var Ta;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:r(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function i(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=i;function r(s){return Lo(s,n=>{if(n.$mid===20)return new Zd(Lo(n.content,r));if(n.$mid===21)return new pt(n.value);if(n.$mid===22)return new Pr(n.value)})}})(Ta||(Ta={}));var Uv;(function(e){function t(i,r,s){if(r.action.kind==="vote")return;const n=Ta.to(i);if(r.action.kind==="command"){const o=r.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return r.action.kind==="followUp"?{action:{kind:"followUp",followup:Il.to(r.action.followup)},result:n}:r.action.kind==="inlineChat"?{action:{kind:"editor",accepted:r.action.action==="accepted"},result:n}:r.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",zn.Accepted],["rejected",zn.Rejected],["saved",zn.Saved]]).get(r.action.outcome)??zn.Rejected,uri:y.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits},result:n}:{action:r.action,result:n}}e.to=t})(Uv||(Uv={}));var If;(function(e){function t(i,r,s){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:r.toInternal(i,s)}e.from=t})(If||(If={}));var Df;(function(e){function t(i){return{...i,documentation:me.fromStrict(i.documentation)}}e.from=t})(Df||(Df={}));var Hv;(function(e){function t(i){return Array.isArray(i)?{items:i.map(r=>Df.from(r))}:{items:i.items.map(r=>Df.from(r)),resourceRequestConfig:i.resourceRequestConfig?Bv.from(i.resourceRequestConfig):void 0}}e.from=t})(Hv||(Hv={}));var Bv;(function(e){function t(i){return{...i,pathSeparator:ri?"\\":"/",cwd:i.cwd?y.revive(i.cwd):void 0}}e.from=t})(Bv||(Bv={}));var jv;(function(e){function t(i){return{kind:Wv.to(i.kind),acceptedLength:i.acceptedLength}}e.to=t})(jv||(jv={}));var Wv;(function(e){function t(i){switch(i){case 0:return Nn.Word;case 1:return Nn.Line;case 2:return Nn.Suggest;default:return Nn.Unknown}}e.to=t})(Wv||(Wv={}));var zv;(function(e){function t(i,r){if(i.kind===uh.Ignored){const s=i.supersededBy?r(i.supersededBy):void 0;return{kind:Ko.Ignored,supersededBy:s,userTypingDisagreed:i.userTypingDisagreed}}else if(i.kind===uh.Accepted)return{kind:Ko.Accepted};return{kind:Ko.Rejected}}e.to=t})(zv||(zv={}));var _v;(function(e){function t(i,r){return{id:r,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||0,contextValue:i.contextValue}}e.from=t})(_v||(_v={}));var q8;(function(e){function t(i){return{name:i.id,description:i.modelDescription,inputSchema:i.inputSchema,tags:i.tags??[]}}e.to=t})(q8||(q8={}));var G8;(function(e){function t(r){return new Zd(r.content.map(s=>s.kind==="text"?new pt(s.value):new Pr(s.value)))}e.to=t;function i(r,s){return r.toolResultMessage&&L(s,"chatParticipantPrivate"),{content:r.content.map(n=>{if(n instanceof pt)return{kind:"text",value:n.value};if(n instanceof Pr)return{kind:"promptTsx",value:n.value};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:me.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(n=>y.isUri(n)?n:Ar.from(n))}}e.from=i})(G8||(G8={}));var Pf;(function(e){function t(r){return new F8(r.content.map(s=>{if(s.kind==="text")return new pt(s.value);if(s.kind==="data"){const n=Object.values(Jd).includes(s.value.mimeType)?s.value.mimeType:void 0;if(!n)throw new Error("Invalid MIME type");return new js(s.value.data.buffer,n)}else return new Pr(s.value)}))}e.to=t;function i(r,s){r.toolResultMessage&&L(s,"chatParticipantPrivate");let n=!1;const o={content:r.content.map(a=>{if(a instanceof pt)return{kind:"text",value:a.value};if(a instanceof Pr)return{kind:"promptTsx",value:a.value};if(a instanceof js)return n=!0,{kind:"data",value:{mimeType:a.mimeType,data:ae.wrap(a.data)}};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:me.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(a=>y.isUri(a)?a:Ar.from(a))};return n?new si(o):o}e.from=i})(Pf||(Pf={}));var Vv;(function(e){function t(i){return i}e.fromThemeIcon=t})(Vv||(Vv={}));var qv;(function(e){function t(r){return{query:r.query,kind:i(r.kind),settings:r.settings}}e.fromSettingsSearchResult=t;function i(r){switch(r){case Ws.EMBEDDED:return Ws.EMBEDDED;case Ws.LLM_RANKED:return Ws.LLM_RANKED;case Ws.CANCELED:return Ws.CANCELED;default:throw new Error("Unknown AiSettingsSearchResultKind")}}})(qv||(qv={}));var Ml;(function(e){function t(r){return!!r.uri}function i(r){return bl.toSerialized(t(r)?{type:2,uri:r.uri,headers:Object.entries(r.headers)}:{type:1,cwd:r.cwd,args:r.args,command:r.command,env:r.env,envFile:void 0})}e.from=i})(Ml||(Ml={}));var qs=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},Gv=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},Jv=class{constructor(e){this.keyword=e}},ns;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(ns||(ns={}));var Af;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Af||(Af={}));var J8=2e4,Z8="\u27EA ",Q8=" characters skipped \u27EB",LR=(Z8.length+Q8.length+5)*2,v_=j("searchService"),Y8;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(Y8||(Y8={}));var X8;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(X8||(X8={}));function K8(e){return!!e.rangeLocations&&!!e.previewText}var ex;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(ex||(ex={}));var NR=class{constructor(e,t,i,r){this.rangeLocations=[],this.webviewIndex=r;const s=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&MR(s)){e=z3(e,i.matchLines);let n="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),d=l.startColumn+i.charsPerLine;if(u>a+c+LR){const f=Z8+(u-a)+Q8;n+=f+e.slice(u,d),o+=u-(a+f.length)}else n+=e.slice(a,d);a=d,this.rangeLocations.push({source:l,preview:new FR(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=Xp(t,a=>({preview:new tx(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function MR(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var tx=class{constructor(e,t,i,r){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r}},FR=class extends tx{constructor(e,t,i){super(e,t,e,i)}},ix;(function(e){e.List="list",e.Tree="tree"})(ix||(ix={}));var rx;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(rx||(rx={}));function OR(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r||void 0;let s=Object.create(null);return s=vn(s,it(i)),s=vn(s,it(r),!0),s}function sx(e,t){return e.excludePattern&&Ac(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Ac(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const r=i.folder.fsPath;if(Ju(t,r)){const s=cc(r,t);return!i.includePattern||!!Ac(i.includePattern,s)}else return!1}):!1:!0}var nx;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(nx||(nx={}));function Ra(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(r=>{const s=i[r];return typeof s=="boolean"&&s})}var ox=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(r=>({...e.excludePattern||{},...r.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(r=>Wo(r));let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=Wo(i))}d(e,t,i){let r=null;for(const s of this.b){const n=s(e,t,i);if(typeof n=="string"){r=n;break}}return r}matchesExcludesSync(e,t,i){return!!(this.b&&this.d(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.d(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const r=()=>this.c?!!this.c(e,t,i):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,i);return Is(n)?n.then(o=>o?!1:r()):r()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>UR(t)||e,!1)}};function UR(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function HR(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(r=>r?ax(r):{})),t.then(r=>!!r[i]))}function BR(e){if(!e)return;let t;return i=>{if(!t){const r=e();t=r?ax(r):{}}return!!t[i]}}function ax(e){const t={};for(const i of e)t[i]=!0;return t}function cx(e){return e.flatMap(t=>t.patterns.map(i=>t.baseUri?{baseUri:t.baseUri,pattern:i}:i))}var Zv={matchLines:100,charsPerLine:1e4},jR=!1,WR=class{constructor(e,t,i){this.id=e,this.dependencies=t,this.callback=i}},Xn;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(Xn||(Xn={}));var zR=class q${static{this.INSTANCE=new q$}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=Xn.Uninitialized}g(){if(this.d===Xn.Uninitialized){if(globalThis.define){this.d=Xn.InitializedExternal;return}}else return;this.d=Xn.InitializedInternal,globalThis.define=(t,i,r)=>{typeof t!="string"&&(r=i,i=t,t=null),(typeof i!="object"||!Array.isArray(i))&&(r=i,i=null),this.c.push(new WR(t,i,r))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${z.vscodeFileResource}://${m4}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===Xn.InitializedExternal)return new Promise(o=>{const a=Mt();globalThis.define(a,[t],function(c){o(c)})});const i=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!i){console.warn(`Did not receive a define call from script ${t}`);return}const r={},s=[],n=[];if(Array.isArray(i.dependencies))for(const o of i.dependencies)o==="exports"?s.push(r):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof i.callback=="function"?i.callback(...s)??r:i.callback}h(t){return new Promise((i,r)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),i(this.c.pop())},a=c=>{n(),r(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const i=(await import("fs")).default,r=(await import("vm")).default,s=(await import("module")).default,n=y.parse(t).fsPath,o=i.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new r.Script(a).runInThisContext().apply(),this.c.pop()}catch(i){throw i}}},Qv=new Map;async function Yv(e,t,i){i===void 0&&(i=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const r=t?`${e}/${t}`:e;if(Qv.has(r))return Qv.get(r);let s;if(/^\w[\w\d+.-]*:\/\//.test(r))s=r;else{const c=`${jR&&i&&!Eo?rD:iD}/${r}`;s=v4.asBrowserUri(c).toString(!0)}const n=zR.INSTANCE.load(s);return Qv.set(r,n),n}var Tf="utf8",Xv="utf8bom",Rf="utf16be",Lf="utf16le",Nf=[254,255],Kv=[255,254],Fl=[239,187,191],_R=512,VR=512,qR=512*8,GR=512*128,lx;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(lx||(lx={}));var JR=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},ZR=class G${static async create(t){let i;if(t!==Tf)i=(await Yv("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getDecoder(ux(t));else{const r=new TextDecoder;i={write(s){return r.decode(s,{stream:!0})},end(){return r.decode()}}}return new G$(i)}constructor(t){this.a=t}write(t){return this.a.write(t)}end(){return this.a.end()}};function QR(e,t){const i=t.minBytesRequiredForDetection??t.guessEncoding?qR:VR;return new Promise((r,s)=>{const n=ay(d=>d.join("")),o=[];let a=0,c;const l=new lt,u=async()=>{try{const d=await nL({buffer:ae.concat(o),bytesRead:a},t.guessEncoding,t.candidateGuessEncodings);if(d.seemsBinary&&t.acceptTextOnly)throw new JR("Stream is binary but only text is accepted for decoding",1);d.encoding=await t.overwriteEncoding(d.encoding),c=await ZR.create(d.encoding);const f=c.write(ae.concat(o).buffer);n.write(f),o.length=0,a=0,r({stream:n,detected:d})}catch(d){l.cancel(),n.destroy(),s(d)}};ly(e,{onData:async d=>{c?n.write(c.write(d.buffer)):(o.push(d),a+=d.byteLength,a>=i&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:d=>n.error(d),onEnd:async()=>{c||await u(),n.end(c?.end())}},l.token)})}async function YR(e,t,i){const s=(await Yv("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getEncoder(ux(t),i);let n=!1,o=!1;return{read(){if(o)return null;const a=e.read();if(typeof a!="string"){if(o=!0,!n&&i?.addBOM)switch(t){case Tf:case Xv:return ae.wrap(Uint8Array.from(Fl));case Rf:return ae.wrap(Uint8Array.from(Nf));case Lf:return ae.wrap(Uint8Array.from(Kv))}const c=s.end();return c&&c.length>0?(n=!0,ae.wrap(c)):null}return n=!0,ae.wrap(s.write(a))}}}function ux(e){return e===Xv||e===null?Tf:e}function XR(e,t){if(!e||t<Nf.length)return null;const i=e.readUInt8(0),r=e.readUInt8(1);if(i===Nf[0]&&r===Nf[1])return Rf;if(i===Kv[0]&&r===Kv[1])return Lf;if(t<Fl.length)return null;const s=e.readUInt8(2);return i===Fl[0]&&r===Fl[1]&&s===Fl[2]?Xv:null}var KR=["ascii","utf-16","utf-32"];async function eL(e,t){const i=await Yv("jschardet","dist/jschardet.min.js"),r=e.slice(0,GR),s=sL(r.buffer);t&&(t=bt(t.map(a=>rL(a))),t.length===0&&(t=void 0));let n;try{n=i.detect(s,t?{detectEncodings:t}:void 0)}catch{return null}if(!n||!n.encoding)return null;const o=n.encoding.toLowerCase();return 0<=KR.indexOf(o)?null:iL(n.encoding)}var tL={ibm866:"cp866",big5:"cp950"};function hx(e){return e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function iL(e){const t=hx(e);return tL[t]||t}function rL(e){const t=hx(e),i=oL[t];return i?i.guessableName:void 0}function sL(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function nL({buffer:e,bytesRead:t},i,r){let s=XR(e,t),n=!1;if(s!==Rf&&s!==Lf&&e){let o=!0,a=!0,c=!1;for(let l=0;l<t&&l<_R;l++){const u=l%2===1,d=e.readUInt8(l)===0;if(d&&(c=!0),o&&(u&&!d||!u&&d)&&(o=!1),a&&(u&&d||!u&&!d)&&(a=!1),d&&!o&&!a)break}c&&(o?s=Lf:a?s=Rf:n=!0)}return i&&!n&&!s&&e?eL(e.slice(0,t),r).then(o=>({seemsBinary:!1,encoding:o})):{seemsBinary:n,encoding:s}}var e0={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},oL=(()=>{const e={};for(const t in e0)e0[t].guessableName&&(e[t]=e0[t]);return e})(),w_=j("textFileService"),dx;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(dx||(dx={}));var fx;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(fx||(fx={}));var px;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(px||(px={}));var gx;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(gx||(gx={}));function aL(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}function Ol(e,t,i){return new uc(r=>t0(r,i)).isEqual(e,t)}function cL(e,t,i){return Ol(e.uri,t.uri,i)?0:fn(e.uri.toString(),t.uri.toString())}function lL(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:Ol(e.uri,t.uri,i)?fn(e.name,t.name):fn(e.uri.toString(),t.uri.toString())}function mx(e,t,i,r){const s=e.slice(0).sort((o,a)=>i(o,a,r)),n=t.slice(0).sort((o,a)=>i(o,a,r));return QC(s,n,(o,a)=>i(o,a,r))}function t0(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&1024)}var i0=class Tb extends m2{static toExtHostWorkspace(t,i,r,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,d=[],f=i;i?a.forEach((x,k)=>{const $=y.revive(x.uri),A=Tb.o(r||i,$,s);A?(A.name=x.name,A.index=x.index,d.push(A)):d.push({uri:$,name:x.name,index:k})}):d.push(...a.map(({uri:x,name:k,index:$})=>({uri:y.revive(x),name:k,index:$}))),d.sort((x,k)=>x.index<k.index?-1:1);const p=new Tb(n,o,d,!!l,c?y.revive(c):null,!!u,x=>t0(x,s)),{added:m,removed:w}=mx(f?f.workspaceFolders:[],p.workspaceFolders,cL,s);return{workspace:p,added:m,removed:w}}static o(t,i,r){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(Ol(n.uri,i,r))return n}}constructor(t,i,r,s,n,o,a){super(t,r.map(c=>new x5(c)),s,n,a),this.t=i,this.u=o,this.q=[],this.s=Ds.forUris(a,()=>!0),r.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=Zu(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},r0=class{constructor(t,i,r,s,n){this.c=new P,this.onDidChangeWorkspace=this.c.event,this.g=new P,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new ic,this.D=new Map,this.h=s,this.s=r,this.t=n,this.j=new d2,this.k=new yr,this.o=t.getProxy(V.MainThreadWorkspace),this.q=t.getProxy(V.MainThreadMessageService);const o=i.workspace;this.l=o?new i0(o.id,o.name,[],!!o.transient,o.configuration?y.revive(o.configuration):null,!!o.isUntitled,a=>t0(a,r)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?y.from({scheme:z.untitled,path:er(Zu(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,r,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{y.isUri(u.uri)&&!n.some(d=>Ol(d.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Pg(u.uri)})}),this.n||[i,r].some(u=>typeof u!="number"||u<0)||r===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+r>o.length)return!1;const a=o.slice(0);a.splice(i,r,...n.map(u=>({uri:u.uri,name:u.name||Pg(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const d=a[u];if(a.some((f,p)=>p!==u&&Ol(d.uri,f.uri,this.s)))return!1}a.forEach((u,d)=>u.index=d);const{added:c,removed:l}=mx(o,a,lL,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,r,n).then(void 0,d=>{this.n=void 0;const f={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(f2.Error,h(2899,null,u,d.toString()),f,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let r,s="";if(typeof t=="string"?(r=y.file(t),s=t):typeof t<"u"&&(r=t,s=t.fsPath),!r)return s;const n=this.getWorkspaceFolder(r,!0);if(!n)return s;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=b4(n.uri,r);return i&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=i0.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:r,removed:s}=i0.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:r,removed:s}))}findFiles(t,i,r,s,n=tt.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:r,useExcludeSettings:a?ns.FilesExclude:ns.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,i={},r,s=tt.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${r.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},i,s)}async z(t,i,r){if(r.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw console.error("Invalid file pattern provided",s),new Error(`Invalid file pattern provided ${JSON.stringify(s)}`);const n=s.map(o=>{const a=vx(i.exclude),c={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===ns.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==ns.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Mf(Ai.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,r)}async A(t,i){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,i).then(n=>Array.isArray(n)?n.map(o=>y.revive(o)):[]))??[])).flat()}findTextInFiles2(t,i,r,s=tt.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${r.value}, entryPoint: findTextInFiles2`);const n=f=>{if(!i)return{folder:void 0,options:{}};const p=f?Mf(Ai.from(f)):void 0,m=i.exclude?vx(i.exclude):void 0;return{options:{ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===ns.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==ns.SearchAndFilesExclude,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:i.previewOptions?{matchLines:i.previewOptions?.numMatchLines??100,charsPerLine:i.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:i.surroundingContext,includePattern:p?.pattern,excludePattern:m},folder:p?.folder}},a=(i?.include?.map(f=>n(f))??[n(void 0)]).filter(f=>!!f),c=new fe,l=c.add(new P),u=this.findTextInFilesBase(t,a,(f,p)=>l.fire({result:f,uri:p}),s);return{results:new hc(async f=>{c.add(l.event(p=>{const m=p.result,w=p.uri;K8(m)?f.emitOne(new qs(w,m.rangeLocations.map(x=>({previewRange:new Ee(x.preview.startLineNumber,x.preview.startColumn,x.preview.endLineNumber,x.preview.endColumn),sourceRange:new Ee(x.source.startLineNumber,x.source.startColumn,x.source.endLineNumber,x.source.endColumn)})),m.previewText)):f.emitOne(new Gv(w,m.text,m.lineNumber))})),await u}),complete:u.then(f=>(c.dispose(),{limitHit:f?.limitHit??!1}))}}async findTextInFilesBase(t,i,r,s=tt.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=y.revive(a.resource);a.results.forEach(l=>{const u=Ct(l);r(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(i?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,i,r,s,n=tt.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,a=Mf(Ai.from(i.include)),c=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:o,surroundingContext:i.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(d,f)=>{K8(d)?r({uri:f,preview:{text:d.previewText,matches:Xp(d.rangeLocations,p=>new Ee(p.preview.startLineNumber,p.preview.startColumn,p.preview.endLineNumber,p.preview.endColumn))},ranges:Xp(d.rangeLocations,p=>new Ee(p.source.startLineNumber,p.source.startColumn,p.source.endLineNumber,p.source.endColumn))}):r({uri:f,text:d.text,lineNumber:d.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return y.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return y.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,r),se(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const r=await this.resolveWorkspaceFolder(y.revive(t));if(!r){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const s=this.w.get(r.uri.scheme);if(this.h.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(r,i);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,i,r,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(y.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,r,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,i,r){const s=await this.resolveWorkspaceFolder(y.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},i,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>r&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,r),se(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,i,r){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(y.revive(t),i,r);if(n)return n}async $provideCanonicalUri(t,i,r){return this.provideCanonicalUri(y.revive(t),{targetScheme:i},r)}async decode(t,i){const[r,s]=this.F(i),n=await this.o.$resolveDecoding(r,s),o=(await QR(II(ae.wrap(t)),{...n,acceptTextOnly:!0,overwriteEncoding:a=>a===null||a===n.preferredEncoding?Promise.resolve(n.preferredEncoding):this.o.$validateDetectedEncoding(r,a,s)})).stream;return cy(o,a=>a.join(""))}async encode(t,i){const[r,s]=this.F(i),{encoding:n,addBOM:o}=await this.o.$resolveEncoding(r,s);if(n===Tf&&!o)return ae.fromString(t).buffer;const a=await YR(aL(t),n,{addBOM:o});return $I(a).buffer}F(t){const i=Bu(t?.uri)?t.uri:void 0,r=typeof t?.encoding=="string"?t.encoding:void 0;return[i,r?{encoding:r}:void 0]}};r0=__decorate([__param(0,Be),__param(1,Qt),__param(2,No),__param(3,Ve),__param(4,Ku)],r0);var os=j("IExtHostWorkspace");function Mf(e){let t,i;if(e)return typeof e=="string"?t=e:(t=e.pattern,i=y.revive(e.baseUri)),{pattern:t,folder:i}}function vx(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const i=Mf(t);return i?{pattern:i.pattern,uri:i.folder}:void 0}})??[]).filter(t=>!!t)}var wx;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(wx||(wx={}));var bx;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(bx||(bx={}));var yx;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(yx||(yx={}));var s0;(function(e){e.DEFAULT={allowTrailingComma:!0}})(s0||(s0={}));function uL(e,t=!1){let i=0;const r=e.length;let s="",n=0,o=16,a=0;function c(w){let x=0,k=0;for(;x<w;){const $=e.charCodeAt(i);if($>=48&&$<=57)k=k*16+$-48;else if($>=65&&$<=70)k=k*16+$-65+10;else if($>=97&&$<=102)k=k*16+$-97+10;else break;i++,x++}return x<w&&(k=-1),k}function l(w){i=w,s="",n=0,o=16,a=0}function u(){const w=i;if(e.charCodeAt(i)===48)i++;else for(i++;i<e.length&&La(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===46)if(i++,i<e.length&&La(e.charCodeAt(i)))for(i++;i<e.length&&La(e.charCodeAt(i));)i++;else return a=3,e.substring(w,i);let x=i;if(i<e.length&&(e.charCodeAt(i)===69||e.charCodeAt(i)===101))if(i++,(i<e.length&&e.charCodeAt(i)===43||e.charCodeAt(i)===45)&&i++,i<e.length&&La(e.charCodeAt(i))){for(i++;i<e.length&&La(e.charCodeAt(i));)i++;x=i}else a=3;return e.substring(w,x)}function d(){let w="",x=i;for(;;){if(i>=r){w+=e.substring(x,i),a=2;break}const k=e.charCodeAt(i);if(k===34){w+=e.substring(x,i),i++;break}if(k===92){if(w+=e.substring(x,i),i++,i>=r){a=2;break}switch(e.charCodeAt(i++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:{const A=c(4);A>=0?w+=String.fromCharCode(A):a=4;break}default:a=5}x=i;continue}if(k>=0&&k<=31)if(Ff(k)){w+=e.substring(x,i),a=2;break}else a=6;i++}return w}function f(){if(s="",a=0,n=i,i>=r)return n=r,o=17;let w=e.charCodeAt(i);if(n0(w)){do i++,s+=String.fromCharCode(w),w=e.charCodeAt(i);while(n0(w));return o=15}if(Ff(w))return i++,s+=String.fromCharCode(w),w===13&&e.charCodeAt(i)===10&&(i++,s+=`
`),o=14;switch(w){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,s=d(),o=10;case 47:{const x=i-1;if(e.charCodeAt(i+1)===47){for(i+=2;i<r&&!Ff(e.charCodeAt(i));)i++;return s=e.substring(x,i),o=12}if(e.charCodeAt(i+1)===42){i+=2;const k=r-1;let $=!1;for(;i<k;){if(e.charCodeAt(i)===42&&e.charCodeAt(i+1)===47){i+=2,$=!0;break}i++}return $||(i++,a=1),s=e.substring(x,i),o=13}return s+=String.fromCharCode(w),i++,o=16}case 45:if(s+=String.fromCharCode(w),i++,i===r||!La(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;i<r&&p(w);)i++,w=e.charCodeAt(i);if(n!==i){switch(s=e.substring(n,i),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(w),i++,o=16}}function p(w){if(n0(w)||Ff(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let w;do w=f();while(w>=12&&w<=15);return w}return{setPosition:l,getPosition:()=>i,scan:t?m:f,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>i-n,getTokenError:()=>a}}function n0(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Ff(e){return e===10||e===13||e===8232||e===8233}function La(e){return e>=48&&e<=57}var xx;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(xx||(xx={}));function hL(e,t,i=s0.DEFAULT){const r=uL(e,!1);function s(Y){return Y?()=>Y(r.getTokenOffset(),r.getTokenLength()):()=>!0}function n(Y){return Y?le=>Y(le,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),d=n(t.onLiteralValue),f=n(t.onSeparator),p=s(t.onComment),m=n(t.onError),w=i&&i.disallowComments,x=i&&i.allowTrailingComma;function k(){for(;;){const Y=r.scan();switch(r.getTokenError()){case 4:$(14);break;case 5:$(15);break;case 3:$(13);break;case 1:w||$(11);break;case 2:$(12);break;case 6:$(16);break}switch(Y){case 12:case 13:w?$(10):p();break;case 16:$(1);break;case 15:case 14:break;default:return Y}}}function $(Y,le=[],We=[]){if(m(Y),le.length+We.length>0){let Ce=r.getToken();for(;Ce!==17;){if(le.indexOf(Ce)!==-1){k();break}else if(We.indexOf(Ce)!==-1)break;Ce=k()}}}function A(Y){const le=r.getTokenValue();return Y?d(le):a(le),k(),!0}function G(){switch(r.getToken()){case 11:{let Y=0;try{Y=JSON.parse(r.getTokenValue()),typeof Y!="number"&&($(2),Y=0)}catch{$(2)}d(Y);break}case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return k(),!0}function N(){return r.getToken()!==10?($(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(f(":"),k(),K()||$(4,[],[2,5])):$(5,[],[2,5]),!0)}function W(){o(),k();let Y=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(Y||$(4,[],[]),f(","),k(),r.getToken()===2&&x)break}else Y&&$(6,[],[]);N()||$(4,[],[2,5]),Y=!0}return c(),r.getToken()!==2?$(7,[2],[]):k(),!0}function X(){l(),k();let Y=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(Y||$(4,[],[]),f(","),k(),r.getToken()===4&&x)break}else Y&&$(6,[],[]);K()||$(4,[],[4,5]),Y=!0}return u(),r.getToken()!==4?$(8,[4],[]):k(),!0}function K(){switch(r.getToken()){case 3:return X();case 1:return W();case 10:return A(!0);default:return G()}}return k(),r.getToken()===17?i.allowEmptyContent?!0:($(4,[],[]),!1):K()?(r.getToken()!==17&&$(9,[],[]),!0):($(4,[],[]),!1)}function Ul(e){return Object.isFrozen(e)?e:p5(e)}var Na=class uo{static createEmptyModel(t){return new uo({},[],[],void 0,t)}constructor(t,i,r,s,n){this.b=t,this.c=i,this.d=r,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw){const t=(Array.isArray(this.raw)?this.raw:[this.raw]).map(i=>{if(i instanceof uo)return i;const r=new dL("",this.f);return r.parseRaw(i),r.configurationModel});this.g=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Sh(this.contents,t):this.contents}inspect(t,i){const r=this;return{get value(){return Ul(r.rawConfiguration.getValue(t))},get override(){return i?Ul(r.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return Ul(i?r.rawConfiguration.override(i).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of r.rawConfiguration.overrides){const c=new uo(n,a,[],void 0,r.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?Ul(s):void 0}}}getOverrideValue(t,i){const r=this.j(i);return r?t?Sh(r,t):r:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const r of this.overrides)r.identifiers.includes(t)&&i.push(...r.keys);return wo(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return wo(t)}override(t){let i=this.a.get(t);return i||(i=this.h(t),this.a.set(t,i)),i}merge(...t){const i=it(this.contents),r=it(this.overrides),s=[...this.keys],n=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of t)if(n.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.i(i,o.contents);for(const a of o.overrides){const[c]=r.filter(l=>wr(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=wo(c.keys)):r.push(it(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new uo(i,s,r,!n.length||n.every(o=>o instanceof uo)?void 0:n,this.f)}h(t){const i=this.j(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const r={};for(const s of wo([...Object.keys(this.contents),...Object.keys(i)])){let n=this.contents[s];const o=i[s];o&&(typeof n=="object"&&typeof o=="object"?(n=it(n),this.i(n,o)):n=o),r[s]=n}return new uo(r,this.keys,this.overrides,void 0,this.f)}i(t,i){for(const r of Object.keys(i)){if(r in t&&yt(t[r])&&yt(i[r])){this.i(t[r],i[r]);continue}t[r]=it(i[r])}}j(t){let i=null,r=null;const s=n=>{n&&(r?this.i(r,n):r=it(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?i=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(i),r}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.k(t,i,!0)}setValue(t,i){this.k(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),HA(this.contents,t),kr.test(t)&&this.overrides.splice(this.overrides.findIndex(r=>wr(r.identifiers,Lc(t))),1))}k(t,i,r){if(A7(this.contents,t,i,s=>this.f.error(s)),r=r||this.keys.indexOf(t)===-1,r&&this.keys.push(t),kr.test(t)){const s=Lc(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:Fm(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>wr(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},dL=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||Na.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!xt(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:r,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new Na(i,r,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},i=null,r=[];const s=[],n=[];function o(c){Array.isArray(r)?r.push(c):i!==null&&(r[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(r),r=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{r=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(r),r=c,i=null},onArrayEnd:()=>{r=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{hL(e,a),t=r[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=Ft.as(Cn.Configuration).getConfigurationProperties(),r=this.j(e,i,!0,t);e=r.raw;const s=Fm(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.m(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}j(e,t,i,r){let s=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(kr.test(a)&&i){const c=this.j(e[a],t,!1,r);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a];c?.restricted&&o.push(a),this.l(a,c,r)?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t,i){if(i.exclude?.includes(e))return!1;if(i.include?.includes(e))return!0;if(i.skipRestricted&&t?.restricted||i.skipUnregistered&&!t)return!1;const r=t?typeof t.scope<"u"?t.scope:4:void 0;return r===void 0||i.scopes===void 0?!0:i.scopes.includes(r)}m(e,t){const i=[];for(const r of Object.keys(e))if(kr.test(r)){const s={};for(const n in e[r])s[n]=e[r][n];i.push({identifiers:Lc(r),keys:Object.keys(s),contents:Fm(s,t)})}return i}},fL=class{constructor(e,t,i,r,s,n,o,a,c,l,u,d,f){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=r,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=d,this.m=f}get value(){return Ul(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},o0=class J${constructor(t,i,r,s,n,o,a,c,l,u){this.j=t,this.l=i,this.m=r,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Nt,this.v=null}getValue(t,i,r){return this.w(t,i,r).getValue(t)}updateValue(t,i,r={}){let s;r.resource?(s=this.t.get(r.resource),s||(s=Na.createEmptyModel(this.u),this.t.set(r.resource,s))):s=this.s,i===void 0?s.removeValue(t):s.setValue(t,i),r.resource||(this.h=null)}inspect(t,i,r){const s=this.w(t,i,r),n=this.A(i.resource,r),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new fL(t,i,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,r?this.q:void 0,n||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const r=[];if(!i){const{added:s,updated:n,removed:o}=Gs(this.j,t);i=[...s,...n,...o]}for(const s of i)for(const n of Lc(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!ui(this.j.override(n).getValue(l),t.override(n).getValue(l)))];r.push([n,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:r}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:r,removed:s}=Gs(this.l,t),n=[...i,...r,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Gs(this.applicationConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Gs(this.localUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Gs(this.remoteUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Gs(this.workspaceConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,i){const r=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=Gs(r,i),c=[...s,...n,...o];return(c.length||!r)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:s,removed:n,overrides:o}=Gs(i,void 0);return{keys:[...r,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new Na(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,r){let s=this.x(i,r);if(i.overrideIdentifier&&(s=s.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0){s=s.merge();for(const n of this.l.keys)s.setValue(n,this.l.getValue(n))}return s}x({resource:t},i){let r=this.y();if(i&&t){const s=i.getFolder(t);s&&(r=this.z(s.uri)||r);const n=this.t.get(t);n&&(r=r.merge(n))}return r}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const r=this.y(),s=this.r.get(t);s?(i=r.merge(s),this.i.set(t,i)):i=r}return i}A(t,i){if(i&&t){const r=i.getFolder(t);if(r)return this.r.get(r.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:r,overrides:s,keys:n}=this.r.get(i);return t.push([i,{contents:r,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(r=>t.add(r))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(r=>t.add(r))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.q.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.r.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s))),[...i.values()]}static parse(t,i){const r=this.E(t.defaults,i),s=this.E(t.policy,i),n=this.E(t.application,i),o=this.E(t.userLocal,i),a=this.E(t.userRemote,i),c=this.E(t.workspace,i),l=t.folders.reduce((u,d)=>(u.set(y.revive(d[0]),this.E(d[1],i)),u),new Nt);return new J$(r,s,n,o,a,c,l,Na.createEmptyModel(i),new Nt,i)}static E(t,i){return new Na(t.contents,t.keys,t.overrides,t.raw,i)}},pL=class{constructor(e,t,i,r,s){this.change=e,this.f=t,this.g=i,this.h=r,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=o0.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,r=this.d.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!ui(o,a)}return!0}};function Gs(e,t){const{added:i,removed:r,updated:s}=Ex(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=Ex({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:r,updated:s,overrides:n}}function Ex(e,t){const i=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],r=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Sh(t.contents,n),a=Sh(e.contents,n);ui(o,a)||s.push(n)}}return{added:i,removed:r,updated:s}}function Of(e,t){if(t){const i=t.split(".");let r=e;for(let s=0;r&&s<i.length;s++)r=r[i[s]];return r}}function gL(e){return e instanceof y}function mL(e){return e&&e.uri instanceof y&&e.languageId&&typeof e.languageId=="string"}function vL(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function wL(e){return e&&e.uri instanceof y&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function Sx(e){if(gL(e))return{resource:e};if(mL(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(vL(e))return{overrideIdentifier:e.languageId};if(wL(e))return{resource:e.uri};if(e===null)return{resource:null}}var a0=class{constructor(t,i,r){this.a=t.getProxy(V.MainThreadConfiguration),this.c=i,this.b=r,this.d=new yr,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new bL(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(r=>r.$acceptConfigurationChanged(t,i))}};a0=__decorate([__param(0,Be),__param(1,os),__param(2,Ve)],a0);var bL=class{constructor(e,t,i,r){this.a=new P,this.b=e,this.f=r,this.c=t,this.e=o0.parse(i,r),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=o0.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const r=Sx(t)||{},s=this.g(this.e.getValue(e,r,this.c.workspace));e&&this.h(e,r,i?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case aa.Global:return 2;case aa.Workspace:return 5;case aa.WorkspaceFolder:return 6}}const o={has(a){return typeof Of(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,r,i?.identifier);let l=Of(s,a);if(typeof l>"u")l=c;else{let u;const d=(f,p)=>{if(yt(f)){let m;const w=()=>{u=u||it(s),m=m||Of(u,p)};return new Proxy(f,{get:(x,k)=>{if(typeof k=="string"&&k.toLowerCase()==="tojson")return w(),()=>m;if(u)return m=m||Of(u,p),m[k];const $=x[k];return typeof k=="string"?d($,`${p}.${k}`):$},set:(x,k,$)=>(w(),m&&(m[k]=$),!0),deleteProperty:(x,k)=>(w(),m&&delete m[k],!0),defineProperty:(x,k,$)=>(w(),m&&Object.defineProperty(m,k,$),!0)})}return Array.isArray(f)?it(f):f};l=d(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const d=n(l);return c!==void 0?this.b.$updateConfigurationOption(d,a,c,r,u):this.b.$removeConfigurationOption(d,a,r,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,r,this.c.workspace);if(c)return{key:a,defaultValue:it(c.policy?.value??c.default?.value),globalLocalValue:it(c.userLocal?.value),globalRemoteValue:it(c.userRemote?.value),globalValue:it(c.user?.value??c.application?.value),workspaceValue:it(c.workspace?.value),workspaceFolderValue:it(c.workspaceFolder?.value),defaultLanguageValue:it(c.default?.override),globalLocalLanguageValue:it(c.userLocal?.override),globalRemoteLanguageValue:it(c.userRemote?.override),globalLanguageValue:it(c.user?.override??c.application?.override),workspaceLanguageValue:it(c.workspace?.override),workspaceFolderLanguageValue:it(c.workspaceFolder?.override),languageIds:it(c.overrideIdentifiers)}}};return typeof s=="object"&&vn(o,s,!1),Object.freeze(o)}g(e){const t=i=>yt(i)?new Proxy(i,{get:(r,s)=>t(r[s]),set:(r,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(r,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(r,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const r=kr.test(e)?5:this.d.get(e),s=i?`[${i.value}] `:"";if(r===5){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(r===4){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new pL(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(r,s)=>i.affectsConfiguration(r,Sx(s))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},as=j("IExtHostConfiguration"),yL=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},Hl=class Z$ extends ne{static isHostExtension(t,i,r){if(i.getExtensionDescription(t))return!1;const s=r.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,i){super(),this.n=t,this.c=this.B(new P),this.onDidChange=this.c.event,this.f=0,this.g=i,this.r()}r(){this.g.sort(EL),this.h=new Vr,this.j=[],this.m=new Map;for(const t of this.g){if(this.h.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.h.set(t.identifier,t),this.j.push(t);const i=this.n.readActivationEvents(t);for(const r of i)this.m.has(r)||this.m.set(r,[]),this.m.get(r).push(t)}}set(t){return this.g=t,this.r(),this.f++,this.c.fire(void 0),{versionId:this.f}}deltaExtensions(t,i){this.g=$x(this.g,i),this.g=this.g.concat(t);const r=Z$.s(this.g);return this.g=$x(this.g,r.map(s=>s.identifier)),this.r(),this.f++,this.c.fire(void 0),new yL(this.f,r)}static s(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},r=new Vr;for(const a of t)if(r.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(Fe.toKey(a.identifier),Fe.toKey(c));const s=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>s.add(a));const n=i.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];i.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>r.get(a))}containsActivationEvent(t){return this.m.has(t)}containsExtension(t){return this.h.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.m.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.j.slice(0)}getSnapshot(){return new xL(this.f,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.h.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.j)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},xL=class{constructor(e,t){this.versionId=e,this.extensions=t}},kx;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(kx||(kx={}));function EL(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,r=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==r)return i-r;const s=Ne.basename(e.extensionLocation.path),n=Ne.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function $x(e,t){const i=new pn(t);return e.filter(r=>!i.has(r.identifier))}var Uf=class Q${static{this.NONE=new Q$(!1,-1,-1,-1)}constructor(t,i,r,s){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=r,this.activateResolvedTime=s}},c0=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Uf(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},Hf=class{constructor(e,t,i,r,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=s,this.disposable=n}},SL=class extends Hf{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,ne.None)}},kL=class extends Hf{constructor(){super(!1,null,Uf.NONE,{activate:void 0,deactivate:void 0},void 0,ne.None)}},Bf=class extends Hf{constructor(e){super(!0,e,Uf.NONE,{activate:void 0,deactivate:void 0},void 0,ne.None)}},l0=class{constructor(t,i,r,s){this.g=s,this.a=t,this.b=i,this.c=r,this.d=new Vr,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,r]of this.d)t.push(r.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const r=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(r.map(s=>({id:s.identifier,reason:{startup:i,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const r=this.a.getExtensionDescription(t);if(!r)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:r.identifier,reason:i}])}async h(t){const i=t.filter(r=>!this.isActivated(r.id)).map(r=>this.j(r));await Promise.all(i.map(r=>r.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new Bf(n));return this.c.onExtensionActivationError(t.id,n,new Y9(t.id.value)),o}const r=[],s=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){r.push(o);continue}if(this.l(n)){r.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;r.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,i.displayName,[],new Bf(l));return this.c.onExtensionActivationError(i.identifier,l,new Y9(n)),u}return this.k(t,i.displayName,r,null)}k(t,i,r,s){const n=new u0(t.id,i,t.reason,r,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return Hl.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};l0=__decorate([__param(3,Ve)],l0);var u0=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new yr,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const r=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);r.detail=i.value.activationFailedError,this.h=new Bf(r),this.j.onExtensionActivationError(this.c,r,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new Bf(i),this.b&&ys(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};u0=__decorate([__param(6,Ve)],u0);var Cx=class{constructor(e,t){this.c=t,this.b=new P,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(V.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this.a.$initializeExtensionStorage(e,t);let s;return r&&(s=this.d(e,t,r)),s||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.d(e,t,i);r&&this.b.fire({shared:e,key:t,value:r})}d(e,t,i){try{return JSON.parse(i)}catch(r){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}},h0=j("IExtHostStorage"),Ix=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(r=>(this.f=r,this)),this.g=this.c.onDidChangeStorage(r=>{r.shared===this.b&&r.key===this.a&&(this.f=r.value)}),this.i=new Po(()=>{const r=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of r.values())s.complete()}catch(s){for(const n of r.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const r=new xr;return this.h.set(e,r),this.i.isScheduled()||this.i.schedule(),r.p}dispose(){this.g.dispose()}},$L=class extends Ix{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},Rr,d0=Rr=class{constructor(t,i){this.b=new Map,this.c=new xD,this.a=t.getProxy(V.MainThreadFileSystem);const r=this;this.value=Object.freeze({async stat(s){try{let n;const o=r.b.get(s.scheme);return o?(await r.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await r.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===Ho.Readonly?1:void 0}}catch(n){Rr.e(n)}},async readDirectory(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await r.a.$readdir(s)}catch(n){return Rr.e(n)}},async createDirectory(s){try{const n=r.b.get(s.scheme);return n&&!n.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(n.impl,n.extUri,s)):await r.a.$mkdir(s)}catch(n){return Rr.e(n)}},async readFile(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await r.a.$readFile(s)).buffer}catch(n){return Rr.e(n)}},async writeFile(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(o.impl,o.extUri,o.extUri.dirname(s)),await r.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await r.a.$writeFile(s,ae.wrap(n))}catch(o){return Rr.e(o)}},async delete(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await r.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await r.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return Rr.e(o)}},async rename(s,n,o){try{return await r.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return Rr.e(a)}},async copy(s,n,o){try{return await r.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return Rr.e(a)}},isWritableFileSystem(s){const n=i.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,i,r){const s=[];for(;!i.isEqual(r,i.dirname(r));)try{if(((await t.stat(r)).type&En.Directory)===0)throw Dt.FileExists(`Unable to create folder '${r.scheme===z.file?r.fsPath:r.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(fh(n)!==ye.FileNotFound)throw n;s.push(i.basename(r)),r=i.dirname(r)}for(let n=s.length-1;n>=0;n--){r=i.joinPath(r,s[n]);try{await t.createDirectory(r)}catch(o){if(fh(o)!==ye.FileExists)throw o}}}static e(t){if(t instanceof Dt)throw t;if(t instanceof C6)switch(t.code){case ye.FileExists:throw Dt.FileExists(t.message);case ye.FileNotFound:throw Dt.FileNotFound(t.message);case ye.FileNotADirectory:throw Dt.FileNotADirectory(t.message);case ye.FileIsADirectory:throw Dt.FileIsADirectory(t.message);case ye.NoPermissions:throw Dt.NoPermissions(t.message);case ye.Unavailable:throw Dt.Unavailable(t.message);default:throw new Dt(t.message,t.name)}if(!(t instanceof Error))throw new Dt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Dt.Unavailable(t.message);switch(t.name){case ye.FileExists:throw Dt.FileExists(t.message);case ye.FileNotFound:throw Dt.FileNotFound(t.message);case ye.FileNotADirectory:throw Dt.FileNotADirectory(t.message);case ye.FileIsADirectory:throw Dt.FileIsADirectory(t.message);case ye.NoPermissions:throw Dt.NoPermissions(t.message);case ye.Unavailable:throw Dt.Unavailable(t.message);default:throw new Dt(t.message,t.name)}}addFileSystemProvider(t,i,r){return this.b.set(t,{impl:i,extUri:r?.isCaseSensitive?He:oD,isReadonly:!!r?.isReadonly}),se(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??He}};d0=Rr=__decorate([__param(0,Be),__param(1,No)],d0);var jf=j("IExtHostConsumerFileSystem"),f0=j("IExtensionStoragePaths"),p0=class{constructor(t,i,r){this.d=i,this.f=r,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return y.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(y.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:y.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(r){this.d.error("[ExtHostStorage]",r);return}}workspaceValue(t){if(this.c)return y.joinPath(this.c,t.identifier.value)}globalValue(t){return y.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};p0=__decorate([__param(0,Qt),__param(1,Ve),__param(2,jf)],p0);var $_=j("tunnelService"),C_=j("sharedTunnelsService"),Dx;(function(e){e.Http="http",e.Https="https"})(Dx||(Dx={}));var Kn;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(Kn||(Kn={}));var Px;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Px||(Px={}));function CL(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var g0=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function Ax(e){return g0.indexOf(e)>=0}var m0=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Tx(e){return m0.indexOf(e)>=0}var IL=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new P,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},Rx=class extends ne{constructor(t,i){super(),this.r=t,this.s=i,this.a=new P,this.onTunnelOpened=this.a.event,this.b=new P,this.onTunnelClosed=this.b.event,this.c=new P,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],i=Array.from(this.f.values());for(const r of i){const s=Array.from(r.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(r=>typeof r!="string"?r?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,r,s,n){this.z(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:r,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(Tx(t)||Ax(t))&&(t=g0[0]);const r=this.D(t,i);if(r)return++r.refcount,r.value}openTunnel(t,i,r,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${r} on local port ${n}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),s||(s=this.t),this.g&&this.n.has(r)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,r,s,n,o,a,c);return u?u.then(d=>{if(d){if(typeof d=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(i,r),d}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(i,r);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.w(d);return(d.tunnelRemoteHost!==i||d.tunnelRemotePort!==r)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&d.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const r=i.get(t.tunnelRemotePort);r&&(r.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,r))}}}}async y(t,i,r){if(r.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const s=r.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),s}}async closeTunnel(t,i){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const r=this.f.get(t);if(r&&r.has(i)){const s=r.get(i);s.refcount=0,await this.y(t,i,s)}}z(t,i,r){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:r})}async C(t,i){const r=this.f.get(t);if(r){const s=r.get(i),n=s?await s.value:void 0;(!n||typeof n=="string")&&r.delete(i),r.size===0&&this.f.delete(t)}}D(t,i){const r=[t];Ax(t)?(r.push(...g0),r.push(...m0)):Tx(t)&&r.push(...m0);const s=r.map(n=>this.f.get(n));for(const n of s){const o=n?.get(i);if(o)return o}}canTunnel(t){return!!CL(t)}G(t,i,r,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${r} on local port ${s}.`);const c=r;this.n.add(c);const l=s===void 0?r:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},d={remoteAddress:{host:i,port:r},localAddressPort:s,privacy:o,public:o?o!==Kn.Private:void 0,protocol:a},f=t.forwardPort(d,u);return f?(this.z(i,r,f),f.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),f}};Rx=__decorate([__param(0,Ve),__param(1,Eh)],Rx);var DL=class extends IL{},v0;(function(e){function t(r){return{remoteAddress:r.remoteAddress,localAddress:r.localAddress,public:!!r.public,privacy:r.privacy??(r.public?Kn.Public:Kn.Private),protocol:r.protocol}}e.fromApiTunnel=t;function i(r){return{remoteAddress:{host:r.tunnelRemoteHost,port:r.tunnelRemotePort},localAddress:r.localAddress,public:r.privacy!==Kn.ConstantPrivate&&r.privacy!==Kn.ConstantPrivate,privacy:r.privacy,protocol:r.protocol}}e.fromServiceTunnel=i})(v0||(v0={}));var w0=j("IExtHostTunnelService"),b0=class extends ne{constructor(t,i,r){super(),this.s=r,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new P,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(V.MainThreadTunnelService)}async openTunnel(t,i){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const r=await this.a.$openTunnel(i,t.displayName);if(r){const s=new DL(r.remoteAddress,r.localAddress,()=>this.a.$closeTunnel(r.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const r=this.u();return this.r.set(r,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,r),new Ae(()=>{this.r.delete(r),this.a.$unregisterPortsAttributesProvider(r)})}async $providePortAttributes(t,i,r,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let d;try{d=await l.provider.providePortAttributes({port:u,pid:r,commandLine:s},n)}catch{d=await l.provider.providePortAttributes(u,r,s,n)}return{providedAttributes:d,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,tt.None)??void 0;const r=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(r,!0),Promise.resolve(se(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const r=t.tunnelFactory??(i?this.w(i):void 0);if(r){this.b=r;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:h(2897,null),themeIcon:"lock"},{id:"public",label:h(2898,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return se(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const r=this.g.get(t.host);r.has(t.port)&&(i&&r.get(t.port).disposeListener.dispose(),await r.get(t.port).tunnel.dispose(),r.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const r=this.b(t,i);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),r!==void 0){const s=await r;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),v0.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(r){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),r instanceof Error)return r.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),r=t.filter((s,n)=>i[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${r.map(s=>s.port).join(", ")}`),r}};b0=__decorate([__param(0,Be),__param(1,Qt),__param(2,Ve)],b0);function PL(e){return[...e.entries()]}function AL(e){return e?[...e.entries()]:[]}var TL=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const r=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),r.dispose()}},this.a.set(e,o)});return r}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},eo=(e,t,i,r)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!i(s,n)){const o=s;s=n,e.listener?.(r(n,o))}}}},Ma=(e,t)=>e===t,Js={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:Ma,description:Ma,sortText:Ma,busy:Ma,error:Ma,canResolveChildren:Ma,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(r=>i.id===r.id)))},Fa=e=>t=>({op:4,update:e(t)}),RL=(e,t)=>({range:(()=>{let i;const r=Fa(s=>({range:Oe.lift(O.from(s))}));return{enumerable:!0,configurable:!1,get(){return i},set(s){e.listener?.({op:6}),Js.range(i,s)||(i=s,e.listener?.(r(s)))}}})(),label:eo(e,t,Js.label,Fa(i=>({label:i}))),description:eo(e,void 0,Js.description,Fa(i=>({description:i}))),sortText:eo(e,void 0,Js.sortText,Fa(i=>({sortText:i}))),canResolveChildren:eo(e,!1,Js.canResolveChildren,i=>({op:2,state:i})),busy:eo(e,!1,Js.busy,Fa(i=>({busy:i}))),error:eo(e,void 0,Js.error,Fa(i=>({error:me.fromStrict(i)||null}))),tags:eo(e,[],Js.tags,(i,r)=>({op:1,new:i.map(ur.from),old:r.map(ur.from)}))}),LL=e=>{const t=Re.fromString(e.extId),i=new Bl(t.controllerId,t.localId,e.label,y.revive(e.uri)||void 0);return i.range=O.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(r=>ur.to({id:$9(r).tagId})),i},Lx=e=>{let t;for(const i of e.tests){const r=LL(i.item);Zh(r).parent=t,t=r}return t},Bl=class Y${constructor(t,i,r,s){if(i.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const n=XT(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof y0?void 0:n.parent}},children:{value:YT(n,Zh,Y$),enumerable:!0,writable:!1},...RL(n,r)})}},y0=class extends Bl{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},NL=class extends JT{constructor(e,t,i){super({controllerId:e,getDocumentVersion:r=>r&&i.getDocument(r)?.version,getApiFor:Zh,getChildren:r=>r.children,root:new y0(e,t),toITestItem:Vs.from})}},x0=class extends ne{constructor(t,i,r){super(),this.n=i,this.a=this.B(new P),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new P),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.h=!1,this.m=new Map,this.h=this.n.environment.isExtensionTelemetryLoggingOnly;const s=i.remote.isRemote?"remoteExtHostTelemetry":t?"workerExtHostTelemetry":"extHostTelemetry";this.j=this.B(r.createLogger(s,{name:h(2894,null,this.h?" (Not Sent)":""),hidden:!0,group:FT}))}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,i,r){const s=this.getTelemetryDetails(),n=new Nx(i,r,t,this.j,this.h,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.m.get(t.identifier.value)??[];return this.m.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,i,r){this.f=t,this.c=r??{usage:!0,error:!0}}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.n.telemetryInfo.machineId,i["common.vscodesessionid"]=this.n.telemetryInfo.sessionId,i["common.vscodecommithash"]=this.n.commit,i["common.sqmid"]=this.n.telemetryInfo.sqmId,i["common.devDeviceId"]=this.n.telemetryInfo.devDeviceId,i["common.vscodeversion"]=this.n.version,i["common.isnewappinstall"]=Mx(this.n.telemetryInfo.firstSessionDate),i["common.product"]=this.n.environment.appHost,this.n.uiKind){case rc.Web:i["common.uikind"]="web";break;case rc.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=Lg(UT(this.n.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.g=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.m.forEach((r,s)=>{const n=r.filter(o=>!o.isDisposed);n.length===0?this.m.delete(s):this.m.set(s,n)}),this.m.forEach(r=>{for(const s of r)s.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.g!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails())}onExtensionError(t,i){const s=this.m.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.m.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(i),n=!0);return n}};x0=__decorate([__param(1,Qt),__param(2,yc)],x0);var Nx=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,s,n,o){this.g=i,this.h=r,this.i=s,this.j=n,this.a=new P,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=Q9(t,[]),this.c&&(t=vn(t,this.c)),this.b||(t=vn(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},r=Q9(i,[]),s=new Error(r.message,{cause:r.cause});s.stack=r.stack,s.name=r.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function Mx(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var Wf=j("IExtHostTelemetry"),E0=class{#e;#t;#i;constructor(t,i,r){this.b=new Map,this.c=new Map,this.#e=t.getProxy(V.MainThreadCommands),this.d=i,this.#i=r,this.#t=t.getProxy(V.MainThreadTelemetry),this.converter=new ML(this,s=>{const n=this.c.get(s);return n?.result===ue.Void?n:void 0},i),this.f=[{processArgument(s){return Ct(s)}},{processArgument(s){return Lo(s,function(n){if(Oe.isIRange(n))return O.to(n);if(Ui.isIPosition(n))return je.to(n);if(Oe.isIRange(n.range)&&y.isUri(n.uri))return fi.to(n);if(n instanceof ae)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...r)=>{const s=t.args.map((o,a)=>{if(!o.validate(r[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof r[a]=="object"?JSON.stringify(r[a],null,"	"):r[a]} `);return o.convert(r[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,r,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Ae(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,r,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:r,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(i),new Ae(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,r){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let s=!1;const n=Lo(i,function(o){if(o instanceof Ie)return je.from(o);if(o instanceof Ee)return O.from(o);if(o instanceof Hi)return fi.from(o);if(is.isNotebookRange(o))return Tr.from(o);if(o instanceof ArrayBuffer)return s=!0,ae.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,ae.wrap(o);if(o instanceof ae)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new si(n):n,r);return Ct(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,r){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{ny(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=cn.create();try{return await n.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(ys(l)||this.d.error(l,t,s.extension?.identifier),!r)throw l;if(s.extension?.identifier){const u=this.#i.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(To(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,i,r){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new Jm(i),duration:r})}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const r=this.b.get(t);return r?(i=i.map(s=>this.f.reduce((n,o)=>o.processArgument(n,r.extension),s)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(r=>r[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,r]of this.b){const{metadata:s}=r;s&&(t[i]=s)}return Promise.resolve(t)}};E0=__decorate([__param(0,Be),__param(1,Ve),__param(2,Wf)],E0);var to=j("IExtHostCommands"),ML=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${Mt()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this.f(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(vo(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(se(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),i.$ident=s,i.id=this.delegatingCommandId,i.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},U=class Ri{static{this.Uri=new Ri("uri","Uri of a text document",t=>y.isUri(t),t=>t)}static{this.Position=new Ri("position","A position in a text document",t=>Ie.isPosition(t),je.from)}static{this.Range=new Ri("range","A range in a text document",t=>Ee.isRange(t),O.from)}static{this.Selection=new Ri("selection","A selection in a text document",t=>es.isSelection(t),lr.from)}static{this.Number=new Ri("number","",t=>typeof t=="number",t=>t)}static{this.String=new Ri("string","",t=>typeof t=="string",t=>t)}static Arr(t){return new Ri(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(r=>t.validate(r)),i=>i.map(r=>t.convert(r)))}static{this.CallHierarchyItem=new Ri("item","A call hierarchy item",t=>t instanceof n1,Gn.from)}static{this.TypeHierarchyItem=new Ri("item","A type hierarchy item",t=>t instanceof B1,Zn.from)}static{this.TestItem=new Ri("testItem","A VS Code TestItem",t=>t instanceof Bl,Vs.from)}static{this.TestProfile=new Ri("testProfile","A VS Code test profile",t=>t instanceof b8,Av.from)}constructor(t,i,r,s){this.name=t,this.description=i,this.validate=r,this.convert=s}optional(){return new Ri(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new Ri(t??this.name,i??this.description,this.validate,this.convert)}},ue=class X${static{this.Void=new X$("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},de=class{constructor(e,t,i,r,s){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=s}},Oa=j("IExtHostTerminalService"),Fx=class extends ne{constructor(e,t,i,r){super(),this.u=e,this._id=t,this.w=i,this.y=r,this.a=!1,this.m={isInteractedWith:!1,shell:void 0},this.isOpen=!1,this.s=this.B(new P),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:Ux(e.iconPath)??void 0,color:Mo.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,r,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:r,color:Mo.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,i),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Pt.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){return this.m.shell!==e?(this.m={...this.m,shell:e},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},S0=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new P,this.onProcessData=this.a.event,this.b=new P,this.d=new P,this.onDidChangeProperty=this.d.event,this.f=new P,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},FL=1,k0=class extends ne{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,r){super(),this.R=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new xs),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new P,this.onDidCloseTerminal=this.I.event,this.J=new P,this.onDidOpenTerminal=this.J.event,this.L=new P,this.onDidChangeActiveTerminal=this.L.event,this.M=new P,this.onDidChangeTerminalDimensions=this.M.event,this.N=new P,this.onDidChangeTerminalState=this.N.event,this.O=new P,this.onDidChangeShell=this.O.event,this.P=new P({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new P({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=r.getProxy(V.MainThreadTerminalService),this.y=new TL(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,i){const r=new Fx(this.a,Mt(),t,t.name),s=new S0(t.pty);return r.createExtensionTerminal(t.location,i,this.S(t,i).resolvedExtHostIdentifier,Ux(t.iconPath),UL(t.color)).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(r),r.value}S(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const r=t.location.parentTerminal;if(r){const s=this.f.find(n=>n.value===r);s&&(i.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&"splitActiveTerminal"in i.location&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new S0(i),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.L.fire(this.b);return}const r=this.getTerminalById(t);r&&(this.b=r,i!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const r=this.getTerminalById(t);r&&this.P.fire({terminal:r.value,data:i})}async $acceptTerminalDimensions(t,i,r){const s=this.getTerminalById(t);s&&s.setDimensions(i,r)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,i){const r=this.getTerminalById(t);r&&this.Q.fire({terminal:r.value,...i})}async $acceptTerminalMaximumDimensions(t,i,r){this.g.get(t)?.resize(i,r)}async $acceptTerminalTitleChange(t,i){const r=this.getTerminalById(t);r&&(r.name=i)}async $acceptTerminalClosed(t,i,r){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(i,r),this.I.fire(n.value)}}$acceptTerminalOpened(t,i,r,s){if(i){const a=this.Y(this.f,i);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:y.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new Fx(this.a,t,n,r);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const r=this.getTerminalById(t);if(!r)return{message:h(2895,null,t)};r.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===r.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(i):this.j[t]={initialDimensions:i}}U(t,i){const r=new fe;r.add(i.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),r.add(i.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,i.onProcessData),r.add(i.onProcessExit(n=>this.W(t,n))),this.g.set(t,i);const s=this.j[t];return s&&i instanceof S0&&(i.startSendingEvents(s.initialDimensions),delete this.j[t]),r}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.N.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,r){try{this.g.get(t)?.resize(i,r)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:"cwd",value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,i,r){if(this.D.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.D.set(i,r),this.a.$registerProfileProvider(i,t.identifier.value),new Ae(()=>{this.D.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalCompletionProvider(t,i,...r){if(this.C.has(i.id))throw new Error(`Terminal completion provider "${i.id}" already registered`);return this.C.set(i.id,i),this.a.$registerCompletionProvider(i.id,t.identifier.value,...r),new Ae(()=>{this.C.delete(i.id),this.a.$unregisterCompletionProvider(i.id)})}async $provideTerminalCompletions(t,i){const r=new lt().token;if(r.isCancellationRequested||!this.activeTerminal)return;const s=this.C.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,i,r);if(n!=null)return Hv.from(n)}$acceptTerminalShellType(t,i){const r=this.getTerminalById(t);r?.setShellType(i)&&this.N.fire(r.value)}registerTerminalQuickFixProvider(t,i,r){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,r),this.a.$registerQuickFixProvider(t,i),new Ae(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const r=new lt().token;if(r.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(i,r);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new fe;if(this.w.value=o,!Array.isArray(n))return n?If.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=If.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const r=new lt().token;let s=await this.D.get(t)?.provideTerminalProfile(r);if(!r.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,i);return}this.createTerminalFromOptions(s.options,i)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Ae(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,i){const r=this.getTerminalById(t);if(!r)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new lt;this.H.set(t,n);const o=[],a={terminal:r.value,line:i},c=[];for(const d of this.z)c.push(Ao.withAsyncBody(async f=>{n.token.onCancellationRequested(()=>f({provider:d,links:[]}));const p=await d.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||f({provider:d,links:p})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const d of l)d&&d.links.length>0&&o.push(...d.links.map(f=>{const p={id:FL++,startIndex:f.startIndex,length:f.length,label:f.tooltip};return u.set(p.id,{provider:d.provider,link:f}),p}));return this.G.set(t,u),o}$activateLink(t,i){const r=this.G.get(t)?.get(i);r&&r.provider.handleTerminalLink(r.link)}W(t,i){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const r=this.h[t];r&&(r.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(r=>r.value===t);return i>=0?i:null}X(t,i){const r=this.Y(t,i);return r!==null?t[r]:null}Y(t,i){const r=t.findIndex(s=>s._id===i);return r>=0?r:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.B(new Ox),this.$(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Z(t,i){const r=PL(i.map),s=AL(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,r.length===0?void 0:r,s)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const r=i[0],s=this.B(new Ox(i[1]));this.$(r,s)})}$acceptDefaultProfile(t,i){const r=this.s;this.s=t,this.u=i,r?.path!==t.path&&this.O.fire(t.path)}$(t,i){this.n.set(t,i),this.B(i.onDidChangeCollection(()=>{this.Z(t,i)}))}};k0=__decorate([__param(1,to),__param(2,Be)],k0);var Ox=class extends ne{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new P,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new OL(this,e),this.a.set(t,i),this.B(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,r){this.g(e,{value:t,type:Zo.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this.g(e,{value:t,type:Zo.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this.g(e,{value:t,type:Zo.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),r=this.map.get(i),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==s.applyAtProcessCreation||r.options?.applyAtShellIntegration!==s.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const i=this.h(e,t),r=this.map.get(i);return r?Hx(r):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.j(r.scope)===this.j(e)&&t.set(r.variable,Hx(r));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(i,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},OL=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new P}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,r)=>e.call(t,r,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},$0=class extends k0{constructor(t,i){super(!1,t,i)}createTerminal(t,i,r){throw new Qp}createTerminalFromOptions(t,i){throw new Qp}};$0=__decorate([__param(0,to),__param(1,Be)],$0);function Ux(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function UL(e){return Mo.isThemeColor(e)?e:void 0}function Hx(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var HL=j("progressService"),Bx;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(Bx||(Bx={}));var N_=Object.freeze({total(){},worked(){},done(){}}),C0=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},jx=class extends ne{constructor(t,i){super(),this.a=new xr,i.withProgress(t,r=>(this.b=r,this.c&&r.report(this.c),this.a.p)),this.B(se(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};jx=__decorate([__param(1,HL)],jx);var F_=j("editorProgressService"),Wx="__",O_=j("IAuthenticationService"),U_=j("IAuthenticationExtensionsService"),I0=j("IExtHostAuthentication"),D0=class{constructor(t){this.b=new Map,this.c=new P,this.d=new BL,this.a=t.getProxy(V.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const i=t.toLowerCase();return ft.chain(this.c.event,r=>r.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(i)).map(s=>({provider:s.provider})))}async getSession(t,i,r,s={}){const n=Fe.toKey(t.identifier),o=[...r].sort().join(" "),c=Object.keys(s).sort().map(l=>`${l}:${!!s[l]}`).join(", ");return await this.d.getOrCreate(`${n} ${i} ${o} ${c}`,async()=>{await this.a.$ensureProvider(i);const l=t.displayName||t.name;return this.a.$getSession(i,r,n,l,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,i){const r=this.b.get(t);return r?r.provider.removeSession(i):this.a.$removeSession(t,i)}registerAuthenticationProvider(t,i,r,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:i,provider:r,options:s??{supportsMultipleAccounts:!1}});const n=r.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,i,s?.supportsMultipleAccounts??!1),new Ae(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,i,r){const s=this.b.get(t);if(s)return await s.provider.createSession(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,i){const r=this.b.get(t);if(r)return await r.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,i,r){const s=this.b.get(t);if(s)return await s.provider.getSessions(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,i,r){return t.startsWith(Wx)||this.c.fire({provider:{id:t,label:i},extensionIdFilter:r}),Promise.resolve()}};D0=__decorate([__param(0,Be)],D0);var BL=class{constructor(){this.a=new Map}getOrCreate(e,t){const i=this.a.get(e);if(i)return i;const r=t().finally(()=>this.a.delete(e));return this.a.set(e,r),r}},jL={label:h(5560,null),order:Number.MAX_SAFE_INTEGER},zf,P0=j("IExtHostLanguageModels"),zx=class{constructor(e,t){this.option=e,this.stream=new Ag,this.stream=t??new Ag}},WL=class{constructor(){this.a=new Map,this.b=new Ag,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return hc.map(e.b.asyncIterable,t=>{if(t instanceof pt)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new zx(e.index,this.b):t=new zx(e.index),this.a.set(e.index,t));let i;e.part.type==="text"?i=new pt(e.part.value):e.part.type==="data"?i=new pt(""):i=new Vn(e.part.toolCallId,e.part.name,e.part.parameters),t.stream.emitOne(i)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},A0=class{static{zf=this}static{this.a=1}constructor(t,i,r){this.k=i,this.l=r,this.c=new P,this.d=new P,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Vr,this.i=new Map,this.j=new Map,this.s=new Set,this.b=t.getProxy(V.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,i,r,s){const n=zf.a++;this.f.set(n,{extension:t.identifier,provider:r,languageModelId:i});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${Fe.toKey(t.identifier)}/${i}`,{extension:t.identifier,id:i,vendor:s.vendor??Fe.toKey(t.identifier),name:s.name??"",family:s.family??"",cost:s.cost,description:s.description,version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable,modelPickerCategory:s.category??jL,capabilities:s.capabilities});const a=r.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(i,new Fe(c),l,u)});return se(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,i,r,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new C0(async u=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let d;if(u.part instanceof Vn?d={type:"tool_use",name:u.part.name,parameters:u.part.input,toolCallId:u.part.callId}:u.part instanceof pt?d={type:"text",value:u.part.value}:u.part instanceof js&&(d={type:"data",value:{mimeType:u.part.mimeType,data:ae.wrap(u.part.data)}}),!d){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(i,{index:u.index,part:d})});let l;try{l=a.provider.provideLanguageModelResponse(s.value.map(Dl.to),n,Fe.toKey(r),c,o)}catch(u){throw u}Promise.resolve(l).then(()=>{this.b.$reportResponseDone(i,void 0)},u=>{this.b.$reportResponseDone(i,mo(u))})}$provideTokenLength(t,i,r){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(i,r)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:i,metadata:r}of t.added)this.g.set(i,{metadata:r,apiObjects:new Vr});if(t.removed)for(const i of t.removed){this.g.delete(i);for(const[r,s]of this.i)s.languageModelId===i&&(s.res.reject(new vr),this.i.delete(r))}t.added?.forEach(i=>this.q(i.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const i=qt.find(this.g.entries(),([,r])=>!!r.metadata.isDefault)?.[0];if(i)return this.getLanguageModelByIdentifier(t,i)}async getLanguageModelByIdentifier(t,i){const r=this.g.get(i);if(!r)return;this.p(t.identifier,r.metadata)&&await this.q(r.metadata);let s=r.apiObjects.get(t.identifier);if(!s){const n=this;s={id:r.metadata.id,vendor:r.metadata.vendor,family:r.metadata.family,version:r.metadata.version,name:r.metadata.name,capabilities:{supportsImageToText:r.metadata.capabilities?.vision??!1,supportsToolCalling:r.metadata.capabilities?.toolCalling??!1},maxInputTokens:r.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(i))throw rs.NotFound(i);return n.r(i,o,a??tt.None)},sendRequest(o,a,c){if(!n.g.has(i))throw rs.NotFound(i);return n.m(t,i,o,a??{},c??tt.None)}},Object.freeze(s),r.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,i){const r=await this.b.$selectChatModels({...i,extension:t.identifier}),s=[];for(const n of r){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,i,r,s,n){const o=this.n(t,r),a=t.identifier,c=this.g.get(i)?.metadata;if(!c||!this.g.has(i))throw rs.NotFound(`Language model '${i}' is unknown.`);if(this.p(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw rs.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);const l=Math.random()*1e6|0,u=new WL;this.i.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,new si(o),s,n)}catch(d){throw this.i.delete(l),rs.tryDeserialize(d)??d}return u.apiObject}n(t,i){const r=[];for(const s of i)s.role===Di.System&&L(t,"languageModelSystem"),r.push(Dl.from(s));return r}async $acceptResponsePart(t,i){const r=this.i.get(t);r&&r.res.handleFragment(i)}async $acceptResponseDone(t,i){const r=this.i.get(t);r&&(this.i.delete(t),i?r.res.reject(rs.tryDeserialize(i)??zb(i)):r.res.resolve())}async o(t,i,r,s){const n=Wx+i.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=r?h(2886,null,i.displayName,r):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}p(t,i){return!!i.auth&&!Fe.equals(i.extension,t)}async q(t){if(t.auth)for(const i of this.s)try{await this.o(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(r){this.k.error("Fake Auth request failed"),this.k.error(r)}}async r(t,i,r){if(!this.g.get(t))throw rs.NotFound(`Language model '${t}' is unknown.`);const n=qt.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(i,r):this.b.$countTokens(t,typeof i=="string"?i:Dl.from(i),r)}$updateModelAccesslist(t){const i=new Array;for(const{from:r,to:s,enabled:n}of t){const o=this.h.get(r)??new pn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(r,o);const c={from:r,to:s};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const i=this,r=ft.signal(ft.filter(this.c.event,n=>Fe.equals(n.from,t.identifier))),s=ft.signal(this.d.event);return{get onDidChange(){return ft.any(r,s)},canSendRequest(n){let o;e:for(const[c,l]of i.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!i.p(t.identifier,o))return!0;const a=i.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,i,r=tt.None){return L(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(i,r)}async $isFileIgnored(t,i,r){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(y.revive(i),r)??!1}registerIgnoredFileProvider(t,i){L(t,"chatParticipantPrivate");const r=zf.a++;return this.b.$registerFileIgnoreProvider(r),this.j.set(r,i),se(()=>{this.b.$unregisterFileIgnoreProvider(r),this.j.delete(r)})}};A0=zf=__decorate([__param(0,Be),__param(1,Ve),__param(2,I0)],A0);function jl(e,t=ri){return Q3(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function zL(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var _x;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(_x||(_x={}));var _L=60,VL=_L*60,T0=VL*24,j_=T0*7,W_=T0*30,z_=T0*365;function qL(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var GL={DateTimeFormat(e,t){try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}},Collator(e,t){try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}},Segmenter(e,t){try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}},Locale(e,t){try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(Ss,t)}}},Vx;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Vx||(Vx={}));function qx(e){return e<0?0:e>255?255:e|0}function Ua(e){return e<0?0:e>4294967295?4294967295:e|0}var Gx=class K${constructor(t){const i=qx(t);this.c=i,this.a=K$.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const r=qx(i);t>=0&&t<256?this.a[t]=r:this.b.set(t,r)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},Jx;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(Jx||(Jx={}));var Zx;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(Zx||(Zx={}));var JL=class extends Gx{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=GL.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this.h(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},Qx=new eg(10);function ZL(e,t){const i=`${e}/${t.join(",")}`;let r=Qx.get(i);return r||(r=new JL(e,t),Qx.set(i,r)),r}var R0;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(R0||(R0={}));var Yx;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(Yx||(Yx={}));var Xx;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(Xx||(Xx={}));var Kx;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(Kx||(Kx={}));var eE;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(eE||(eE={}));var tE;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(tE||(tE={}));var iE;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(iE||(iE={}));var rE;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(rE||(rE={}));var L0=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},sE;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(sE||(sE={}));var nE;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(nE||(nE={}));var oE;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(oE||(oE={}));var QL=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},YL=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},aE=class{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=cE(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=D3(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new QL(t,this.wordSeparators?ZL(this.wordSeparators,[]):null,i?this.searchString:null)}};function cE(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r===10)return!0;if(r===92){if(t++,t>=i)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function lE(e,t,i){if(!i)return new L0(e,null);const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s];return new L0(e,r)}function XL(e,t,i,r,s){if(r===0)return!0;const n=t.charCodeAt(r-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r);if(e.get(o)!==0)return!0}return!1}function KL(e,t,i,r,s){if(r+s===i)return!0;const n=t.charCodeAt(r+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r+s-1);if(e.get(o)!==0)return!0}return!1}function uE(e,t,i,r,s){return XL(e,t,i,r,s)&&KL(e,t,i,r,s)}var eN=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this.b&&s===this.c){if(s===0){s4(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=r,this.c=s,!this._wordSeparators||uE(this._wordSeparators,e,t,r,s))return i}while(i);return null}};function hE(e){return e.scheme!==z.file&&e.scheme!==z.vscodeRemote}function tN(e){if(e.folders.length)return e.folders.every(t=>hE(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&hE(e.configuration))return e.configuration}function iN(e){return tN(e)?.scheme}var rN=Um,dE=j("remoteAgentService"),__=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let r=0;r<this.maxSampleCount;r++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await tr(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((r,s)=>r+s,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((r,s)=>r+s,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},N0,sN=j("pathService"),fE=N0=class{constructor(t,i,r,s){this.d=t,this.e=i,this.f=r,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||ac)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,i,r){return typeof i=="string"||typeof i>"u"?this.a.then(s=>this.h(t,s,i)):this.h(t,i,r)}h(t,i,r){return t.scheme===z.file||t.scheme===z.vscodeRemote?Z3(r??er(t),i===1):!0}get defaultUriScheme(){return N0.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return z.vscodeRemote;const r=iN(i.getWorkspace());if(r)return r;const s=i.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=i.getWorkspace().configuration;return n?n.scheme:z.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?St:Ne)}async fileURI(t){let i="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(i=t.substring(2),t="/"):(i=t.substring(2,s),t=t.substring(s)||"/")}return y.from({scheme:z.file,authority:i,path:t,query:"",fragment:""})}};fE=N0=__decorate([__param(1,dE),__param(2,rN),__param(3,Zg)],fE);function nN(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var pE=class{constructor(t,i,r,s,n,o){this.a=t,this.b=i,this.c=r,this.d=s,this.f=n,this.g=o}aiText(t,i,r={}){return{...this.j(i?.map(Qg),r),type:3,contentPattern:t}}text(t,i,r={}){t=this.h(t,r);const s=this.a.getValue(),n=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(i?.map(Qg),r),type:2,contentPattern:t,previewOptions:r.previewOptions,maxFileSize:r.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:r.surroundingContext,userDisabledExcludesAndIgnoreFiles:r.disregardExcludeSettings&&r.disregardIgnoreFiles}}h(t,i){const r=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:r.editor.wordSeparators};return this.l(t,i)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),s}file(t,i={}){return{...this.j(t,i),type:1,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}i(t,i){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(r=>r.length>0).map(_f),!t.length)return{}}else t=_f(t);return i?this.parseSearchPaths(t):{pattern:M0(...Array.isArray(t)?t:[t])}}j(t=[],i={}){let r=Array.isArray(i.excludePattern)?i.excludePattern.map(u=>u.pattern).flat():i.excludePattern;r=r?.length===1?r[0]:r;const s=this.i(i.includePattern,i.expandPatterns),n=this.i(r,i.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,i,n)):t.map(u=>this.u(u,i,n,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults,onlyFileScheme:i.onlyFileScheme};if(i.onlyOpenEditors){const u=bt(this.c.groups.flatMap(p=>p.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const d=u.filter(p=>sx(c,p.fsPath)),f=this.k(d);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(f)),{...c,...f}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>sx(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const i=[],r=new Nt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===z.walkThrough)return;if(cD(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=r.get(c);l||(n=!0,l={folder:c,includePattern:{}},i.push(l),r.set(c,l));const u=cc(c.fsPath,o.fsPath);bo(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:i,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,i){if(i.isSmartCase){if(t.isRegExp){if(c4(t.pattern,!0))return!0}else if(c4(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&cE(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=d=>Hu(d)||/^\.\.?([\/\\]|$)/.test(d),s=(Array.isArray(t)?t:aN(t)).map(d=>{const f=this.f.resolvedUserHome;return f?zL(d,f.scheme===z.file?f.fsPath:f.path):d}),n=Jb(s,d=>i(d)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(d=>xg(d,"/")).map(d=>xg(d,"\\")).map(d=>(d[0]==="."&&(d="*"+d),cN(d))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=M0(...l);return u&&(a.pattern=u),a}n(t,i){return i.disregardExcludeSettings?void 0:OR(t,!i.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const i=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=oN(s);return o&&(o=F0(o)),this.q(n).flatMap(c=>this.r(c,o))}),r=new Map;return i.forEach(s=>{const n=s.searchPath.toString(),o=r.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):r.set(n,{searchPath:s.searchPath,pattern:s.pattern?M0(s.pattern):void 0})}),Array.from(r.values())}q(t){if(Hu(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==z.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:y.file($o(t))}]}if(this.b.getWorkbenchState()===2){const i=this.b.getWorkspace().folders[0].uri;if(t=_f(t),t.startsWith("../")||t===".."){const s=Ne.resolve(i.path,t);return[{searchPath:i.with({path:s})}]}const r=F0(t);return[{searchPath:i,pattern:r}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=i.match(new RegExp(`^${dn(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(xi);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&F0(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=h(13975,null,o);throw new Error(a)}}}}r(t,i){const r=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,s=[{searchPath:t.searchPath,pattern:r}];return r&&!r.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:r+"/**"}),s}t(t,i,r){const s=this.u(Qg(t.searchPath),i,r,!1);return s?{...s,includePattern:t.pattern}:null}u(t,i,r,s){let n;const o=y.isUri(t)?t:t.uri;let a=i.excludePattern?.map(p=>{const m=i.excludePattern&&nN(p)?p.uri:void 0;return!m||!(y.isUri(t)&&this.g.extUri.isEqual(t,m))?m:void 0});if(a?.length||(a=[void 0]),r.searchPaths){const p=r.searchPaths.filter(m=>Do(m.searchPath,o))[0];if(p&&!p.pattern)return null;p&&(n=p.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,i)||{},...n||{}},d=y.isUri(t)?er(t):t.name,f=a.map(p=>Object.keys(u).length>0?{folder:p,pattern:u}:void 0).filter(p=>p);return{folder:o,folderName:s?d:void 0,excludePattern:f,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!c.search.followSymlinks}}};pE=__decorate([__param(0,Eh),__param(1,Zg),__param(2,AT),__param(3,Ve),__param(4,sN),__param(5,H7)],pE);function oN(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let s=e.substr(0,r.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}function M0(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function aN(e){return Am(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function cN(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function _f(e){return e.replace(/\\/g,"/")}function F0(e){return _f(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var lN=7e3;function uN(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const r=[],s=[];for(const u of i)if(/^workspaceContains:/.test(u)){const d=u.substr(18);d.indexOf("*")>=0||d.indexOf("?")>=0||e.forceUsingSearch?s.push(d):r.push(d)}if(r.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=hD(),a=u=>o({activationEvent:u}),c=Promise.all(r.map(u=>hN(e,u,a))).then(()=>{}),l=dN(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function hN(e,t,i){for(const r of e.folders)if(await e.exists(Jt(y.revive(r),t))){i(`workspaceContains:${t}`);return}}async function dN(e,t,i,r){if(i.length===0)return Promise.resolve(void 0);const s=new lt,n=e.checkExists(e.folders,i,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},lN);let a=!1;try{a=await n}catch(c){ys(c)||Vt(c)}s.dispose(),clearTimeout(o),a&&r(`workspaceContains:${i.join(",")}`)}var gE=class{constructor(e){this.b=new P,this.onDidChangePassword=this.b.event,this.a=e.getProxy(V.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}},O0=j("IExtHostSecretState"),fN=class{#e;constructor(e,t){this.disposables=new fe,this.a=Fe.toKey(e.identifier),this.#e=t,this.onDidChange=ft.map(ft.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.a),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},U0=class{constructor(t,i,r){this.f=r,this.d=new Map,this.a=i.getProxy(V.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===Ss}getMessage(t,i){const{message:r,args:s,comment:n}=i;if(this.c)return e4(r,s??{});let o=r;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),e4(a??r,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const r=await this.g(t);if(!r){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(r),n=JSON.parse(s);i=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${r}: ${s.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:r})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return y.revive(i)}return t.l10n?y.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};U0=__decorate([__param(0,Qt),__param(1,Be),__param(2,Ve)],U0);var H0=j("IExtHostLocalizationService"),B0=j("IExtHostManagedSockets"),j0=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(V.MainThreadManagedSockets)}setFactory(t,i){for(const r of this.d.values())r.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new pN(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,r=await this.c.makeConnection(),s=new fe;return this.d.set(i,new gN(i,r,s)),s.add(se(()=>this.d.delete(i))),s.add(r.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),s.dispose()})),s.add(r.onDidClose(n=>{this.a.$onDidManagedSocketClose(i,n?.stack??n?.message),s.dispose()})),s.add(r.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(i,ae.wrap(n)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};j0=__decorate([__param(0,Be)],j0);var pN=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},gN=class extends ne{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.B(i)}},W0,mE=j("IHostUtils"),z0=W0=class extends ne{constructor(t,i,r,s,n,o,a,c,l,u,d,f,p){super(),this.Y=f,this.Z=p,this.a=this.B(new P),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=r,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=d,this.y=this.g.getProxy(V.MainThreadWorkspace),this.z=this.g.getProxy(V.MainThreadTelemetry),this.C=this.g.getProxy(V.MainThreadExtensionService),this.D=new yr,this.F=new yr,this.G=new yr,this.H=new yr,this.I=new vN(this.f.extensions.activationEvents),this.L=new Hl(this.I,this.f.extensions.allExtensions);const m=new pn(this.f.extensions.myExtensions);this.J=new Hl(this.I,bE(this.L,m)),ln&&(this.s.info(`Creating extension host with the following global extensions: ${Ha(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${Ha(this.J)}`)),this.M=new Cx(this.g,this.s),this.N=new gE(this.g),this.O=c,this.h=this.q.add(t.createChild(new qg([h0,this.M],[O0,this.N]))),this.P=this.B(new l0(this.J,this.L,{onExtensionActivationError:(w,x,k)=>{this.C.$onExtensionActivationError(w,mo(x),k)},actualActivateExtension:async(w,x)=>{if(Hl.isHostExtension(w,this.J,this.L))return await this.C.$activateExtension(w,x),new kL;const k=this.J.getExtensionDescription(w);return this.fb(k,x)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.wb(),this.D.open(),await this.j.waitForInitializeCall(),ci("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){Vt(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),Jp(s=>{this.s.error(s)}),this.g.dispose();const r=this.$();Promise.race([tr(5e3),r]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.s.info(`Extension host exiting with code ${i}`),this.s.flush(),this.s.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.C.$getExtension(t);return i&&{...i,identifier:new Fe(i.identifier.value),extensionLocation:y.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const r=this.P.getActivatedExtension(t);if(r.activationFailed)return Promise.reject(r.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===z.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const r=await this.R.get(i);return y.file(r)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new mN(t))),this.Q}async db(t){const i=Ds.forUris(r=>nD.ignorePathCasing(r));return await Promise.all(t.map(async r=>{if(this.xb(r)){const s=await this.cb(r.extensionLocation);i.set(s,r)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const r=this.P.getActivatedExtension(t);if(!r)return i;try{typeof r.module.deactivate=="function"&&(i=Promise.resolve(r.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{r.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return i}async fb(t,i){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,i).then(r=>{const s=r.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,i),this.gb(t,i,"success",s),r},r=>{throw this.gb(t,i,"failure"),r})}gb(t,i,r,s){const n=wE(t,i);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:r})}hb(t,i){const r=wE(t,i);this.z.$publicLog2("activatePlugin",r);const s=this.xb(t);if(!s)return Promise.resolve(new SL(Uf.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.s.flush();const n=this.vb(t),o=new fe,a=new c0(i.startup);return Promise.all([n?this.zb(t,Jt(t.extensionLocation,s),a):this.yb(t,Jt(t.extensionLocation,s),a),this.ib(t,o)]).then(c=>(ci(`code/extHost/willActivateExtension/${t.identifier.value}`),W0.jb(this.s,t.identifier,c[0],c[1],o,a))).then(c=>(ci(`code/extHost/didActivateExtension/${t.identifier.value}`),c))}ib(t,i){const r=this.Z.createLanguageModelAccessInformation(t),s=i.add(new $L(t,this.M)),n=i.add(new Ix(t.identifier.value,!1,this.M)),o=i.add(new fN(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?pa.Test:pa.Development:pa.Production,c=this.f.remote.isRemote?jn.Workspace:jn.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,d;const f=Ze(t,"ipc")?this.f.messagePorts?.get(Fe.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return r},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(p){return vg(t.extensionLocation.fsPath,p)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return vg(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return y.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Wl(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return L(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!d){if(!f)return;const p=ft.buffer(ft.fromDOMEventEmitter(f,"message",m=>m.data));f.start(),d={onDidReceiveMessage:p,postMessage:f.postMessage.bind(f)}}return d}})})}static jb(t,i,r,s,n,o){return r=r||{activate:void 0,deactivate:void 0},this.kb(t,i,r,s,o).then(a=>new Hf(!1,null,o.build(),r,a,se(()=>{n.dispose(),Hr(s.subscriptions)})))}static kb(t,i,r,s,n){if(typeof r.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=typeof global=="object"?global:self,a=r.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(r)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,r=>{this.s.error(r)})}mb(t,i=0){const s=Date.now();Dy(()=>{for(let n=i;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(_I()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),r=this.J.getAllExtensionDescriptions();if(i)this.mb(r);else for(const s of r)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],r=this.pb(i),s=this.rb(),n=Promise.all([s,t,r]).then(()=>{});return Promise.race([n,tr(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const r=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:r||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await uN(s,i);if(n)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(h(2882,null));const r=(await this.getExtensionPathIndex()).findSubstr(i),n=await(this.vb(r,i.path)?this.zb(null,i,new c0(!1)):this.yb(null,i,new c0(!1)));if(!n||typeof n.run!="function")throw new Error(h(2883,null,i.toString()));return new Promise((o,a)=>{const c=(d,f)=>{d?(ln&&this.s.error("Test runner called back with error",d),a(d)):(ln&&(f?this.s.info(`Test runner called back with ${f} failures.`):this.s.info("Test runner called back with successful outcome.")),o(typeof f=="number"&&f>0?1:0))},l=Ki(i),u=n.run(l,c);u&&u.then&&u.then(()=>{ln&&this.s.info("Test runner finished successfully."),o(0)}).catch(d=>{ln&&this.s.error("Test runner finished with error",d),a(d instanceof Error&&d.stack?d.stack:String(d))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),tr(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,se(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new Jo("Not an authority that can be resolved!",Xr.InvalidAuthority);const r=t.substr(0,i);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${r}`,!1),{authorityPrefix:r,resolver:this.S[r]}}async $resolveAuthority(t,i){const r=cn.create(!1),s=()=>`[resolveAuthority(${r8(t)},${i})][${r.elapsed()}ms] `,n=$=>this.s.info(`${s()}${$}`),o=$=>this.s.warn(`${s()}${$}`),a=($,A=void 0)=>this.s.error(`${s()}${$}`,A),c=$=>{if($ instanceof Jo)return{type:"error",error:{code:$._code,message:$._message,detail:$._detail}};throw $},l=async $=>{n(`activating resolver for ${$}...`);const{resolver:A,authorityPrefix:G}=await this.ub($);if(!A)throw a(`no resolver for ${G}`),new Jo(`No remote extension installed to resolve ${G}.`,Xr.NoResolverFound);return{resolver:A,authorityPrefix:G,remoteAuthority:$}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let d;try{d=await Promise.all(u.map(l)).catch(async $=>{if(!($ instanceof Jo)||$._code!==Xr.InvalidAuthority)throw $;return o(`resolving nested authorities failed: ${$.message}`),[await l(t)]})}catch($){return c($)}const f=new ED;f.cancelAndSet(()=>n("waiting..."),1e3);let p,m;for(const[$,{authorityPrefix:A,resolver:G,remoteAuthority:N}]of d.entries())try{if($===d.length-1)n("invoking final resolve()..."),ci(`code/extHost/willResolveAuthority/${A}`),p=await G.resolve(N,{resolveAttempt:i,execServer:m}),ci(`code/extHost/didResolveAuthorityOK/${A}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(G,Yh.isManagedResolvedAuthority(p)?p:void 0));else{if(n(`invoking resolveExecServer() for ${N}`),ci(`code/extHost/willResolveExecServer/${A}`),m=await G.resolveExecServer?.(N,{resolveAttempt:i,execServer:m}),!m)throw new Jo(`Exec server was not available for ${N}`,Xr.NoResolverFound);ci(`code/extHost/didResolveExecServerOK/${A}`)}}catch(W){return ci(`code/extHost/didResolveAuthorityError/${A}`),a("returned an error",W),f.dispose(),c(W)}f.dispose();const w={environmentTunnels:p.environmentTunnels,features:p.tunnelFeatures?{elevation:p.tunnelFeatures.elevation,privacyOptions:p.tunnelFeatures.privacyOptions,protocol:p.tunnelFeatures.protocol===void 0?!0:p.tunnelFeatures.protocol}:void 0},x={extensionHostEnv:p.extensionHostEnv,isTrusted:p.isTrusted,authenticationSession:p.authenticationSessionForInitializingExtensions?{id:p.authenticationSessionForInitializingExtensions.id,providerId:p.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${Yh.isManagedResolvedAuthority(p)?"managed authority":`${p.host}:${p.port}`}`);let k;if(Yh.isManagedResolvedAuthority(p)){const $=i;this.Y.setFactory($,p.makeConnection),k={authority:t,connectTo:new KT($),connectionToken:p.connectionToken}}else k={authority:t,connectTo:new eR(p.host,p.port),connectionToken:p.connectionToken};return{type:"ok",value:{authority:k,options:x,tunnelInformation:w}}}async $getCanonicalURI(t,i){this.s.info(`$getCanonicalURI invoked for authority (${r8(t)})`);const{resolver:r}=await this.ub(t);if(!r)return null;const s=y.revive(i);if(typeof r.getCanonicalURI>"u")return s;const n=await Zt(()=>r.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=vE(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),ln&&(this.s.info(`$startExtensionHost: global extensions: ${Ha(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${Ha(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===1?this.D.wait().then(r=>this.ab(t,!1)):this.G.wait().then(r=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=vE(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),ln&&(this.s.info(`$deltaExtensions: global extensions: ${Ha(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${Ha(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=ae.alloc(t),r=Math.random()%256;for(let s=0;s<t;s++)i.writeUInt8(r,s);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}vb(t,i){return i??=t?.main,i?.endsWith(".mjs")||t?.type==="module"&&!i?.endsWith(".cjs")}};z0=W0=__decorate([__param(0,fc),__param(1,mE),__param(2,Be),__param(3,os),__param(4,as),__param(5,Ve),__param(6,Qt),__param(7,f0),__param(8,w0),__param(9,Oa),__param(10,H0),__param(11,B0),__param(12,P0)],z0);function vE(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const s=new Hl(e,t.getAllExtensionDescriptions());s.deltaExtensions(r.toAdd,r.toRemove);const n=new pn(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of r.myToRemove)n.delete(a);for(const a of r.myToAdd)n.add(a);const o=bE(s,n);return{globalRegistry:s,myExtensions:o}}function wE(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function Ha(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Zs=j("IExtHostExtensionService"),Wl=class{#e;#t;#i;constructor(e,t,i,r,s){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=$o(Ki(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function bE(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var mN=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},vN=class{constructor(e){this.a=new Vr,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},yE=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Ve),r=e.get(Be).getProxy(V.MainThreadErrors);Jp(s=>{t.error(s);const n=mo(s);r.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(Ve),i=e.get(Be),r=e.get(Zs),s=e.get(Wf),n=i.getProxy(V.MainThreadExtensionService),o=i.getProxy(V.MainThreadErrors),a=await r.getExtensionPathIndex(),c=new WeakMap;function l(f,p){if(c.has(f))return c.get(f).stack;let m="",w,x;for(const $ of p)m+=`
	at ${$.toString()}`,x=$.getFileName(),!w&&x&&(w=a.findSubstr(y.file(x)));const k=`${f.name||"Error"}: ${f.message||""}${m}`;return c.set(f,{extensionIdentifier:w?.identifier,stack:k}),k}const u=Symbol("prepareStackTrace wrapped");let d=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return d},set(f){if(f===l||!f||f[u]){d=f||l;return}d=function(p,m){return l(p,m),f.call(Error,p,m)},Object.assign(d,{[u]:!0})}}),Jp(f=>{t.error(f);const p=mo(f);let m;if(f instanceof W4?m=f.extension:m=c.get(f)?.extensionIdentifier,m){n.$onExtensionRuntimeError(m,p);const w=s.onExtensionError(m,f);t.trace("forwarded error to extension?",w,m)}}),Ka.addListener(f=>{o.$onUnexpectedError(f)})}},wN=class eC{constructor(t,i,r,s,n){this.a=r,this.b=new TD(t,null,s),i=eC.e(i,this.b);const o=new qg(...r2());o.set(Qt,{_serviceBrand:void 0,...i,messagePorts:n}),o.set(Be,new a2(this.b)),o.set(Ku,new c2(s)),o.set(mE,r);const a=new o2(o,!0);a.invokeFunction(yE.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(Ve)),ci("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(Zs)),this.c.initialize(),a.invokeFunction(yE.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(V.MainThreadExtensionService);return y.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=y.revive(i.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=y.revive(i.transformIncomingURIs(t.environment.appRoot));const r=t.environment.extensionDevelopmentLocationURI;return r&&(t.environment.extensionDevelopmentLocationURI=r.map(s=>y.revive(i.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=y.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=y.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=y.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.nlsBaseUrl=y.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=y.revive(i.transformIncomingURIs(t.logsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}},bN=function(t){const i=r=>{globalThis.removeEventListener("message",i);const s=r.data;Object.defineProperties(globalThis,{postMessage:{value(n,o){s.postMessage(n,o)}},onmessage:{get(){return s.onmessage},set(n){s.onmessage=n}}}),s.addEventListener("message",n=>{globalThis.dispatchEvent(new MessageEvent("message",{data:n.data,ports:n.ports?[...n.ports]:void 0}))}),s.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",i)}.toString(),yN=class extends EventTarget{constructor(e,t,i){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const r=`((${bN})('${t}'))`,s=new Blob([r],{type:"application/javascript"}),n=URL.createObjectURL(s),o=new MessageChannel,a=n,c={type:"_newWorker",id:a,port:o.port2,url:n,options:i};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(n),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},Q_=new I("inOutput",!1),Y_=new I("activeLogOutput",!1),X_=new I("activeLogOutput.isLog",!1),K_=new I("activeLogOutput.levelSettable",!1),eV=new I("activeLogOutput.level",""),tV=new I("activeLogOutput.levelIsDefault",!1),iV=new I("outputView.scrollLock",!1),rV=new I("activeOutputChannel",""),sV=new I("output.filter.trace",!0),nV=new I("output.filter.debug",!0),oV=new I("output.filter.info",!0),aV=new I("output.filter.warning",!0),cV=new I("output.filter.error",!0),lV=new I("outputFilterFocus",!1),uV=new I("output.filter.categories",""),hV=j("outputService"),zl;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(zl||(zl={}));var xN={OutputChannels:"workbench.contributions.outputChannels"};function EN(e){return Array.isArray(e.source)}var SN=class extends ne{constructor(){super(...arguments),this.a=new Map,this.b=this.B(new P),this.onDidRegisterChannel=this.b.event,this.c=this.B(new P),this.onDidRemoveChannel=this.c.event,this.f=this.B(new P),this.onDidUpdateChannelSources=this.f.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const i=this.a.get(e);i&&EN(i)&&(i.source=t,this.f.fire(i))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};Ft.add(xN.OutputChannels,new SN);var xE=class extends s5{constructor(e,t,i,r,s){super(),this.id=e,this.name=t,this.r=i,this.s=r,this.extension=s,this.n=0,this.visible=!1,this.setLevel(i.getLevel()),this.B(i.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(se(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,zl.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,zl.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=ae.fromString(t).byteLength,XD(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,zl.Append))}},kN=class extends xE{appendLine(e){this.append(e)}},_0=class{constructor(t,i,r,s,n,o){this.i=i,this.j=r,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(V.MainThreadOutputService),this.b=this.k.extUri.joinPath(i.logsLocation,`output_logging_${qL(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[i,r]of this.g)r.visible=i===this.h}createOutputChannel(t,i,r){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof i=="object"&&i.log,n=Me(i)?i:void 0;if(Me(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>Fe.equals(r.identifier,u))?.[1];a&&(o=i2(a));const c=new fe,l=s?this.o(t,o,r,c):this.n(t,n,r,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(se(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,i,r,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,i,r.identifier.value);return s.add(se(()=>this.l.deregisterLogger(o))),new xE(c,t,a,this.a,r)}async o(t,i,r,s){const n=await this.p(r),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${r.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:i,extensionId:r.identifier.value}));return s.add(se(()=>this.l.deregisterLogger(a))),new kN(c,t,l,this.a,r)}p(t){let i=this.d.get(t.identifier.value);if(!i){const r=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,i=(async()=>{try{await this.j.value.createDirectory(r)}catch(s){if(fh(s)!==ye.FileExists)throw s}return r})())}return i}q(t,i,r){const s=()=>{if(r.isDisposed)throw new Error("Channel has been closed")};return i.then(n=>r.add(n)),{get name(){return t},append(n){s(),i.then(o=>o.append(n))},appendLine(n){s(),i.then(o=>o.appendLine(n))},clear(){s(),i.then(n=>n.clear())},replace(n){s(),i.then(o=>o.replace(n))},show(n,o){s(),i.then(a=>a.show(n,o))},hide(){s(),i.then(n=>n.hide())},dispose(){r.dispose()}}}r(t,i,r,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new P);function a(c){i=c,o.fire(c)}return r.then(c=>{c.logLevel!==i&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,r,s),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){n(),r.then(u=>u.trace(c,...l))},debug(c,...l){n(),r.then(u=>u.debug(c,...l))},info(c,...l){n(),r.then(u=>u.info(c,...l))},warn(c,...l){n(),r.then(u=>u.warn(c,...l))},error(c,...l){n(),r.then(u=>u.error(c,...l))}}}};_0=__decorate([__param(0,Be),__param(1,Qt),__param(2,jf),__param(3,No),__param(4,yc),__param(5,Ve)],_0);var EE=j("IExtHostOutputService"),_l,V0=class{static{_l=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(V.MainThreadDecorations)}registerFileDecorationProvider(t,i){const r=_l.c++;this.f.set(r,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(r,i.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(r,null);return}const o=Ni(n);if(o.length<=_l.d){this.g.$onDidChange(r,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:C3(u.path,"/")})),c=ZC(a,(u,d)=>u.rank-d.rank||fn(u.uri.path,d.uri.path)),l=[];e:for(const u of c){let d;for(const f of u){const p=Co(f.uri.path);if(d!==p&&(d=p,l.push(f.uri)>=_l.d))break e}}this.g.$onDidChange(r,l)});return new Ae(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(r),this.f.delete(r)})}async $provideDecorations(t,i,r){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(y.revive(c),r));if(!u)return;try{L1.validate(u),u.badge&&typeof u.badge!="string"&&L(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(d){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${d}`)}}catch(c){this.h.error(c)}})),s}};V0=_l=__decorate([__param(0,Be),__param(1,Ve)],V0);var SE=j("IExtHostDecorations"),$N=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=Ua(e);const i=this.a,r=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(i.length+s),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=Ua(e),t=Ua(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=Ua(e),t=Ua(t);const i=this.a,r=this.b;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=Ua(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,r=0,s=0,n=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.b[r],n=s-this.a[r],e<n)i=r-1;else if(e>=s)t=r+1;else break;return new CN(r,e-n)}},CN=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},IN=class{constructor(e,t,i,r){this.a=e,this.b=t,this.c=i,this.d=r,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const i of t)this.k(i.range),this.l(new Ui(i.range.startLineNumber,i.range.startColumn),i.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this.b[r].length+e;this.f=new $N(i)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const i=i4(t);if(i.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.b[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this.b.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,r)}},kE="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function DN(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of kE)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var PN=DN();function $E(e){let t=PN;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var CE=new Es;CE.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function IE(e,t,i,r,s){if(t=$E(t),s||(s=qt.first(CE)),i.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:r+=l,i=i.substring(l,e+s.maxLen/2),IE(e,t,i,r,s)}const n=Date.now(),o=e-1-r;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const d=AN(t,i,o,a);if(!d&&c||(c=d,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function AN(e,t,i,r){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=i&&e.lastIndex>=i)return s;if(r>0&&n>r)return null}return null}var q0=new Map;function TN(e,t){t?q0.set(e,t):q0.delete(e)}function RN(e){return q0.get(e)}var LN=class extends IN{constructor(e,t,i,r,s,n,o,a){super(t,i,r,s),this.o=e,this.p=n,this.q=o,this.r=a,this.n=!1}dispose(){ii(!this.n),this.n=!0,this.q=!1}equalLines(e){return wr(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===z.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},get encoding(){return e.r},save(){return e.s()},getText(t){return t?e.t(t):e.getText()},get eol(){return e.c===`
`?or.LF:or.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.u(t)},offsetAt(t){return e.v(t)},positionAt(t){return e.w(t)},validateRange(t){return e.x(t)},validatePosition(t){return e.y(t)},getWordRangeAtPosition(t,i){return e.z(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){ii(!this.n),this.p=e}_acceptIsDirty(e){ii(!this.n),this.q=e}_acceptEncoding(e){ii(!this.n),this.r=e}s(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}t(e){const t=this.x(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const i=this.c,r=t.start.line,s=t.end.line,n=[];n.push(this.b[r].substring(t.start.character));for(let o=r+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(i)}u(e){let t;if(e instanceof Ie?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new NN(t,this.b[t],t===this.b.length-1)}v(e){return e=this.y(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}w(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),i=this.b[t.index].length;return new Ie(t.index,Math.min(t.remainder,i))}x(e){if(!(e instanceof Ee))throw new Error("Invalid argument");const t=this.y(e.start),i=this.y(e.end);return t===e.start&&i===e.end?e:new Ee(t.line,t.character,i.line,i.character)}y(e){if(!(e instanceof Ie))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this.b.length)t=this.b.length-1,i=this.b[t].length,r=!0;else{const s=this.b[t].length;i<0?(i=0,r=!0):i>s&&(i=s,r=!0)}return r?new Ie(t,i):e}z(e,t){const i=this.y(e);if(!t)t=RN(this.p);else if(t4(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=IE(i.character+1,$E(t),this.b[i.line],0);if(r)return new Ee(i.line,r.startColumn-1,i.line,r.endColumn-1)}},NN=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new Ee(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new Ee(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Vf=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},pV=new Vf("id#"),MN=class tC{static{this.c=new Vf("TextEditorDecorationType")}constructor(t,i,r){const s=tC.c.nextId();t.$registerTextEditorDecorationType(i.identifier,s,dv.from(r)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},FN=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof Ie)i=new Ee(e,e);else if(e instanceof Ee)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new Ee(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof Ee)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const r=this.c.validateRange(e);this.g.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==or.LF&&e!==or.CRLF)throw ke("endOfLine");this.h=e}},ON=class{constructor(e,t,i,r){this.c=e,this.d=t,this._accept(i),this.e=r;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=xa.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:xa.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const r=this.m(e.tabSize);r==="auto"?(i=!0,t.tabSize=r):typeof r=="number"&&this.f!==r&&(this.f=r,i=!0,t.tabSize=r)}if(typeof e.indentSize<"u"){const r=this.o(e.indentSize);r==="tabSize"?(i=!0,t.indentSize=r):typeof r=="number"&&this.h!==r&&(this.g=r,this.h=r,i=!0,t.indentSize=r)}if(typeof e.insertSpaces<"u"){const r=this.q(e.insertSpaces);r==="auto"?(i=!0,t.insertSpaces=r):this.j!==r&&(this.j=r,i=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=xa.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},UN=class{constructor(e,t,i,r,s,n,o,a){this.id=e,this.k=t,this.l=i,this.g=!1,this.h=new Set,this.c=s,this.d=new ON(this.k,this.id,n,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return r.value},set document(l){throw new sn("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof es))throw ke("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof es)))throw ke("selections");c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new sn("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new sn("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const d=new FN(r.value,u);return l(d),c.n(d)},insertSnippet(l,u,d={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let f;if(!u||Array.isArray(u)&&u.length===0)f=c.c.map(p=>O.from(p));else if(u instanceof Ie){const{lineNumber:p,column:m}=je.from(u);f=[{startLineNumber:p,startColumn:m,endLineNumber:p,endColumn:m}]}else if(u instanceof Ee)f=[O.from(u)];else{f=[];for(const p of u)if(p instanceof Ee)f.push(O.from(p));else{const{lineNumber:m,column:w}=je.from(p);f.push({startLineNumber:m,startColumn:w,endLineNumber:m,endColumn:w})}}return d.keepWhitespace===void 0&&(d.keepWhitespace=!1),t.$tryInsertSnippet(e,r.value.version,l.value,f,d)},setDecorations(l,u){const d=u.length===0;d&&!c.h.has(l.key)||(d?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(_8(u))return t.$trySetDecorations(e,l.key,RR(u));{const f=new Array(4*u.length);for(let p=0,m=u.length;p<m;p++){const w=u[p];f[4*p]=w.start.line+1,f[4*p+1]=w.start.character+1,f[4*p+2]=w.end.line+1,f[4*p+3]=w.end.character+1}return t.$trySetDecorationsFast(e,l.key,f)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,O.from(l),u||cd.Default))},show(l){t.$tryShowEditor(e,Pt.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){ii(!this.g),this.g=!0}_acceptOptions(e){ii(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){ii(!this.g),this.e=e}_acceptViewColumn(e){ii(!this.g),this.f=e}_acceptSelections(e){ii(!this.g),this.c=e}_acceptDiffInformation(e){ii(!this.g),this.j=e}async m(){const e=this.c.map(lr.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(s=>s.range);i.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=i.length-1;s<n;s++){const o=i[s].end;if(i[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(s=>({range:O.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?Ea.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},HN=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},G0=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new Nt,this.d=new P,this.e=new P,this.f=new P,this.g=new P,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=y.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=y.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==z.vscodeNotebookCell&&o.scheme!==z.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new HN(new LN(this.h.getProxy(V.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty,n.encoding)),this.c.set(o,a),r.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=y.revive(n.documentUri);ii(this.c.has(o),`document '${o}' does not exist`),ii(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new UN(n.id,this.h.getProxy(V.MainThreadTextEditors),this.i,new yi(()=>a.document),n.selections.map(lr.to),n.options,n.visibleRanges.map(l=>O.to(l)),typeof n.editorPosition=="number"?Pt.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(ii(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),Hr(i),Hr(s),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(r),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return qt.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};G0=__decorate([__param(0,Be),__param(1,Ve)],G0);var Ba=j("IExtHostDocumentsAndEditors"),qf=j("IExtHostApiDeprecationService"),J0=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(V.MainThreadTelemetry)}report(t,i,r){const s=this.d(t,i);this.a.has(s)||(this.a.add(s),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${r}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};J0=__decorate([__param(0,Be),__param(1,Ve)],J0);var vV=Object.freeze(new class{report(e,t,i){}}),BN={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:9},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelDataPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelDataPart.d.ts",version:2},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},mcpConfigurationProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mcpConfigurationProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Gf=Object.freeze(BN),Z0=Ft.as(kh.JSONContribution),jN=class Bp{static a(t){const i=new pn;for(let r=0,s=t.length;r<s;r++)i.add(t[r].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new Bp(i,[]);if(!i||!i.length)return new Bp([],t);const r=this.a(t),s=this.a(i),n=i.filter(a=>!r.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new Bp(n,o)}constructor(t,i){this.added=t,this.removed=i}},WN=class{constructor(e,t,i){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=i,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=jN.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){Vt(e)}}},zN={type:"string",enum:["ui","workspace"],enumDescriptions:[h(13676,null),h(13677,null)]},DE="vscode://schemas/vscode-extensions",Q0={properties:{engines:{type:"object",description:h(13678,null),properties:{vscode:{type:"string",description:h(13679,null),default:"^1.22.0"}}},publisher:{description:h(13680,null),type:"string"},displayName:{description:h(13681,null),type:"string"},categories:{description:h(13682,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:H4},{type:"string",const:"Languages",deprecationMessage:h(13683,null)}]}},galleryBanner:{type:"object",description:h(13684,null),properties:{color:{description:h(13685,null),type:"string"},theme:{description:h(13686,null),type:"string",enum:["dark","light"]}}},contributes:{description:h(13687,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:h(13688,null)},enableProposedApi:{type:"boolean",deprecationMessage:h(13689,null)},enabledApiProposals:{markdownDescription:h(13690,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Gf).map(e=>e),markdownEnumDescriptions:Object.values(Gf).map(e=>e.proposal)}},api:{markdownDescription:h(13691,null),type:"string",enum:["none"],enumDescriptions:[h(13692,null)]},activationEvents:{description:h(13693,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:h(13694,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:h(13695,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:h(13696,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:h(13697,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:h(13698,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:h(13699,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:h(13700,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:h(13701,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:h(13702,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:h(13703,null),body:"onStartupFinished"},{label:"onTaskType",description:h(13704,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:h(13705,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:h(13706,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:h(13707,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:h(13708,null)},{label:"onUri",body:"onUri",description:h(13709,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:h(13710,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:h(13711,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:h(13712,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:h(13713,null)},{label:"onRenderer",description:h(13714,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:h(13715,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:h(13716,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:h(13717,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:h(13718,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:h(13719,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:h(13720,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:h(13721,null)},{label:"onMcpCollection",description:h(13722,null),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:h(13723,null),body:"*"}]}},badges:{type:"array",description:h(13724,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:h(13725,null)},href:{type:"string",description:h(13726,null)},description:{type:"string",description:h(13727,null)}}}},markdown:{type:"string",description:h(13728,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:h(13729,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:h(13730,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Gm}},extensionPack:{description:h(13731,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Gm}},extensionKind:{description:h(13732,null),type:"array",items:zN,default:["workspace"],defaultSnippets:[{body:["ui"],description:h(13733,null)},{body:["workspace"],description:h(13734,null)},{body:["ui","workspace"],description:h(13735,null)},{body:["workspace","ui"],description:h(13736,null)},{body:[],description:h(13737,null)}]},capabilities:{description:h(13738,null),type:"object",properties:{virtualWorkspaces:{description:h(13739,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:h(13740,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[h(13741,null),h(13742,null),h(13743,null)]},description:{type:"string",markdownDescription:h(13744,null)}}},untrustedWorkspaces:{description:h(13745,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:h(13746,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[h(13747,null),h(13748,null),h(13749,null)]},restrictedConfigurations:{description:h(13750,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:h(13751,null)}}}}},sponsor:{description:h(13752,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:h(13753,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:h(13754,null),type:"string"},"vscode:uninstall":{description:h(13755,null),type:"string"}}},icon:{type:"string",description:h(13756,null)},l10n:{type:"string",description:h(13757,null)},pricing:{type:"string",markdownDescription:h(13758,null),enum:["Free","Trial"],default:"Free"}}},_N=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new WN(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&zT.register(e.extensionPoint,e.activationEventsGenerator),Q0.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Z0.registerSchema(DE,Q0),t}getExtensionPoints(){return Array.from(this.a.values())}},PE={ExtensionsRegistry:"ExtensionsRegistry"};Ft.add(PE.ExtensionsRegistry,new _N);var VN=Ft.as(PE.ExtensionsRegistry);Z0.registerSchema(DE,Q0),Z0.registerSchema(UA,{properties:{extensionEnabledApiProposals:{description:h(13759,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Gf),markdownEnumDescriptions:Object.values(Gf).map(e=>e.proposal)}}]}}}});var qN={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:h(11105,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:h(11106,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:h(11107,null),default:""}}},Y0;(function(e){function t(i,r,s){if(!i)return;const n=Me(i.type)?i.type:void 0;if(!n||n.length===0){s.error(h(11108,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)Me(a)&&o.push(a);return{extensionId:r.value,taskType:n,required:o,properties:i.properties?it(i.properties):{},when:i.when?kt.deserialize(i.when):void 0}}e.from=t})(Y0||(Y0={}));var GN=VN.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:h(11109,null),type:"array",items:qN}}),JN=class{constructor(){this.d=new P,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{GN.setHandler((i,r)=>{this.c=void 0;try{for(const s of r.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of r.added){const n=s.value;for(const o of n){const a=Y0.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(r.removed.length>0||r.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=it(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},ZN=new JN,QN="settings",wV=new I("taskRunning",!1,h(11110,null)),bV=new I("taskTerminalActive",!1,h(11111,null)),yV=Mu(11113,"Tasks"),Jf;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Jf||(Jf={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Jf||(Jf={}));var AE;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(AE||(AE={}));var Vl;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Vl||(Vl={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Vl||(Vl={}));var ql;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(ql||(ql={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(ql||(ql={}));var Gl;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Gl||(Gl={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Gl||(Gl={}));var TE;(function(e){e.defaults={echo:!0,reveal:Vl.Always,revealProblems:ql.Never,focus:!1,panel:Gl.Shared,showReuseMessage:!0,clear:!1}})(TE||(TE={}));var Zf;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Zf||(Zf={})),function(e){function t(r){switch(r.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(r){switch(r){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}(Zf||(Zf={}));var RE;(function(e){function t(i){return Me(i)?i:i.value}e.value=t})(RE||(RE={}));var LE;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(r){return r===e.Clean._id||r===e.Build._id||r===e.Rebuild._id||r===e.Test._id}e.is=t;function i(r){if(r!==void 0)return Me(r)?t(r)?{_id:r,isDefault:!1}:void 0:r}e.from=i})(LE||(LE={}));var NE;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(NE||(NE={}));var ME;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(ME||(ME={}));var FE;(function(e){e.parallel="parallel",e.sequence="sequence"})(FE||(FE={}));var X0;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(X0||(X0={}));var OE;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:X0.default,instanceLimit:1}})(OE||(OE={}));var Qf;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Qf||(Qf={})),function(e){e._default=e.Terminal}(Qf||(Qf={}));var UE;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(UE||(UE={}));var HE;(function(e){e.SingleRun="singleRun",e.Background="background"})(HE||(HE={}));var io;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(io||(io={}));var BE;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(BE||(BE={}));var jE;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function i(c,l,u){return{...t(c),kind:io.Start,terminalId:l,resolvedVariables:u}}e.start=i;function r(c,l,u){return{...t(c),kind:io.ProcessStarted,terminalId:l,processId:u}}e.processStarted=r;function s(c,l,u){return{...t(c),kind:io.ProcessEnded,terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:io.Terminated,exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:io.Changed}}e.changed=a})(jE||(jE={}));var Yf;(function(e){function t(r){const s=Object.keys(r).sort();let n="";for(const o of s){let a=r[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function i(r){const n={_key:t(r),type:r.taskType};return Object.assign(n,r),n}e.create=i})(Yf||(Yf={}));var WE;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(WE||(WE={}));var zE;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(zE||(zE={}));var _E;(function(e){function t(i,r){const s=ZN.get(i.type);if(s===void 0){const c=it(i);return delete c._key,Yf.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=it(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:r.error(h(11112,null,JSON.stringify(i,void 0,0),c));return}}}return Yf.create(n)}e.createTaskIdentifier=t})(_E||(_E={}));var Xf;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Xf||(Xf={}));var Kf;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Kf||(Kf={}));var K0;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(K0||(K0={}));var Jl;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function i(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=K0.from(s.options)),n}e.from=i;function r(s){if(s!=null)return new na(s.process,s.args,s.options)}e.to=r})(Jl||(Jl={}));var ew;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(ew||(ew={}));var Zl;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function i(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=ew.from(s.options)),n}e.from=i;function r(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new Fn(s.commandLine,s.options):new Fn(s.command,s.args?s.args:[],s.options)}e.to=r})(Zl||(Zl={}));var cs;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function i(s){return{customExecution:"customExecution"}}e.from=i;function r(s,n){return n.get(s)}e.to=r})(cs||(cs={}));var VE;(function(e){function t(i,r){let s;return i.scope!==void 0&&typeof i.scope!="number"?s=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===Os.Workspace&&r&&r.workspaceFile?s=r.workspaceFile:s=QN),{id:i._id,workspaceFolder:s}}e.from=t})(VE||(VE={}));var tw;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(tw||(tw={}));var Qs;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=i(a,n);c&&o.push(c)}return o}e.fromMany=t;function i(s,n){if(s==null)return;let o;s.execution instanceof na?o=Jl.from(s.execution):s.execution instanceof Fn?o=Zl.from(s.execution):s.execution&&s.execution instanceof E1&&(o=cs.from(s.execution));const a=Xf.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Os.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:tw.from(s.group),presentationOptions:Kf.from(s.presentationOptions),problemMatchers:Ni(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=i;async function r(s,n,o){if(s==null)return;let a;Jl.is(s.execution)?a=Jl.to(s.execution):Zl.is(s.execution)?a=Zl.to(s.execution):cs.is(s.execution)&&(a=cs.to(s._id,o));const c=Xf.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(y.revive(s.source.scope)):l=Os.Workspace),!c||!l)return;const u=new dd(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Kc.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Kc(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=Kf.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=r})(Qs||(Qs={}));var iw;(function(e){function t(r){return r}e.from=t;function i(r){if(r)return Object.assign(Object.create(null),r)}e.to=i})(iw||(iw={}));var rw=class{#e;constructor(e,t,i){this._id=t,this.a=i,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},sw=class{constructor(t,i,r,s,n,o,a,c){this.q=new P,this.r=new P,this.s=new P,this.u=new P,this.v=new P,this.w=new P,this.a=t.getProxy(V.MainThreadTask),this.b=r,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,r){if(!r)return new Ae(()=>{});const s=this.z();return this.j.set(s,{type:i,provider:r,extension:t}),this.a.$registerTaskProvider(s,i),new Ae(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(iw.from(t)).then(async i=>{const r=[];for(const s of i){const n=await Qs.to(s,this.b,this.m);n&&r.push(n)}return r})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof rw))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,r){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(i,await s.callback(r))),this.p=t.id,this.q.fire({execution:await this.B(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.B(t);this.l.delete(t.id),this.k.delete(t.id),this.D(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.B(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.B(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}get onDidStartTaskProblemMatchers(){return this.v.event}async $onDidStartTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.v.fire({execution:i})}get onDidEndTaskProblemMatchers(){return this.w.event}async $onDidEndTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.w.fire({execution:i,hasErrors:t.hasErrors})}$provideTasks(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));const s=[],n=Zt(()=>r.provider.provideTasks(tt.None)).then(o=>this.x(i,s,r,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));if(i.definition.type!==r.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${r.type}].`);const s=await Qs.to(i,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await r.provider.resolveTask(s,tt.None);if(!n)return;this.C(n,r);const o=Qs.from(n,r.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return cs.is(o.execution)&&await this.A(o,n,!0),await this.y(o)}z(){return this.h++}async A(t,i,r){const s=await this.a.$createTaskId(t);!r&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,i.execution)),this.m.set(s,i.execution)}async B(t,i){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new nn("Unexpected: The specified task is missing an execution");return n}const r=this.l.get(t.id);if(r)return r;let s;return i?s=Promise.resolve(new rw(this,t.id,i)):s=Qs.to(t.task,this.b,this.m).then(n=>{if(!n)throw new nn("Unexpected: Task does not exist.");return new rw(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}C(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}D(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const r=this.n.values();let s=r.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=r.next()}};sw=__decorate([__param(0,Be),__param(1,Qt),__param(2,os),__param(3,Ba),__param(4,as),__param(5,Oa),__param(6,Ve),__param(7,qf)],sw);var nw=class extends sw{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c),this.registerTaskSystem(z.vscodeRemote,{scheme:z.vscodeRemote,authority:"",platform:YI(0)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const r=Qs.from(i,t);if(r===void 0)throw new Error("Task is not valid");if(cs.is(r.execution))await this.A(r,i,!1);else throw new Qp;const s=await this.B(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(n=>{throw new Error(n)}),s}x(t,i,r,s){const n=[];if(s)for(const o of s){if(this.C(o,r),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Qs.from(o,r.extension);a&&cs.is(a.execution)?(n.push(a),i.push(this.A(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:r.extension}}async y(t){if(cs.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,r){}};nw=__decorate([__param(0,Be),__param(1,Qt),__param(2,os),__param(3,Ba),__param(4,as),__param(5,Oa),__param(6,Ve),__param(7,qf)],nw);var qE=j("IExtHostTask"),YN=class{constructor(){this.f=new Map,this.m=[],this.n=new P,this.o=new P,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,r){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof r=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:h(6610,null,r,e)};o(a)}},r)}return i&&this.f.set(s.seq,i),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await tr(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await tr(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function XN(e){return e.type&&(e.label||e.program||e.runtime)}var KN=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function eM(e){return!!(e&&e.match(KN))}function GE(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(eM(e.path))return y.parse(e.path);if(Hu(e.path))return y.file(e.path)}return e.path}function JE(e){if(typeof e.path=="object"){const t=y.revive(e.path);if(t)return t.scheme===z.file?t.fsPath:t.toString()}return e.path}function tM(e,t){const i=t?GE:JE,r=it(e);return ZE(r,(s,n)=>{s&&n&&(n.path=i(n))}),r}function iM(e,t){const i=t?GE:JE,r=it(e);return ZE(r,(s,n)=>{!s&&n&&(n.path=i(n))}),r}function ZE(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(r=>t(!1,r));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(r=>t(!1,r.source));break;case"loadedSources":i.body.sources.forEach(r=>t(!1,r));break;case"scopes":i.body.scopes.forEach(r=>t(!1,r.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"setBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"disassemble":i.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,i.body?.source);break;default:break}break}}}var Ql=j("IExtHostEditorTabs"),QE=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new j1(y.revive(this.b.input.uri));case 2:return new Od(y.revive(this.b.input.original),y.revive(this.b.input.modified));case 3:return new S8(y.revive(this.b.input.base),y.revive(this.b.input.input1),y.revive(this.b.input.input2),y.revive(this.b.input.result));case 6:return new W1(y.revive(this.b.input.uri),this.b.input.viewType);case 7:return new k8(this.b.input.viewType);case 4:return new z1(y.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new _1(y.revive(this.b.input.original),y.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new $8;case 9:return new C8(y.revive(this.b.input.uri),y.revive(this.b.input.inputBoxUri));case 10:return new I8;case 11:return new D8(this.b.input.diffEditors.map(e=>new Od(y.revive(e.original),y.revive(e.modified))));default:return}}},rM=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new QE(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Pt.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const i=new QE(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===1){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},ow=class{constructor(t){this.b=new P,this.c=new P,this.e=[],this.a=t.getProxy(V.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(r=>r.apiObject))},get activeTabGroup(){const r=t.d;return bo(t.e.find(n=>n.groupId===r)?.apiObject)},close:async(r,s)=>{const n=Array.isArray(r)?r:[r];return n.length?sM(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),r=new Set(t.map(l=>l.groupId)),s=eI(i,r),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new rM(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=bo(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(s=>s.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const r=i.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[r.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[r.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[r.apiObject]}));return}}g(t){for(const i of this.e)for(const r of i.tabs)if(r.apiObject===t)return r}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const r=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");r.push(n.tabId)}return this.a.$closeTab(r,i)}async j(t,i){const r=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");r.push(n.groupId)}return this.a.$closeGroup(r,i)}};ow=__decorate([__param(0,Be)],ow);function sM(e){return e.tabs!==void 0}var nM=0,YE=new WeakMap,ep=j("IExtHostTesting"),aw=class extends ne{constructor(t,i,r,s){super(),this.C=i,this.D=r,this.F=s,this.f=this.B(new P),this.g=new Map,this.w=this.B(new P),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(V.MainThreadTesting),this.m=new hM(this.h),this.j=new cM(this.h,i),r.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Re.root(a))?.collection.tree.get(a)?.actual??Lx(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Re.root(c))?.collection.tree.get(c)?.actual??Lx({$mid:16,tests:[o]}),message:Ca.to(a)}}default:return n}}}),r.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await r.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Re.root(a));if(c)return Re.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(xi)||[],exclude:n?.exclude.map(o).filter(xi)||[]}})}createTestController(t,i,r,s){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const n=new fe,o=n.add(new NL(i,r,this.F));o.root.label=r;const a=new Map,c=new Set,l=this.h,u=()=>{let p=0;s&&(p|=2);const m=f.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(p|=8),m?.provideRelatedCode&&(p|=4)),p},d={items:o.root.children,get label(){return r},set label(p){r=p,o.root.label=p,l.$updateController(i,{label:r})},get refreshHandler(){return s},set refreshHandler(p){s=p,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return f.relatedCodeProvider},set relatedCodeProvider(p){L(t,"testRelatedCode"),f.relatedCodeProvider=p,l.$updateController(i,{capabilities:u()})},createRunProfile:(p,m,w,x,k,$)=>{let A=pc(p);for(;a.has(A);)A++;return new tS(this.h,a,c,this.w.event,i,A,p,m,w,x,k,$)},createTestItem(p,m,w){return new Bl(i,p,m,w)},createTestRun:(p,m,w=!0)=>this.j.createTestRun(t,i,o,p,m,w),invalidateTestResults:p=>{if(p===void 0)this.h.$markTestRetired(void 0);else{const m=p instanceof Array?p:[p];this.h.$markTestRetired(m.map(w=>Re.fromExtHostTestItem(w,i).toString()))}},set resolveHandler(p){o.resolveHandler=p},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},f={controller:d,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,r,u()),n.add(se(()=>l.$unregisterTestController(i))),this.g.set(i,f),n.add(se(()=>this.g.delete(i))),n.add(o.onDidGenerateDiff(p=>l.$publishDiff(i,p.map(Gh.serialize)))),d}createTestObserver(){return this.m.checkout()}async runTests(t,i=tt.None){const r=KE(t);if(!r)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(r.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:Ia.from(r.kind),targets:[{testIds:t.include?.map(n=>Re.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:r.profileId,controllerId:r.controllerId}],exclude:t.exclude?.map(n=>n.id)},i)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,i,r){const s=this.F.getDocument(y.revive(t));if(!s)return[];const n=je.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,r)}catch(l){r.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Re.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const r=this.g.get(Re.root(t));if(!r)return[];const s=r.collection.tree.get(t);return s?(await r.relatedCodeProvider?.provideRelatedCode?.(s.actual,i))?.map(fi.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,r){return(await this.j.getCoverageDetails(t,i,r))?.map(Cl.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[r,s]of Object.entries(t)){const n=this.g.get(r);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&i.set(r,o)}this.w.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const r=Tv.to(i),s=i.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(r.getDetailedCoverage=(n,o=tt.None)=>this.h.$getCoverageDetails(i.id,s,n,o).then(a=>a.map(Cl.to))),YE.set(r,i.id),r}).concat(this.results).sort((i,r)=>r.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const r=this.g.get(Re.fromString(t).controllerId)?.collection;r&&(await r.expand(t,i<0?1/0:i),r.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>Gh.deserialize({asCanonicalUri:r=>r},i)))}async $runControllerTests(t,i){return Promise.all(t.map(r=>this.G(r,!1,i)))}async $startContinuousRun(t,i){const r=new lt(i),s=await Promise.all(t.map(n=>this.G(n,!0,r.token)));return!i.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>i.onCancellationRequested(n)),r.dispose(!0),s}async $provideTestFollowups(t,i){const r=this.results.find(o=>YE.get(o)===t.resultId),s=r&&dM(Re.fromString(t.extId),r?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(r,s,t.taskIndex,t.messageIndex,i);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:n.map(o=>{const a=nM++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.z.delete(i)}$executeTestFollowup(t){const i=this.z.get(t);return i?this.D.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const r=i.getTaskIdForRun(t);if(r)return{taskId:r,runId:i.id}}}async G(t,i,r){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(p=>n.tree.get(p)).filter(xi),u=t.excludeExtIds.map(p=>s.collection.tree.get(p)).filter(xi).filter(p=>l.some(m=>m.fullId.compare(p.fullId)===2));if(!l.length)return{};const d=new Rd(l.some(p=>p.actual instanceof y0)?void 0:l.map(p=>p.actual),u.map(p=>p.actual),c,i),f=DT(t)&&this.j.prepareForMainThreadTestRun(a,d,eS.fromInternal(t,s.collection),c,r);try{return await c.runHandler(d,r),{}}catch(p){return{error:String(p)}}finally{f&&f.hasRunningTasks&&!r.isCancellationRequested&&await ft.toPromise(f.onEnd)}}};aw=__decorate([__param(0,Be),__param(1,Ve),__param(2,to),__param(3,Ba)],aw);var oM=1e4,XE;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(XE||(XE={}));var aM=class extends ne{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,i,r,s,n){super(),this.C=e,this.D=t,this.F=i,this.G=r,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new P),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new lt(n));const o=this.B(new Po(()=>this.I(),oM));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new P;this.y=a.event,this.B(se(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,i){const[,r]=Re.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(r);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Fd){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,i):this.G?.loadDetailedCoverage?.(a.run,n,i))??[]}createRun(e){const t=this.C.id,i=this.C.controllerId,r=Mt(),s=l=>(u,...d)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...d)},n=(l,u)=>{const d=u instanceof Array?u.map(Ca.from):[Ca.from(u)];if(l.uri&&l.range){const f={range:O.from(l.range),uri:l.uri};for(const p of d)p.location=p.location||f}this.D.$appendTestMessagesInRun(t,r,Re.fromExtHostTestItem(l,i).toString(),d)};let o=!1;const a=this.B(new lt(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof Fd?l.includesTests:[];if(u.length)for(const p of u)this.L(p);const d=l.uri.toString(),f=new Re([t,r,d]).toString();this.z.set(f,{report:l,extIds:u.map(p=>Re.fromExtHostTestItem(p,i).toString())}),this.D.$appendCoverage(t,r,Cl.fromFile(i,f,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,r,Re.fromExtHostTestItem(l,i).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,r,Re.fromExtHostTestItem(l,i).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,r,Re.fromExtHostTestItem(l,i).toString(),2)}),errored:s((l,u,d)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Re.fromExtHostTestItem(l,i).toString(),6,d)}),failed:s((l,u,d)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Re.fromExtHostTestItem(l,i).toString(),4,d)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,r,Re.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,d)=>{o||(d&&this.L(d),this.D.$appendOutputToRun(t,r,ae.fromString(l),u&&fi.from(u),d&&Re.fromExtHostTestItem(d,i).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,r),--this.g||this.J())}};return this.g++,this.h.set(r,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:r,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof Bl))throw new Jh(e.id);if(this.j.has(Re.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],i=this.C.colllection.root;for(;;){const r=Vs.from(e);if(t.unshift(r),this.j.has(r.extId)||(this.j.add(r.extId),e===i))break;e=e.parent||i}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},cM=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const r=Re.root(e);return this.g.get(r)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,r,s){return this.k(t,i,r,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,r,s,n){const o=this.f.get(r);if(o)return o.createRun(s);const a=eS.fromPublic(t,i,r,n),c=KE(r);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:c&&{group:Ia.from(c.kind),id:c.profileId},exclude:r.exclude?.map(u=>Re.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:r.include?.map(u=>Re.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:r.preserveFocus??!0,persist:n});const l=this.k(r,a,r.profile,e);return ft.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,i,r,s){const n=new aM(t,this.h,this.j,i,r,s);return this.f.set(e,n),this.g.set(n.id,n),n}},KE=e=>{if(e.profile){if(!(e.profile instanceof tS))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},eS=class Rb{static fromPublic(t,i,r,s){return new Rb(t,Mt(),s,i)}static fromInternal(t,i){return new Rb(t.controllerId,t.runId,!0,i)}constructor(t,i,r,s){this.controllerId=t,this.id=i,this.isPersisted=r,this.colllection=s}},lM=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Vs.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Re.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(r=>r.revived)},get updated(){return[...t].map(r=>r.revived)},get removed(){return[...i].map(r=>r.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},uM=class extends PT{constructor(){super(...arguments),this.z=new P,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Vs.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new lM(this.z)}},hM=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:tg(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new uM({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},Yl=(e,t,i,r)=>{i?Object.assign(i,r):t.$updateTestRunConfig(e.controllerId,e.profileId,r)},tS=class extends b8{#e;#t;#i;#r;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,Yl(this,this.#e,this.#r,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,Yl(this,this.#e,this.#r,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),Yl(this,this.#e,this.#r,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,Yl(this,this.#e,this.#r,{tag:e?ur.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,Yl(this,this.#e,this.#r,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return ft.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(xi))}constructor(e,t,i,r,s,n,o,a,c,l=!1,u=void 0,d=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=d,this.#e=e,this.#n=t,this.#t=i,this.#i=r,t.set(n,this);const f=Ia.from(a);l&&i.add(n),this.#r={profileId:n,controllerId:s,tag:u?ur.namespace(this.controllerId,u.id):null,label:o,group:f,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:d},queueMicrotask(()=>{this.#r&&(this.#e.$publishTestRunProfile(this.#r),this.#r=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#r=void 0}};function dM(e,t){for(let i=0;i<e.path.length;i++){const r=t.find(s=>s.id===e.path[i]);if(!r)return;if(i===e.path.length-1)return r;t=r.children}}var $V=j("configurationResolverService"),Xe;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(Xe||(Xe={}));var fM=Object.values(Xe).filter(e=>typeof e=="string"),pi=class extends nn{constructor(e,t){super(t),this.variable=e}},iS=class Lb{static{this.VARIABLE_LHS="${"}constructor(t){this.a=new Map,this.d=new Set,typeof t=="string"?(this.c=!0,this.b={value:t}):(this.c=!1,this.b=structuredClone(t))}static parse(t){if(t instanceof Lb)return t;const i=new Lb(t);return i.e(),i.g(i.b),i}e(){const t=this.b,i=ri?"windows":Fi?"osx":Wr?"linux":void 0;i&&t&&typeof t=="object"&&t.hasOwnProperty(i)&&Object.keys(t[i]).forEach(r=>t[r]=t[i][r]),delete t.windows,delete t.osx,delete t.linux}f(t,i){if(t[i]!=="$"||t[i+1]!=="{")return;let r=i+2,s=1;for(;r<t.length;){if(t[r]==="{")s++;else if(t[r]==="}"&&(s--,s===0))break;r++}if(s!==0)return;const n=t.slice(i,r+1),o=t.substring(i+2,r),a=o.indexOf(":");return a===-1?{replacement:{id:n,name:o,inner:o},end:r}:{replacement:{id:n,inner:o,name:o.slice(0,a),arg:o.slice(a+1)},end:r}}g(t){if(!(typeof t!="object"||t===null)){if(Array.isArray(t)){for(let i=0;i<t.length;i++){const r=t[i];typeof r=="string"?this.h(t,i,r):this.g(r)}return}for(const[i,r]of Object.entries(t))typeof r=="string"?this.h(t,i,r):this.g(r);for(const[i]of Object.entries(t))this.h(t,i,i,!0)}}h(t,i,r,s,n){let o=0;for(;o<r.length;){const a=r.indexOf("${",o);if(a===-1)break;const c=this.f(r,a);if(c){if(o=c.end+1,n?.includes(c.replacement.id))continue;const l=this.a.get(c.replacement.id)||{locations:[],replacement:c.replacement},u={object:t,propertyName:i,replaceKeyName:s};l.locations.push(u),this.a.set(c.replacement.id,l),l.resolved?this.j(c.replacement,u,l.resolved,n):this.d.forEach(d=>d(c.replacement))}else o=a+2}}*unresolved(){const t=new Map,i=r=>{t.set(r.id,r)};for(const r of this.a.values())r.resolved===void 0&&t.set(r.replacement.id,r.replacement);for(this.d.add(i);;){const r=qt.first(t);if(!r)break;const[s,n]=r;yield n,t.delete(s)}this.d.delete(i)}resolved(){return qt.map(qt.filter(this.a.values(),t=>!!t.resolved),t=>[t.replacement,t.resolved])}resolve(t,i){typeof i!="object"&&(i={value:String(i)});const r=this.a.get(t.id);if(r&&(r.resolved=i,i.value!==void 0))for(const s of r.locations||qt.empty())this.j(t,s,i)}j(t,{replaceKeyName:i,propertyName:r,object:s},n,o=[]){if(n.value!==void 0){if(o.push(t.id),i&&typeof r=="string"){const a=s[r],c=r.replaceAll(t.id,n.value);delete s[r],s[c]=a,this.h(s,c,n.value,!0,o)}else this.h(s,r,n.value,!1,o),s[r]=s[r].replaceAll(t.id,n.value);o.pop()}}toObject(){return this.c?this.b.value:this.b}},pM=class{constructor(e,t,i,r){this.h=new Map,this.resolvableVariables=new Set(fM),this.a=e,this.b=t,this.g=i,r&&(this.c=r.then(s=>this.i(s)))}i(e){if(ri){const t=Object.create(null);return Object.keys(e).forEach(i=>{t[i.toLowerCase()]=e[i]}),t}return e}async resolveWithEnvironment(e,t,i){const r=iS.parse(i);for(const s of r.unresolved()){const n=await this.l(s,t?.uri,e);n!==void 0&&r.resolve(s,String(n))}return r.toObject()}async resolveAsync(e,t){const i=iS.parse(t);for(const r of i.unresolved()){const s=await this.l(r,e?.uri);s!==void 0&&i.resolve(r,String(s))}return i.toObject()}resolveWithInteractionReplace(e,t){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this.h.has(e))throw new Error("Variable "+e+" is contributed twice.");this.resolvableVariables.add(e),this.h.set(e,t)}j(e){return this.b?this.b.getUriLabel(e,{noPrefix:!0}):e.fsPath}async l(e,t,i,r){const s={env:i!==void 0?this.i(i):await this.c,userHome:i!==void 0?void 0:await this.g},{name:n,arg:o}=e,a=u=>{const d=this.a.getFilePath();if(d)return jl(d);throw new pi(u,h(13473,null,e.id))},c=u=>{const d=a(u);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return jl(f)}throw new pi(u,h(13474,null,e.id,ki(d)))},l=u=>{if(o){const d=this.a.getFolderUri(o);if(d)return d;throw new pi(u,h(13475,null,u,o))}if(t)return t;throw this.a.getWorkspaceFolderCount()>1?new pi(u,h(13476,null,u)):new pi(u,h(13477,null,u))};switch(n){case"env":if(o){if(s.env){const u=s.env[ri?o.toLowerCase():o];if(Me(u))return u}return""}throw new pi(Xe.Env,h(13478,null,e.id));case"config":if(o){const u=this.a.getConfigurationValue(t,o);if(xt(u))throw new pi(Xe.Config,h(13479,null,e.id,o));if(yt(u))throw new pi(Xe.Config,h(13480,null,e.id,o));return u}throw new pi(Xe.Config,h(13481,null,e.id));case"command":return this.m(Xe.Command,e.id,o,r,"command");case"input":return this.m(Xe.Input,e.id,o,r,"input");case"extensionInstallFolder":if(o){const u=await this.a.getExtension(o);if(!u)throw new pi(Xe.ExtensionInstallFolder,h(13482,null,e.id,o));return this.j(u.extensionLocation)}throw new pi(Xe.ExtensionInstallFolder,h(13483,null,e.id));default:switch(n){case"workspaceRoot":case"workspaceFolder":{const u=l(Xe.WorkspaceFolder);return u?jl(this.j(u)):void 0}case"cwd":{if(!t&&!o)return So();const u=l(Xe.Cwd);return u?jl(this.j(u)):void 0}case"workspaceRootFolderName":case"workspaceFolderBasename":{const u=l(Xe.WorkspaceFolderBasename);return u?jl(ki(this.j(u))):void 0}case"userHome":if(s.userHome)return s.userHome;throw new pi(Xe.UserHome,h(13484,null,e.id));case"lineNumber":{const u=this.a.getLineNumber();if(u)return u;throw new pi(Xe.LineNumber,h(13485,null,e.id))}case"columnNumber":{const u=this.a.getColumnNumber();if(u)return u;throw new Error(h(13486,null,e.id))}case"selectedText":{const u=this.a.getSelectedText();if(u)return u;throw new pi(Xe.SelectedText,h(13487,null,e.id))}case"file":return a(Xe.File);case"fileWorkspaceFolder":return c(Xe.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return ki(c(Xe.FileWorkspaceFolderBasename));case"relativeFile":return t||o?cc(this.j(l(Xe.RelativeFile)),a(Xe.RelativeFile)):a(Xe.RelativeFile);case"relativeFileDirname":{const u=Co(a(Xe.RelativeFileDirname));if(t||o){const d=cc(this.j(l(Xe.RelativeFileDirname)),u);return d.length===0?".":d}return u}case"fileDirname":return Co(a(Xe.FileDirname));case"fileExtname":return wg(a(Xe.FileExtname));case"fileBasename":return ki(a(Xe.FileBasename));case"fileBasenameNoExtension":{const u=ki(a(Xe.FileBasenameNoExtension));return u.slice(0,u.length-wg(u).length)}case"fileDirnameBasename":return ki(Co(a(Xe.FileDirnameBasename)));case"execPath":{const u=this.a.getExecPath();return u||e.id}case"execInstallFolder":{const u=this.a.getAppRoot();return u||e.id}case"pathSeparator":case"/":return Yi;default:try{return this.m(Xe.Unknown,e.id,o,r,void 0)}catch{return e.id}}}}m(e,t,i,r,s){if(i&&r){const n=s===void 0?r[i]:r[s+":"+i];if(typeof n=="string")return n;throw new pi(e,h(13488,null,t))}return t}},cw=j("IExtHostVariableResolverProvider"),gM=class extends pM{constructor(e,t,i,r,s,n,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=r.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Od||l.input instanceof _1)return l.input.modified;if(l.input instanceof j1||l.input instanceof z1||l.input instanceof W1)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>So(),getExecPath:()=>ko.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return $o(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return $o(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(ko))}},lw=class extends ne{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.g=r,this.h=s,this.j=n,this.a=new yi(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new gM(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};lw=__decorate([__param(0,Zs),__param(1,os),__param(2,Ba),__param(3,as),__param(4,Ql)],lw);var rS=j("IExtHostDebugService"),uw=class extends ne{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,r,s,n,o,a,c){super(),this.Z=i,this.$=r,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new P),this.z=this.B(new P),this.C=this.B(new P),this.F=this.B(new P),this.u=t.getProxy(V.MainThreadDebugService),this.I=this.B(new P),this.L=this.B(new P),this.G=new vM(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(V.MainThreadTelemetry)}async $getVisualizerTreeItem(t,i){const r=this.hb(i);if(!r)return;const s=await this.Q.get(t)?.getTreeItem?.(r);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,i,r){const s=Fe.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(n,r),this.u.$registerDebugVisualizerTree(n,!!r.editItem),se(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const r=this.S.get(i)?.item;return r?(await this.Q.get(t)?.getChildren?.(r))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,i){const r=this.S.get(t);if(!r)return;const s=await this.Q.get(r.provider)?.editItem?.(r.item,i);return this.fb(r.provider,s||r.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const r=[i.children];for(const s of r)if(s)for(const n of s)r.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,i){let r=this.R.get(i);return r||(r=this.O++,this.R.set(i,r),this.S.set(r,{provider:t,item:i})),_v.from(i,r)}asDebugSourceUri(t,i){const r=t;if(typeof r.sourceReference=="number"&&r.sourceReference>0){let s=`debug:${encodeURIComponent(r.path||"")}`,n="?";return i&&(s+=`${n}session=${encodeURIComponent(i.id)}`,n="&"),s+=`${n}ref=${r.sourceReference}`,y.parse(s)}else{if(r.path)return y.file(r.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const i=[];for(const r of t.getAllExtensionDescriptions())if(r.contributes){const s=r.contributes.debuggers;if(s&&s.length>0)for(const n of s)XN(n)&&i.push(n.type)}this.u.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=r;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,i)||s,r.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const r=i.v.visualization;r&&"command"in r&&this.db.executeCommand(r.command,...r.arguments||[])}hb(t){const i=this.w.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,r,s){const n=this.hb(r),o=this.zb(t,i),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const d=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:d?.iconClass,iconPath:d?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,r){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const s=Fe.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(n,r),this.u.$registerDebugVisualizer(s,i),se(()=>{this.u.$unregisterDebugVisualizer(s,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(i,[],[]);const r=[],s=new Map;for(const n of i)if(n instanceof Hn){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),r.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Bn&&r.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(r)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.wb([],i,[]);const r=i.filter(o=>o instanceof Hn).map(o=>o.id),s=i.filter(o=>o instanceof Bn).map(o=>o.id),n=i.filter(o=>o instanceof md).map(o=>o.id);return this.u.$unregisterBreakpoints(r,s,n)}startDebugging(t,i,r){const s=r.testRun&&this.eb.getMetadataForRun(r.testRun);return this.u.$startDebugging(t?t.uri:void 0,i,{parentSessionID:r.parentSession?r.parentSession.id:void 0,lifecycleManagedByParent:r.lifecycleManagedByParent,repl:r.consoleMode===kd.MergeWithParent?"mergeWithParent":"separate",noDebug:r.noDebug,compact:r.compact,suppressSaveBeforeStart:r.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:r.suppressDebugStatusbar??r.debugUI?.simple,suppressDebugToolbar:r.suppressDebugToolbar??r.debugUI?.simple,suppressDebugView:r.suppressDebugView??r.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,r){if(!i)return new Ae(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:i}),this.u.$registerDebugConfigurationProvider(t,r,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,s),new Ae(()=>{this.g=this.g.filter(n=>n.provider!==i),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,i,r){if(!r)return new Ae(()=>{});if(!this.sb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.pb(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:i,handle:s,factory:r}),this.u.$registerDebugAdapterDescriptorFactory(i,s),new Ae(()=>{this.j=this.j.filter(n=>n.factory!==r),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Ae(()=>{});const r=this.m++;return this.n.push({type:t,handle:r,factory:i}),new Ae(()=>{this.n=this.n.filter(s=>s.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let r;const s=await this.yb(t);return s&&(r={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAsync(r,i)}ib(t,i){if(t instanceof il)return new bM(t.implementation)}jb(){}async $startDASession(t,i){const r=this,s=await this.xb(i);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,d={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const f=await this.U.sign(u.arguments.value);d.body={signature:f},a.sendResponse(d)}else throw new Error("no signer")}catch(f){d.success=!1,d.message=f.message,a.sendResponse(d)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=iM(l,!0)}catch(u){const d=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:d,from:s.type}),u}r.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,i){i=tM(i,!1);const r=this.N.get(t);r&&r.onWillReceiveMessage&&r.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const r=this.M.get(t);return this.M.delete(t),r?r.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],r=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Bn(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new md(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=y.revive(n.uri);a=new Hn(new Hi(c,new Ie(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}fR(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),r.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Bn&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof Hn&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new Hi(y.revive(n.uri),new Ie(n.line,n.character))}s.push(o)}}}this.wb(i,r,s)}async $acceptStackFrameFocus(t){let i;if(t){const r=await this.xb(t.sessionId);t.kind==="thread"?i=new p8(r.api,t.threadId):i=new f8(r.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,r){return Zt(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(i);return s.provideDebugConfigurations(n,r)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,i,r,s){return Zt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(i);return n.resolveDebugConfiguration(o,r,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,r,s){return Zt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(i);return n.resolveDebugConfigurationWithSubstitutedVariables(o,r,s)})}async $provideDebugAdapter(t,i){const r=this.qb(t);if(!r)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(i);return this.ub(r,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const i=await this.xb(t);this.y.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.xb(t);i&&(this.z.fire(i.api),this.w.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.xb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const s={session:(await this.xb(t)).api,event:i.event,body:i.body};this.F.fire(s)}kb(t){if(t instanceof vd)return this.lb(t);if(t instanceof tl)return this.mb(t);if(t instanceof wd)return this.nb(t);if(t instanceof il)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const i=this.j.filter(r=>r.type===t);if(i.length>0)return i[0].factory}qb(t){const i=this.j.filter(r=>r.handle===t);if(i.length>0)return i[0].factory}rb(t){const i=this.g.filter(r=>r.handle===t);if(i.length>0)return i[0].provider}sb(t,i){if(t.contributes){const r=t.contributes.debuggers;if(r&&r.length>0){for(const s of r)if(s.label&&s.type&&s.type===i)return!0}}return!1}tb(t){const r=t.configuration.type,s=this.n.filter(n=>n.type===r||n.type==="*").map(n=>Zt(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=bt(n);if(o.length>0)return new wM(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,i){const r=i.configuration.debugServer;if(typeof r=="number")return Promise.resolve(new tl(r));if(t){const n=await this.$.getExtensionRegistry();return Zt(()=>t.createDebugAdapterDescriptor(i.api,this.vb(i,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(i,s))}vb(t,i){}wb(t,i,r){(t.length>0||i.length>0||r.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:r}))}async xb(t){if(t)if(typeof t=="string"){const i=this.w.get(t);if(i)return i}else{let i=this.w.get(t.id);if(!i){const r=await this.yb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;i=new mM(this.u,t.id,t.type,t.name,r,t.configuration,s?.api),this.w.set(i.id,i),this.u.$sessionCached(i.id)}return i}throw new Error("cannot find session")}yb(t){if(t){const i=y.revive(t);return this.Z.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}zb(t,i){return`${t}\0${i}`}Ab(t,i){if(i){if("title"in i&&"command"in i)return{type:0};if("treeId"in i)return{type:1,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const i=this.Cb(t);let r,s;return"id"in i?s=$t.asClassName(i):r=i,{iconPath:r,iconClass:s}}Cb(t){if(t instanceof oi)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,r=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?y.file(i):i,light:typeof r=="string"?y.file(r):r}}};uw=__decorate([__param(0,Be),__param(1,os),__param(2,Zs),__param(3,as),__param(4,Ql),__param(5,cw),__param(6,to),__param(7,ep)],uw);var mM=class{constructor(e,t,i,r,s,n,o){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},vM=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},wM=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},bM=class extends YN{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},hw=class extends uw{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c)}};hw=__decorate([__param(0,Be),__param(1,os),__param(2,Zs),__param(3,as),__param(4,Ql),__param(5,cw),__param(6,to),__param(7,ep)],hw);function yM(e){return"uri"in e&&"ranges"in e&&"preview"in e}function xM(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var sS=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const s=xM(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,i)))})().then(s=>bt(s).flat())}};function EM(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:SM(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function SM(e){return{matchLines:e?.matchLines??Zv.matchLines,charsPerLine:e?.charsPerLine??Zv.charsPerLine}}function kM(e){if(yM(e)){const t=Ni(e.ranges).map((i,r)=>{const n=Ni(e.preview.matches)[r];return{sourceRange:i,previewRange:n}});return new qs(e.uri,t,e.preview.text)}else return new Gv(e.uri,e.text,e.lineNumber)}var $M=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,r){const s=a=>{CM(a)&&i.report(kM(a))};return(async()=>bt(await Promise.all(EM(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:bt(Ni(a.message))}))}};function CM(e){if(IM(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function IM(e){return!!e.preview}var nS=class extends Ds{constructor(e,t,i=()=>!1){const r=new d5(i,()=>!1);super(r);const s=new Nt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.m(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const i=this.m(e);return t.get(i)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(i=>e(i)))}m(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},DM=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&Wo(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&Wo(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,r)=>{const s=n=>{this.g++,e(n)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=ki(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{i({limitHit:this.f,stats:n||void 0})},n=>{r(new Error(To(n)))})})}async q(e,t){const i=new lt,r=e.map(l=>this.r(l)),s=this.o instanceof sS?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:r,maxResults:this.l.maxResults??J8,session:s},o=l=>{const u=new ox(this.l,l),d=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:d,folder:l.folder,tree:this.s()}},a=new nS(e,o);let c;try{this.j.add(i),c=cn.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),u=c.elapsed(),d=cn.create();return this.h&&!this.f||(l&&l.forEach(f=>{const p=a.findQueryFragmentAwareSubstr(f),m=Ne.relative(p.folder.path,f.path);if(p.noSiblingsClauses){const w=ki(f.path);this.w(t,{base:p.folder,relativePath:m,basename:w});return}this.u(p.tree,p.folder,m,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(f=>{this.v(f.tree,f.queryTester,t)}),{providerTime:u,postProcessTime:d.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=Ra(this.l.includePattern,e.includePattern);let i=e.excludePattern?.map(s=>({folder:s.folder,patterns:Ra(this.l.excludePattern,s.pattern)}));i?.length||(i=[{folder:void 0,patterns:Ra(this.l.excludePattern,void 0)}]);const r=cx(i);return{folder:e.folder,excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,r){if(i===this.a){const n=ki(this.a);this.w(r,{base:t,relativePath:this.a,basename:n})}function s(n){const o=ki(n),a=Co(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(i)}v({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.a;function o(a){const c=BR(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const d=a[l],{relativePath:f,basename:p}=d;if(i.matchesExcludesSync(f,p,n!==p?c:void 0))continue;const m=t[f];if(m)o(m);else{if(f===n)continue;s.w(r,d)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},PM=class{constructor(){this.a=new Object,this.tokenSource=new lt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},AM=class iC{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,r,s){const n=this.c(t.cacheKey),o=new DM(t,i,n);let a=0;const c=l=>{a+=l.length,r(l.map(u=>this.d(u)))};return this.f(o,iC.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new PM),this.b.get(t)}d(t){return t.relativePath?{resource:Jt(t.base,t.relativePath)}:{resource:t.base}}f(t,i,r,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(r(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&r(a),n.dispose(),c),c=>(a.length&&r(a),n.dispose(),Promise.reject(c)))}},oS=class{constructor(e,t,i){this.f=e,this.g=t,this.h=i,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t,i){const r=this.j.folderQueries||[],s=new lt(t);return new Promise((n,o)=>{this.b=new RM(e);let a=!1;const c=(l,u)=>{if(!(l instanceof Jv)&&!a&&!this.c){const d=this.l(l);l instanceof qs&&typeof this.j.maxResults=="number"&&this.d+d>this.j.maxResults&&(this.c=!0,a=!0,s.cancel(),l=this.m(l,this.j.maxResults-this.d));const f=this.l(l);this.d+=f;const p=l instanceof qs;(f>0||!p)&&this.b.add(l,u)}};this.n(r,c,s.token,i).then(l=>{s.dispose(),this.b.flush(),n({limitHit:this.c||l?.limitHit,messages:this.k(l),stats:{type:this.h}})},l=>{s.dispose();const u=To(l);o(new Error(u))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof qs?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new qs(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,i,r){const s=new nS(e,(u,d)=>({queryTester:new ox(this.j,u),folder:u.folder,folderIdx:d}),()=>!0),n=[],o={report:u=>{if(u instanceof Jv)r?.(u);else{if(u.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const d=s.findQueryFragmentAwareSubstr(u.uri),f=d.folder.scheme===z.file?HR(()=>this.g.readdir(Zu(u.uri))):void 0,p=b4(d.folder,u.uri);if(p){const m=d.queryTester.includedInQuery(p,ki(p),f);Is(m)?n.push(m.then(w=>{w&&t(u,d.folderIdx)})):m&&t(u,d.folderIdx)}}}},c={folderOptions:e.map(u=>this.o(u)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??J8,previewOptions:this.j.previewOptions??Zv,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(c.usePCRE2=this.j.usePCRE2);let l;return this.f.query.type===3?l=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,c,o,i):l=await this.f.provider.provideTextSearchResults(TM(this.f.query.contentPattern),c,o,i),n.length&&await Promise.all(n),l}o(e){const t=Ra(this.j.includePattern,e.includePattern);let i=e.excludePattern?.map(n=>({folder:n.folder,patterns:Ra(this.j.excludePattern,n.pattern)}));(!i||i.length===0)&&(i=[{folder:void 0,patterns:Ra(this.j.excludePattern,void 0)}]);const r=cx(i);return{folder:y.from(e.folder),excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function TM(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var RM=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new NM(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!Do(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(LM(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function LM(e){return e instanceof qs?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var NM=class Nb{static{this.b=4e3}static{this.c=50}constructor(t,i){this.j=t,this.k=i,this.d=0,this.f=[],this.g=0}addItem(t,i){t&&this.l(t,i)}addItems(t,i){t&&this.m(t,i)}l(t,i){this.f.push(t),this.g+=i,this.n()}m(t,i){this.f=this.f.concat(t),this.g+=i,this.n()}n(){this.d<Nb.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},Nb.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},aS=j("IExtHostSearch"),dw=class{constructor(t,i,r){this.o=t,this.q=i,this.s=r,this.c=this.o.getProxy(V.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new AM}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,new $M(i)),this.c.$registerTextSearchProvider(r,this.t(t)),se(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerTextSearchProvider(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,i),this.c.$registerTextSearchProvider(r,this.t(t)),se(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProvider(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const r=this.e++;return this.i.set(r,i),this.c.$registerAITextSearchProvider(r,this.t(t)),se(()=>{this.j.delete(t),this.i.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProviderOld(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,new sS(i)),this.c.$registerFileSearchProvider(r,this.t(t)),se(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProvider(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,i),this.c.$registerFileSearchProvider(r,this.t(t)),se(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=fw(r),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,i,r){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,r,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=fw(r);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s)}$provideAITextSearchResults(t,i,r,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=fw(r);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s,c=>this.c.$handleKeywordResult(t,i,c))}$enableExtensionHostSearch(){}async $getAIName(t){const i=this.i.get(t);if(!(!i||!i.provideAITextSearchResults))return i.name??"AI"}v(t,i){return new oS({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"textSearchProvider")}w(t,i){return new oS({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"aiTextSearchProvider")}};dw=__decorate([__param(0,Be),__param(1,Ku),__param(2,Ve)],dw);function fw(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(MM),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>y.revive(t))}}function MM(e){return Ct(e)}var pw,gw=class{static{pw=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,i){this.c=new P,this.onDidChangeWindowState=this.c.event,this.f=pw.a,t.handle&&(this.d=Tu(t.handle).buffer),this.b=i.getProxy(V.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:s})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?Tu(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.f[t]&&(this.f={...this.f,[t]:i},this.c.fire(this.f))}openUri(t,i){let r;if(typeof t=="string"){r=t;try{t=y.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return Vu(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===z.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,r,i)}async asExternalUri(t,i){if(Vu(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const r=await this.b.$asExternalUri(t,i);return y.from(r)}};gw=pw=__decorate([__param(0,Qt),__param(1,Be)],gw);var cS=j("IExtHostWindow"),mw=class extends e2{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(r=>Ct(r))),this.c=t.getProxy(V.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(y.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.c.$setVisibility(t,i)}t(t,i,r){return new FM(this.c,t,i,r)}};mw=__decorate([__param(0,Be),__param(1,Qt)],mw);var FM=class extends s5{constructor(e,t,i,r){super(r?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(i),this.s.$createLogger(t,r).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const i=[[e,t]];this.n?this.w(i):this.r.push(...i)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},lS=j("IExtHostTerminalShellIntegration"),vw=class extends ne{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new P,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new P,this.onDidStartTerminalShellExecution=this.f.event,this.g=new P,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(V.MainThreadTerminalShellIntegration),this.B(se(()=>{for(const[r,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const i=this.h.getTerminalById(t);if(!i)return;const r=i.value;let s=this.b.get(t);s||(s=new OM(i.value,this.f),this.b.set(t,s),s.store.add(i.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),i.shellIntegration=s.value),this.c.fire({terminal:r,shellIntegration:s.value})}$shellExecutionStart(t,i,r,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.startShellExecution(o,y.revive(n))}$shellExecutionEnd(t,i,r,s,n){const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$shellEnvChange(t,i,r,s){this.b.get(t)?.setEnv(i,r,s)}$cwdChange(t,i){this.b.get(t)?.setCwd(y.revive(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};vw=__decorate([__param(0,Be),__param(1,Oa)],vw);var OM=class extends ne{get currentExecution(){return this.f}constructor(e,t){super(),this.s=e,this.t=t,this.a=[],this.store=this.B(new fe),this.j=this.B(new P),this.onDidRequestChangeShellIntegration=this.j.event,this.m=this.B(new P),this.onDidRequestShellExecution=this.m.event,this.n=this.B(new P),this.onDidRequestEndExecution=this.n.event,this.r=this.B(new P),this.onDidRequestNewExecution=this.r.event;const i=this;this.value={get cwd(){return i.h},get env(){if(i.g)return Object.freeze({isTrusted:i.g.isTrusted,value:Object.freeze({...i.g.value})})},executeCommand(r,s){let n=r;if(s)for(const c of s)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;i.m.fire(n);const o={value:n,confidence:Xc.High,isTrusted:!0};return i.requestNewShellExecution(o,i.h).value}}}requestNewShellExecution(e,t){const i=new uS(e,t??this.h);return tp(e.value).length>1&&(this.c={isMultiLine:!0,unresolvedCommandLines:tp(e.value)}),this.a.push(i),this.r.fire(e.value),i}startShellExecution(e,t){if(this.b&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.b.value,exitCode:void 0}),this.b=void 0),this.f){if(this.c?.isMultiLine&&this.c.unresolvedCommandLines){const r=hS(this.c.unresolvedCommandLines,e);if(r){this.c.unresolvedCommandLines=r.unresolvedCommandLines;return}}this.f.endExecution(void 0),this.f.flush(),this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value,exitCode:void 0})}let i;if(e.confidence===Xc.High)for(const[r,s]of this.a.entries())if(s.value.commandLine.value===e.value){i=s,this.c={isMultiLine:!1,unresolvedCommandLines:void 0},i=s,this.a.splice(r,1);break}else{const n=hS(tp(s.value.commandLine.value),e);if(n){this.c={isMultiLine:!0,unresolvedCommandLines:n.unresolvedCommandLines},i=s,this.a.splice(r,1);break}}else i=this.a.shift();i||(i=new uS(e,t??this.h)),this.f=i,this.t.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value})}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){if(!(this.c?.isMultiLine&&this.c.unresolvedCommandLines&&this.c.unresolvedCommandLines.length>0)&&this.f){const i=this.c?.isMultiLine?this.f.value.commandLine:e;this.f.endExecution(i);const r=this.f;this.b=r,this.f=void 0,r.flush().then(()=>{this.b===r&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:r.value,exitCode:t}),this.b=void 0)})}}setEnv(e,t,i){const r={};for(let s=0;s<e.length;s++)r[e[s]]=t[s];this.g={value:r,isTrusted:i},this.u()}setCwd(e){let t=!1;y.isUri(this.h)?t=!y.isUri(e)||this.h.toString()!==e.toString():this.h!==e&&(t=!0),t&&(this.h=e,this.u())}u(){this.j.fire({terminal:this.s,shellIntegration:this.value})}},uS=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return hc.EMPTY;this.a=new UM}return this.a.createIterable()}emitData(e){this.b||this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.b=!0}async flush(){this.a&&(await this.a.flush(),this.a.dispose(),this.a=void 0)}},UM=class extends ne{constructor(){super(...arguments),this.b=[],this.c=[]}createIterable(){this.a||(this.a=new yr);const e=this.a,t=new hc(async i=>{this.c.push(i),await e.wait()});return this.b.push(t),t}emitData(e){for(const t of this.c)t.emitOne(e)}endExecution(){this.a?.open()}async flush(){await Promise.all(this.b.map(e=>e.toPromise()))}};function tp(e){return e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)}function hS(e,t){if(e.length===0)return!1;const i=[...e],r=tp(t.value);if(i&&i.length>0){for(;i.length>0&&i[0]===r[0];)i.shift(),r.shift();if(r.length===0)return{unresolvedCommandLines:i}}return!1}var dS;(function(e){e[e.CR=13]="CR",e[e.LF=10]="LF",e[e.COLON=58]="COLON",e[e.SPACE=32]="SPACE"})(dS||(dS={}));var ww=class{constructor(e){this.a="",this.b="",this.f=[],this.g=!1,this.h=e,this.i=new TextDecoder("utf-8")}getLastEventId(){return this.d}getReconnectionTime(){return this.e}feed(e){if(e.length===0)return;let t=0;for(this.g&&e[0]===10&&t++,this.g=!1;t<e.length;){const i=e.indexOf(13,t),r=e.indexOf(10,t),s=i===-1?r:r===-1?i:Math.min(i,r);if(s===-1)break;let n="";for(const o of this.f)n+=this.i.decode(o,{stream:!0});n+=this.i.decode(e.subarray(t,s)),this.j(n),this.f.length=0,t=s+(e[s]===13&&e[s+1]===10?2:1)}t<e.length?this.f.push(e.subarray(t)):this.g=e[e.length-1]===13}j(e){if(!e.length){this.l();return}if(e.startsWith(":"))return;let t,i;const r=e.indexOf(":");r===-1?(t=e,i=""):(t=e.substring(0,r),i=e.substring(r+1),i.startsWith(" ")&&(i=i.substring(1))),this.k(t,i)}k(e,t){switch(e){case"event":this.b=t;break;case"data":this.a+=t,this.a+=`
`;break;case"id":t.includes("\0")?this.c=void 0:this.c=this.d=t;break;case"retry":/^\d+$/.test(t)&&(this.e=parseInt(t,10));break}}l(){if(this.a===""){this.a="",this.b="";return}this.a.endsWith(`
`)&&(this.a=this.a.substring(0,this.a.length-1));const e={type:this.b||"message",data:this.a};this.c!==void 0&&(e.id=this.c),this.e!==void 0&&(e.retry=this.e),this.h(e),this.reset()}reset(){this.a="",this.b="",this.c=void 0}},bw=j("IExtHostMpcService"),yw=class extends ne{constructor(t){super(),this.c=new Set,this.f=this.B(new Iu),this.g=new Map,this.b=t.getProxy(V.MainThreadMcp)}$startMcp(t,i){this.h(t,bl.fromSerialized(i))}h(t,i){if(i.type===2){this.f.set(t,new HM(t,i,this.b));return}throw new Error("not implemented")}$stopMcp(t){this.f.has(t)&&(this.f.deleteAndDispose(t),this.b.$onDidChangeState(t,{state:0}))}$sendMessage(t,i){this.f.get(t)?.send(i)}async $waitForInitialCollectionProviders(){await Promise.all(this.c)}async $resolveMcpLaunch(t,i){const r=this.g.get(t);if(!r)return;const s=r.servers.find(o=>o.label===i);if(!s)return;if(!r.provider.resolveMcpServerDefinition)return Ml.from(s);const n=await r.provider.resolveMcpServerDefinition(s,tt.None);return n?Ml.from(n):void 0}registerMcpConfigurationProvider(t,i,r){const s=new fe,n=t.contributes?.modelContextServerCollections?.find(l=>l.id===i);if(!n)throw new Error(`MCP configuration providers must be registered in the contributes.modelContextServerCollections array within your package.json, but "${i}" was not`);const o={id:AR(t.identifier,i),isTrustedByDefault:!0,label:n?.label??t.displayName??t.name,scope:1,canResolveLaunch:typeof r.resolveMcpServerDefinition=="function",extensionId:t.identifier.value},a=async()=>{const l=await r.provideMcpServerDefinitions(tt.None);this.g.set(o.id,{servers:l??[],provider:r});const u=[];for(const d of l??[]){let f=Fe.toKey(t.identifier)+"/"+d.label;if(u.some(p=>p.id===f)){let p=2;for(;u.some(m=>m.id===f+p);)p++;f=f+p}u.push({id:f,label:d.label,cacheNonce:d.version,launch:Ml.from(d)})}this.b.$upsertMcpCollection(o,u)};s.add(se(()=>{this.g.delete(o.id),this.b.$deleteMcpCollection(o.id)})),r.onDidChangeServerDefinitions&&s.add(r.onDidChangeServerDefinitions(a)),r.onDidChange&&s.add(r.onDidChange(a));const c=new Promise(l=>{setTimeout(()=>a().finally(()=>{this.c.delete(c),l()}),0)});return this.c.add(c),s}};yw=__decorate([__param(0,Be)],yw);var fS;(function(e){e[e.Unknown=0]="Unknown",e[e.Http=1]="Http",e[e.SSE=2]="SSE"})(fS||(fS={}));var HM=class extends ne{constructor(e,t,i){super(),this.h=e,this.j=t,this.n=i,this.a=new fD,this.b=new xr,this.c={value:0},this.f=new lt,this.g=new AbortController,this.B(se(()=>{this.g.abort(),this.f.dispose(!0)})),this.n.$onDidChangeState(this.h,{state:2})}async send(e){try{await this.a.queue(()=>this.c.value===2?this.y(this.c.endpoint,e):this.r(e,this.c.value===1?this.c.sessionId:void 0))}catch(t){const i=`Error sending message to ${this.j.uri}: ${String(t)}`;this.n.$onDidChangeState(this.h,{state:3,message:i})}}async r(e,t){const i=new TextEncoder().encode(e),r={...Object.fromEntries(this.j.headers),"Content-Type":"application/json","Content-Length":String(i.length),Accept:"text/event-stream, application/json"};t&&(r["Mcp-Session-Id"]=t);const s=await fetch(this.j.uri.toString(!0),{method:"POST",signal:this.g.signal,headers:r,body:i}),n=this.c.value===0,o=s.headers.get("Mcp-Session-Id");if(o&&(this.c={value:1,sessionId:o}),this.c.value===0&&s.status>=400&&s.status<500){this.C($e.Info,`${s.status} status sending message to ${this.j.uri}, will attempt to fall back to legacy SSE`);const a=await this.w();a&&(this.c={value:2,endpoint:a},await this.y(a,e));return}if(s.status>=300){const a=this.c.value===1&&!!this.c.sessionId;this.n.$onDidChangeState(this.h,{state:3,message:`${s.status} status sending message to ${this.j.uri}: ${await this.D(s)}`+a?"; will retry with new session ID":"",shouldRetry:a});return}this.c.value===0&&(this.c={value:1,sessionId:void 0}),n&&this.u(),this.t(s)}async t(e){if(e.status!==202)switch(e.headers.get("Content-Type")?.toLowerCase()){case"text/event-stream":{const t=new ww(i=>{i.type==="message"&&this.n.$onDidReceiveMessage(this.h,i.data)});try{await this.z(t,e)}catch(i){this.C($e.Warning,`Error reading SSE stream: ${String(i)}`)}break}case"application/json":this.n.$onDidReceiveMessage(this.h,await e.text());break;default:{const t=await e.text();BM(t)?this.n.$onDidReceiveMessage(this.h,t):this.C($e.Warning,`Unexpected ${e.status} response for request: ${t}`)}}}async u(){let e;for(let t=0;!this.q.isDisposed;t++){await tr(Math.min(t*1e3,3e4),this.f.token);let i;try{const s={...Object.fromEntries(this.j.headers),Accept:"text/event-stream"};this.c.value===1&&this.c.sessionId!==void 0&&(s["Mcp-Session-Id"]=this.c.sessionId),e&&(s["Last-Event-ID"]=e),i=await fetch(this.j.uri.toString(!0),{method:"GET",signal:this.g.signal,headers:s})}catch{this.C($e.Info,`Error connecting to ${this.j.uri} for async notifications, will retry`);continue}if(i.status>=400){this.C($e.Debug,`${i.status} status connecting to ${this.j.uri} for async notifications; they will be disabled: ${await this.D(i)}`);return}t=0;const r=new ww(s=>{s.type==="message"&&this.n.$onDidReceiveMessage(this.h,s.data),s.id&&(e=s.id)});try{await this.z(r,i)}catch(s){this.C($e.Info,`Error reading from async stream, we will reconnect: ${s}`)}}}async w(){const e=new xr;let t;try{if(t=await fetch(this.j.uri.toString(!0),{method:"GET",signal:this.g.signal,headers:{...Object.fromEntries(this.j.headers),Accept:"text/event-stream"}}),t.status>=300){this.n.$onDidChangeState(this.h,{state:3,message:`${t.status} status connecting to ${this.j.uri} as SSE: ${await this.D(t)}`});return}}catch(r){this.n.$onDidChangeState(this.h,{state:3,message:`Error connecting to ${this.j.uri} as SSE: ${r}`});return}const i=new ww(r=>{r.type==="message"?this.n.$onDidReceiveMessage(this.h,r.data):r.type==="endpoint"&&e.complete(new URL(r.data,this.j.uri.toString(!0)).toString())});return this.B(se(()=>e.cancel())),this.z(i,t).catch(r=>{this.n.$onDidChangeState(this.h,{state:3,message:`Error reading SSE stream: ${String(r)}`})}),e.p}async y(e,t){const i=new TextEncoder().encode(t),r=await fetch(e,{method:"POST",signal:this.g.signal,headers:{...Object.fromEntries(this.j.headers),"Content-Type":"application/json","Content-Length":String(i.length)},body:i});r.status>=300&&this.C($e.Warning,`${r.status} status sending message to ${this.b}: ${await this.D(r)}`)}async z(e,t){if(!t.body)return;const i=t.body.getReader();let r;do{try{r=await k4(i.read(),this.f.token)}catch(s){if(i.cancel(),this.q.isDisposed)return;throw s}r.value&&e.feed(r.value)}while(!r.done)}C(e,t){this.q.isDisposed||this.n.$onDidPublishLog(this.h,e,t)}async D(e){try{return await e.text()}catch{return e.statusText}}};function BM(e){try{return JSON.parse(e),!0}catch{return!1}}Je(H0,U0,1),Je(yc,mw,1),Je(qf,J0,1),Je(to,E0,0),Je(I0,D0,0),Je(P0,A0,0),Je(as,a0,0),Je(jf,d0,0),Je(ep,aw,0),Je(rS,hw,0),Je(SE,V0,0),Je(Ba,G0,0),Je(B0,j0,0),Je(No,v2,0),Je(EE,_0,1),Je(aS,dw,0),Je(h0,Cx,0),Je(qE,nw,0),Je(Oa,$0,0),Je(lS,vw,0),Je(w0,b0,0),Je(cS,gw,0),Je(os,r0,0),Je(O0,gE,0),Je(Ql,ow,0),Je(cw,lw,0),Je(bw,yw,0);var jM=class extends ne{constructor(e,t=[]){super(),this.a=new KD([e,...t]),this.B(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},xw=class extends jM{constructor(t,i,r){const s=r.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=r.remote.isRemote?h(2887,null):h(t?2888:2889,null);super(i.createLogger(s,{name:n}))}};xw=__decorate([__param(1,yc),__param(2,Qt)],xw);var pS={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},Ti,Ew=globalThis.vscode;if(typeof Ew<"u"&&typeof Ew.context<"u"){const e=Ew.context.configuration();if(e)Ti=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Ti=globalThis._VSCODE_PRODUCT_JSON,ko.VSCODE_DEV&&Object.assign(Ti,{nameShort:`${Ti.nameShort} Dev`,nameLong:`${Ti.nameLong} Dev`,dataFolderName:`${Ti.dataFolderName}-dev`,serverDataFolderName:Ti.serverDataFolderName?`${Ti.serverDataFolderName}-dev`:void 0}),!Ti.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Ti,{version:e.version})}}else Ti={},Object.keys(Ti).length===0&&Object.assign(Ti,{version:"1.95.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var WM=Ti,gS;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(gS||(gS={}));var zM=8,_M=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},qe=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return rp(e,t)}compute(e,t,i){return i}},ip=class{constructor(e,t){this.newValue=e,this.didChange=t}};function rp(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new ip(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const r=Array.isArray(e)&&Array.isArray(t)&&wr(e,t);return new ip(t,!r)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const s=rp(e[r],t[r]);s.didChange&&(e[r]=s.newValue,i=!0)}return new ip(e,i)}var ro=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return rp(e,t)}validate(e){return this.defaultValue}},ja=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return rp(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}};function J(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var be=class extends ja{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return J(e,this.defaultValue)}};function VM(e,t,i,r){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(i,s),s=Math.min(r,s),s|0)}var Ue=class rC extends ja{static clampedInt(t,i,r,s){return VM(t,i,r,s)}constructor(t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=r,o.minimum=s,o.maximum=n),super(t,i,r,o),this.minimum=s,this.maximum=n}validate(t){return rC.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Lr=class sC extends ja{static clamp(t,i,r){return t<i?i:t>r?r:t}static float(t,i){if(typeof t=="number")return t;if(typeof t>"u")return i;const r=parseFloat(t);return isNaN(r)?i:r}constructor(t,i,r,s,n){typeof n<"u"&&(n.type="number",n.default=r),super(t,i,r,n),this.validationFn=s}validate(t){return this.validationFn(sC.float(t,this.defaultValue))}},gi=class nC extends ja{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.default=r),super(t,i,r,s)}validate(t){return nC.string(t,this.defaultValue)}};function Ke(e,t,i,r){return typeof e!="string"?t:r&&e in r?r[e]:i.indexOf(e)===-1?t:e}var Qe=class extends ja{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=i),super(e,t,i,s),this.c=r}validate(e){return Ke(e,this.defaultValue,this.c)}},Xl=class extends qe{constructor(e,t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=r),super(e,t,i,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function qM(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var GM=class extends qe{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[h(317,null),h(318,null),h(319,null)],default:"auto",tags:["accessibility"],description:h(320,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},JM=class extends qe{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:h(321,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:h(322,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:J(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:J(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},mS;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(mS||(mS={}));function ZM(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var hr;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(hr||(hr={}));function vS(e){switch(e){case"line":return hr.Line;case"block":return hr.Block;case"underline":return hr.Underline;case"line-thin":return hr.LineThin;case"block-outline":return hr.BlockOutline;case"underline-thin":return hr.UnderlineThin}}var QM=class extends ro{constructor(){super(148)}compute(e,t,i){const r=["monaco-editor"];return t.get(41)&&r.push(t.get(41)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(75)==="default"?r.push("mouse-default"):t.get(75)==="copy"&&r.push("mouse-copy"),t.get(116)&&r.push("showUnused"),t.get(145)&&r.push("showDeprecated"),r.join(" ")}},YM=class extends be{constructor(){super(38,"emptySelectionClipboard",!0,{description:h(323,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},XM=class extends qe{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:h(324,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[h(325,null),h(326,null),h(327,null)],description:h(328,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[h(329,null),h(330,null),h(331,null)],description:h(332,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:h(333,null),included:Fi},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:h(334,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:h(335,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[h(336,null),h(337,null)],description:h(338,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[h(339,null),h(340,null)],description:h(341,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:J(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Ke(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Ke(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:J(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:J(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:J(t.loop,this.defaultValue.loop),history:Ke(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:Ke(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},KM=class Ga extends qe{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",Ga.OFF,{anyOf:[{type:"boolean",description:h(342,null)},{type:"string",description:h(343,null)}],description:h(344,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Ga.OFF:t==="true"?Ga.ON:t:t?Ga.ON:Ga.OFF}},eF=class Ja extends qe{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",Ja.OFF,{anyOf:[{type:"boolean",description:h(345,null)},{type:"string",description:h(346,null)}],description:h(347,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Ja.OFF:t==="true"?Ja.TRANSLATE:t:t?Ja.TRANSLATE:Ja.OFF}compute(t,i,r){return t.fontInfo.fontVariationSettings}},tF=class extends ro{constructor(){super(52)}compute(e,t,i){return e.fontInfo}},iF=class extends ro{constructor(){super(147)}compute(e,t,i){return e.inputMode==="overtype"?t.get(84):t.get(28)}},rF=class extends ro{constructor(){super(156)}compute(e,t){return e.editContextSupported&&t.get(37)}},sF=class extends ja{constructor(){super(54,"fontSize",us.fontSize,{type:"number",minimum:6,maximum:100,default:us.fontSize,description:h(348,null)})}validate(e){const t=Lr.float(e,this.defaultValue);return t===0?us.fontSize:Lr.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},nF=class Za extends qe{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",us.fontWeight,{anyOf:[{type:"number",minimum:Za.d,maximum:Za.e,errorMessage:h(349,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Za.c}],default:us.fontWeight,description:h(350,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Ue.clampedInt(t,us.fontWeight,Za.d,Za.e))}},oF=class extends qe{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[h(351,null),h(352,null),h(353,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:h(354,null)},"editor.gotoLocation.multipleDefinitions":{description:h(355,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:h(356,null),...t},"editor.gotoLocation.multipleDeclarations":{description:h(357,null),...t},"editor.gotoLocation.multipleImplementations":{description:h(358,null),...t},"editor.gotoLocation.multipleReferences":{description:h(359,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:h(360,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:h(361,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:h(362,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:h(363,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:h(364,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Ke(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Ke(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Ke(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Ke(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Ke(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Ke(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Ke(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:gi.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:gi.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:gi.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:gi.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:gi.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:gi.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},aF=class extends qe{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:h(365,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:h(366,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:h(367,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:h(368,null)},"editor.hover.above":{type:"boolean",default:e.above,description:h(369,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),delay:Ue.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:J(t.sticky,this.defaultValue.sticky),hidingDelay:Ue.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:J(t.above,this.defaultValue.above)}}},wS;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(wS||(wS={}));var cF=class jp extends ro{constructor(){super(151)}compute(t,i,r){return jp.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,r=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,i-1));const n=(r+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,i){const r=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,d=t.minimap.renderCharacters;let f=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const p=t.minimap.maxColumn,m=t.minimap.size,w=t.minimap.side,x=t.verticalScrollbarWidth,k=t.viewLineCount,$=t.remainingWidth,A=t.isViewportWrapping,G=d?2:3;let N=Math.floor(n*s);const W=N/n;let X=!1,K=!1,Y=G*f,le=f/n,We=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:Z,extraLinesBeforeFirstLine:ve,extraLinesBeyondLastLine:Te,desiredRatio:xe,minimapLineCount:Ge}=jp.computeContainedMinimapLineCount({viewLineCount:k,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(k/Ge>1)X=!0,K=!0,f=1,Y=1,le=f/n;else{let ut=!1,zt=f+1;if(m==="fit"){const ei=Math.ceil((ve+k+Te)*Y);A&&a&&$<=i.stableFitRemainingWidth?(ut=!0,zt=i.stableFitMaxMinimapScale):ut=ei>N}if(m==="fill"||ut){X=!0;const ei=f;Y=Math.min(c*n,Math.max(1,Math.floor(1/xe))),A&&a&&$<=i.stableFitRemainingWidth&&(zt=i.stableFitMaxMinimapScale),f=Math.min(zt,Math.max(1,Math.floor(Y/G))),f>ei&&(We=Math.min(2,f/ei)),le=f/n/We,N=Math.ceil(Math.max(Z,ve+k+Te)*Y),A?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=$,i.stableFitMaxMinimapScale=f):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const Ce=Math.floor(p*le),dt=Math.min(Ce,Math.max(0,Math.floor(($-x-2)*le/(l+le)))+zM);let _=Math.floor(n*dt);const H=_/n;_=Math.floor(_*We);const Q=d?1:2,q=w==="left"?0:r-dt-x;return{renderMinimap:Q,minimapLeft:q,minimapWidth:dt,minimapHeightIsEditorHeight:X,minimapIsSampling:K,minimapScale:f,minimapLineHeight:Y,minimapCanvasInnerWidth:_,minimapCanvasInnerHeight:N,minimapCanvasOuterWidth:H,minimapCanvasOuterHeight:W}}static computeLayout(t,i){const r=i.outerWidth|0,s=i.outerHeight|0,n=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,d=t.get(142),f=d==="inherit"?t.get(141):d,p=f==="inherit"?t.get(137):f,m=t.get(140),w=i.isDominatedByLongLines,x=t.get(59),k=t.get(69).renderType!==0,$=t.get(70),A=t.get(110),G=t.get(88),N=t.get(74),W=t.get(108),X=W.verticalScrollbarSize,K=W.verticalHasArrows,Y=W.arrowSize,le=W.horizontalScrollbarSize,We=t.get(45),Ce=t.get(115)!=="never";let dt=t.get(67);We&&Ce&&(dt+=16);let _=0;if(k){const Or=Math.max(o,$);_=Math.round(Or*c)}let H=0;x&&(H=n*i.glyphMarginDecorationLaneCount);let Q=0,q=Q+H,Z=q+_,ve=Z+dt;const Te=r-H-_-dt;let xe=!1,Ge=!1,Ut=-1;f==="inherit"&&w?(xe=!0,Ge=!0):p==="on"||p==="bounded"?Ge=!0:p==="wordWrapColumn"&&(Ut=m);const ut=jp.c({outerWidth:r,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:A,paddingTop:G.top,paddingBottom:G.bottom,minimap:N,verticalScrollbarWidth:X,viewLineCount:u,remainingWidth:Te,isViewportWrapping:Ge},i.memory||new _M);ut.renderMinimap!==0&&ut.minimapLeft===0&&(Q+=ut.minimapWidth,q+=ut.minimapWidth,Z+=ut.minimapWidth,ve+=ut.minimapWidth);const zt=Te-ut.minimapWidth,ei=Math.max(1,Math.floor((zt-X-2)/a)),st=K?Y:0;return Ge&&(Ut=Math.max(1,ei),p==="bounded"&&(Ut=Math.min(Ut,m))),{width:r,height:s,glyphMarginLeft:Q,glyphMarginWidth:H,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:q,lineNumbersWidth:_,decorationsLeft:Z,decorationsWidth:dt,contentLeft:ve,contentWidth:zt,minimap:ut,viewportColumn:ei,isWordWrapMinified:xe,isViewportWrapping:Ge,wrappingColumn:Ut,verticalScrollbarWidth:X,horizontalScrollbarHeight:le,overviewRuler:{top:st,width:X,height:s-2*st,right:0}}}},lF=class extends qe{constructor(){super(144,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[h(370,null),h(371,null)],type:"string",enum:["simple","advanced"],default:"simple",description:h(372,null)}})}validate(e){return Ke(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}},ls;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(ls||(ls={}));var uF=class extends qe{constructor(){const e={enabled:ls.OnCode};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[ls.Off,ls.OnCode,ls.On],default:e.enabled,enumDescriptions:[h(373,null),h(374,null),h(375,null)],description:h(376,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Ke(e.enabled,this.defaultValue.enabled,[ls.Off,ls.OnCode,ls.On])}}},hF=class extends qe{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(120,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:h(377,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:h(378,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:h(379,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:h(380,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),maxLineCount:Ue.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Ke(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:J(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},dF=class extends qe{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(146,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:h(381,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[h(382,null),h(383,null,Fi?"Ctrl+Option":"Ctrl+Alt"),h(384,null,Fi?"Ctrl+Option":"Ctrl+Alt"),h(385,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:h(386,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:h(387,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:h(388,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:h(389,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Ke(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ue.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:gi.string(t.fontFamily,this.defaultValue.fontFamily),padding:J(t.padding,this.defaultValue.padding),maximumLength:Ue.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},fF=class extends qe{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Ue.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Ue.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},pF=class extends Lr{constructor(){super(68,"lineHeight",us.lineHeight,e=>Lr.clamp(e,0,150),{markdownDescription:h(390,null)})}compute(e,t,i){return e.fontInfo.lineHeight}},gF=class extends qe{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:h(391,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:h(392,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[h(393,null),h(394,null),h(395,null)],default:e.size,description:h(396,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:h(397,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:h(398,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:h(399,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:h(400,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:h(401,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:h(402,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:h(403,null)},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:h(404,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:h(405,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:h(406,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let i=this.defaultValue.markSectionHeaderRegex;const r=e.markSectionHeaderRegex;if(typeof r=="string")try{new RegExp(r,"d"),i=r}catch{}return{enabled:J(t.enabled,this.defaultValue.enabled),autohide:J(t.autohide,this.defaultValue.autohide),size:Ke(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ke(t.side,this.defaultValue.side,["right","left"]),showSlider:Ke(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:J(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ue.clampedInt(t.scale,1,1,3),maxColumn:Ue.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:J(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:J(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:Lr.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Lr.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function mF(e){return e==="ctrlCmd"?Fi?"metaKey":"ctrlKey":"altKey"}var vF=class extends qe{constructor(){super(88,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:h(407,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:h(408,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ue.clampedInt(t.top,0,0,1e3),bottom:Ue.clampedInt(t.bottom,0,0,1e3)}}},wF=class extends qe{constructor(){const e={enabled:!0,cycle:!0};super(90,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:h(409,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:h(410,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),cycle:J(t.cycle,this.defaultValue.cycle)}}},bF=class extends ro{constructor(){super(149)}compute(e,t,i){return e.pixelRatio}},yF=class extends qe{constructor(){super(92,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},xF=class extends qe{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[h(411,null),h(412,null),h(413,null)]}];super(94,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:h(414,null)},comments:{anyOf:t,default:e.comments,description:h(415,null)},other:{anyOf:t,default:e.other,description:h(416,null)}},default:e,markdownDescription:h(417,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=Ke(t,this.defaultValue.other,s),typeof i=="boolean"?o=i?"on":"off":o=Ke(i,this.defaultValue.comments,s),typeof r=="boolean"?a=r?"on":"off":a=Ke(r,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},bS;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(bS||(bS={}));var EF=class extends qe{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[h(418,null),h(419,null),h(420,null),h(421,null)],default:"on",description:h(422,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}},SF=class extends qe{constructor(){const e=[],t={type:"number",description:h(423,null)};super(107,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:h(424,null),format:"color-hex"}}}]},default:e,description:h(425,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Ue.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:Ue.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}},kF=class extends qe{constructor(){super(97,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function yS(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var $F=class extends qe{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(108,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[h(426,null),h(427,null),h(428,null)],default:"auto",description:h(429,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[h(430,null),h(431,null),h(432,null)],default:"auto",description:h(433,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:h(434,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:h(435,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:h(436,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:h(437,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Ue.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Ue.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ue.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:yS(t.vertical,this.defaultValue.vertical),horizontal:yS(t.horizontal,this.defaultValue.horizontal),useShadows:J(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:J(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:J(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:J(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:J(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Ue.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Ue.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:J(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:J(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},dr="inUntrustedWorkspace",so={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},CF=class extends qe{constructor(){const e={nonBasicASCII:dr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:dr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(130,"unicodeHighlight",e,{[so.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,dr],default:e.nonBasicASCII,description:h(438,null)},[so.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:h(439,null)},[so.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:h(440,null)},[so.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,dr],default:e.includeComments,description:h(441,null)},[so.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,dr],default:e.includeStrings,description:h(442,null)},[so.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:h(443,null),additionalProperties:{type:"boolean"}},[so.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:h(444,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(ui(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(ui(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new ip(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Wa(t.nonBasicASCII,dr,[!0,!1,dr]),invisibleCharacters:J(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:J(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Wa(t.includeComments,dr,[!0,!1,dr]),includeStrings:Wa(t.includeStrings,dr,[!0,!1,dr]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}},IF=class extends qe{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always",useMultiLineGhostText:!0}};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:h(445,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[h(446,null),h(447,null),h(448,null)],description:h(449,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:h(450,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:h(451,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:h(452,null)},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:h(453,null),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:h(454,null),enum:["auto","never"],enumDescriptions:[h(455,null),h(456,null)],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:h(457,null),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),mode:Ke(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Ke(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:J(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:J(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:gi.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:J(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{enabled:J(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:J(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:Ke(t.edits?.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),renderSideBySide:Ke(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"]),useMultiLineGhostText:J(t.edits?.useMultiLineGhostText,this.defaultValue.edits.useMultiLineGhostText)}}}},DF=class extends qe{constructor(){const e={enabled:pS.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:pS.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:h(458,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:h(459,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:J(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},PF=class extends qe{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[h(460,null),h(461,null),h(462,null)],default:e.bracketPairs,description:h(463,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[h(464,null),h(465,null),h(466,null)],default:e.bracketPairsHorizontal,description:h(467,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:h(468,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:h(469,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[h(470,null),h(471,null),h(472,null)],default:e.highlightActiveIndentation,description:h(473,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Wa(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Wa(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:J(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:J(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Wa(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Wa(e,t,i){const r=i.indexOf(e);return r===-1?t:i[r]}var AF=class extends qe{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(123,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[h(474,null),h(475,null)],default:e.insertMode,description:h(476,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:h(477,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:h(478,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:h(479,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[h(480,null),h(481,null),h(482,null),h(483,null)],default:e.selectionMode,markdownDescription:h(484,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:h(485,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:h(486,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:h(487,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:h(488,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:h(489,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:h(490,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:h(491,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:h(492,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:h(493,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:h(494,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:h(495,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:h(496,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:h(497,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:h(498,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:h(499,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:h(500,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:h(501,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:h(502,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:h(503,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:h(504,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:h(505,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:h(506,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:h(507,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:h(508,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:h(509,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:h(510,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:h(511,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:h(512,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:h(513,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:h(514,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:h(515,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:h(516,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:h(517,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:h(518,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:h(519,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:h(520,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:h(521,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Ke(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:J(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:J(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:J(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:J(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Ke(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:J(t.showIcons,this.defaultValue.showIcons),showStatusBar:J(t.showStatusBar,this.defaultValue.showStatusBar),preview:J(t.preview,this.defaultValue.preview),previewMode:Ke(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:J(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:J(t.showMethods,this.defaultValue.showMethods),showFunctions:J(t.showFunctions,this.defaultValue.showFunctions),showConstructors:J(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:J(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:J(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:J(t.showFields,this.defaultValue.showFields),showVariables:J(t.showVariables,this.defaultValue.showVariables),showClasses:J(t.showClasses,this.defaultValue.showClasses),showStructs:J(t.showStructs,this.defaultValue.showStructs),showInterfaces:J(t.showInterfaces,this.defaultValue.showInterfaces),showModules:J(t.showModules,this.defaultValue.showModules),showProperties:J(t.showProperties,this.defaultValue.showProperties),showEvents:J(t.showEvents,this.defaultValue.showEvents),showOperators:J(t.showOperators,this.defaultValue.showOperators),showUnits:J(t.showUnits,this.defaultValue.showUnits),showValues:J(t.showValues,this.defaultValue.showValues),showConstants:J(t.showConstants,this.defaultValue.showConstants),showEnums:J(t.showEnums,this.defaultValue.showEnums),showEnumMembers:J(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:J(t.showKeywords,this.defaultValue.showKeywords),showWords:J(t.showWords,this.defaultValue.showWords),showColors:J(t.showColors,this.defaultValue.showColors),showFiles:J(t.showFiles,this.defaultValue.showFiles),showReferences:J(t.showReferences,this.defaultValue.showReferences),showFolders:J(t.showFolders,this.defaultValue.showFolders),showTypeParameters:J(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:J(t.showSnippets,this.defaultValue.showSnippets),showUsers:J(t.showUsers,this.defaultValue.showUsers),showIssues:J(t.showIssues,this.defaultValue.showIssues)}}},TF=class extends qe{constructor(){super(118,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:h(522,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:h(523,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:J(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:J(e.selectSubwords,this.defaultValue.selectSubwords)}}},RF=class extends qe{constructor(){const e=[];super(135,"wordSegmenterLocales",e,{anyOf:[{description:h(524,null),type:"string"},{description:h(525,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},xS;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(xS||(xS={}));var LF=class extends qe{constructor(){super(143,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[h(526,null),h(527,null),h(528,null),h(529,null)],description:h(530,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}},NF=class extends ro{constructor(){super(152)}compute(e,t,i){const r=t.get(151);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},MF=class extends qe{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:h(531,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:h(532,null),enum:["afterDrop","never"],enumDescriptions:[h(533,null),h(534,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),showDropSelector:Ke(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},FF=class extends qe{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(89,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:h(535,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:h(536,null),enum:["afterPaste","never"],enumDescriptions:[h(537,null),h(538,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),showPasteSelector:Ke(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},OF="Consolas, 'Courier New', monospace",UF="Menlo, Monaco, 'Courier New', monospace",HF="'Droid Sans Mono', 'monospace', monospace",us={fontFamily:Fi?UF:Wr?HF:OF,fontWeight:"normal",fontSize:Fi?12:14,lineHeight:0,letterSpacing:0},BF=[];function T(e){return BF[e.id]=e,e}var ES;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.letterSpacing=65]="letterSpacing",e[e.lightbulb=66]="lightbulb",e[e.lineDecorationsWidth=67]="lineDecorationsWidth",e[e.lineHeight=68]="lineHeight",e[e.lineNumbers=69]="lineNumbers",e[e.lineNumbersMinChars=70]="lineNumbersMinChars",e[e.linkedEditing=71]="linkedEditing",e[e.links=72]="links",e[e.matchBrackets=73]="matchBrackets",e[e.minimap=74]="minimap",e[e.mouseStyle=75]="mouseStyle",e[e.mouseWheelScrollSensitivity=76]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=77]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=78]="multiCursorMergeOverlapping",e[e.multiCursorModifier=79]="multiCursorModifier",e[e.multiCursorPaste=80]="multiCursorPaste",e[e.multiCursorLimit=81]="multiCursorLimit",e[e.occurrencesHighlight=82]="occurrencesHighlight",e[e.occurrencesHighlightDelay=83]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=84]="overtypeCursorStyle",e[e.overtypeOnPaste=85]="overtypeOnPaste",e[e.overviewRulerBorder=86]="overviewRulerBorder",e[e.overviewRulerLanes=87]="overviewRulerLanes",e[e.padding=88]="padding",e[e.pasteAs=89]="pasteAs",e[e.parameterHints=90]="parameterHints",e[e.peekWidgetDefaultFocus=91]="peekWidgetDefaultFocus",e[e.placeholder=92]="placeholder",e[e.definitionLinkOpensInPeek=93]="definitionLinkOpensInPeek",e[e.quickSuggestions=94]="quickSuggestions",e[e.quickSuggestionsDelay=95]="quickSuggestionsDelay",e[e.readOnly=96]="readOnly",e[e.readOnlyMessage=97]="readOnlyMessage",e[e.renameOnType=98]="renameOnType",e[e.renderControlCharacters=99]="renderControlCharacters",e[e.renderFinalNewline=100]="renderFinalNewline",e[e.renderLineHighlight=101]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=102]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=103]="renderValidationDecorations",e[e.renderWhitespace=104]="renderWhitespace",e[e.revealHorizontalRightPadding=105]="revealHorizontalRightPadding",e[e.roundedSelection=106]="roundedSelection",e[e.rulers=107]="rulers",e[e.scrollbar=108]="scrollbar",e[e.scrollBeyondLastColumn=109]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=110]="scrollBeyondLastLine",e[e.scrollPredominantAxis=111]="scrollPredominantAxis",e[e.selectionClipboard=112]="selectionClipboard",e[e.selectionHighlight=113]="selectionHighlight",e[e.selectOnLineNumbers=114]="selectOnLineNumbers",e[e.showFoldingControls=115]="showFoldingControls",e[e.showUnused=116]="showUnused",e[e.snippetSuggestions=117]="snippetSuggestions",e[e.smartSelect=118]="smartSelect",e[e.smoothScrolling=119]="smoothScrolling",e[e.stickyScroll=120]="stickyScroll",e[e.stickyTabStops=121]="stickyTabStops",e[e.stopRenderingLineAfter=122]="stopRenderingLineAfter",e[e.suggest=123]="suggest",e[e.suggestFontSize=124]="suggestFontSize",e[e.suggestLineHeight=125]="suggestLineHeight",e[e.suggestOnTriggerCharacters=126]="suggestOnTriggerCharacters",e[e.suggestSelection=127]="suggestSelection",e[e.tabCompletion=128]="tabCompletion",e[e.tabIndex=129]="tabIndex",e[e.unicodeHighlighting=130]="unicodeHighlighting",e[e.unusualLineTerminators=131]="unusualLineTerminators",e[e.useShadowDOM=132]="useShadowDOM",e[e.useTabStops=133]="useTabStops",e[e.wordBreak=134]="wordBreak",e[e.wordSegmenterLocales=135]="wordSegmenterLocales",e[e.wordSeparators=136]="wordSeparators",e[e.wordWrap=137]="wordWrap",e[e.wordWrapBreakAfterCharacters=138]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=139]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=140]="wordWrapColumn",e[e.wordWrapOverride1=141]="wordWrapOverride1",e[e.wordWrapOverride2=142]="wordWrapOverride2",e[e.wrappingIndent=143]="wrappingIndent",e[e.wrappingStrategy=144]="wrappingStrategy",e[e.showDeprecated=145]="showDeprecated",e[e.inlayHints=146]="inlayHints",e[e.effectiveCursorStyle=147]="effectiveCursorStyle",e[e.editorClassName=148]="editorClassName",e[e.pixelRatio=149]="pixelRatio",e[e.tabFocusMode=150]="tabFocusMode",e[e.layoutInfo=151]="layoutInfo",e[e.wrappingInfo=152]="wrappingInfo",e[e.defaultColorDecorators=153]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=154]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=155]="inlineCompletionsAccessibilityVerbose",e[e.effectiveExperimentalEditContextEnabled=156]="effectiveExperimentalEditContextEnabled"})(ES||(ES={}));var MV={acceptSuggestionOnCommitCharacter:T(new be(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:h(539,null)})),acceptSuggestionOnEnter:T(new Qe(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",h(540,null),""],markdownDescription:h(541,null)})),accessibilitySupport:T(new GM),accessibilityPageSize:T(new Ue(3,"accessibilityPageSize",500,1,1073741824,{description:h(542,null),tags:["accessibility"]})),ariaLabel:T(new gi(4,"ariaLabel",h(543,null))),ariaRequired:T(new be(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:T(new be(8,"screenReaderAnnounceInlineSuggestion",!0,{description:h(544,null),tags:["accessibility"]})),autoClosingBrackets:T(new Qe(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",h(545,null),h(546,null),""],description:h(547,null)})),autoClosingComments:T(new Qe(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",h(548,null),h(549,null),""],description:h(550,null)})),autoClosingDelete:T(new Qe(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",h(551,null),""],description:h(552,null)})),autoClosingOvertype:T(new Qe(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",h(553,null),""],description:h(554,null)})),autoClosingQuotes:T(new Qe(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",h(555,null),h(556,null),""],description:h(557,null)})),autoIndent:T(new Xl(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],qM,{enumDescriptions:[h(558,null),h(559,null),h(560,null),h(561,null),h(562,null)],description:h(563,null)})),automaticLayout:T(new be(13,"automaticLayout",!1)),autoSurround:T(new Qe(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[h(564,null),h(565,null),h(566,null),""],description:h(567,null)})),bracketPairColorization:T(new DF),bracketPairGuides:T(new PF),stickyTabStops:T(new be(121,"stickyTabStops",!1,{description:h(568,null)})),codeLens:T(new be(17,"codeLens",!0,{description:h(569,null)})),codeLensFontFamily:T(new gi(18,"codeLensFontFamily","",{description:h(570,null)})),codeLensFontSize:T(new Ue(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:h(571,null)})),colorDecorators:T(new be(20,"colorDecorators",!0,{description:h(572,null)})),colorDecoratorActivatedOn:T(new Qe(154,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[h(573,null),h(574,null),h(575,null)],description:h(576,null)})),colorDecoratorsLimit:T(new Ue(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:h(577,null)})),columnSelection:T(new be(22,"columnSelection",!1,{description:h(578,null)})),comments:T(new JM),contextmenu:T(new be(24,"contextmenu",!0)),copyWithSyntaxHighlighting:T(new be(25,"copyWithSyntaxHighlighting",!0,{description:h(579,null)})),cursorBlinking:T(new Xl(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],ZM,{description:h(580,null)})),cursorSmoothCaretAnimation:T(new Qe(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[h(581,null),h(582,null),h(583,null)],description:h(584,null)})),cursorStyle:T(new Xl(28,"cursorStyle",hr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],vS,{description:h(585,null)})),overtypeCursorStyle:T(new Xl(84,"overtypeCursorStyle",hr.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],vS,{description:h(586,null)})),cursorSurroundingLines:T(new Ue(29,"cursorSurroundingLines",0,0,1073741824,{description:h(587,null)})),cursorSurroundingLinesStyle:T(new Qe(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[h(588,null),h(589,null)],markdownDescription:h(590,null)})),cursorWidth:T(new Ue(31,"cursorWidth",0,0,1073741824,{markdownDescription:h(591,null)})),disableLayerHinting:T(new be(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:T(new be(33,"disableMonospaceOptimizations",!1)),domReadOnly:T(new be(34,"domReadOnly",!1)),dragAndDrop:T(new be(35,"dragAndDrop",!0,{description:h(592,null)})),emptySelectionClipboard:T(new YM),dropIntoEditor:T(new MF),experimentalEditContextEnabled:T(new be(37,"experimentalEditContextEnabled",WM.quality!=="stable",{description:h(593,null),included:pg||Ly||Cy})),stickyScroll:T(new hF),experimentalGpuAcceleration:T(new Qe(39,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[h(594,null),h(595,null)],description:h(596,null)})),experimentalWhitespaceRendering:T(new Qe(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[h(597,null),h(598,null),h(599,null)],description:h(600,null)})),extraEditorClassName:T(new gi(41,"extraEditorClassName","")),fastScrollSensitivity:T(new Lr(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:h(601,null)})),find:T(new XM),fixedOverflowWidgets:T(new be(44,"fixedOverflowWidgets",!1)),folding:T(new be(45,"folding",!0,{description:h(602,null)})),foldingStrategy:T(new Qe(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[h(603,null),h(604,null)],description:h(605,null)})),foldingHighlight:T(new be(47,"foldingHighlight",!0,{description:h(606,null)})),foldingImportsByDefault:T(new be(48,"foldingImportsByDefault",!1,{description:h(607,null)})),foldingMaximumRegions:T(new Ue(49,"foldingMaximumRegions",5e3,10,65e3,{description:h(608,null)})),unfoldOnClickAfterEndOfLine:T(new be(50,"unfoldOnClickAfterEndOfLine",!1,{description:h(609,null)})),fontFamily:T(new gi(51,"fontFamily",us.fontFamily,{description:h(610,null)})),fontInfo:T(new tF),fontLigatures2:T(new KM),fontSize:T(new sF),fontWeight:T(new nF),fontVariations:T(new eF),formatOnPaste:T(new be(57,"formatOnPaste",!1,{description:h(611,null)})),formatOnType:T(new be(58,"formatOnType",!1,{description:h(612,null)})),glyphMargin:T(new be(59,"glyphMargin",!0,{description:h(613,null)})),gotoLocation:T(new oF),hideCursorInOverviewRuler:T(new be(61,"hideCursorInOverviewRuler",!1,{description:h(614,null)})),hover:T(new aF),inDiffEditor:T(new be(63,"inDiffEditor",!1)),letterSpacing:T(new Lr(65,"letterSpacing",us.letterSpacing,e=>Lr.clamp(e,-5,20),{description:h(615,null)})),lightbulb:T(new uF),lineDecorationsWidth:T(new fF),lineHeight:T(new pF),lineNumbers:T(new EF),lineNumbersMinChars:T(new Ue(70,"lineNumbersMinChars",5,1,300)),linkedEditing:T(new be(71,"linkedEditing",!1,{description:h(616,null)})),links:T(new be(72,"links",!0,{description:h(617,null)})),matchBrackets:T(new Qe(73,"matchBrackets","always",["always","near","never"],{description:h(618,null)})),minimap:T(new gF),mouseStyle:T(new Qe(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:T(new Lr(76,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:h(619,null)})),mouseWheelZoom:T(new be(77,"mouseWheelZoom",!1,{markdownDescription:h(Fi?620:621,null)})),multiCursorMergeOverlapping:T(new be(78,"multiCursorMergeOverlapping",!0,{description:h(622,null)})),multiCursorModifier:T(new Xl(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],mF,{markdownEnumDescriptions:[h(623,null),h(624,null)],markdownDescription:h(625,null)})),multiCursorPaste:T(new Qe(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[h(626,null),h(627,null)],markdownDescription:h(628,null)})),multiCursorLimit:T(new Ue(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:h(629,null)})),occurrencesHighlight:T(new Qe(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[h(630,null),h(631,null),h(632,null)],markdownDescription:h(633,null)})),occurrencesHighlightDelay:T(new Ue(83,"occurrencesHighlightDelay",0,0,2e3,{description:h(634,null),tags:["preview"]})),overtypeOnPaste:T(new be(85,"overtypeOnPaste",!0,{description:h(635,null)})),overviewRulerBorder:T(new be(86,"overviewRulerBorder",!0,{description:h(636,null)})),overviewRulerLanes:T(new Ue(87,"overviewRulerLanes",3,0,3)),padding:T(new vF),pasteAs:T(new FF),parameterHints:T(new wF),peekWidgetDefaultFocus:T(new Qe(91,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[h(637,null),h(638,null)],description:h(639,null)})),placeholder:T(new yF),definitionLinkOpensInPeek:T(new be(93,"definitionLinkOpensInPeek",!1,{description:h(640,null)})),quickSuggestions:T(new xF),quickSuggestionsDelay:T(new Ue(95,"quickSuggestionsDelay",10,0,1073741824,{description:h(641,null)})),readOnly:T(new be(96,"readOnly",!1)),readOnlyMessage:T(new kF),renameOnType:T(new be(98,"renameOnType",!1,{description:h(642,null),markdownDeprecationMessage:h(643,null)})),renderControlCharacters:T(new be(99,"renderControlCharacters",!0,{description:h(644,null),restricted:!0})),renderFinalNewline:T(new Qe(100,"renderFinalNewline",Wr?"dimmed":"on",["off","on","dimmed"],{description:h(645,null)})),renderLineHighlight:T(new Qe(101,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",h(646,null)],description:h(647,null)})),renderLineHighlightOnlyWhenFocus:T(new be(102,"renderLineHighlightOnlyWhenFocus",!1,{description:h(648,null)})),renderValidationDecorations:T(new Qe(103,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:T(new Qe(104,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",h(649,null),h(650,null),h(651,null),""],description:h(652,null)})),revealHorizontalRightPadding:T(new Ue(105,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:T(new be(106,"roundedSelection",!0,{description:h(653,null)})),rulers:T(new SF),scrollbar:T(new $F),scrollBeyondLastColumn:T(new Ue(109,"scrollBeyondLastColumn",4,0,1073741824,{description:h(654,null)})),scrollBeyondLastLine:T(new be(110,"scrollBeyondLastLine",!0,{description:h(655,null)})),scrollPredominantAxis:T(new be(111,"scrollPredominantAxis",!0,{description:h(656,null)})),selectionClipboard:T(new be(112,"selectionClipboard",!0,{description:h(657,null),included:Wr})),selectionHighlight:T(new be(113,"selectionHighlight",!0,{description:h(658,null)})),selectOnLineNumbers:T(new be(114,"selectOnLineNumbers",!0)),showFoldingControls:T(new Qe(115,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[h(659,null),h(660,null),h(661,null)],description:h(662,null)})),showUnused:T(new be(116,"showUnused",!0,{description:h(663,null)})),showDeprecated:T(new be(145,"showDeprecated",!0,{description:h(664,null)})),inlayHints:T(new dF),snippetSuggestions:T(new Qe(117,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[h(665,null),h(666,null),h(667,null),h(668,null)],description:h(669,null)})),smartSelect:T(new TF),smoothScrolling:T(new be(119,"smoothScrolling",!1,{description:h(670,null)})),stopRenderingLineAfter:T(new Ue(122,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:T(new AF),inlineSuggest:T(new IF),inlineCompletionsAccessibilityVerbose:T(new be(155,"inlineCompletionsAccessibilityVerbose",!1,{description:h(671,null)})),suggestFontSize:T(new Ue(124,"suggestFontSize",0,0,1e3,{markdownDescription:h(672,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:T(new Ue(125,"suggestLineHeight",0,0,1e3,{markdownDescription:h(673,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:T(new be(126,"suggestOnTriggerCharacters",!0,{description:h(674,null)})),suggestSelection:T(new Qe(127,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[h(675,null),h(676,null),h(677,null)],description:h(678,null)})),tabCompletion:T(new Qe(128,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[h(679,null),h(680,null),h(681,null)],description:h(682,null)})),tabIndex:T(new Ue(129,"tabIndex",0,-1,1073741824)),unicodeHighlight:T(new CF),unusualLineTerminators:T(new Qe(131,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[h(683,null),h(684,null),h(685,null)],description:h(686,null)})),useShadowDOM:T(new be(132,"useShadowDOM",!0)),useTabStops:T(new be(133,"useTabStops",!0,{description:h(687,null)})),wordBreak:T(new Qe(134,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[h(688,null),h(689,null)],description:h(690,null)})),wordSegmenterLocales:T(new RF),wordSeparators:T(new gi(136,"wordSeparators",kE,{description:h(691,null)})),wordWrap:T(new Qe(137,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[h(692,null),h(693,null),h(694,null),h(695,null)],description:h(696,null)})),wordWrapBreakAfterCharacters:T(new gi(138,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:T(new gi(139,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:T(new Ue(140,"wordWrapColumn",80,1,1073741824,{markdownDescription:h(697,null)})),wordWrapOverride1:T(new Qe(141,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:T(new Qe(142,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:T(new iF),editorClassName:T(new QM),defaultColorDecorators:T(new Qe(153,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[h(698,null),h(699,null),h(700,null)],description:h(701,null)})),pixelRatio:T(new bF),tabFocusMode:T(new be(150,"tabFocusMode",!1,{markdownDescription:h(702,null)})),layoutInfo:T(new cF),wrappingInfo:T(new NF),wrappingIndent:T(new LF),wrappingStrategy:T(new lF),effectiveExperimentalEditContextEnabled:T(new rF)};function SS(e,t,i,r,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=SS(a,t,i,r,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return r?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!r&&!l)return 0;u&&s&&(t=s);let d=0;if(c)if(c===t.scheme)d=10;else if(c==="*")d=5;else return 0;if(o)if(o===i)d=10;else if(o==="*")d=Math.max(d,5);else return 0;if(u)if(u===n)d=10;else if(u==="*"&&n!==void 0)d=Math.max(d,5);else return 0;if(a){let f;if(typeof a=="string"?f=a:f={...a,base:$o(a.base)},f===t.fsPath||Ac(f,t.fsPath))d=10;else return 0}return d}else return 0}}function kS(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(kS):!!e.notebookType}var Sw;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Sw||(Sw={}));var FV=j("editSessionIdentityService"),kw;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(kw||(kw={}));var OV=new I("debugType",void 0,{type:"string",description:h(6611,null)}),UV=new I("debugConfigurationType",void 0,{type:"string",description:h(6612,null)}),HV=new I("debugState","inactive",{type:"string",description:h(6613,null)}),jF="debugUx",BV=new I(jF,"default",{type:"string",description:h(6614,null)}),jV=new I("hasDebugged",!1,{type:"boolean",description:h(6615,null)}),WV=new I("inDebugMode",!1,{type:"boolean",description:h(6616,null)}),zV=new I("inDebugRepl",!1,{type:"boolean",description:h(6617,null)}),_V=new I("breakpointWidgetVisible",!1,{type:"boolean",description:h(6618,null)}),VV=new I("inBreakpointWidget",!1,{type:"boolean",description:h(6619,null)}),qV=new I("breakpointsFocused",!0,{type:"boolean",description:h(6620,null)}),GV=new I("watchExpressionsFocused",!0,{type:"boolean",description:h(6621,null)}),JV=new I("watchExpressionsExist",!1,{type:"boolean",description:h(6622,null)}),ZV=new I("variablesFocused",!0,{type:"boolean",description:h(6623,null)}),QV=new I("expressionSelected",!1,{type:"boolean",description:h(6624,null)}),YV=new I("breakpointInputFocused",!1,{type:"boolean",description:h(6625,null)}),XV=new I("callStackItemType",void 0,{type:"string",description:h(6626,null)}),KV=new I("callStackSessionIsAttach",!1,{type:"boolean",description:h(6627,null)}),eq=new I("callStackItemStopped",!1,{type:"boolean",description:h(6628,null)}),tq=new I("callStackSessionHasOneThread",!1,{type:"boolean",description:h(6629,null)}),iq=new I("callStackFocused",!0,{type:"boolean",description:h(6630,null)}),rq=new I("watchItemType",void 0,{type:"string",description:h(6631,null)}),sq=new I("canViewMemory",void 0,{type:"boolean",description:h(6632,null)}),nq=new I("breakpointItemType",void 0,{type:"string",description:h(6633,null)}),oq=new I("breakpointItemBytes",void 0,{type:"boolean",description:h(6634,null)}),aq=new I("breakpointHasModes",!1,{type:"boolean",description:h(6635,null)}),cq=new I("breakpointSupportsCondition",!1,{type:"boolean",description:h(6636,null)}),lq=new I("loadedScriptsSupported",!1,{type:"boolean",description:h(6637,null)}),uq=new I("loadedScriptsItemType",void 0,{type:"string",description:h(6638,null)}),hq=new I("focusedSessionIsAttach",!1,{type:"boolean",description:h(6639,null)}),dq=new I("focusedSessionIsNoDebug",!1,{type:"boolean",description:h(6640,null)}),fq=new I("stepBackSupported",!1,{type:"boolean",description:h(6641,null)}),pq=new I("restartFrameSupported",!1,{type:"boolean",description:h(6642,null)}),gq=new I("stackFrameSupportsRestart",!1,{type:"boolean",description:h(6643,null)}),mq=new I("jumpToCursorSupported",!1,{type:"boolean",description:h(6644,null)}),vq=new I("stepIntoTargetsSupported",!1,{type:"boolean",description:h(6645,null)}),wq=new I("breakpointsExist",!1,{type:"boolean",description:h(6646,null)}),bq=new I("debuggersAvailable",!1,{type:"boolean",description:h(6647,null)}),yq=new I("debugExtensionAvailable",!0,{type:"boolean",description:h(6648,null)}),xq=new I("debugProtocolVariableMenuContext",void 0,{type:"string",description:h(6649,null)}),Eq=new I("debugSetVariableSupported",!1,{type:"boolean",description:h(6650,null)}),Sq=new I("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:h(6651,null)}),kq=new I("debugSetExpressionSupported",!1,{type:"boolean",description:h(6652,null)}),$q=new I("breakWhenValueChangesSupported",!1,{type:"boolean",description:h(6653,null)}),Cq=new I("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:h(6654,null)}),Iq=new I("breakWhenValueIsReadSupported",!1,{type:"boolean",description:h(6655,null)}),Dq=new I("terminateDebuggeeSupported",!1,{type:"boolean",description:h(6656,null)}),Pq=new I("suspendDebuggeeSupported",!1,{type:"boolean",description:h(6657,null)}),Aq=new I("variableEvaluateNamePresent",!1,{type:"boolean",description:h(6658,null)}),Tq=new I("variableIsReadonly",!1,{type:"boolean",description:h(6659,null)}),Rq=new I("variableValue",!1,{type:"string",description:h(6660,null)}),Lq=new I("variableType",!1,{type:"string",description:h(6661,null)}),Nq=new I("variableInterfaces",!1,{type:"array",description:h(6662,null)}),Mq=new I("variableName",!1,{type:"string",description:h(6663,null)}),Fq=new I("variableLanguage",!1,{type:"string",description:h(6664,null)}),Oq=new I("variableExtensionId",!1,{type:"string",description:h(6665,null)}),Uq=new I("exceptionWidgetVisible",!1,{type:"boolean",description:h(6666,null)}),Hq=new I("multiSessionRepl",!1,{type:"boolean",description:h(6667,null)}),Bq=new I("multiSessionDebug",!1,{type:"boolean",description:h(6668,null)}),jq=new I("disassembleRequestSupported",!1,{type:"boolean",description:h(6669,null)}),Wq=new I("disassemblyViewFocus",!1,{type:"boolean",description:h(6670,null)}),zq=new I("languageSupportsDisassembleRequest",!1,{type:"boolean",description:h(6671,null)}),_q=new I("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:h(6672,null)}),Vq={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:h(6674,null)},$S;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})($S||($S={}));var CS;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(CS||(CS={}));var IS;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(IS||(IS={}));var sp;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(sp||(sp={}));var DS;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(DS||(DS={}));var qq=j("debugService"),PS;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(PS||(PS={}));var AS;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(AS||(AS={}));var TS;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(TS||(TS={}));var RS;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(RS||(RS={}));var LS;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:y.revive(t.iconPath.light),dark:y.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(LS||(LS={}));var WF=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiRelatedInformationProvider(r,t),new Ae(()=>{this.c.$unregisterAiRelatedInformationProvider(r),this.a.delete(r)})}},NS;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(NS||(NS={}));function MS(e){for(let t=0,i=e.length;t<i;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function zF(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return Ry()||MS(t),ae.wrap(t)}function _F(e){const t=e.buffer;if(Ry()||MS(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function $w(e){const t=new Uint32Array(VF(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return zF(t)}function VF(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function FS(e){const t=_F(e);let i=0;const r=t[i++];if(t[i++]===1){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:r,type:"full",data:c}}const n=t[i++],o=[];for(let a=0;a<n;a++){const c=t[i++],l=t[i++],u=t[i++];let d;u>0&&(d=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:d}}return{id:r,type:"delta",deltas:o}}var qF=[new de("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[U.Uri,U.Position],new ue("A promise that resolves to an array of DocumentHighlight-instances.",fr(ba.to))),new de("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[U.Uri],new ue("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(Yp(e))return;class i extends _c{static to(s){const n=new i(s.name,qi.to(s.kind),s.containerName||"",new Hi(t[0],O.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=O.to(s.selectionRange),n.children=s.children?s.children.map(i.to):[],n}}return e.map(i.to)})),new de("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[U.Uri,new U("options","Formatting options",e=>!0,e=>e)],new ue("A promise that resolves to an array of TextEdits.",fr(At.to))),new de("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[U.Uri,U.Range,new U("options","Formatting options",e=>!0,e=>e)],new ue("A promise that resolves to an array of TextEdits.",fr(At.to))),new de("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[U.Uri,U.Position,new U("ch","Trigger character",e=>typeof e=="string",e=>e),new U("options","Formatting options",e=>!0,e=>e)],new ue("A promise that resolves to an array of TextEdits.",fr(At.to))),new de("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location or LocationLink instances.",Ys)),new de("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location-instances.",fr(fi.to))),new de("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Location-instances.",fr(fi.to))),new de("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Hover-instances.",fr(El.to))),new de("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[U.Uri,U.Position],new ue("A promise that resolves to an array of Hover-instances.",fr(El.to))),new de("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[U.Uri,new U("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Ie.isPosition(t)),e=>e.map(je.from))],new ue("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const r of t.reverse())i=new Jc(O.to(r),i);return i}))),new de("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[U.String.with("query","Search string")],new ue("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(qn.to))),new de("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[U.Uri,U.Position],new ue("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Gn.to))),new de("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[U.CallHierarchyItem],new ue("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(pv.to))),new de("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[U.CallHierarchyItem],new ue("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(gv.to))),new de("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[U.Uri,U.Position],new ue("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:O.to(e.range),placeholder:e.text}})),new de("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[U.Uri,U.Position,U.String.with("newName","The new symbol name")],new ue("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return Pi.to(e)}})),new de("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[U.Uri,U.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ue("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Jn.to))),new de("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[U.Uri],new ue("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new T1(e.tokenTypes,e.tokenModifiers)})),new de("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[U.Uri],new ue("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=FS(e);if(t.type==="full")return new ha(t.data,void 0)})),new de("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[U.Uri,U.Range.optional()],new ue("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new T1(e.tokenTypes,e.tokenModifiers)})),new de("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[U.Uri,U.Range],new ue("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=FS(e);if(t.type==="full")return new ha(t.data,void 0)})),new de("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[U.Uri,U.Position,U.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),U.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ue("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new Xo([]);const r=e.suggestions.map(s=>yv.to(s,i));return new Xo(r,e.incomplete)})),new de("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[U.Uri,U.Position,U.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ue("A promise that resolves to SignatureHelp.",e=>{if(e)return Sl.to(e)})),new de("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[U.Uri,U.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ue("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>fr(r=>new sd(O.to(r.range),r.command&&i.fromInternal(r.command)))(e))),new de("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[U.Uri,new U("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>Ee.isRange(e),e=>es.isSelection(e)?lr.from(e):O.from(e)),U.String.with("kind","Code action kind to return code actions for").optional(),U.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ue("A promise that resolves to an array of Command-instances.",(e,t,i)=>fr(r=>{if(r._isSynthetic){if(!r.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(r.command)}else{const s=new Gc(r.title,r.kind?new at(r.kind):void 0);return r.edit&&(s.edit=Pi.to(r.edit)),r.command&&(s.command=i.fromInternal(r.command)),s.isPreferred=r.isPreferred,s}})(e))),new de("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[U.Uri],new ue("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new ud(O.to(t.range),ya.to(t.color))):[])),new de("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new U("color","The color to show and insert",e=>e instanceof sa,ya.from),new U("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:O.from(e.range)}))],new ue("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(cf.to):[])),new de("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[U.Uri,U.Range],new ue("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map(xv.to.bind(void 0,i)))),new de("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[U.Uri],new ue("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(uf.to)})),new de("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ue("A promise that resolves to an array of NotebookContentProvider static info objects.",fr(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>df.to(t))})))),new de("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[U.Uri,U.Range,new U("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof Ee,e=>tf.from(e))],new ue("A promise that resolves to an array of InlineValue objects",e=>e.map(ef.to))),new de("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new U("uriOrString","Uri-instance or string (only http/https)",e=>y.isUri(e)||typeof e=="string"&&Y3(e,z.http,z.https),e=>e),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Pt.from(e),void 0]:[Pt.from(e.viewColumn),kl.from(e)])).optional(),U.String.with("label","").optional()],ue.Void),new de("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[U.Uri.with("resource","Resource to open"),U.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Pt.from(e),void 0]:[Pt.from(e.viewColumn),kl.from(e)])).optional()],ue.Void),new de("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[U.Uri.with("left","Left-hand side resource of the diff editor"),U.Uri.with("right","Right-hand side resource of the diff editor"),U.String.with("title","Human readable title for the diff editor").optional(),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Pt.from(e.viewColumn),kl.from(e)]).optional()],ue.Void),new de("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[U.String.with("title","Human readable title for the changes editor"),new U("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,r,s]=t;if(!y.isUri(i)||!y.isUri(r)&&r!==void 0&&r!==null||!y.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],ue.Void),new de("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[U.Uri,U.Position],new ue("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Zn.to))),new de("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[U.TypeHierarchyItem],new ue("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Zn.to))),new de("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[U.TypeHierarchyItem],new ue("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Zn.to))),new de("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[U.TestItem],ue.Void),new de("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[U.TestProfile,U.Arr(U.TestItem)],ue.Void),new de("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[U.Arr(U.TestItem)],ue.Void),new de("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[U.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ue.Void),new de("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[U.String.with("name","The context key name"),new U("value","The context key value",()=>!0,e=>e)],ue.Void),new de("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new U("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?O.from(e.initialRange):void 0,initialSelection:es.isSelection(e.initialSelection)?lr.from(e.initialSelection):void 0,message:e.message,attachments:e.attachments,autoSend:e.autoSend,position:e.position?je.from(e.position):void 0}})],ue.Void)],GF=class{static register(e){qF.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",JD)}};function fr(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Ys(e){if(!Array.isArray(e))return;const t=[];for(const i of e)bP(i)?t.push(xl.to(i)):t.push(fi.to(i));return t}var Cw=class{constructor(t,i){this.a=t.getProxy(V.MainThreadBulkEdits),this.b={getTextDocumentVersion:r=>i.getDocument(r)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,r){const s=new si(Pi.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,r?.isRefactoring??!1)}};Cw=__decorate([__param(0,Be)],Cw);function JF(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var ZF=class{constructor(e,t,i,r,s){this.j=e,this.k=t,this.l=i,this.m=r,this.n=s,this.b=cn.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(i.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const i=this;this.b.reset();const r=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(Ii.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,Rl.from(c),l):this.l.$handleProgressChunk(this.k.requestId,Yn.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,Mv.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g=Object.freeze({markdown(s){t(this.markdown);const n=new Ud(s),o=Pl.from(n);return r(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&L(i.j,"chatParticipantAdditions");const o=new pl(s,n),a=mf.from(o);return r(a),this},codeblockUri(s,n){t(this.codeblockUri),L(i.j,"chatParticipantAdditions");const o=new zd(s,n),a=gf.from(o);return r(a),this},filetree(s,n){t(this.filetree);const o=new Bd(s,n),a=Al.from(o);return r(a),this},anchor(s,n){const o=new gl(s,n);return this.push(o)},button(s){t(this.anchor);const n=new Wd(s),o=Ll.from(n,i.m,i.n);return r(o),this},progress(s,n){t(this.progress);const o=new jd(s,n),a=n?wf.from(o):Tl.from(o);return r(a,n),this},warning(s){t(this.progress),L(i.j,"chatParticipantAdditions");const n=new ml(s),o=Rl.from(n);return r(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&L(i.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=i.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new _n(s,n,o);c=[Yn.from(l)]}return c.forEach(l=>r(l)),this}}else{const a=new _n(s,n,o),c=Yn.from(a);r(c)}return this},codeCitation(s,n,o){t(this.codeCitation),L(i.j,"chatParticipantAdditions");const a=new _d(s,n,o),c=Ef.from(a);r(c)},textEdit(s,n){t(this.textEdit),L(i.j,"chatParticipantAdditions");const o=new vl(s,n);o.isDone=n===!0?!0:void 0;const a=bf.from(o);return r(a),this},notebookEdit(s,n){t(this.notebookEdit),L(i.j,"chatParticipantAdditions");const o=new qd(s,n),a=xf.from(o);return r(a),this},confirmation(s,n,o,a){t(this.confirmation),L(i.j,"chatParticipantAdditions");const c=new Hd(s,n,o,a),l=vf.from(c);return r(l),this},push(s){if(t(this.push),(s instanceof vl||s instanceof qd||s instanceof pl||s instanceof ml||s instanceof Hd||s instanceof _d||s instanceof Vd||s instanceof Y1||s instanceof jd)&&L(i.j,"chatParticipantAdditions"),s instanceof _n)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof jd){const n=s.task?wf.from(s):Tl.from(s);r(n,s.task)}else if(s instanceof gl){const n=Aa.from(s);if(s.resolve){L(i.j,"chatParticipantAdditions"),n.resolveId=Mt();const o=new lt;s.resolve(o.token).then(()=>{const a=Aa.from(s);i.l.$handleAnchorResolve(i.k.requestId,n.resolveId,a)}).then(()=>o.dispose(),()=>o.dispose()),i.n.add(se(()=>o.dispose(!0)))}r(n)}else{const n=Sf.from(s,i.m,i.n);r(n)}return this}})}return this.g}},QF=class wu extends ne{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,i,r,s,n,o,a){super(),this.z=i,this.C=r,this.D=s,this.F=n,this.G=o,this.H=a,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new Iu),this.u=this.B(new Iu),this.w=new Set,this.y=this.B(new P),this.onDidDisposeChatSession=this.y.event,this.g=t.getProxy(V.MainThreadChatAgents2),r.registerArgumentProcessor({processArgument:c=>JF(c)?null:c})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,i,r){const s=wu.b++,n=new OS(t,i,this.g,s,r);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,i,{},void 0),n.apiAgent}createDynamicChatAgent(t,i,r,s){const n=wu.b++,o=new OS(t,i,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,i,{isSticky:!0},r),o.apiAgent}registerChatParticipantDetectionProvider(t,i){const r=wu.j++;return this.m.set(r,new YF(t,i)),this.g.$registerChatParticipantDetectionProvider(r),se(()=>{this.m.delete(r),this.g.$unregisterChatParticipantDetectionProvider(r)})}registerRelatedFilesProvider(t,i,r){const s=wu.n++;return this.s.set(s,new XF(t,i)),this.g.$registerRelatedFilesProvider(s,r),se(()=>{this.s.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}async $provideRelatedFiles(t,i,r){const s=this.s.get(t);if(!s)return Promise.resolve([]);const n=Fv.to(i);return await s.provider.provideRelatedFiles(n,r)??void 0}async $detectChatParticipant(t,i,r,s,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.I(i,r,o.extension),u=await this.J(a,o.extension),d=kf.to(a,c,u,this.L(o.extension),this.N(o.extension,a),this.M(o.extension,a),o.extension,this.z);return o.provider.provideParticipantDetection(d,{history:l},{participants:s.participants,location:Nl.to(s.location)},n)}async I(t,i,r){const s=Ct(t),n=await this.O(r,s.agentId,i);let o;if(s.locationData?.type===Kt.Editor){const a=this.D.getDocument(s.locationData.document);o=new A8(a,lr.to(s.locationData.selection),O.to(s.locationData.wholeRange))}else if(s.locationData?.type===Kt.Notebook){const a=this.D.getDocument(s.locationData.sessionInputUri);o=new T8(a)}else s.locationData?.type,Kt.Terminal;return{request:s,location:o,history:n}}async J(t,i){let r;if(t.userSelectedModelId&&(r=await this.F.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.F.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}async $setRequestPaused(t,i,r){const s=this.c.get(t);if(!s)return;const n=qt.find(this.w,o=>o.requestId===i);n&&s.setChatRequestPauseState({request:n.extRequest,isPaused:r})}async $invokeAgent(t,i,r,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.I(i,r,n.extension);let d=this.t.get(c.sessionId);d||(d=new fe,this.t.set(c.sessionId,d)),o=new ZF(n.extension,c,this.g,this.C.converter,d);const f=await this.J(c,n.extension),p=kf.to(c,l,f,this.L(n.extension),this.N(n.extension,c),this.M(n.extension,c),n.extension,this.z);a={requestId:i.requestId,extRequest:p},this.w.add(a);const m=n.invoke(p,{history:u},o.apiObject,s);return await S4(Promise.resolve(m).then(w=>{if(w?.metadata)try{JSON.stringify(w.metadata)}catch(k){const $=`result.metadata MUST be JSON.stringify-able. Got error: ${k.message}`;return this.z.error(`[${n.extension.identifier.value}] [@${n.id}] ${$}`,n.extension),{errorDetails:{message:$},timings:o?.timings,nextQuestion:w.nextQuestion}}let x;return w?.errorDetails&&(x={...w.errorDetails,responseIsIncomplete:!0}),(x?.responseIsRedacted||x?.isQuotaExceeded)&&L(n.extension,"chatParticipantPrivate"),{errorDetails:x,timings:o?.timings,metadata:w?.metadata,nextQuestion:w?.nextQuestion}}),s)}catch(c){this.z.error(c,n.extension),c instanceof rs&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded";return{errorDetails:{message:To(c),responseIsIncomplete:!0,isQuotaExceeded:l}}}finally{a&&this.w.delete(a),o?.close()}}L(t){return Ze(t,"chatReferenceDiagnostic")?this.G.getDiagnostics():[]}M(t,i){if(!i.userSelectedTools2)return new Map;const r=new Map;for(const s of this.H.getTools(t))typeof i.userSelectedTools2[s.name]=="boolean"&&r.set(s.name,i.userSelectedTools2[s.name]);return r}N(t,i){if(!vo(i.userSelectedTools))return;const r=new Set(i.userSelectedTools);return{tools:this.H.getTools(t).filter(n=>r.has(n.name)),isExclusive:i.toolSelectionIsExclusive}}async O(t,i,r){const s=[];for(const n of r.history){const o=Ta.to(n.result),a=i===n.request.agentId?o:{...o,metadata:void 0},c=n.request.variables.variables.filter(p=>p.kind!=="tool").map(p=>$f.to(p,this.L(t),this.z)).filter(xi),l=n.request.variables.variables.filter(p=>p.kind==="tool").map(Cf.to),u=Ze(t,"chatParticipantPrivate")?n.request.editedFileEvents:void 0,d=new X1(n.request.message,n.request.command,c,n.request.agentId,l,u);s.push(d);const f=bt(n.response.map(p=>Sf.toContent(p,this.C.converter)));s.push(new P8(f,a,n.request.agentId,n.request.command))}return s}$releaseSession(t){this.t.deleteAndDispose(t),this.y.fire(t)}async $provideFollowups(t,i,r,s,n){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=Ct(t),c=await this.O(o.extension,o.id,s),l=Ta.to(r);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const d=!u.participant||qt.some(this.c.values(),f=>f.id===u.participant&&Fe.equals(f.extension.identifier,o.extension.identifier));return d||this.z.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),d}).map(u=>Il.from(u,a))}$acceptFeedback(t,i,r){const s=this.c.get(t);if(!s)return;const n=Ta.to(i);let o;switch(r.direction){case Fh.Down:o=fl.Unhelpful;break;case Fh.Up:o=fl.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Ze(s.extension,"chatParticipantAdditions")?r.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,i,r){const s=this.c.get(t);if(!s||r.action.kind==="vote")return;const n=Uv.to(i,r,this.C.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,i,r){const s=this.c.get(t);if(!s)return[];let n=this.u.get(t);return n?n.clear():(n=new fe,this.u.set(t,n)),(await s.invokeCompletionProvider(i,r)).map(a=>Ov.from(a,this.C.converter,n))}async $provideChatTitle(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.O(s.extension,s.id,{history:i});return await s.provideTitle({history:n},r)}async $provideSampleQuestions(t,i,r){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(Nl.to(i),r)).map(n=>Il.from(n,void 0))}},YF=class{constructor(e,t){this.extension=e,this.provider=t}},XF=class{constructor(e,t){this.extension=e,this.provider=t}},OS=class{constructor(e,t,i,r,s){this.extension=e,this.id=t,this.w=i,this.x=r,this.y=s,this.k=new P,this.l=new P,this.u=new P}acceptFeedback(e){this.k.fire(e)}acceptAction(e){this.l.fire(e)}setChatRequestPauseState(e){this.u.fire(e)}async invokeCompletionProvider(e,t){return this.n?await this.n.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const r=await this.b.provideFollowups(e,t,i);return r?r.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.o||!this.o.provideSampleQuestions)return[];const i=await this.o.provideSampleQuestions(e,t);return i||[]}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof y?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof oi?this.c:void 0,hasFollowups:this.b!==void 0,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:me.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:me.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:me.from(this.j),supportIssueReporting:this.m,requester:this.t,additionalWelcomeMessage:!this.q||typeof this.q=="string"?this.q:me.from(this.q)}),t=!1}))},r=this;return{get id(){return r.id},get iconPath(){return r.c},set iconPath(s){r.c=s,i()},get requestHandler(){return r.y},set requestHandler(s){iy(typeof s=="function","Invalid request handler"),r.y=s},get followupProvider(){return r.b},set followupProvider(s){r.b=s,i()},get helpTextPrefix(){return L(r.extension,"defaultChatParticipant"),r.d},set helpTextPrefix(s){L(r.extension,"defaultChatParticipant"),r.d=s,i()},get helpTextVariablesPrefix(){return L(r.extension,"defaultChatParticipant"),r.g},set helpTextVariablesPrefix(s){L(r.extension,"defaultChatParticipant"),r.g=s,i()},get helpTextPostfix(){return L(r.extension,"defaultChatParticipant"),r.j},set helpTextPostfix(s){L(r.extension,"defaultChatParticipant"),r.j=s,i()},get supportIssueReporting(){return L(r.extension,"chatParticipantPrivate"),r.m},set supportIssueReporting(s){L(r.extension,"chatParticipantPrivate"),r.m=s,i()},get onDidReceiveFeedback(){return r.k.event},set participantVariableProvider(s){if(L(r.extension,"chatParticipantAdditions"),r.n=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");r.w.$registerAgentCompletionsProvider(r.x,r.id,s.triggerCharacters)}else r.w.$unregisterAgentCompletionsProvider(r.x,r.id)},get participantVariableProvider(){return L(r.extension,"chatParticipantAdditions"),r.n},set welcomeMessageProvider(s){L(r.extension,"defaultChatParticipant"),r.o=s,i()},get welcomeMessageProvider(){return L(r.extension,"defaultChatParticipant"),r.o},set additionalWelcomeMessage(s){L(r.extension,"defaultChatParticipant"),r.q=s,i()},get additionalWelcomeMessage(){return L(r.extension,"defaultChatParticipant"),r.q},set titleProvider(s){L(r.extension,"defaultChatParticipant"),r.s=s,i()},get titleProvider(){return L(r.extension,"defaultChatParticipant"),r.s},get onDidChangePauseState(){return L(r.extension,"chatParticipantAdditions"),r.u.event},onDidPerformAction:Ze(this.extension,"chatParticipantAdditions")?this.l.event:void 0,set requester(s){r.t=s,i()},get requester(){return r.t},dispose(){e=!0,r.b=void 0,r.k.dispose(),r.w.$unregisterAgent(r.x)}}}invoke(e,t,i,r){return this.y(e,t,i,r)}},KF=class{constructor(e){this.b=new Map,this.a=e.getProxy(V.MainThreadChatStatus)}createChatStatusItem(e,t){const i=eO(e.identifier,t);if(this.b.has(i))throw new Error(`Chat status item '${t}' already exists`);const r={id:i,title:"",description:"",detail:""};let s=!1,n=!1;const o=()=>{if(s)throw new Error("Chat status item is disposed");n&&this.a.$setEntry(t,r)},a=Object.freeze({id:t,get title(){return r.title},set title(c){r.title=c,o()},get description(){return r.description},set description(c){r.description=c,o()},get detail(){return r.detail},set detail(c){r.detail=c,o()},show:()=>{n=!0,o()},hide:()=>{n=!1,this.a.$disposeEntry(t)},dispose:()=>{s=!0,this.a.$disposeEntry(t),this.b.delete(i)}});return this.b.set(i,a),a}};function eO(e,t){return`${Fe.toKey(e)}.${t}`}var tO=class{constructor(e){const t=e.getProxy(V.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},US="vscode-cdn.net",iO=`vscode-resource.${US}`,Iw=`'self' https://*.${US}`;function Kl(e,t){return e.scheme===z.http||e.scheme===z.https?e:(t&&t.authority&&t.isRemote&&e.scheme===z.file&&(e=y.from({scheme:z.vscodeRemote,authority:t.authority,path:e.path})),y.from({scheme:z.https,authority:`${e.scheme}+${rO(e.authority)}.${iO}`,path:e.path,fragment:e.fragment,query:e.query}))}function rO(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57?t:"-"+i.toString(16).padStart(4,"0")})}var sO=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new fe,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const r=t.getVisibleTextEditors();for(const s of this.c.values())r.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,r,s){let n;for(const f of this.e.getVisibleTextEditors(!0))if(f.value===e){n=f;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new P,l=new P,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(f){return Kl(f,o.f)}get cspSource(){return Iw}set options(f){this.b=f,o.d.$setOptions(a,f)}get options(){return this.b}set html(f){this.a=f,o.d.$setHtml(a,f)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(f){return o.d.$postMessage(a,f)}},d=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,i,r||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:d,onDidReceiveMessage:c}),d}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}},nO=class oC{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(V.MainThreadCodeMapper)}async $mapCode(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Ni(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(At.from)})},notebookEdit:(c,l)=>{l=Ni(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(yf.from)})}},o={location:i.location,chatRequestId:i.chatRequestId,chatRequestModel:i.chatRequestModel,chatSessionId:i.chatSessionId,codeBlocks:i.codeBlocks.map(c=>({code:c.code,resource:y.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await s.provideMappedEdits(o,n,r)??null}registerMappedEditsProvider(t,i){const r=oC.a++;return this.b.$registerCodeMapperProvider(r,t.displayName??t.name),this.c.set(r,i),{dispose:()=>this.b.$unregisterCodeMapperProvider(r)}}};function HS(e){return(t,i,r)=>{let s=null,n=null;if(typeof r.value=="function"?(s="value",n=r.value):typeof r.get=="function"&&(s="get",n=r.get),!n||typeof i=="symbol")throw new Error("not supported");r[s]=e(n,i)}}function Dw(e,t,i){return HS((r,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{r.apply(this,a),this[o]=i?i():void 0},e)}})}function oO(e,t,i){return HS((r,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}function aO(e,t,i){const r=e.getProxy(V.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Vr,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===6){const w=this.b.get(m.handle);return w?w.value:m}else if(m&&m.$mid===7){const w=m,x=this.b.get(w.commentControlHandle);if(!x)return w;const k=x.getCommentThread(w.commentThreadHandle);return k?k.value:w}else if(m&&(m.$mid===9||m.$mid===8)){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);return x?m.$mid===8?x.value:{thread:x.value,text:m.text}:m}else if(m&&m.$mid===10){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);if(!x)return m;const k=m.commentUniqueId,$=x.getCommentByUniqueId(k);return $||m}else if(m&&m.$mid===11){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);if(!x)return m;const k=m.text,$=m.commentUniqueId,A=x.getCommentByUniqueId($);return A?(typeof A.body=="string"?A.body=k:A.body=new Ii(k),A):m}return m}})}createCommentController(m,w,x){const k=s.a++,$=new o(m,k,w,x);this.b.set($.handle,$);const A=this.c.get(m.identifier)||[];return A.push($),this.c.set(m.identifier,A),$.value}async $createCommentThreadTemplate(m,w,x,k){const $=this.b.get(m);$&&$.$createCommentThreadTemplate(w,x,k)}async $setActiveComment(m,w){const x=this.b.get(m);x&&x.$setActiveComment(w??void 0)}async $updateCommentThreadTemplate(m,w,x){const k=this.b.get(m);k&&k.$updateCommentThreadTemplate(w,x)}$deleteCommentThread(m,w){this.b.get(m)?.$deleteCommentThread(w)}async $updateCommentThread(m,w,x){this.b.get(m)?.$updateCommentThread(w,x)}async $provideCommentingRanges(m,w,x){const k=this.b.get(m);if(!k||!k.commentingRangeProvider)return Promise.resolve(void 0);const $=await i.ensureDocumentData(y.revive(w));return Zt(async()=>{const A=await k.commentingRangeProvider?.provideCommentingRanges($.document,x);let G;return Array.isArray(A)?G={ranges:A,fileComments:!1}:A?G={ranges:A.ranges||[],fileComments:A.enableFileComments||!1}:G=A??void 0,G}).then(A=>{let G;return A&&(G={ranges:A.ranges.map(N=>O.from(N)),fileComments:A.fileComments}),G})}$toggleReaction(m,w,x,k,$){const A=this.b.get(m);return!A||!A.reactionHandler?Promise.resolve(void 0):Zt(()=>{const G=A.getCommentThread(w);if(G){const N=G.getCommentByUniqueId(k.uniqueIdInThread);if(A!==void 0&&N&&A.reactionHandler)return A.reactionHandler(N,l($))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g!==m&&(this.g=m,this.b.collapsibleState=m,this.c.fire())}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(L(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,w,x,k,$,A,G,N,W){this.m=w,this.n=x,this.o=k,this.p=$,this.q=A,this.extensionDescription=G,this.r=N,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new P,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new xs,this.l.value=new fe,this.n===void 0&&(this.n=`${m}.${this.handle}`),r.$createCommentThread(w,this.handle,this.n,this.o,O.from(this.p),this.q.map(K=>a(this,K,this.k,this.extensionDescription)),G.identifier,this.r,W),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{r.$deleteCommentThread(w,this.handle)}});const X=this;this.value={get uri(){return X.uri},get range(){return X.range},set range(K){X.range=K},get comments(){return X.comments},set comments(K){X.comments=K},get collapsibleState(){return X.collapsibleState},set collapsibleState(K){X.collapsibleState=K},get canReply(){return X.canReply},set canReply(K){X.canReply=K},get contextValue(){return X.contextValue},set contextValue(K){X.contextValue=K},get label(){return X.label},set label(K){X.label=K},get state(){return X.state},set state(K){X.state=K},reveal:(K,Y)=>X.reveal(K,Y),hide:()=>X.hide(),dispose:()=>{X.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new fe);const m=x=>Object.prototype.hasOwnProperty.call(this.b,x),w={};m("range")&&(w.range=O.from(this.p)),m("label")&&(w.label=this.label),m("contextValue")&&(w.contextValue=this.contextValue??null),m("comments")&&(w.comments=this.q.map(x=>a(this,x,this.k,this.extensionDescription))),m("collapsibleState")&&(w.collapseState=u(this.g)),m("canReply")&&(w.canReply=this.canReply),m("state")&&(w.state=d(this.h)),m("applicability")&&(w.applicability=f(this.h)),m("isTemplate")&&(w.isTemplate=this.r),this.b={},r.$updateCommentThread(this.m,this.handle,this.n,this.o,w)}getCommentByUniqueId(m){for(const w of this.k){const x=w[0],k=w[1];if(m===k)return x}}async reveal(m,w){L(this.extensionDescription,"commentReveal");let x;m&&m.body!==void 0?x=m:w=w??m;let k=x?this.k.get(x):void 0;k??=this.k.get(this.q[0]);let $=!0,A=!1;return w?.focus===cl.Reply?(A=!0,$=!1):w?.focus===cl.Comment&&($=!1),r.$revealCommentThread(this.m,this.handle,k,{preserveFocus:$,focusReply:A})}async hide(){return r.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([Dw(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&L(this.h,"commentingRangeHint"),r.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,r.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return L(this.h,"activeComment"),this.e}get activeCommentThread(){return L(this.h,"activeComment"),this.f?.value}constructor(m,w,x,k){this.h=m,this.i=w,this.j=x,this.k=k,this.a=new Map,r.$registerCommentController(this.handle,x,k,this.h.identifier.value);const $=this;this.value=Object.freeze({id:$.id,label:$.label,get options(){return $.options},set options(A){$.options=A},get commentingRangeProvider(){return $.commentingRangeProvider},set commentingRangeProvider(A){$.commentingRangeProvider=A},get reactionHandler(){return $.reactionHandler},set reactionHandler(A){$.reactionHandler=A},get activeCommentThread(){return $.activeCommentThread},createCommentThread(A,G,N){return $.createCommentThread(A,G,N).value},dispose:()=>{$.dispose()}}),this.g=[],this.g.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(m,w,x){const k=new n(this.id,this.handle,void 0,m,w,x,this.h,!1);return this.a.set(k.handle,k),k}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const w=this.a.get(m.commentThreadHandle);w&&(this.e=m.uniqueIdInThread?w.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=w)}$createCommentThreadTemplate(m,w,x){const k=new n(this.id,this.handle,void 0,y.revive(m),O.to(w),[],this.h,!0,x);return k.collapsibleState=Uo.Expanded,this.a.set(k.handle,k),k}$updateCommentThreadTemplate(m,w){const x=this.a.get(m);x&&(x.range=O.to(w))}$updateCommentThread(m,w){const x=this.a.get(m);if(!x)return;($=>Object.prototype.hasOwnProperty.call(w,$))("collapseState")&&(x.collapsibleState=u(w.collapseState))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(p,m,w,x){let k=w.get(m);return k||(k=++p.commentHandle,w.set(m,k)),m.state!==void 0&&L(x,"commentsDraftState"),m.reactions?.some($=>$.reactors!==void 0)&&L(x,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:k,body:typeof m.body=="string"?m.body:me.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map($=>c($)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(p){return{label:p.label,iconPath:p.iconPath?Xd(p.iconPath):void 0,count:p.count,hasReacted:p.authorHasReacted,reactors:p.reactors&&p.reactors.length>0&&typeof p.reactors[0]!="string"?p.reactors.map(m=>m.name):p.reactors}}function l(p){return{label:p.label||"",count:p.count||0,iconPath:p.iconPath?y.revive(p.iconPath):"",authorHasReacted:p.hasReacted||!1,reactors:p.reactors?.map(m=>({name:m}))}}function u(p){if(p!==void 0)switch(p){case nl.Expanded:return Uo.Expanded;case nl.Collapsed:return Uo.Collapsed}return Uo.Collapsed}function d(p){let m;if(typeof p=="object"?m=p.resolved:m=p,m!==void 0)switch(m){case ol.Unresolved:return Ic.Unresolved;case ol.Resolved:return Ic.Resolved}return Ic.Unresolved}function f(p){let m;if(typeof p=="object"&&(m=p.applicability),m!==void 0)switch(m){case al.Current:return Dc.Current;case al.Outdated:return Dc.Outdated}return Dc.Current}return new s}var np={},Le={exports:np};(function(e,t){if(typeof np=="object"&&typeof Le=="object")Le.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var r in i)(typeof np=="object"?np:e)[r]=i[r]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(r,s,n){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var o in r)i.d(n,o,function(a){return r[a]}.bind(null,o));return n},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)}([function(e,t,i){(function(r){var s;t=e.exports=ze,s=typeof r=="object"&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var C=Array.prototype.slice.call(arguments,0);C.unshift("SEMVER"),console.log.apply(console,C)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var d=l++;c[d]="[0-9]+";var f=l++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=l++;c[p]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[d]+")\\.("+c[d]+")\\.("+c[d]+")";var w=l++;c[w]="(?:"+c[u]+"|"+c[f]+")";var x=l++;c[x]="(?:"+c[d]+"|"+c[f]+")";var k=l++;c[k]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var $=l++;c[$]="(?:-?("+c[x]+"(?:\\."+c[x]+")*))";var A=l++;c[A]="[0-9A-Za-z-]+";var G=l++;c[G]="(?:\\+("+c[A]+"(?:\\."+c[A]+")*))";var N=l++,W="v?"+c[p]+c[k]+"?"+c[G]+"?";c[N]="^"+W+"$";var X="[v=\\s]*"+c[m]+c[$]+"?"+c[G]+"?",K=l++;c[K]="^"+X+"$";var Y=l++;c[Y]="((?:<|>)?=?)";var le=l++;c[le]=c[d]+"|x|X|\\*";var We=l++;c[We]=c[u]+"|x|X|\\*";var Ce=l++;c[Ce]="[v=\\s]*("+c[We]+")(?:\\.("+c[We]+")(?:\\.("+c[We]+")(?:"+c[k]+")?"+c[G]+"?)?)?";var dt=l++;c[dt]="[v=\\s]*("+c[le]+")(?:\\.("+c[le]+")(?:\\.("+c[le]+")(?:"+c[$]+")?"+c[G]+"?)?)?";var _=l++;c[_]="^"+c[Y]+"\\s*"+c[Ce]+"$";var H=l++;c[H]="^"+c[Y]+"\\s*"+c[dt]+"$";var Q=l++;c[Q]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var q=l++;c[q]="(?:~>?)";var Z=l++;c[Z]="(\\s*)"+c[q]+"\\s+",a[Z]=new RegExp(c[Z],"g");var ve=l++;c[ve]="^"+c[q]+c[Ce]+"$";var Te=l++;c[Te]="^"+c[q]+c[dt]+"$";var xe=l++;c[xe]="(?:\\^)";var Ge=l++;c[Ge]="(\\s*)"+c[xe]+"\\s+",a[Ge]=new RegExp(c[Ge],"g");var Ut=l++;c[Ut]="^"+c[xe]+c[Ce]+"$";var ut=l++;c[ut]="^"+c[xe]+c[dt]+"$";var zt=l++;c[zt]="^"+c[Y]+"\\s*("+X+")$|^$";var ei=l++;c[ei]="^"+c[Y]+"\\s*("+W+")$|^$";var st=l++;c[st]="(\\s*)"+c[Y]+"\\s*("+X+"|"+c[Ce]+")",a[st]=new RegExp(c[st],"g");var Or=l++;c[Or]="^\\s*("+c[Ce]+")\\s+-\\s+("+c[Ce]+")\\s*$";var ho=l++;c[ho]="^\\s*("+c[dt]+")\\s+-\\s+("+c[dt]+")\\s*$";var vs=l++;c[vs]="(<|>)?=?\\s*\\*";for(var ji=0;ji<35;ji++)s(ji,c[ji]),a[ji]||(a[ji]=new RegExp(c[ji]));function Se(C,R){if(C instanceof ze)return C;if(typeof C!="string"||C.length>n||!(R?a[K]:a[N]).test(C))return null;try{return new ze(C,R)}catch{return null}}function ze(C,R){if(C instanceof ze){if(C.loose===R)return C;C=C.version}else if(typeof C!="string")throw new TypeError("Invalid Version: "+C);if(C.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof ze))return new ze(C,R);s("SemVer",C,R),this.loose=R;var F=C.trim().match(R?a[K]:a[N]);if(!F)throw new TypeError("Invalid Version: "+C);if(this.raw=C,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(oe){if(/^[0-9]+$/.test(oe)){var we=+oe;if(we>=0&&we<o)return we}return oe}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}t.parse=Se,t.valid=function(C,R){var F=Se(C,R);return F?F.version:null},t.clean=function(C,R){var F=Se(C.trim().replace(/^[=v]+/,""),R);return F?F.version:null},t.SemVer=ze,ze.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ze.prototype.toString=function(){return this.version},ze.prototype.compare=function(C){return s("SemVer.compare",this.version,this.loose,C),C instanceof ze||(C=new ze(C,this.loose)),this.compareMain(C)||this.comparePre(C)},ze.prototype.compareMain=function(C){return C instanceof ze||(C=new ze(C,this.loose)),wi(this.major,C.major)||wi(this.minor,C.minor)||wi(this.patch,C.patch)},ze.prototype.comparePre=function(C){if(C instanceof ze||(C=new ze(C,this.loose)),this.prerelease.length&&!C.prerelease.length)return-1;if(!this.prerelease.length&&C.prerelease.length)return 1;if(!this.prerelease.length&&!C.prerelease.length)return 0;var R=0;do{var F=this.prerelease[R],oe=C.prerelease[R];if(s("prerelease compare",R,F,oe),F===void 0&&oe===void 0)return 0;if(oe===void 0)return 1;if(F===void 0)return-1;if(F!==oe)return wi(F,oe)}while(++R)},ze.prototype.inc=function(C,R){switch(C){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",R);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",R);break;case"prepatch":this.prerelease.length=0,this.inc("patch",R),this.inc("pre",R);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",R),this.inc("pre",R);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}R&&(this.prerelease[0]===R?isNaN(this.prerelease[1])&&(this.prerelease=[R,0]):this.prerelease=[R,0]);break;default:throw new Error("invalid increment argument: "+C)}return this.format(),this.raw=this.version,this},t.inc=function(C,R,F,oe){typeof F=="string"&&(oe=F,F=void 0);try{return new ze(C,F).inc(R,oe).version}catch{return null}},t.diff=function(C,R){if(Qa(C,R))return null;var F=Se(C),oe=Se(R);if(F.prerelease.length||oe.prerelease.length){for(var we in F)if((we==="major"||we==="minor"||we==="patch")&&F[we]!==oe[we])return"pre"+we;return"prerelease"}for(var we in F)if((we==="major"||we==="minor"||we==="patch")&&F[we]!==oe[we])return we},t.compareIdentifiers=wi;var xu=/^[0-9]+$/;function wi(C,R){var F=xu.test(C),oe=xu.test(R);return F&&oe&&(C=+C,R=+R),F&&!oe?-1:oe&&!F?1:C<R?-1:C>R?1:0}function ai(C,R,F){return new ze(C,F).compare(new ze(R,F))}function en(C,R,F){return ai(C,R,F)>0}function fo(C,R,F){return ai(C,R,F)<0}function Qa(C,R,F){return ai(C,R,F)===0}function Eu(C,R,F){return ai(C,R,F)!==0}function po(C,R,F){return ai(C,R,F)>=0}function Ya(C,R,F){return ai(C,R,F)<=0}function tn(C,R,F,oe){var we;switch(R){case"===":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),we=C===F;break;case"!==":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),we=C!==F;break;case"":case"=":case"==":we=Qa(C,F,oe);break;case"!=":we=Eu(C,F,oe);break;case">":we=en(C,F,oe);break;case">=":we=po(C,F,oe);break;case"<":we=fo(C,F,oe);break;case"<=":we=Ya(C,F,oe);break;default:throw new TypeError("Invalid operator: "+R)}return we}function bi(C,R){if(C instanceof bi){if(C.loose===R)return C;C=C.value}if(!(this instanceof bi))return new bi(C,R);s("comparator",C,R),this.loose=R,this.parse(C),this.semver===Ur?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(C,R){return wi(R,C)},t.major=function(C,R){return new ze(C,R).major},t.minor=function(C,R){return new ze(C,R).minor},t.patch=function(C,R){return new ze(C,R).patch},t.compare=ai,t.compareLoose=function(C,R){return ai(C,R,!0)},t.rcompare=function(C,R,F){return ai(R,C,F)},t.sort=function(C,R){return C.sort(function(F,oe){return t.compare(F,oe,R)})},t.rsort=function(C,R){return C.sort(function(F,oe){return t.rcompare(F,oe,R)})},t.gt=en,t.lt=fo,t.eq=Qa,t.neq=Eu,t.gte=po,t.lte=Ya,t.cmp=tn,t.Comparator=bi;var Ur={};function ct(C,R){if(C instanceof ct)return C.loose===R?C:new ct(C.raw,R);if(C instanceof bi)return new ct(C.value,R);if(!(this instanceof ct))return new ct(C,R);if(this.loose=R,this.raw=C,this.set=C.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+C);this.format()}function Xt(C){return!C||C.toLowerCase()==="x"||C==="*"}function Vp(C,R,F,oe,we,It,_e,Rt,gt,_t,Wi,ht,Lt){return((R=Xt(F)?"":Xt(oe)?">="+F+".0.0":Xt(we)?">="+F+"."+oe+".0":">="+R)+" "+(Rt=Xt(gt)?"":Xt(_t)?"<"+(+gt+1)+".0.0":Xt(Wi)?"<"+gt+"."+(+_t+1)+".0":ht?"<="+gt+"."+_t+"."+Wi+"-"+ht:"<="+Rt)).trim()}function ws(C,R){for(var F=0;F<C.length;F++)if(!C[F].test(R))return!1;if(R.prerelease.length){for(F=0;F<C.length;F++)if(s(C[F].semver),C[F].semver!==Ur&&C[F].semver.prerelease.length>0){var oe=C[F].semver;if(oe.major===R.major&&oe.minor===R.minor&&oe.patch===R.patch)return!0}return!1}return!0}function go(C,R,F){try{R=new ct(R,F)}catch{return!1}return R.test(C)}function Xa(C,R,F,oe){var we,It,_e,Rt,gt;switch(C=new ze(C,oe),R=new ct(R,oe),F){case">":we=en,It=Ya,_e=fo,Rt=">",gt=">=";break;case"<":we=fo,It=po,_e=en,Rt="<",gt="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(go(C,R,oe))return!1;for(var _t=0;_t<R.set.length;++_t){var Wi=R.set[_t],ht=null,Lt=null;if(Wi.forEach(function(ti){ti.semver===Ur&&(ti=new bi(">=0.0.0")),ht=ht||ti,Lt=Lt||ti,we(ti.semver,ht.semver,oe)?ht=ti:_e(ti.semver,Lt.semver,oe)&&(Lt=ti)}),ht.operator===Rt||ht.operator===gt||(!Lt.operator||Lt.operator===Rt)&&It(C,Lt.semver)||Lt.operator===gt&&_e(C,Lt.semver))return!1}return!0}bi.prototype.parse=function(C){var R=this.loose?a[zt]:a[ei],F=C.match(R);if(!F)throw new TypeError("Invalid comparator: "+C);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new ze(F[2],this.loose):this.semver=Ur},bi.prototype.toString=function(){return this.value},bi.prototype.test=function(C){return s("Comparator.test",C,this.loose),this.semver===Ur||(typeof C=="string"&&(C=new ze(C,this.loose)),tn(C,this.operator,this.semver,this.loose))},bi.prototype.intersects=function(C,R){if(!(C instanceof bi))throw new TypeError("a Comparator is required");var F;if(this.operator==="")return F=new ct(C.value,R),go(this.value,F,R);if(C.operator==="")return F=new ct(this.value,R),go(C.semver,F,R);var oe=!(this.operator!==">="&&this.operator!==">"||C.operator!==">="&&C.operator!==">"),we=!(this.operator!=="<="&&this.operator!=="<"||C.operator!=="<="&&C.operator!=="<"),It=this.semver.version===C.semver.version,_e=!(this.operator!==">="&&this.operator!=="<="||C.operator!==">="&&C.operator!=="<="),Rt=tn(this.semver,"<",C.semver,R)&&(this.operator===">="||this.operator===">")&&(C.operator==="<="||C.operator==="<"),gt=tn(this.semver,">",C.semver,R)&&(this.operator==="<="||this.operator==="<")&&(C.operator===">="||C.operator===">");return oe||we||It&&_e||Rt||gt},t.Range=ct,ct.prototype.format=function(){return this.range=this.set.map(function(C){return C.join(" ").trim()}).join("||").trim(),this.range},ct.prototype.toString=function(){return this.range},ct.prototype.parseRange=function(C){var R=this.loose;C=C.trim(),s("range",C,R);var F=R?a[ho]:a[Or];C=C.replace(F,Vp),s("hyphen replace",C),C=C.replace(a[st],"$1$2$3"),s("comparator trim",C,a[st]),C=(C=(C=C.replace(a[Z],"$1~")).replace(a[Ge],"$1^")).split(/\s+/).join(" ");var oe=R?a[zt]:a[ei],we=C.split(" ").map(function(It){return function(_e,Rt){return s("comp",_e),_e=function(gt,_t){return gt.trim().split(/\s+/).map(function(Wi){return function(ht,Lt){s("caret",ht,Lt);var ti=Lt?a[ut]:a[Ut];return ht.replace(ti,function(E,pe,De,B,he){var Ht;return s("caret",ht,E,pe,De,B,he),Xt(pe)?Ht="":Xt(De)?Ht=">="+pe+".0.0 <"+(+pe+1)+".0.0":Xt(B)?Ht=pe==="0"?">="+pe+"."+De+".0 <"+pe+"."+(+De+1)+".0":">="+pe+"."+De+".0 <"+(+pe+1)+".0.0":he?(s("replaceCaret pr",he),he.charAt(0)!=="-"&&(he="-"+he),Ht=pe==="0"?De==="0"?">="+pe+"."+De+"."+B+he+" <"+pe+"."+De+"."+(+B+1):">="+pe+"."+De+"."+B+he+" <"+pe+"."+(+De+1)+".0":">="+pe+"."+De+"."+B+he+" <"+(+pe+1)+".0.0"):(s("no pr"),Ht=pe==="0"?De==="0"?">="+pe+"."+De+"."+B+" <"+pe+"."+De+"."+(+B+1):">="+pe+"."+De+"."+B+" <"+pe+"."+(+De+1)+".0":">="+pe+"."+De+"."+B+" <"+(+pe+1)+".0.0"),s("caret return",Ht),Ht})}(Wi,_t)}).join(" ")}(_e,Rt),s("caret",_e),_e=function(gt,_t){return gt.trim().split(/\s+/).map(function(Wi){return function(ht,Lt){var ti=Lt?a[Te]:a[ve];return ht.replace(ti,function(E,pe,De,B,he){var Ht;return s("tilde",ht,E,pe,De,B,he),Xt(pe)?Ht="":Xt(De)?Ht=">="+pe+".0.0 <"+(+pe+1)+".0.0":Xt(B)?Ht=">="+pe+"."+De+".0 <"+pe+"."+(+De+1)+".0":he?(s("replaceTilde pr",he),he.charAt(0)!=="-"&&(he="-"+he),Ht=">="+pe+"."+De+"."+B+he+" <"+pe+"."+(+De+1)+".0"):Ht=">="+pe+"."+De+"."+B+" <"+pe+"."+(+De+1)+".0",s("tilde return",Ht),Ht})}(Wi,_t)}).join(" ")}(_e,Rt),s("tildes",_e),_e=function(gt,_t){return s("replaceXRanges",gt,_t),gt.split(/\s+/).map(function(Wi){return function(ht,Lt){ht=ht.trim();var ti=Lt?a[H]:a[_];return ht.replace(ti,function(E,pe,De,B,he,Ht){s("xRange",ht,E,pe,De,B,he,Ht);var Su=Xt(De),bs=Su||Xt(B),rn=bs||Xt(he);return pe==="="&&rn&&(pe=""),Su?E=pe===">"||pe==="<"?"<0.0.0":"*":pe&&rn?(bs&&(B=0),rn&&(he=0),pe===">"?(pe=">=",bs?(De=+De+1,B=0,he=0):rn&&(B=+B+1,he=0)):pe==="<="&&(pe="<",bs?De=+De+1:B=+B+1),E=pe+De+"."+B+"."+he):bs?E=">="+De+".0.0 <"+(+De+1)+".0.0":rn&&(E=">="+De+"."+B+".0 <"+De+"."+(+B+1)+".0"),s("xRange return",E),E})}(Wi,_t)}).join(" ")}(_e,Rt),s("xrange",_e),_e=function(gt,_t){return s("replaceStars",gt,_t),gt.trim().replace(a[vs],"")}(_e,Rt),s("stars",_e),_e}(It,R)}).join(" ").split(/\s+/);return this.loose&&(we=we.filter(function(It){return!!It.match(oe)})),we=we.map(function(It){return new bi(It,R)})},ct.prototype.intersects=function(C,R){if(!(C instanceof ct))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(oe){return C.set.some(function(we){return we.every(function(It){return oe.intersects(It,R)})})})})},t.toComparators=function(C,R){return new ct(C,R).set.map(function(F){return F.map(function(oe){return oe.value}).join(" ").trim().split(" ")})},ct.prototype.test=function(C){if(!C)return!1;typeof C=="string"&&(C=new ze(C,this.loose));for(var R=0;R<this.set.length;R++)if(ws(this.set[R],C))return!0;return!1},t.satisfies=go,t.maxSatisfying=function(C,R,F){var oe=null,we=null;try{var It=new ct(R,F)}catch{return null}return C.forEach(function(_e){It.test(_e)&&(oe&&we.compare(_e)!==-1||(we=new ze(oe=_e,F)))}),oe},t.minSatisfying=function(C,R,F){var oe=null,we=null;try{var It=new ct(R,F)}catch{return null}return C.forEach(function(_e){It.test(_e)&&(oe&&we.compare(_e)!==1||(we=new ze(oe=_e,F)))}),oe},t.validRange=function(C,R){try{return new ct(C,R).range||"*"}catch{return null}},t.ltr=function(C,R,F){return Xa(C,R,"<",F)},t.gtr=function(C,R,F){return Xa(C,R,">",F)},t.outside=Xa,t.prerelease=function(C,R){var F=Se(C,R);return F&&F.prerelease.length?F.prerelease:null},t.intersects=function(C,R,F){return C=new ct(C,F),R=new ct(R,F),C.intersects(R)},t.coerce=function(C){if(C instanceof ze)return C;if(typeof C!="string")return null;var R=C.match(a[Q]);return R==null?null:Se((R[1]||"0")+"."+(R[2]||"0")+"."+(R[3]||"0"))}}).call(this,i(1))},function(e,t){var i,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(x){if(i===setTimeout)return setTimeout(x,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(x,0);try{return i(x,0)}catch{try{return i.call(null,x,0)}catch{return i.call(this,x,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:n}catch{i=n}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var x=a(f);u=!0;for(var k=l.length;k;){for(c=l,l=[];++d<k;)c&&c[d].run();d=-1,k=l.length}c=null,u=!1,function($){if(r===clearTimeout)return clearTimeout($);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout($);try{r($)}catch{try{return r.call(null,$)}catch{return r.call(this,$)}}}(x)}}function m(x,k){this.fun=x,this.array=k}function w(){}s.nextTick=function(x){var k=new Array(arguments.length-1);if(arguments.length>1)for(var $=1;$<arguments.length;$++)k[$-1]=arguments[$];l.push(new m(x,k)),l.length!==1||u||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(x){return[]},s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var Jq=Le.exports.SEMVER_SPEC_VERSION,Zq=Le.exports.parse,Qq=Le.exports.valid,Yq=Le.exports.coerce,Xq=Le.exports.clean,Kq=Le.exports.inc,eG=Le.exports.major,tG=Le.exports.minor,iG=Le.exports.patch,rG=Le.exports.prerelease,sG=Le.exports.gt,nG=Le.exports.gte,oG=Le.exports.lt,aG=Le.exports.lte,cG=Le.exports.eq,lG=Le.exports.neq,uG=Le.exports.cmp,hG=Le.exports.compare,dG=Le.exports.rcompare,fG=Le.exports.compareIdentifiers,pG=Le.exports.rcompareIdentifiers,gG=Le.exports.compareBuild,mG=Le.exports.sort,vG=Le.exports.rsort,wG=Le.exports.diff,bG=Le.exports.validRange,yG=Le.exports.satisfies,xG=Le.exports.maxSatisfying,EG=Le.exports.minSatisfying,SG=Le.exports.minVersion,kG=Le.exports.gtr,$G=Le.exports.ltr,CG=Le.exports.outside,IG=Le.exports.intersects,DG=Le.exports.SemVer,PG=Le.exports.Comparator,AG=Le.exports.Range,BS=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,cO=/^-(\d{4})(\d{2})(\d{2})$/;function lO(e){return e=e.trim(),e==="*"||BS.test(e)}function jS(e){if(!lO(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(BS);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function WS(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=cO.exec(e.preRelease);if(c){const[,l,u,d]=c;a=Date.UTC(Number(l),Number(u)-1,Number(d))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var uO=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function hO(e,t){if(t.serializeBuffersForPostMessage){const i=new uO,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=dO(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=i.buffers.map(o=>{const a=new Uint8Array(o);return ae.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function dO(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function fO(e,t){const i=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),r=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}var pO=class{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,i,r,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new P,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new P,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#r=r,this.#n=s,this.#s=n,this.#u=za(n),this.#d=gO(n),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,Kl(e,this.#r)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===z.https||e.scheme===z.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+Iw}return Iw}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),ui(this.#o,e)||this.#t.$setOptions(this.#e,zS(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=hO(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===z.vscodeRemote,i=this.#s.extensionLocation.scheme===z.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Kl(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Kl(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`})}};function za(e){try{const t=WS(jS(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function gO(e){try{const t=WS(jS(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var mO=class extends ne{constructor(e,t,i,r,s){super(),this.c=t,this.f=i,this.g=r,this.h=s,this.b=new Map,this.a=e.getProxy(V.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const r=this.j(e);if(r){const{message:s}=fO(t,i.value);r._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new pO(e,this.a,vO(t),this.c,this.f,i,this.h);this.b.set(e,r);const s=r._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return r}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function op(e){return{id:e.identifier,location:e.extensionLocation}}function zS(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||wO(e,t)}}function vO(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>y.from(t))}}function wO(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var pr=class aC{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){aC.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},bO=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new pr("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=$O(this.document.uri)+this.a++;return Jt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},yO=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const r=this.b(e,t.uri);if(this.a.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new bO(t,i);return this.a.set(r,s),s}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},_S;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(_S||(_S={}));var xO=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:0,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:1,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Ae(()=>this.a.delete(e))}},EO=class{constructor(e,t,i,r,s){this.d=t,this.f=i,this.g=r,this.h=s,this.b=new xO,this.c=new yO,this.a=e.getProxy(V.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const s=new fe;return SO(i)?(s.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(op(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},za(e))):(s.add(this.b.addCustomProvider(t,e,i)),ap(i)&&s.add(i.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(kO(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(op(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,za(e))),Ae.from(s,new Ae(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=y.revive(e),a=await n.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},s);let c;return ap(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:ap(n.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const r=y.revive(e),{document:s}=this.i(t,r);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,i,r,s,n){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=Pt.to(s),c=this.g.createNewWebview(t,r.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,r.title,a,r.options,c,r.active),u=y.revive(e);switch(o.type){case 1:{const{document:d}=this.i(i,u);return o.provider.resolveCustomEditor(d,l,n)}case 0:{const d=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(d,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this.b.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=y.revive(t),o=this.d.getDocument(n);await r.provider.moveCustomTextEditor(o,s,tt.None)}async $undo(e,t,i,r){return this.i(t,e).undo(i,r)}async $redo(e,t,i,r){return this.i(t,e).redo(i,r)}async $revert(e,t,i){const r=this.i(t,e);await this.j(t).revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.i(t,e);await this.j(t).saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,y.revive(i),r)}async $backup(e,t,i){const r=this.i(t,e),n=await this.j(t).backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(n),n.id}i(e,t){const i=this.c.get(e,y.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!ap(i))throw new Error("Custom document is not editable");return i}};function ap(e){return!!e.onDidChangeCustomDocument}function SO(e){return typeof e.resolveCustomTextEditor=="function"}function kO(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function $O(e){const t=e.scheme===z.file||e.scheme===z.untitled?e.fsPath:e.toString();return pc(t)+""}var no,VS=class cC{#e;#t;#i;constructor(t,i,r,s,n,o,a,c){this.d=t,this.e=i,this.f=r,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,r),this.#i=new Nt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,i){if(!t){this.clear();return}this.j();let r=[];if(y.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,i.slice()),r=[t]}else if(Array.isArray(t)){r=[];let o;t=[...t].sort(cC.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,r.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...l);else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(r),!this.#e)return;const s=[];let n=0;for(const o of r){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[Yt.Error,Yt.Warning,Yt.Information,Yt.Hint];e:for(let u=0;u<4;u++)for(const d of c)if(d.severity===l[u]&&a.push({...va.from(d),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:hi.Info,message:h(2881,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...va.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.j();for(const[r,s]of this)t.call(i,r,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.j();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#i.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},Pw=class{static{no=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new Nt;for(const r of t)i.set(r,r);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,r,s){this.j=i,this.k=r,this.l=s,this.g=new Map,this.h=new HI({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=ft.map(this.h.event,no._mapper),this.f=t.getProxy(V.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:r,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(f,p){s.$changeMany(f,p),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,f,p.length===0?"CLEARING":p)}$clear(f){s.$clear(f),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,f)}dispose(){s.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+no.c++,u=i;else if(!r.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+no.c++;while(r.has(u))}return new class extends VS{constructor(){super(i,u,no.e,no.d,f=>c.getDocument(f)?.version,a.extUri,l,n),r.set(u,this)}dispose(){super.dispose(),r.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,r=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=i.get(n.toString());typeof a>"u"&&(a=r.length,i.set(n.toString(),a),r.push([n,[]])),r[a][1]=r[a][1].concat(...o)});return r}}m(t){let i=[];for(const r of this.g.values())r.has(t)&&(i=i.concat(r.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",r=new VS(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(i,r),this.n=r}for(const[i,r]of t)this.n.set(y.revive(i),r.map(va.to))}};Pw=no=__decorate([__param(1,Ve),__param(2,No)],Pw);var CO=class{constructor(e){this.a=e.getProxy(V.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(i=>y.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?y.revive(t):void 0)}},IO=class lC{static{this.a=0}constructor(t,i,r){this.d=i,this.e=r,this.b=new Map,this.c=t.getProxy(V.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(z).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const r=lC.a++;this.b.set(r,i),this.c.$registerTextContentProvider(r,t);let s;if(typeof i.onDidChange=="function"){let n;s=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(r,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=i4(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(Vt).finally(()=>{n===a&&(n=void 0)});n=a})}return new Ae(()=>{this.b.delete(r)&&this.c.$unregisterTextContentProvider(r),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,i){const r=this.b.get(t);return r?Promise.resolve(r.provideTextDocumentContent(y.revive(i),tt.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},DO=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=r,this.a=new Es,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const n={dispose:this.a.push([t,i,e])};return Array.isArray(r)&&r.push(n),n}}async $participateInSave(e,t){const i=y.revive(e);let r=!1;const s=setTimeout(()=>r=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(r)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:lf.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,i],r){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(i,e,t,r).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,r){const s=[],n=Date.now(),{document:o,reason:a}=r,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw Zp("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,d)=>{const f=setTimeout(()=>d(new Error("timeout")),this.g.timeout);return Promise.all(s).then(p=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(f),u(p)}).catch(p=>{clearTimeout(f),d(p)})}).then(u=>{const d={edits:[]};for(const f of u)if(Array.isArray(f)&&f.every(p=>p instanceof Ms))for(const{newText:p,newEol:m,range:w}of f)d.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:w&&O.from(w),text:p,eol:m&&Ea.from(m)}});if(d.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new si(d)):Promise.reject(new Error("concurrent_edits"))})}},PO=class{constructor(e,t){this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new fe,this.h=new Map,this.f=e.getProxy(V.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(i=>{for(const r of i)this.b.fire(r.document)},void 0,this.e),this.g.onDidAddDocuments(i=>{for(const r of i)this.a.fire(r.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e,t){const i=this.g.getDocument(e);if(i&&(!t?.encoding||i.document.encoding===t.encoding))return Promise.resolve(i);let r=this.h.get(e.toString());return r?t?.encoding&&(r=r.then(s=>s.document.encoding!==t.encoding?this.ensureDocumentData(e,t):s)):(r=this.f.$tryOpenDocument(e,t).then(s=>{this.h.delete(e.toString());const n=y.revive(s);return bo(this.g.getDocument(n))},s=>(this.h.delete(e.toString()),Promise.reject(s))),this.h.set(e.toString(),r)),r}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>y.revive(t))}$acceptModelLanguageChanged(e,t){const i=y.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");this.b.fire(r.document),r._acceptLanguageId(t),this.a.fire(r.document)}$acceptModelSaved(e){const t=y.revive(e),i=this.g.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=y.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptEncodingChanged(e,t){const i=y.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");r._acceptEncoding(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const r=y.revive(e),s=this.g.getDocument(r);if(!s)throw new Error("unknown document");s._acceptIsDirty(i),s.onEvents(t);let n;t.isUndoing?n=Yc.Undo:t.isRedoing&&(n=Yc.Redo),this.c.fire(p5({document:s.document,contentChanges:t.changes.map(o=>({range:O.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){TN(e,t)}},AO=class{constructor(e){this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(V.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const r=this.e++;return this.a.$registerEmbeddingProvider(r,t),this.b.set(r,{id:t,provider:i}),se(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(r),this.b.delete(r)})}async computeEmbeddings(e,t,i){i??=tt.None;let r=!1;typeof t=="string"&&(t=[t],r=!0);const s=await this.a.$computeEmbeddings(e,t,i);if(s.length!==t.length)throw new Error;if(r){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,i){const r=this.b.get(e);if(!r)return[];const s=await r.provider.provideEmbeddings(t,i);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},TO=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const r=this.a.get(e);if(!r)throw new Error("Embedding vector provider not found");const s=await r.provideEmbeddingVector(t,i);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiEmbeddingVectorProvider(t,r),new Ae(()=>{this.c.$unregisterAiEmbeddingVectorProvider(r),this.a.delete(r)})}},qS;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(qS||(qS={}));var RO=class{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)r[s]=i;this.a=r,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},GS=class{constructor(e){let t=0,i=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const r=new RO(i,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];r.set(o,a,c)}this.a=r,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},Aw=null;function LO(){return Aw===null&&(Aw=new GS([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Aw}var JS;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(JS||(JS={}));var eu=null;function NO(){if(eu===null){eu=new Gx(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let i=0;i<e.length;i++)eu.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)eu.set(t.charCodeAt(i),2)}return eu}var MO=class Mb{static a(t,i,r,s,n){let o=n-1;do{const a=i.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=i.charCodeAt(s-1),c=i.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:r,startColumn:s+1,endLineNumber:r,endColumn:o+2},url:i.substring(s,o+1)}}static computeLinks(t,i=LO()){const r=NO(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,d=0,f=1,p=!1,m=!1,w=!1,x=!1;for(;l<c;){let k=!1;const $=a.charCodeAt(l);if(f===13){let A;switch($){case 40:p=!0,A=0;break;case 41:A=p?0:1;break;case 91:w=!0,m=!0,A=0;break;case 93:w=!1,A=m?0:1;break;case 123:x=!0,A=0;break;case 125:A=x?0:1;break;case 39:case 34:case 96:d===$?A=1:d===39||d===34||d===96?A=0:A=1;break;case 42:A=d===42?1:0;break;case 124:A=d===124?1:0;break;case 32:A=w?0:1;break;default:A=r.get($)}A===1&&(s.push(Mb.a(r,a,n,u,l)),k=!0)}else if(f===12){let A;$===91?(m=!0,A=0):A=r.get($),A===1?k=!0:f=13}else f=i.nextState(f,$),f===0&&(k=!0);k&&(f=1,p=!1,m=!1,x=!1,u=l+1,d=$),l++}f===13&&s.push(Mb.a(r,a,n,u,c))}return s}},FO=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,r,s=14,n=14;for(const o of e){let a=i?A3(i,o):0;for(a===0?r=1:r=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([r,o.toUpperCase().charCodeAt(a),n]),t.push([r,o.toLowerCase().charCodeAt(a),n]),r=n;i=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new GS(t)}}provideDocumentLinks(e){this.c();const t=[],i=MO.computeLinks({getLineContent(r){return e.lineAt(r-1).text},getLineCount(){return e.lineCount}},this.b);for(const r of i){const s=Jn.to(r);s.target&&t.push(s)}return t}},OO=class Fb{constructor(t,i){this.i=i,this.b=new FO,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(V.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,r,s={}){if(Fb.j(r),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(i),this.d.add(i),this.c.set(n,r);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof r.copy=="function"&&(o+=8),typeof r.open=="function"&&typeof r.close=="function"&&typeof r.read=="function"&&typeof r.write=="function"&&(L(t,"fsChunks"),o+=4);let a;s.isReadonly&&Gr(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=r.onDidChangeFile(l=>{const u=[];for(const d of l){const{uri:f,type:p}=d;if(f.scheme!==i)continue;let m;switch(p){case ua.Changed:m=0;break;case ua.Created:m=1;break;case ua.Deleted:m=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:f,type:m})}this.a.$onFileSystemChange(n,u)});return se(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:r,mtime:s,size:n,permissions:o}=t;return{type:i,ctime:r,mtime:s,size:n,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(y.revive(i))).then(r=>Fb.k(r))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(y.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(y.revive(i))).then(r=>ae.wrap(r))}$writeFile(t,i,r,s){return Promise.resolve(this.l(t).writeFile(y.revive(i),r.buffer,s))}$delete(t,i,r){return Promise.resolve(this.l(t).delete(y.revive(i),r))}$rename(t,i,r,s){return Promise.resolve(this.l(t).rename(y.revive(i),y.revive(r),s))}$copy(t,i,r,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(y.revive(i),y.revive(r),s))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(y.revive(i)))}$watch(t,i,r,s){const n=this.l(t).watch(y.revive(r),s);this.f.set(i,n)}$unwatch(t,i){const r=this.f.get(i);r&&(r.dispose(),this.f.delete(i))}$open(t,i,r){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(y.revive(i),r))}$close(t,i){const r=this.l(t);if(!r.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(r.close(i))}$read(t,i,r,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=ae.alloc(s);return Promise.resolve(n.read(i,r,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,i,r,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(i,r,s.buffer,0,s.byteLength))}l(t){const i=this.c.get(t);if(!i){const r=new Error;throw r.name="ENOPRO",r.message="no provider",r}return i}},RG=class uC extends ne{static{this.a=5}constructor(t,i,r,s){super(),this.h=t,this.j=i,this.m=r,this.n=s,this.c=this.B(new xs),this.f=void 0,this.g=0}s(){const t=new fe;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(i=>this.h(i))),t.add(this.b.onDidLogMessage(i=>this.j(i))),t.add(this.b.onDidError(i=>this.t(i.error,i.request)))}t(t,i){this.u(t,i)?this.g<uC.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,i){return!(!this.n.restartOnError||i||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}};function UO(e,t){return typeof t=="string"&&!t.startsWith($n)&&!Hu(t)?{base:e,pattern:t}:t}var HO=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,r,s,n,o){this.a=Math.random(),this.b=new P,this.c=new P,this.d=new P,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=Wo(n),c=typeof n=="string",l=!1,u=s(d=>{if(!(typeof d.session=="number"&&d.session!==this.a)&&!(l&&typeof d.session>"u")){if(!o.ignoreCreateEvents)for(const f of d.created){const p=y.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.b.fire(p)}if(!o.ignoreChangeEvents)for(const f of d.changed){const p=y.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.c.fire(p)}if(!o.ignoreDeleteEvents)for(const f of d.deleted){const p=y.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.d.fire(p)}}});this.g=Ae.from(this.i(e,i,t,r,n,o,!1),this.b,this.c,this.d,u)}i(e,t,i,r,s,n,o){const a=Ae.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(V.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes($n)||s.pattern.includes(Pm))&&(l=!0);const u=[];let d,f;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(f=14,n.ignoreChangeEvents&&(f&=-3),n.ignoreCreateEvents&&(f&=-5),n.ignoreDeleteEvents&&(f&=-9));else if(l&&u.length===0){const p=t.getWorkspaceFolder(y.revive(s.baseUri)),m=i.getConfiguration("files",p).get("watcherExclude");if(m)for(const w in m)w&&m[w]===!0&&u.push(w)}else if(!l){const p=t.getWorkspaceFolder(y.revive(s.baseUri));if(p){const m=i.getConfiguration("files",p).get("watcherExclude");if(m){for(const w in m)if(w&&m[w]===!0){const x=`${xg(w,"/")}/${$n}`;d||(d=[]),d.push(UO(p.uri.fsPath,x))}}if(!d||d.length===0)return a}}return c.$watch(r.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:d,filter:f},!!o),Ae.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},BO=class{get created(){return this.a.value}get changed(){return this.b.value}get deleted(){return this.c.value}constructor(e){this.d=e,this.a=new yi(()=>this.d.created.map(y.revive)),this.b=new yi(()=>this.d.changed.map(y.revive)),this.c=new yi(()=>this.d.deleted.map(y.revive)),this.session=this.d.session}},jO=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.g=new ic,this.h=new ic,this.i=new ic,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,r,s){return new HO(this.j,t,e,i,this.a.event,Ai.from(r),s)}$onFileEvent(e){this.a.fire(new BO(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:y.revive(i.source),newUri:y.revive(i.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:y.revive(s.source),newUri:y.revive(s.target)}))},i,r);case 1:return await this.n(this.i,{files:t.map(s=>y.revive(s.target))},i,r);case 0:case 3:return await this.n(this.h,{files:t.map(s=>y.revive(s.target))},i,r)}}async n(e,t,i,r){const s=new Set,n=[];if(await e.fireAsync(t,r,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof Tn&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),r.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=Pi.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},WO=class{constructor(e,t,i,r,s){this.a=t,this.b=i,this.c=r;const n=new de("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new U("showOptions","Show Options",o=>!0,o=>o),new U("resource","Interactive resource Uri",o=>!0,o=>o),new U("controllerId","Notebook controller Id",o=>!0,o=>o),new U("title","Interactive editor title",o=>!0,o=>o)],new ue("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,i,r){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1,encoding:"utf8"}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},zO=class{constructor(e){this.b=0,this.a=e.getProxy(V.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),se(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},ZS;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(ZS||(ZS={}));var _O=class Qi extends Oe{constructor(t,i,r,s){super(t,i,r,s),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=r,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return Qi.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,i){return this.getDirection()===0?new Qi(this.startLineNumber,this.startColumn,t,i):new Qi(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new Ui(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ui(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===0?new Qi(t,i,this.endLineNumber,this.endColumn):new Qi(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new Qi(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===0?new Qi(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Qi(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new Qi(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!this.selectionsEqual(t[r],i[r]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,r,s,n){return n===0?new Qi(t,i,r,s):new Qi(r,s,t,i)}},QS=class hC{constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const r=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(r,i);if(!Yp(s))return s[0]instanceof Vc?s.map(fv.from):hC.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const i=[],r=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:qi.from(s.kind),tags:s.tags?.map(ss.from)||[],detail:"",containerName:s.containerName,range:O.from(s.location.range),selectionRange:O.from(s.location.range),children:[]};for(;;){if(r.length===0){r.push(n),i.push(n);break}const o=r[r.length-1];if(Oe.containsRange(o.range,n.range)&&!Oe.equalsRange(o.range,n.range)){o.children?.push(n),r.push(n);break}r.pop()}}return i}},cp=class{constructor(e,t,i,r,s,n){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.d=new pr("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),r=await this.h.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const s=this.d.add(r),n=new fe;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<r.length;a++){if(!Ee.isRange(r[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[s,a],range:O.from(r[a].range),command:this.g.toInternal(r[a].command,n)})}return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let r;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?r=i:r=await this.h.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!r.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(r.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function lp(e){return Array.isArray(e)?e.map(xl.from):e?[xl.from(e)]:[]}var YS=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const r=this.d.getDocument(e),s=je.to(t),n=await this.e.provideDefinition(r,s,i);return lp(n)}},XS=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const r=this.d.getDocument(e),s=je.to(t),n=await this.e.provideDeclaration(r,s,i);return lp(n)}},KS=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const r=this.d.getDocument(e),s=je.to(t),n=await this.e.provideImplementation(r,s,i);return lp(n)}},ek=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const r=this.d.getDocument(e),s=je.to(t),n=await this.e.provideTypeDefinition(r,s,i);return lp(n)}},Tw=class dC{static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,r,s){const n=this.g.getDocument(t),o=je.to(i);let a;if(r&&r.verbosityRequest){const d=r.verbosityRequest.previousHover.id,f=this.e.get(d);if(!f)throw new Error(`Hover with id ${d} not found`);const p={verbosityDelta:r.verbosityRequest.verbosityDelta,previousHover:f};a=await this.h.provideHover(n,o,s,p)}else a=await this.h.provideHover(n,o,s);if(!a||Yp(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new Ee(o,o));const c=El.from(a),l=this.d;if(this.e.size===dC.f){const d=Math.min(...this.e.keys());this.e.delete(d)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},tk=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const r=this.d.getDocument(e),s=je.to(t),n=await this.e.provideEvaluatableExpression(r,s,i);if(n)return mv.from(n)}},ik=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,r){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,O.to(t),tf.to(i),r);if(Array.isArray(n))return n.map(o=>ef.from(o))}},rk=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const r=this.d.getDocument(e),s=je.to(t),n=await this.e.provideDocumentHighlights(r,s,i);if(Array.isArray(n))return n.map(ba.from)}},sk=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideMultiDocumentHighlights(e,t,i,r){const s=this.d.getDocument(e),n=i.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=je.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,r);if(Array.isArray(a))return a.map(vv.from)}},nk=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const r=this.d.getDocument(e),s=je.to(t),n=await this.e.provideLinkedEditingRanges(r,s,i);if(n&&Array.isArray(n.ranges))return{ranges:bt(n.ranges.map(O.from)),wordPattern:n.wordPattern}}},ok=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,r){const s=this.d.getDocument(e),n=je.to(t),o=await this.e.provideReferences(s,n,i,r);if(Array.isArray(o))return o.map(fi.from)}},up=class Wp{static{this.d=1e3}constructor(t,i,r,s,n,o,a){this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new pr("CodeAction"),this.f=new Map}async provideCodeActions(t,i,r,s){const n=this.g.getDocument(t),o=_O.isISelection(i)?lr.to(i):O.to(i),a=[];for(const p of this.j.getDiagnostics(t))if(o.intersection(p.range)&&a.push(p)>Wp.d)break;const c={diagnostics:a,only:r.only?new at(r.only):void 0,triggerKind:Rv.to(r.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!vo(l)||s.isCancellationRequested)return;const u=this.e.add(l),d=new fe;this.f.set(u,d);const f=[];for(let p=0;p<l.length;p++){const m=l[p];if(m)if(Wp.o(m)&&!(m instanceof Gc))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),f.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,d)});else{const w=m;c.only&&(w.kind?c.only.contains(w.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${w.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const x=w.ranges??[];f.push({cacheId:[u,p],title:w.title,command:w.command&&this.h.toInternal(w.command,d),diagnostics:w.diagnostics&&w.diagnostics.map(va.from),edit:w.edit&&Pi.from(w.edit,void 0),kind:w.kind&&w.kind.value,isPreferred:w.isPreferred,isAI:Ze(this.m,"codeActionAI")?w.isAI:!1,ranges:Ze(this.m,"codeActionRanges")?bt(x.map(O.from)):void 0,disabled:w.disabled?.reason})}}return{cacheId:u,actions:f}}async resolveCodeAction(t,i){const[r,s]=t,n=this.e.get(r,s);if(!n||Wp.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,i)??n;let a;o.edit&&(a=Pi.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(r);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},tu=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.e=new pr("DocumentPasteEdit.edits")}async prepareDocumentPaste(e,t,i,r){if(!this.h.prepareDocumentPaste)return;this.d=void 0;const s=this.g.getDocument(e),n=t.map(u=>O.to(u)),o=Da.toDataTransfer(i,()=>{throw new VC});if(await this.h.prepareDocumentPaste(s,n,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter(([,u])=>!(u instanceof gd)),c=new Map,l=await Promise.all(Array.from(a,async([u,d])=>{const f=Mt();return c.set(f,d),[u,await Qn.from(u,d,f)]}));return this.d=c,{items:l}}async providePasteEdits(e,t,i,r,s,n){if(!this.h.provideDocumentPasteEdits)return[];const o=this.g.getDocument(t),a=i.map(f=>O.to(f)),c=r.items.map(([f,p])=>{const m=this.d?.get(p.id);return m?[f,m]:[f,Qn.to(f,p,async w=>(await this.f.$resolvePasteFileData(this.j,e,w)).buffer)]}),l=new oa(c),u=await this.h.provideDocumentPasteEdits(o,a,l,{only:s.only?new Us(s.only):void 0,triggerKind:s.triggerKind},n);if(!u||n.isCancellationRequested)return[];const d=this.e.add(u);return u.map((f,p)=>({_cacheId:[d,p],title:f.title??h(2884,null,this.k.displayName||this.k.name),kind:f.kind,yieldTo:f.yieldTo?.map(m=>m.value),insertText:typeof f.insertText=="string"?f.insertText:{snippet:f.insertText.value},additionalEdit:f.additionalEdit?Pi.from(f.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,r]=e,s=this.e.get(i,r);if(!s||!this.h.resolveDocumentPasteEdit)return{};const n=await this.h.resolveDocumentPasteEdit(s,t)??s;return{insertText:n.insertText,additionalEdit:n.additionalEdit?Pi.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.e.delete(e)}},ak=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(s))return s.map(At.from)}},Rw=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const s=this.d.getDocument(e),n=O.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(At.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){iy(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(O.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(At.from)}},ck=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,s){const n=this.d.getDocument(e),o=je.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,i,r,s);if(Array.isArray(a))return a.map(At.from)}},hp=class{constructor(e,t){this.e=e,this.f=t,this.d=new pr("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!vo(i))return{symbols:[]};const r=this.d.add(i),s={cacheId:r,symbols:[]};for(let n=0;n<i.length;n++){const o=i[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...qn.from(o),cacheId:[r,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const r=await this.e.resolveWorkspaceSymbol(i,t);return r&&vn(e,qn.from(r),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},dp=class Ob{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,r){this.d=t,this.e=i,this.f=r}async provideRenameEdits(t,i,r,s){const n=this.d.getDocument(t),o=je.to(i);try{const a=await this.e.provideRenameEdits(n,o,r,s);return a?Pi.from(a):void 0}catch(a){const c=Ob.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,r){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=je.to(i);try{const o=await this.e.prepareRename(s,n,r);let a,c;if(Ee.isRange(o)?(a=o,c=s.getText(o)):yt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:O.from(a),text:c}}catch(o){const a=Ob.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Lw=class Ub{static{this.d={[hh.Invoke]:sl.Invoke,[hh.Automatic]:sl.Automatic}}constructor(t,i,r){this.e=t,this.f=i,this.g=r}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,r,s){const n=this.e.getDocument(t),o=O.to(i);try{const a=Ub.d[r],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(Ub.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Nw=class{constructor(e,t){this.resultId=e,this.tokens=t}},Mw=class mr{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,r){const s=this.f.getDocument(t),n=i!==0?this.d.get(i):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,r):await this.g.provideDocumentSemanticTokens(s,r);return n&&this.d.delete(i),o?(o=mr.h(o),this.o(mr.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return mr.j(t)?mr.k(t)?t:new ha(new Uint32Array(t.data),t.resultId):mr.l(t)?mr.m(t)?t:new Sd(t.edits.map(i=>new g8(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!mr.j(i)||!t||!t.tokens)return i;const r=t.tokens,s=r.length,n=i.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&r[a]===n[a];)a++;if(a===s&&a===o)return new Sd([],i.resultId);let l=0;const u=c-a;for(;l<u&&r[s-l-1]===n[o-l-1];)l++;return new Sd([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],i.resultId)}o(t,i){if(mr.j(t)){const r=this.e++;return this.d.set(r,new Nw(t.resultId,t.data)),$w({id:r,type:"full",data:t.data})}if(mr.l(t)){const r=this.e++;return mr.j(i)?this.d.set(r,new Nw(i.resultId,i.data)):this.d.set(r,new Nw(t.resultId)),$w({id:r,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},lk=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(r,O.to(t),i);return s?this.f(s):null}f(e){return $w({id:0,type:"full",data:e.data})}},iu=class fC{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,r,s,n){this.f=t,this.g=i,this.h=r,this.j=s,this.k=n,this.d=new pr("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,r,s){const n=this.f.getDocument(t),o=je.to(i),a=n.getWordRangeAtPosition(o)||new Ee(o,o),c=a.with({end:o}),l=new cn,u=await this.h.provideCompletionItems(n,o,s,bv.to(r));if(!u||s.isCancellationRequested)return;const d=Array.isArray(u)?new Xo(u):u,f=fC.supportsResolving(this.h)?this.d.add(d.items):this.d.add([]),p=new fe;this.e.set(f,p);const m=[],w={x:f,b:m,a:{replace:O.from(a),insert:O.from(c)},c:d.isIncomplete||void 0,d:l.elapsed()};for(let x=0;x<d.items.length;x++){const k=d.items[x],$=this.l(k,[f,x],c,a);m.push($)}return w}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const r=this.d.get(...t);if(!r)return;const s=this.l(r,t),n=await this.h.resolveCompletionItem(r,i);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!ui(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,r,s){const n=this.e.get(i[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:i,a:t.label,b:t.kind!==void 0?sf.from(t.kind):void 0,m:t.tags&&t.tags.map(rf.from),c:t.detail,d:typeof t.documentation>"u"?void 0:me.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(At.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof Rn&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),Ee.isRange(c)?a.j=O.from(c):c&&(!r?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:O.from(c.inserting),replace:O.from(c.replacing)}),a}},Xs=class{constructor(e,t,i,r){this.f=e,this.g=t,this.h=i,this.j=r,this.d=new uk,this.e=Ze(this.f,"inlineCompletionsAdditions"),this.k={[lh.Automatic]:rl.Automatic,[lh.Explicit]:rl.Invoke}}get supportsHandleEvents(){return Ze(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function"||typeof this.h.handleDidRejectCompletionItem=="function"||typeof this.h.handleEndOfLifetime=="function")}async provideInlineCompletions(e,t,i,r){const s=this.g.getDocument(e),n=je.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:O.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],requestUuid:i.requestUuid},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let m;f.command&&(u||(u=new fe),m=this.j.toInternal(f.command,u));let w;f.action&&(u||(u=new fe),w=this.j.toInternal(f.action,u));const x=f.insertText;return{insertText:typeof x=="string"?x:{snippet:x.value},filterText:f.filterText,range:f.range?O.from(f.range):void 0,showRange:this.e&&f.showRange?O.from(f.showRange):void 0,command:m,action:w,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1,isInlineEdit:this.e?f.isInlineEdit:!1,showInlineEditMenu:this.e?f.showInlineEditMenu:!1,displayLocation:f.displayLocation&&this.e?{range:O.from(f.displayLocation.range),label:f.displayLocation.label}:void 0,warning:f.warning&&this.e?{message:me.from(f.warning.message),icon:f.warning.icon?Vv.fromThemeIcon(f.warning.icon):void 0}:void 0}}),commands:c.map(f=>(u||(u=new fe),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,i,r){if(!this.h.provideInlineEditsForRange)return;L(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=O.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:O.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],userPrompt:i.userPrompt,requestUuid:i.requestUuid},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let m;f.command&&(u||(u=new fe),m=this.j.toInternal(f.command,u));let w;f.action&&(u||(u=new fe),w=this.j.toInternal(f.action,u));const x=f.insertText;return{insertText:typeof x=="string"?x:{snippet:x.value},filterText:f.filterText,range:f.range?O.from(f.range):void 0,command:m,action:w,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new fe),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this.d.get(e)?.items[t];r&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i,r){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,i),this.h.handleDidPartiallyAcceptCompletionItem(s,jv.to(r)))}handleEndOfLifetime(e,t,i){const r=this.d.get(e)?.items[t];if(r&&this.h.handleEndOfLifetime&&this.e){const s=zv.to(i,n=>this.d.get(n.pid)?.items[n.idx]);this.h.handleEndOfLifetime(r,s)}}handleRejection(e,t){const i=this.d.get(e)?.items[t];i&&this.h.handleDidRejectCompletionItem&&this.e&&this.h.handleDidRejectCompletionItem(i)}},Fw=class{async provideInlineEdits(e,t,i){const r=this.f.getDocument(e),s=await this.g.provideInlineEdit(r,{triggerKind:this.e[t.triggerKind],requestUuid:t.requestUuid},i);if(!s||i.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new fe),a=this.h.toInternal(s.accepted,n));let c;s.rejected&&(n||(n=new fe),c=this.h.toInternal(s.rejected,n));let l;s.shown&&(n||(n=new fe),l=this.h.toInternal(s.shown,n));let u;return s.action&&(n||(n=new fe),u=this.h.toInternal(s.action,n)),n||(n=new fe),{pid:o,text:s.text,range:O.from(s.range),showRange:O.from(s.showRange),accepted:a,rejected:c,shown:l,action:u,commands:s.commands?.map(f=>this.h.toInternal(f,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,i,r){this.f=t,this.g=i,this.h=r,this.d=new uk,this.e={[dh.Automatic]:wl.Automatic,[dh.Invoke]:wl.Invoke}}},uk=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},Ow=class{constructor(e,t){this.e=e,this.f=t,this.d=new pr("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const s=this.e.getDocument(e),n=je.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(s,n,r,o);if(a){const c=this.d.add([a]);return{...Sl.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=Sl.to(e.activeSignatureHelp),r=this.d.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},fp=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.d=new pr("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const r=this.f.getDocument(e),s=O.to(t),n=await this.h.provideInlayHints(r,s,i);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new fe);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const r=await this.h.resolveInlayHint(i,t);if(r&&this.l(r))return this.m(r,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:me.fromStrict(e.tooltip),position:je.from(e.position),textEdits:e.textEdits&&e.textEdits.map(At.from),kind:e.kind&&af.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")r.label=e.label;else{const s=[];r.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:me.fromStrict(n.tooltip)};Hi.isLocation(n.location)&&(o.location=fi.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,i)),s.push(o)}}return r}},pp=class zp{constructor(t,i){this.e=t,this.f=i,this.d=new pr("DocumentLink")}async provideLinks(t,i){const r=this.e.getDocument(t),s=await this.f.provideDocumentLinks(r,i);if(!(!Array.isArray(s)||s.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(zp.g).map(Jn.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!zp.g(s[a]))continue;const c=Jn.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const r=this.d.get(...t);if(!r)return;const s=await this.f.resolveDocumentLink(r,i);if(!(!s||!zp.g(s)))return Jn.from(s)}releaseLinks(t){this.d.delete(t)}},Uw=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),r=await this.e.provideDocumentColors(i,t);return Array.isArray(r)?r.map(n=>({color:ya.from(n.color),range:O.from(n.range)})):[]}async provideColorPresentations(e,t,i){const r=this.d.getDocument(e),s=O.to(t.range),n=ya.to(t.color),o=await this.e.provideColorPresentations(n,{document:r,range:s},i);if(Array.isArray(o))return o.map(cf.from)}},hk=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideFoldingRanges(r,t,i);if(Array.isArray(s))return s.map(uf.from)}},dk=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const r=this.d.getDocument(e),s=t.map(je.to),n=await this.e.provideSelectionRanges(r,s,i);if(!vo(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(Sv.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},ru=class{constructor(e,t){this.f=e,this.g=t,this.d=new Vf(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=je.to(t),n=await this.g.prepareCallHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(r,i);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>O.from(o))}))}async provideCallsFrom(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(r,i);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>O.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Gn.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},su=class{constructor(e,t){this.f=e,this.g=t,this.d=new Vf(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=je.to(t),n=await this.g.prepareTypeHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(r,i);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(r,i);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Zn.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},gp=class{constructor(e,t,i,r,s){this.e=e,this.f=t,this.g=i,this.h=r,this.j=s,this.d=new pr("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,r,s){const n=this.f.getDocument(t),o=je.to(i),a=Da.toDataTransfer(r,async d=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,d)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=Ni(c),u=this.d.add(l);return l.map((d,f)=>({_cacheId:[u,f],title:d.title??h(2885,null,this.j.displayName||this.j.name),kind:d.kind?.value,yieldTo:d.yieldTo?.map(p=>p.value),insertText:typeof d.insertText=="string"?d.insertText:{snippet:d.insertText.value},additionalEdit:d.additionalEdit?Pi.from(d.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,r]=e,s=this.d.get(i,r);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?Pi.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},nu=class{constructor(e,t){this.adapter=e,this.extension=t}},VO=class Ot{static{this.d=0}constructor(t,i,r,s,n,o,a,c){this.g=i,this.h=r,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(V.MainThreadLanguageFeatures)}o(t,i){return ma.from(t,this.g,i)}p(t){return new Ae(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return Ot.d++}async s(t,i,r,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof i))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${r.toString().replace(/[\r\n]/g,"")}'`);const l=r(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{ys(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),tt.isCancellationToken(n)?k4(l,n):l}t(t,i){const r=this.q();return this.f.set(r,new nu(t,i)),r}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,r,s){const n=this.t(new QS(this.h,r),t),o=s&&s.label||Ot.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(i,t),o),this.p(n)}$provideDocumentSymbols(t,i,r){return this.s(t,QS,s=>s.provideDocumentSymbols(y.revive(i),r),void 0,r)}registerCodeLensProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new nu(new cp(this.h,this.j.converter,r,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(i,t),n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Ae.from(o,a)}return o}$provideCodeLenses(t,i,r){return this.s(t,cp,s=>s.provideCodeLenses(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveCodeLens(t,i,r){return this.s(t,cp,s=>s.resolveCodeLens(i,r),void 0,void 0,!0)}$releaseCodeLenses(t,i){this.s(t,cp,r=>Promise.resolve(r.releaseCodeLenses(i)),void 0,void 0,!0)}registerDefinitionProvider(t,i,r){const s=this.t(new YS(this.h,r),t);return this.e.$registerDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideDefinition(t,i,r,s){return this.s(t,YS,n=>n.provideDefinition(y.revive(i),r,s),[],s)}registerDeclarationProvider(t,i,r){const s=this.t(new XS(this.h,r),t);return this.e.$registerDeclarationSupport(s,this.o(i,t)),this.p(s)}$provideDeclaration(t,i,r,s){return this.s(t,XS,n=>n.provideDeclaration(y.revive(i),r,s),[],s)}registerImplementationProvider(t,i,r){const s=this.t(new KS(this.h,r),t);return this.e.$registerImplementationSupport(s,this.o(i,t)),this.p(s)}$provideImplementation(t,i,r,s){return this.s(t,KS,n=>n.provideImplementation(y.revive(i),r,s),[],s)}registerTypeDefinitionProvider(t,i,r){const s=this.t(new ek(this.h,r),t);return this.e.$registerTypeDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideTypeDefinition(t,i,r,s){return this.s(t,ek,n=>n.provideTypeDefinition(y.revive(i),r,s),[],s)}registerHoverProvider(t,i,r,s){const n=this.t(new Tw(this.h,r),t);return this.e.$registerHoverProvider(n,this.o(i,t)),this.p(n)}$provideHover(t,i,r,s,n){return this.s(t,Tw,o=>o.provideHover(y.revive(i),r,s,n),void 0,n)}$releaseHover(t,i){this.s(t,Tw,r=>Promise.resolve(r.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,r,s){const n=this.t(new tk(this.h,r),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(i,t)),this.p(n)}$provideEvaluatableExpression(t,i,r,s){return this.s(t,tk,n=>n.provideEvaluatableExpression(y.revive(i),r,s),void 0,s)}registerInlineValuesProvider(t,i,r,s){const n=typeof r.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new ik(this.h,r),t);this.e.$registerInlineValuesProvider(o,this.o(i,t),n);let a=this.p(o);if(n!==void 0){const c=r.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Ae.from(a,c)}return a}$provideInlineValues(t,i,r,s,n){return this.s(t,ik,o=>o.provideInlineValues(y.revive(i),r,s,n),void 0,n)}registerDocumentHighlightProvider(t,i,r){const s=this.t(new rk(this.h,r),t);return this.e.$registerDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,i,r){const s=this.t(new sk(this.h,r,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}$provideDocumentHighlights(t,i,r,s){return this.s(t,rk,n=>n.provideDocumentHighlights(y.revive(i),r,s),void 0,s)}$provideMultiDocumentHighlights(t,i,r,s,n){return this.s(t,sk,o=>o.provideMultiDocumentHighlights(y.revive(i),r,s.map(a=>y.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,i,r){const s=this.t(new nk(this.h,r),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(i,t)),this.p(s)}$provideLinkedEditingRanges(t,i,r,s){return this.s(t,nk,async n=>{const o=await n.provideLinkedEditingRanges(y.revive(i),r,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Ot.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,i,r){const s=this.t(new ok(this.h,r),t);return this.e.$registerReferenceSupport(s,this.o(i,t)),this.p(s)}$provideReferences(t,i,r,s,n){return this.s(t,ok,o=>o.provideReferences(y.revive(i),r,s,n),void 0,n)}registerCodeActionProvider(t,i,r,s){const n=new fe,o=this.t(new up(this.h,this.j.converter,this.k,r,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(i,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},Ot.u(t),Ot.w(t),!!r.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,i,r,s,n){return this.s(t,up,o=>o.provideCodeActions(y.revive(i),r,s,n),void 0,n)}$resolveCodeAction(t,i,r){return this.s(t,up,s=>s.resolveCodeAction(i,r),{},void 0)}$releaseCodeActions(t,i){this.s(t,up,r=>Promise.resolve(r.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,r){const s=this.t(new ak(this.h,r),t);return this.e.$registerDocumentFormattingSupport(s,this.o(i,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,i,r,s){return this.s(t,ak,n=>n.provideDocumentFormattingEdits(y.revive(i),r,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,i,r){const s=typeof r.provideDocumentRangesFormattingEdits=="function",n=this.t(new Rw(this.h,r),t);return this.e.$registerRangeFormattingSupport(n,this.o(i,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,i,r,s,n){return this.s(t,Rw,o=>o.provideDocumentRangeFormattingEdits(y.revive(i),r,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,i,r,s,n){return this.s(t,Rw,o=>o.provideDocumentRangesFormattingEdits(y.revive(i),r,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,i,r,s){const n=this.t(new ck(this.h,r),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(i,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,i,r,s,n,o){return this.s(t,ck,a=>a.provideOnTypeFormattingEdits(y.revive(i),r,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const r=this.t(new hp(i,this.l),t);return this.e.$registerNavigateTypeSupport(r,typeof i.resolveWorkspaceSymbol=="function"),this.p(r)}$provideWorkspaceSymbols(t,i,r){return this.s(t,hp,s=>s.provideWorkspaceSymbols(i,r),{symbols:[]},r)}$resolveWorkspaceSymbol(t,i,r){return this.s(t,hp,s=>s.resolveWorkspaceSymbol(i,r),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.s(t,hp,r=>r.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,r){const s=this.t(new dp(this.h,r,this.l),t);return this.e.$registerRenameSupport(s,this.o(i,t),dp.supportsResolving(r)),this.p(s)}$provideRenameEdits(t,i,r,s,n){return this.s(t,dp,o=>o.provideRenameEdits(y.revive(i),r,s,n),void 0,n)}$resolveRenameLocation(t,i,r,s){return this.s(t,dp,n=>n.resolveRenameLocation(y.revive(i),r,s),void 0,s)}registerNewSymbolNamesProvider(t,i,r){const s=this.t(new Lw(this.h,r,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(i,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,Lw,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,r,s,n){return this.s(t,Lw,o=>o.provideNewSymbolNames(y.revive(i),r,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,i,r,s){const n=this.t(new Mw(this.h,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(i,t),s,o);let a=this.p(n);if(o){const c=r.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Ae.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,r,s){return this.s(t,Mw,n=>n.provideDocumentSemanticTokens(y.revive(i),r,s),null,s)}$releaseDocumentSemanticTokens(t,i){this.s(t,Mw,r=>r.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,r,s){const n=this.t(new lk(this.h,r),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(i,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,i,r,s){return this.s(t,lk,n=>n.provideDocumentRangeSemanticTokens(y.revive(i),r,s),null,s)}registerCompletionItemProvider(t,i,r,s){const n=this.t(new iu(this.h,this.j.converter,r,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(i,t),s,iu.supportsResolving(r),t.identifier),this.p(n)}$provideCompletionItems(t,i,r,s,n){return this.s(t,iu,o=>o.provideCompletionItems(y.revive(i),r,s,n),void 0,n)}$resolveCompletionItem(t,i,r){return this.s(t,iu,s=>s.resolveCompletionItem(i,r),void 0,r)}$releaseCompletionItems(t,i){this.s(t,iu,r=>r.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,r,s){const n=typeof r.onDidChange=="function"&&Ze(t,"inlineCompletionsAdditions")?this.q():void 0,o=new Xs(t,this.h,r,this.j.converter),a=this.t(o,t);let c=this.p(a);if(n!==void 0){const l=r.onDidChange(u=>this.e.$emitInlineCompletionsChange(n));c=Ae.from(c,l)}return this.e.$registerInlineCompletionsSupport(a,this.o(i,t),o.supportsHandleEvents,Fe.toKey(t.identifier.value),s?.yieldTo?.map(l=>Fe.toKey(l))||[],s?.displayName,s?.debounceDelayMs,n),c}$provideInlineCompletions(t,i,r,s,n){return this.s(t,Xs,o=>o.provideInlineCompletions(y.revive(i),r,s,n),void 0,n)}$provideInlineEditsForRange(t,i,r,s,n){return this.s(t,Xs,o=>o.provideInlineEditsForRange(y.revive(i),r,s,n),void 0,n)}$handleInlineCompletionDidShow(t,i,r,s){this.s(t,Xs,async n=>{n.handleDidShowCompletionItem(i,r,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,r,s,n){this.s(t,Xs,async o=>{o.handlePartialAccept(i,r,s,n)},void 0,void 0)}$handleInlineCompletionEndOfLifetime(t,i,r,s){this.s(t,Xs,async n=>{n.handleEndOfLifetime(i,r,s)},void 0,void 0)}$handleInlineCompletionRejection(t,i,r){this.s(t,Xs,async s=>{s.handleRejection(i,r)},void 0,void 0)}$freeInlineCompletionsList(t,i){this.s(t,Xs,async r=>{r.disposeCompletions(i)},void 0,void 0)}registerInlineEditProvider(t,i,r){const s=new Fw(t,this.h,r,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(i,t),t.identifier,r.displayName||t.name),this.p(n)}$provideInlineEdit(t,i,r,s){return this.s(t,Fw,n=>n.provideInlineEdits(y.revive(i),r,s),void 0,s)}$freeInlineEdit(t,i){this.s(t,Fw,async r=>{r.disposeEdit(i)},void 0,void 0)}registerSignatureHelpProvider(t,i,r,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new Ow(this.h,r),t);return this.e.$registerSignatureHelpProvider(o,this.o(i,t),n),this.p(o)}$provideSignatureHelp(t,i,r,s,n){return this.s(t,Ow,o=>o.provideSignatureHelp(y.revive(i),r,s,n),void 0,n)}$releaseSignatureHelp(t,i){this.s(t,Ow,r=>r.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,r){const s=typeof r.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new fp(this.h,this.j.converter,r,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(i,t),typeof r.resolveInlayHint=="function",s,Ot.u(t));let o=this.p(n);if(s!==void 0){const a=r.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Ae.from(o,a)}return o}$provideInlayHints(t,i,r,s){return this.s(t,fp,n=>n.provideInlayHints(y.revive(i),r,s),void 0,s)}$resolveInlayHint(t,i,r){return this.s(t,fp,s=>s.resolveInlayHint(i,r),void 0,r)}$releaseInlayHints(t,i){this.s(t,fp,r=>r.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,r){const s=this.t(new pp(this.h,r),t);return this.e.$registerDocumentLinkProvider(s,this.o(i,t),typeof r.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,i,r){return this.s(t,pp,s=>s.provideLinks(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveDocumentLink(t,i,r){return this.s(t,pp,s=>s.resolveLink(i,r),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.s(t,pp,r=>r.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,r){const s=this.t(new Uw(this.h,r),t);return this.e.$registerDocumentColorProvider(s,this.o(i,t)),this.p(s)}$provideDocumentColors(t,i,r){return this.s(t,Uw,s=>s.provideColors(y.revive(i),r),[],r)}$provideColorPresentations(t,i,r,s){return this.s(t,Uw,n=>n.provideColorPresentations(y.revive(i),r,s),void 0,s)}registerFoldingRangeProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new nu(new hk(this.h,r),t)),this.e.$registerFoldingRangeProvider(s,this.o(i,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Ae.from(o,a)}return o}$provideFoldingRanges(t,i,r,s){return this.s(t,hk,n=>n.provideFoldingRanges(y.revive(i),r,s),void 0,s)}registerSelectionRangeProvider(t,i,r){const s=this.t(new dk(this.h,r,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(i,t)),this.p(s)}$provideSelectionRanges(t,i,r,s){return this.s(t,dk,n=>n.provideSelectionRanges(y.revive(i),r,s),[],s)}registerCallHierarchyProvider(t,i,r){const s=this.t(new ru(this.h,r),t);return this.e.$registerCallHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareCallHierarchy(t,i,r,s){return this.s(t,ru,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,i,r,s){return this.s(t,ru,n=>n.provideCallsTo(i,r,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,i,r,s){return this.s(t,ru,n=>n.provideCallsFrom(i,r,s),void 0,s)}$releaseCallHierarchy(t,i){this.s(t,ru,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,r){const s=this.t(new su(this.h,r),t);return this.e.$registerTypeHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareTypeHierarchy(t,i,r,s){return this.s(t,su,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideTypeHierarchySupertypes(t,i,r,s){return this.s(t,su,n=>n.provideSupertypes(i,r,s),void 0,s)}$provideTypeHierarchySubtypes(t,i,r,s){return this.s(t,su,n=>n.provideSubtypes(i,r,s),void 0,s)}$releaseTypeHierarchy(t,i){this.s(t,su,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new nu(new gp(this.e,this.h,r,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(i,t),s?{supportsResolve:!!r.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,i,r,s,n,o){return this.s(t,gp,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,y.revive(r),s,n,o)),void 0,void 0)}$resolveDropEdit(t,i,r){return this.s(t,gp,s=>s.resolveDropEdit(i,r),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.s(t,gp,r=>Promise.resolve(r.releaseDropEdits(i)),void 0,void 0)}registerDocumentPasteEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new nu(new tu(this.e,this.h,r,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(i,t),{supportsCopy:!!r.prepareDocumentPaste,supportsPaste:!!r.provideDocumentPasteEdits,supportsResolve:!!r.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,i,r,s,n){return this.s(t,tu,o=>o.prepareDocumentPaste(y.revive(i),r,s,n),void 0,n)}$providePasteEdits(t,i,r,s,n,o,a){return this.s(t,tu,c=>c.providePasteEdits(i,y.revive(r),s,n,o,a),void 0,a)}$resolvePasteEdit(t,i,r){return this.s(t,tu,s=>s.resolvePasteEdit(i,r),{},void 0)}$releasePasteEdits(t,i){this.s(t,tu,r=>Promise.resolve(r.releasePasteEdits(i)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:Ot.y(t.decreaseIndentPattern),increaseIndentPattern:Ot.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Ot.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Ot.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:Ot.y(t.beforeText),afterText:t.afterText?Ot.y(t.afterText):void 0,previousLineText:t.previousLineText?Ot.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(Ot.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>ra.toString(i)):void 0}}static E(t){return t.map(Ot.D)}setLanguageConfiguration(t,i,r){const{wordPattern:s}=r;if(s&&t4(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(i,s):this.h.setWordDefinitionFor(i,void 0),r.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),r.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:r.comments,brackets:r.brackets,wordPattern:r.wordPattern?Ot.y(r.wordPattern):void 0,indentationRules:r.indentationRules?Ot.z(r.indentationRules):void 0,onEnterRules:r.onEnterRules?Ot.C(r.onEnterRules):void 0,__electricCharacterSupport:r.__electricCharacterSupport,__characterPairSupport:r.__characterPairSupport,autoClosingPairs:r.autoClosingPairs?Ot.E(r.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,i,o),this.p(n)}$setWordDefinitions(t){for(const i of t)this.h.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}},fk;(function(e){function t(i){switch(i.type){case"extension":return`extension:${i.extensionId.value}`;case"mcp":return`mcp:${i.collectionId}:${i.definitionId}`;case"internal":return"internal"}}e.toKey=t})(fk||(fk={}));function qO(e){return typeof e=="object"&&typeof e.sessionId=="string"}var GO=j("ILanguageModelToolsService"),JO=j("notebookService"),ZO=j("codeMapperService"),pk="vscode_editFile",Hw="vscode_editFile_internal",gk={id:Hw,displayName:"",modelDescription:"",source:{type:"internal"}},Bw=class{constructor(t,i,r){this.a=t,this.b=i,this.c=r}async invoke(t,i,r,s){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const n=t.parameters,o=y.revive(n.uri),a=yh.parse(o)?.notebook||o,c=this.a.getSession(t.context?.sessionId),l=c.getRequests().at(-1);l.response?.response.getMarkdown().length&&c.acceptResponseProgress(l,{kind:"undoStop",id:Mt()}),c.acceptResponseProgress(l,{kind:"markdownContent",content:new Fo("\n````\n")}),c.acceptResponseProgress(l,{kind:"codeblockUri",uri:a,isEdit:!0}),c.acceptResponseProgress(l,{kind:"markdownContent",content:new Fo("\n````\n")}),this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",edits:[],uri:a}):c.acceptResponseProgress(l,{kind:"textEdit",edits:[],uri:a});const u=c.editingSession;if(!u)throw new Error("This tool must be called from within an editing session");const d=await this.b.mapCode({codeBlocks:[{code:n.code,resource:a,markdownBeforeBlock:n.explanation}],location:"tool",chatRequestId:t.chatRequestId,chatRequestModel:t.modelId,chatSessionId:t.context.sessionId},{textEdit:(p,m)=>{c.acceptResponseProgress(l,{kind:"textEdit",uri:p,edits:m})},notebookEdit(p,m){c.acceptResponseProgress(l,{kind:"notebookEdit",uri:p,edits:m})}},s);if(this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",uri:a,edits:[],done:!0}):c.acceptResponseProgress(l,{kind:"textEdit",uri:a,edits:[],done:!0}),d?.errorMessage)throw new Error(d.errorMessage);let f;return await new Promise(p=>{let m=!1;f=Im(w=>{const k=u.entries.read(w)?.find($=>$.modifiedURI.toString()===a.toString());k&&(k.isCurrentlyBeingModifiedBy.read(w)?m=!0:m&&p(!0))})}).finally(()=>{f.dispose()}),{content:[{kind:"text",value:"The file was edited successfully"}]}}async prepareToolInvocation(t,i){return{presentation:"hidden"}}};Bw=__decorate([__param(0,bT),__param(1,ZO),__param(2,JO)],Bw);var mk=class extends ne{static{this.ID="chat.builtinTools"}constructor(t,i){super();const r=i.createInstance(Bw);this.B(t.registerToolData(gk)),this.B(t.registerToolImplementation(gk.id,r))}};mk=__decorate([__param(0,GO),__param(1,fc)],mk);var QO="vscode_fetchWebPage_internal",vk=j("commandService"),jw=new class{constructor(){this.a=new Map,this.b=new P,this.onDidRegisterCommand=this.b.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const o=[];for(const c of e.metadata.args)o.push(c.constraint);const a=e.handler;e.handler=function(c,...l){return uI(l,o),a(c,...l)}}const{id:i}=e;let r=this.a.get(i);r||(r=new Es,this.a.set(i,r));const s=r.unshift(e),n=se(()=>{s(),this.a.get(i)?.isEmpty()&&this.a.delete(i)});return this.b.fire(i),sg(n)}registerCommandAlias(e,t){return jw.registerCommand(e,(i,...r)=>i.get(vk).executeCommand(t,...r))}getCommand(e){const t=this.a.get(e);if(!(!t||t.isEmpty()))return qt.first(t)}getCommands(){const e=new Map;for(const t of this.a.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};jw.registerCommand("noop",()=>{});var wk;(function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"})(wk||(wk={}));function bk(e,t){if(typeof e=="number"){if(e===0)return null;const i=(e&65535)>>>0,r=(e&4294901760)>>>16;return r!==0?new vp([mp(i,t),mp(r,t)]):new vp([mp(i,t)])}else{const i=[];for(let r=0;r<e.length;r++)i.push(mp(e[r],t));return new vp(i)}}function mp(e,t){const i=!!(e&2048),r=!!(e&256),s=t===2?r:i,n=!!(e&1024),o=!!(e&512),a=t===2?i:r,c=e&255;return new YO(s,n,o,a,c)}var YO=class pC{constructor(t,i,r,s,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=r,this.metaKey=s,this.keyCode=n}equals(t){return t instanceof pC&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){const t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",r=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`K${t}${i}${r}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new vp([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},vp=class{constructor(e){if(e.length===0)throw ke("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},yk;(function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"})(yk||(yk={}));var XO=class gC{constructor(){this.c=new Es,this.d=[],this.e=null}static f(t){if(ac===1){if(t&&t.win)return t.win}else if(ac===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const i=gC.f(t),r=new fe;if(i&&i.primary){const s=bk(i.primary,ac);s&&r.add(this.g(s,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let s=0,n=i.secondary.length;s<n;s++){const o=i.secondary[s],a=bk(o,ac);a&&r.add(this.g(a,t.id,t.args,t.weight,-s-1,t.when))}return r}setExtensionKeybindings(t){const i=[];let r=0;for(const s of t)s.keybinding&&(i[r++]={keybinding:s.keybinding,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1});this.d=i,this.e=null}registerCommandAndKeybindingRule(t){return ng(this.registerKeybindingRule(t),jw.registerCommand(t))}g(t,i,r,s,n,o){const a=this.c.push({keybinding:t,command:i,commandArgs:r,when:o,weight1:s,weight2:n,extensionId:null,isBuiltinExtension:!1});return this.e=null,se(()=>{a(),this.e=null})}getDefaultKeybindings(){return this.e||(this.e=Array.from(this.c).concat(this.d),this.e.sort(tU)),this.e.slice(0)}},KO=new XO,eU={EditorModes:"platform.keybindingsRegistry"};Ft.add(eU.EditorModes,KO);function tU(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}var wp;function iU(e){return e.command!==void 0}var bp=class D{static{this.a=new Map}static{this.CommandPalette=new D("CommandPalette")}static{this.DebugBreakpointsContext=new D("DebugBreakpointsContext")}static{this.DebugCallStackContext=new D("DebugCallStackContext")}static{this.DebugConsoleContext=new D("DebugConsoleContext")}static{this.DebugVariablesContext=new D("DebugVariablesContext")}static{this.NotebookVariablesContext=new D("NotebookVariablesContext")}static{this.DebugHoverContext=new D("DebugHoverContext")}static{this.DebugWatchContext=new D("DebugWatchContext")}static{this.DebugToolBar=new D("DebugToolBar")}static{this.DebugToolBarStop=new D("DebugToolBarStop")}static{this.DebugDisassemblyContext=new D("DebugDisassemblyContext")}static{this.DebugCallStackToolbar=new D("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new D("DebugCreateConfiguration")}static{this.EditorContext=new D("EditorContext")}static{this.SimpleEditorContext=new D("SimpleEditorContext")}static{this.EditorContent=new D("EditorContent")}static{this.EditorLineNumberContext=new D("EditorLineNumberContext")}static{this.EditorContextCopy=new D("EditorContextCopy")}static{this.EditorContextPeek=new D("EditorContextPeek")}static{this.EditorContextShare=new D("EditorContextShare")}static{this.EditorTitle=new D("EditorTitle")}static{this.EditorTitleRun=new D("EditorTitleRun")}static{this.EditorTitleContext=new D("EditorTitleContext")}static{this.EditorTitleContextShare=new D("EditorTitleContextShare")}static{this.EmptyEditorGroup=new D("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new D("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new D("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new D("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new D("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new D("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new D("ExplorerContext")}static{this.ExplorerContextShare=new D("ExplorerContextShare")}static{this.ExtensionContext=new D("ExtensionContext")}static{this.ExtensionEditorContextMenu=new D("ExtensionEditorContextMenu")}static{this.GlobalActivity=new D("GlobalActivity")}static{this.CommandCenter=new D("CommandCenter")}static{this.CommandCenterCenter=new D("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new D("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new D("LayoutControlMenu")}static{this.MenubarMainMenu=new D("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new D("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new D("MenubarDebugMenu")}static{this.MenubarEditMenu=new D("MenubarEditMenu")}static{this.MenubarCopy=new D("MenubarCopy")}static{this.MenubarFileMenu=new D("MenubarFileMenu")}static{this.MenubarGoMenu=new D("MenubarGoMenu")}static{this.MenubarHelpMenu=new D("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new D("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new D("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new D("PanelAlignmentMenu")}static{this.PanelPositionMenu=new D("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new D("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new D("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new D("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new D("MenubarSelectionMenu")}static{this.MenubarShare=new D("MenubarShare")}static{this.MenubarSwitchEditorMenu=new D("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new D("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new D("MenubarTerminalMenu")}static{this.MenubarTerminalSuggestStatusMenu=new D("MenubarTerminalSuggestStatusMenu")}static{this.MenubarViewMenu=new D("MenubarViewMenu")}static{this.MenubarHomeMenu=new D("MenubarHomeMenu")}static{this.OpenEditorsContext=new D("OpenEditorsContext")}static{this.OpenEditorsContextShare=new D("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new D("ProblemsPanelContext")}static{this.SCMInputBox=new D("SCMInputBox")}static{this.SCMChangeContext=new D("SCMChangeContext")}static{this.SCMResourceContext=new D("SCMResourceContext")}static{this.SCMResourceContextShare=new D("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new D("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new D("SCMResourceGroupContext")}static{this.SCMSourceControl=new D("SCMSourceControl")}static{this.SCMSourceControlInline=new D("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new D("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new D("SCMHistoryTitle")}static{this.SCMHistoryItemContext=new D("SCMHistoryItemContext")}static{this.SCMHistoryItemHover=new D("SCMHistoryItemHover")}static{this.SCMHistoryItemRefContext=new D("SCMHistoryItemRefContext")}static{this.SCMQuickDiffDecorations=new D("SCMQuickDiffDecorations")}static{this.SCMTitle=new D("SCMTitle")}static{this.SearchContext=new D("SearchContext")}static{this.SearchActionMenu=new D("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new D("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new D("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new D("StickyScrollContext")}static{this.TestItem=new D("TestItem")}static{this.TestItemGutter=new D("TestItemGutter")}static{this.TestProfilesContext=new D("TestProfilesContext")}static{this.TestMessageContext=new D("TestMessageContext")}static{this.TestMessageContent=new D("TestMessageContent")}static{this.TestPeekElement=new D("TestPeekElement")}static{this.TestPeekTitle=new D("TestPeekTitle")}static{this.TestCallStack=new D("TestCallStack")}static{this.TestCoverageFilterItem=new D("TestCoverageFilterItem")}static{this.TouchBarContext=new D("TouchBarContext")}static{this.TitleBar=new D("TitleBar")}static{this.TitleBarContext=new D("TitleBarContext")}static{this.TitleBarTitleContext=new D("TitleBarTitleContext")}static{this.TunnelContext=new D("TunnelContext")}static{this.TunnelPrivacy=new D("TunnelPrivacy")}static{this.TunnelProtocol=new D("TunnelProtocol")}static{this.TunnelPortInline=new D("TunnelInline")}static{this.TunnelTitle=new D("TunnelTitle")}static{this.TunnelLocalAddressInline=new D("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new D("TunnelOriginInline")}static{this.ViewItemContext=new D("ViewItemContext")}static{this.ViewContainerTitle=new D("ViewContainerTitle")}static{this.ViewContainerTitleContext=new D("ViewContainerTitleContext")}static{this.ViewTitle=new D("ViewTitle")}static{this.ViewTitleContext=new D("ViewTitleContext")}static{this.CommentEditorActions=new D("CommentEditorActions")}static{this.CommentThreadTitle=new D("CommentThreadTitle")}static{this.CommentThreadActions=new D("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new D("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new D("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new D("CommentThreadCommentContext")}static{this.CommentTitle=new D("CommentTitle")}static{this.CommentActions=new D("CommentActions")}static{this.CommentsViewThreadActions=new D("CommentsViewThreadActions")}static{this.InteractiveToolbar=new D("InteractiveToolbar")}static{this.InteractiveCellTitle=new D("InteractiveCellTitle")}static{this.InteractiveCellDelete=new D("InteractiveCellDelete")}static{this.InteractiveCellExecute=new D("InteractiveCellExecute")}static{this.InteractiveInputExecute=new D("InteractiveInputExecute")}static{this.InteractiveInputConfig=new D("InteractiveInputConfig")}static{this.ReplInputExecute=new D("ReplInputExecute")}static{this.IssueReporter=new D("IssueReporter")}static{this.NotebookToolbar=new D("NotebookToolbar")}static{this.NotebookToolbarContext=new D("NotebookToolbarContext")}static{this.NotebookStickyScrollContext=new D("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new D("NotebookCellTitle")}static{this.NotebookCellDelete=new D("NotebookCellDelete")}static{this.NotebookCellInsert=new D("NotebookCellInsert")}static{this.NotebookCellBetween=new D("NotebookCellBetween")}static{this.NotebookCellListTop=new D("NotebookCellTop")}static{this.NotebookCellExecute=new D("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new D("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new D("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new D("NotebookDiffCellInputTitle")}static{this.NotebookDiffDocumentMetadata=new D("NotebookDiffDocumentMetadata")}static{this.NotebookDiffCellMetadataTitle=new D("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new D("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new D("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new D("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new D("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new D("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new D("NotebookKernelSource")}static{this.BulkEditTitle=new D("BulkEditTitle")}static{this.BulkEditContext=new D("BulkEditContext")}static{this.TimelineItemContext=new D("TimelineItemContext")}static{this.TimelineTitle=new D("TimelineTitle")}static{this.TimelineTitleContext=new D("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new D("TimelineFilterSubMenu")}static{this.AccountsContext=new D("AccountsContext")}static{this.SidebarTitle=new D("SidebarTitle")}static{this.PanelTitle=new D("PanelTitle")}static{this.AuxiliaryBarTitle=new D("AuxiliaryBarTitle")}static{this.AuxiliaryBarHeader=new D("AuxiliaryBarHeader")}static{this.TerminalInstanceContext=new D("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new D("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new D("TerminalNewDropdownContext")}static{this.TerminalTabContext=new D("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new D("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new D("TerminalStickyScrollContext")}static{this.WebviewContext=new D("WebviewContext")}static{this.InlineCompletionsActions=new D("InlineCompletionsActions")}static{this.InlineEditsActions=new D("InlineEditsActions")}static{this.NewFile=new D("NewFile")}static{this.MergeInput1Toolbar=new D("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new D("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new D("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new D("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new D("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new D("InlineEditToolbar")}static{this.ChatContext=new D("ChatContext")}static{this.ChatCodeBlock=new D("ChatCodeblock")}static{this.ChatCompareBlock=new D("ChatCompareBlock")}static{this.ChatMessageTitle=new D("ChatMessageTitle")}static{this.ChatMessageFooter=new D("ChatMessageFooter")}static{this.ChatExecute=new D("ChatExecute")}static{this.ChatExecuteSecondary=new D("ChatExecuteSecondary")}static{this.ChatInput=new D("ChatInput")}static{this.ChatInputSide=new D("ChatInputSide")}static{this.ChatModelPicker=new D("ChatModelPicker")}static{this.ChatEditingWidgetToolbar=new D("ChatEditingWidgetToolbar")}static{this.ChatEditingEditorContent=new D("ChatEditingEditorContent")}static{this.ChatEditingEditorHunk=new D("ChatEditingEditorHunk")}static{this.ChatEditingDeletedNotebookCell=new D("ChatEditingDeletedNotebookCell")}static{this.ChatInputAttachmentToolbar=new D("ChatInputAttachmentToolbar")}static{this.ChatEditingWidgetModifiedFilesToolbar=new D("ChatEditingWidgetModifiedFilesToolbar")}static{this.ChatInputResourceAttachmentContext=new D("ChatInputResourceAttachmentContext")}static{this.ChatInputSymbolAttachmentContext=new D("ChatInputSymbolAttachmentContext")}static{this.ChatInlineResourceAnchorContext=new D("ChatInlineResourceAnchorContext")}static{this.ChatInlineSymbolAnchorContext=new D("ChatInlineSymbolAnchorContext")}static{this.ChatEditingCodeBlockContext=new D("ChatEditingCodeBlockContext")}static{this.ChatTitleBarMenu=new D("ChatTitleBarMenu")}static{this.ChatAttachmentsContext=new D("ChatAttachmentsContext")}static{this.AccessibleView=new D("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new D("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new D("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new D("DiffEditorSelectionToolbar")}static for(t){return D.a.get(t)??new D(t)}constructor(t){if(D.a.has(t))throw new TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);D.a.set(t,this),this.id=t}},MG=j("menuService"),ou=class Hb{static{this.a=new Map}static for(t){let i=this.a.get(t);return i||(i=new Hb(t),this.a.set(t,i)),i}static merge(t){const i=new Set;for(const r of t)r instanceof Hb&&i.add(r.b);return i}constructor(t){this.b=t,this.has=i=>i===t}},FG=new class{constructor(){this.a=new Map,this.b=new Map,this.c=new BI({merge:ou.merge}),this.onDidChangeMenu=this.c.event}addCommand(e){return this.a.set(e.id,e),this.c.fire(ou.for(bp.CommandPalette)),sg(se(()=>{this.a.delete(e.id)&&this.c.fire(ou.for(bp.CommandPalette))}))}getCommand(e){return this.a.get(e)}getCommands(){const e=new Map;return this.a.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this.b.get(e);i||(i=new Es,this.b.set(e,i));const r=i.push(t);return this.c.fire(ou.for(e)),sg(se(()=>{r(),this.c.fire(ou.for(e))}))}appendMenuItems(e){const t=new fe;for(const{id:i,item:r}of e)t.add(this.appendMenuItem(i,r));return t}getMenuItems(e){let t;return this.b.has(e)?t=[...this.b.get(e)]:t=[],e===bp.CommandPalette&&this.d(t),t}d(e){const t=new Set;for(const i of e)iU(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this.a.forEach((i,r)=>{t.has(r)||e.push({command:i})})}},xk=wp=class{static label(t,i){return i?.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value}constructor(t,i,r,s,n,o,a){this.hideActions=s,this.menuKeybinding=n,this.b=a,this.id=t.id,this.label=wp.label(t,r),this.tooltip=(typeof t.tooltip=="string"?t.tooltip:t.tooltip?.value)??"",this.enabled=!t.precondition||o.contextMatchesRules(t.precondition),this.checked=void 0;let c;if(t.toggled){const l=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=o.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),this.checked&&$t.isThemeIcon(l.icon)&&(c=l.icon),this.checked&&l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}c||(c=$t.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=i?new wp(i,void 0,r,s,void 0,o,a):void 0,this.a=r,this.class=c&&$t.asClassName(c)}run(...t){let i=[];return this.a?.arg&&(i=[...i,this.a.arg]),this.a?.shouldForwardArgs&&(i=[...i,...t]),this.b.executeCommand(this.id,...i)}};xk=wp=__decorate([__param(5,Vg),__param(6,vk)],xk);var UG=Mu(7473,"Extensions"),Ek;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(Ek||(Ek={}));var Sk;(function(e){e.ReloadWindow="reloadWindow",e.RestartExtensions="restartExtensions",e.DownloadUpdate="downloadUpdate",e.ApplyUpdate="applyUpdate",e.QuitAndInstall="quitAndInstall"})(Sk||(Sk={}));var kk=j("extensionsWorkbenchService"),$k;(function(e){e.Readme="readme",e.Features="features",e.Changelog="changelog",e.Dependencies="dependencies",e.ExtensionPack="extensionPack"})($k||($k={}));var Ck=class extends ne{constructor(t,i){super(),this.a=t,this.B(i.onChange(this.b,this))}set extension(t){this.a.forEach(i=>i.extension=t)}b(t){for(const i of this.a)t&&i.extension?jT(i.extension.identifier,t.identifier)&&(i.extension.server&&t.server&&i.extension.server!==t.server?i.updateWhenCounterExtensionChanges&&i.update():i.extension=t):i.update()}};Ck=__decorate([__param(1,kk)],Ck);var BG=new I("hasOutdatedExtensions",!1),jG=new I("hasGallery",!1),WG=new I("extensionResultListFocused ",!0),zG=new bp("extensionsSearchActionsMenu"),Ik="vscode_searchExtensions_internal",_G={id:Ik,toolReferenceName:"extensions",canBeReferencedInPrompt:!0,icon:$t.fromId(re.extensions.id),supportsToolPicker:!0,displayName:h(7487,null),modelDescription:h(7488,null),source:{type:"internal"},inputSchema:{type:"object",properties:{category:{type:"string",description:"The category of extensions to search for",enum:H4},keywords:{type:"array",items:{type:"string"},description:"The keywords to search for"},ids:{type:"array",items:{type:"string"},description:"The ids of the extensions to search for"}}}},Dk=class{constructor(t){this.a=t}async invoke(t,i,r,s){const n=t.parameters;if(!n.keywords?.length&&!n.category&&!n.ids?.length)return{content:[{kind:"text",value:h(7489,null)}]};const o=new Map,a=u=>{for(const d of u)d.deprecationInfo||d.isMalicious||o.set(d.identifier.id.toLowerCase(),{id:d.identifier.id,name:d.displayName,description:d.description,installed:d.state===1,installCount:d.installCount??0,rating:d.rating??0,categories:d.categories??[],tags:d.gallery?.tags??[]})},c=async u=>{const d=await this.a.queryGallery({text:u,pageSize:10,sortBy:"InstallCount"},s);d.firstPage.length&&a(d.firstPage)};if(n.ids?.length){const u=await this.a.getExtensions(n.ids.map(d=>({id:d})),s);a(u)}if(n.keywords?.length)for(const u of n.keywords??[])if(u==="featured")await c("featured");else{let d=n.category?`category:"${n.category}"`:"";d=u?`${d} ${u}`.trim():d,await c(d)}else await c(`category:"${n.category}"`);const l=Array.from(o.values());return{content:[{kind:"text",value:`Here are the list of extensions:
${JSON.stringify(l)}
. Important: Use the following format to display extensions to the user because there is a renderer available to parse these extensions in this format and display them with all details. So, do not describe about the extensions to the user.
\`\`\`vscode-extensions
extensionId1,extensionId2
\`\`\`
.`}],toolResultDetails:{input:JSON.stringify(n),output:[{type:"text",value:JSON.stringify(l.map(u=>u.id))}]}}}};Dk=__decorate([__param(0,kk)],Dk);var Pk=class{constructor(e){this.a=e}update(e){this.a=e}get data(){return this.a}get apiObject(){if(!this.b){const e=this;this.b=Object.freeze({get name(){return e.a.id},get description(){return e.a.modelDescription},get inputSchema(){return e.a.inputSchema},get tags(){return e.a.tags??[]}})}return this.b}},rU=class{constructor(e,t){this.e=t,this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(V.MainThreadLanguageModelTools),this.b.$getTools().then(i=>{for(const r of i)this.d.set(r.id,new Pk(Ct(r)))})}async $countTokensForInvocation(e,t,i){const r=this.c.get(e);if(!r)throw new Error(`Tool invocation call ${e} not found`);return await r(t,i)}async invokeTool(e,t,i,r){const s=Mt();i.tokenizationOptions&&this.c.set(s,i.tokenizationOptions.countTokens);try{if(i.toolInvocationToken&&!qO(i.toolInvocationToken))throw new Error("Invalid tool invocation token");if((t===Hw||t===pk)&&!Ze(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=await this.b.$invokeTool({toolId:t,callId:s,parameters:i.input,tokenBudget:i.tokenizationOptions?.tokenBudget,context:i.toolInvocationToken,chatRequestId:Ze(e,"chatParticipantPrivate")?i.chatRequestId:void 0,chatInteractionId:Ze(e,"chatParticipantPrivate")?i.chatInteractionId:void 0},r),o=n instanceof si?n.value:n;return Pf.to(Ct(o))}finally{this.c.delete(s)}}$onDidChangeTools(e){const t=new Set(this.a.keys());for(const i of e){t.delete(i.id);const r=this.d.get(i.id);r?r.update(i):this.d.set(i.id,new Pk(Ct(i)))}for(const i of t)this.d.delete(i)}getTools(e){return Array.from(this.d.values()).map(t=>t.apiObject).filter(t=>{switch(t.name){case Hw:case pk:case QO:case Ik:return Ze(e,"chatParticipantPrivate");default:return!0}})}async $invokeTool(e,t){const i=this.a.get(e.toolId);if(!i)throw new Error(`Unknown tool ${e.toolId}`);const r={input:e.parameters,toolInvocationToken:e.context};Ze(i.extension,"chatParticipantPrivate")&&(r.chatRequestId=e.chatRequestId,r.chatInteractionId=e.chatInteractionId,r.chatSessionId=e.context?.sessionId,e.toolSpecificData?.kind==="terminal"&&(r.terminalCommand=e.toolSpecificData.command)),Ze(i.extension,"chatParticipantAdditions")&&e.modelId&&(r.model=await this.f(e.modelId,i.extension)),e.tokenBudget!==void 0&&(r.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((o,a=tt.None)=>this.b.$countTokensForInvocation(e.callId,o,a))});let s;Ze(i.extension,"toolProgress")&&(s={report:o=>{this.b.$acceptToolProgress(e.callId,{message:me.fromStrict(o.message),increment:o.increment,total:100})}});const n=await S4(Promise.resolve(i.tool.invoke(r,t,s)),t);if(!n)throw new vr;return Pf.from(n,i.extension)}async f(e,t){let i;if(e&&(i=await this.e.getLanguageModelByIdentifier(t,e)),!i&&(i=await this.e.getDefaultLanguageModel(t),!i))throw new Error("Language model unavailable");return i}async $prepareToolInvocation(e,t,i){const r=this.a.get(e);if(!r)throw new Error(`Unknown tool ${e}`);const s={input:t};if(Ze(r.extension,"chatParticipantPrivate")&&r.tool.prepareInvocation2){const n=await r.tool.prepareInvocation2(s,i);return n?{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:me.from(n.confirmationMessages.message)}:void 0,toolSpecificData:{kind:"terminal",language:n.language,command:n.command}}:void 0}else if(r.tool.prepareInvocation){const n=await r.tool.prepareInvocation(s,i);return n?((n.pastTenseMessage||n.presentation)&&L(r.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:me.from(n.confirmationMessages.message)}:void 0,invocationMessage:me.fromStrict(n.invocationMessage),pastTenseMessage:me.fromStrict(n.pastTenseMessage),presentation:n.presentation}):void 0}}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),se(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},sU=class{constructor(e,t,i,r){this.c=t,this.d=i,this.e=r,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(V.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=je.from(t),s=await this.a.$tokensAtPosition(e.uri,r),n={type:Bs.Other,range:e.getWordRangeAtPosition(t)??new Ee(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:O.to(s.range),type:uv.to(s.type)};return!o.range.contains(t)||i!==e.version?n:o}createLanguageStatusItem(e,t,i){const r=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:Qo.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new fe,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=wD(()=>{l.clear(),this.a.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:ma.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Qo.Error?wt.Error:a.severity===Qo.Warning?wt.Warning:wt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},d={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(r),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(f){a.name=f,u()},get selector(){return a.selector},set selector(f){a.selector=f,u()},get text(){return a.text},set text(f){a.text=f,u()},set text2(f){L(e,"languageStatusText"),a.text=f,u()},get text2(){return L(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(f){a.detail=f,u()},get severity(){return a.severity},set severity(f){a.severity=f,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(f){a.accessibilityInformation=f,u()},get command(){return a.command},set command(f){a.command=f,u()},get busy(){return a.busy},set busy(f){a.busy=f,u()}};return u(),d}};function nU(e){return e&&e.title}var Ww=class{constructor(t,i){this.b=i,this.a=t.getProxy(V.MainThreadMessageService)}showMessage(t,i,r,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||nU(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&L(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const d=a[u];if(typeof d=="string")c.push({title:d,handle:u,isCloseAffordance:!1});else if(typeof d=="object"){const{title:f,isCloseAffordance:p}=d;c.push({title:f,isCloseAffordance:!!p,handle:u}),p&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,d):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,d)}return this.a.$showMessage(i,r,o,c).then(u=>{if(typeof u=="number")return a[u]})}};Ww=__decorate([__param(1,Ve)],Ww);var zw=class{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new is(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},_w=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1,encoding:"utf8"}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=y.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(_s.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(Sa.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:$l.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(r){e.g=r},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(_s.to)}setOutputItems(e,t,i){const r=i.map($a.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...r),s.items.length>1&&s.items.every(n=>D7(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=PA(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(Sa.to(e))}setMime(e){}},oU=class mC{static{this.a=0}constructor(t,i,r,s,n){this.k=t,this.l=i,this.m=r,this.uri=s,this.handle=mC.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===z.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(r){return r=t.n(r),t.b[r].apiCell},getCells(r){return(r?t.p(r):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,r){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:r});const s={notebook:this.apiNotebook,metadata:r,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===rr.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===rr.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===rr.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===rr.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===rr.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===rr.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===rr.ChangeCellMime?this.w(a.index,a.mime):a.kind===rr.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===rr.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,r=t.end|0;return i<0&&(i=0),r>this.b.length&&(r=this.b.length),t.with({start:i,end:r})}p(t){t=this.o(t);const i=[];for(let r=t.start;r<t.end;r++)i.push(this.b[r]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,r){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(f=>{const p=new _w(this,this.l,f);return i||n.push(_w.asModelAddData(f)),p}),u=new zw(a[0],a[1],[],l),d=this.b.splice(a[0],a[1],...l);for(const f of d)o.push(f.uri),u.deletedItems.push(f.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),r)for(const a of s)r.push(a.asApiEvent())}s(t,i,r,s){const n=this.b.splice(t,i);this.b.splice(r,0,...n);const o=[new zw(t,i,n.map(a=>a.apiCell),[]),new zw(r,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,r,s){this.b[t].setOutputItems(i,r,s)}v(t,i){const r=this.b[t];r.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(r.uri,i)}w(t,i){const r=this.b[t];r.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},Vw=class vC{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,r,s,n,o,a){this.id=t,this.c=i,this.notebookData=r,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(i){this.selections=[i]},get selections(){return t.e},set selections(i){if(!Array.isArray(i)||!i.every(is.isNotebookRange))throw ke("selections");t.e=i,t.h(i)},get visibleRanges(){return t.d},revealRange(i,r){t.c.$tryRevealRange(t.id,Tr.from(i),r??Pd.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},vC.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(Tr.from))}_acceptViewColumn(t){this.f=t}},qw=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==te)return Gw(this.right);let e=this;for(;e.parent!==te&&e.parent.left!==e;)e=e.parent;return e.parent===te?te:e.parent}prev(){if(this.left!==te)return Tk(this.left);let e=this;for(;e.parent!==te&&e.parent.right!==e;)e=e.parent;return e.parent===te?te:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},Ak;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(Ak||(Ak={}));var te=new qw(null,0);te.parent=te,te.left=te,te.right=te,te.color=0;function Gw(e){for(;e.left!==te;)e=e.left;return e}function Tk(e){for(;e.right!==te;)e=e.right;return e}function Jw(e){return e===te?0:e.size_left+e.piece.length+Jw(e.right)}function Zw(e){return e===te?0:e.lf_left+e.piece.lineFeedCnt+Zw(e.right)}function Qw(){te.parent=te}function au(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==te&&(i.left.parent=t),i.parent=t.parent,t.parent===te?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function cu(e,t){const i=t.left;t.left=i.right,i.right!==te&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===te?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function yp(e,t){let i,r;if(t.left===te?(r=t,i=r.right):t.right===te?(r=t,i=r.left):(r=Gw(t.right),i=r.right),r===e.root){e.root=i,i.color=0,t.detach(),Qw(),e.root.parent=te;return}const s=r.color===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===t?(i.parent=r.parent,lu(e,i)):(r.parent===t?i.parent=r:i.parent=r.parent,lu(e,i),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==te&&(r.left.parent=r),r.right!==te&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,lu(e,r)),t.detach(),i.parent.left===i){const o=Jw(i),a=Zw(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,hs(e,i.parent,c,l)}}if(lu(e,i.parent),s){Qw();return}let n;for(;i!==e.root&&i.color===0;)i===i.parent.left?(n=i.parent.right,n.color===1&&(n.color=0,i.parent.color=1,au(e,i.parent),n=i.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.right.color===0&&(n.left.color=0,n.color=1,cu(e,n),n=i.parent.right),n.color=i.parent.color,i.parent.color=0,n.right.color=0,au(e,i.parent),i=e.root)):(n=i.parent.left,n.color===1&&(n.color=0,i.parent.color=1,cu(e,i.parent),n=i.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.left.color===0&&(n.right.color=0,n.color=1,au(e,n),n=i.parent.left),n.color=i.parent.color,i.parent.color=0,n.left.color=0,cu(e,i.parent),i=e.root));i.color=0,Qw()}function Rk(e,t){for(lu(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,au(e,t)),t.parent.color=0,t.parent.parent.color=1,cu(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,cu(e,t)),t.parent.color=0,t.parent.parent.color=1,au(e,t.parent.parent))}e.root.color=0}function hs(e,t,i,r){for(;t!==e.root&&t!==te;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}function lu(e,t){let i=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=Jw(t.left)-t.size_left,r=Zw(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=r;t!==e.root&&(i!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}}var ds=65535;function Lk(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var aU=class{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}};function fs(e,t=!0){const i=[0];let r=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(i[r++]=s+2,s++):i[r++]=s+1:o===10&&(i[r++]=s+1)}return t?Lk(i):i}function cU(e,t){e.length=0,e[0]=0;let i=1,r=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[i++]=c+2,c++):(r++,e[i++]=c+1):u===10?(s++,e[i++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new aU(Lk(e),r,s,n,o);return e.length=0,a}var mi=class{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}},oo=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},lU=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==te&&e.iterate(e.root,i=>(i!==te&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},uU=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this.b=r}}},hU=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new oo("",[0])],this.g={line:0,column:0},this.root=te,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let r=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=fs(e[s].buffer));const o=new mi(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),r=this.S(r,o)}this.h=new uU(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=ds,i=t-Math.floor(t/3),r=i*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=i||n+l<r)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new oo(u,fs(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new oo(a,fs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new lU(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,r=>{if(r===te)return!0;const s=this.R(r),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==te;)if(r.left!==te&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.B(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==te;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(i+1,1),o=r-n;return new Ui(i+1,o+1)}return new Ui(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===te){const s=this.getOffsetAt(i+1,1),n=r-e-s;return new Ui(i+1,n+1)}else t=t.right;return new Ui(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),r=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this.a[i.piece.bufferIndex].buffer,s=this.u(i.piece.bufferIndex,i.piece.start);let n=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==te;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,i.piece.length);i=i.next()}return n}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===te)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let d=c[l]+n.start.column;if(r&&(a.charCodeAt(d)===10&&(d++,o--),e[t++]=i,i="",r=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(d+o-1)===13?(r=!0,i+=a.substr(d,o-1)):i+=a.substr(d,o),!0;i+=this.f?a.substring(d,Math.max(d,c[l+1]-this.e)):a.substring(d,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=l+1;f<u;f++)i=this.f?a.substring(c[f],c[f+1]-this.e):a.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(r=!0,n.end.column===0?t--:i=a.substr(c[u],n.end.column-1)):i=a.substr(c[u],n.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],r=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this.a[e.node.piece.bufferIndex],r=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===te)return"";const r=this.a[i.piece.bufferIndex],s=this.u(i.piece.bufferIndex,i.piece.start);return r.buffer.substring(s,s+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],r=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=r+t.remainder,n=r+t.node.piece.length;return i.buffer.substring(s,n)}}findMatchesInNode(e,t,i,r,s,n,o,a,c,l,u){const d=this.a[e.piece.bufferIndex],f=this.u(e.piece.bufferIndex,e.piece.start),p=this.u(e.piece.bufferIndex,s),m=this.u(e.piece.bufferIndex,n);let w;const x={line:0,column:0};let k,$;t._wordSeparators?(k=d.buffer.substring(p,m),$=A=>A+p,t.reset(0)):(k=d.buffer,$=A=>A,t.reset(p));do if(w=t.next(k),w){if($(w.index)>=m)return l;this.s(e,$(w.index)-f,x);const A=this.t(e.piece.bufferIndex,s,x),G=x.line===s.line?x.column-s.column+r:x.column+1,N=G+w[0].length;if(u[l++]=lE(new Oe(i+A,G,i+A,N),w,a),$(w.index)+w[0].length>=m||l>=c)return l}while(w);return l}findMatchesLineByLine(e,t,i,r){const s=[];let n=0;const o=new eN(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,r,n,s),s;let d=e.startLineNumber,f=a.node;for(;f!==c.node;){const m=this.t(f.piece.bufferIndex,l,f.piece.end);if(m>=1){const x=this.a[f.piece.bufferIndex].lineStarts,k=this.u(f.piece.bufferIndex,f.piece.start),$=x[l.line+m],A=d===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(f,o,d,A,l,this.s(f,$-k),t,i,r,n,s),n>=r)return s;d+=m}const w=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const x=this.getLineContent(d).substring(w,e.endColumn-1);return n=this.n(t,o,x,e.endLineNumber,w,n,s,i,r),s}if(n=this.n(t,o,this.getLineContent(d).substr(w),d,w,n,s,i,r),n>=r)return s;d++,a=this.H(d,1),f=a.node,l=this.s(a.node,a.remainder)}if(d===e.endLineNumber){const m=d===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(d).substring(m,e.endColumn-1);return n=this.n(t,o,w,e.endLineNumber,m,n,s,i,r),s}const p=d===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,d,p,l,u,t,i,r,n,s),s}n(e,t,i,r,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const d=e.simpleSearch,f=d.length,p=i.length;let m=-f;for(;(m=i.indexOf(d,m+f))!==-1;)if((!l||uE(l,i,p,m,f))&&(o[n++]=new L0(new Oe(r,m+1+s,r,m+1+f+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(i),u&&(o[n++]=lE(new Oe(r,u.index+1+s,r,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==te){const{node:r,remainder:s,nodeStartOffset:n}=this.G(e),o=r.piece,a=o.bufferIndex,c=this.s(r,s);if(r.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<ds){this.F(r,t),this.y();return}if(n===e)this.o(t,r),this.h.validate(e);else if(n+r.piece.length>e){const l=[];let u=new mi(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(r,s)===10){const m={line:u.start.line+1,column:0};u=new mi(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(r,s-1)===13){const m=this.s(r,s-1);this.C(r,m),t="\r"+t,r.piece.length===0&&l.push(r)}else this.C(r,c);else this.C(r,c);const d=this.w(t);u.length>0&&this.S(r,u);let f=r;for(let p=0;p<d.length;p++)f=this.S(f,d[p]);this.v(l)}else this.q(t,r)}else{const r=this.w(t);let s=this.T(null,r[0]);for(let n=1;n<r.length;n++)s=this.S(s,r[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===te)return;const i=this.G(e),r=this.G(e+t),s=i.node,n=r.node;if(s===n){const d=this.s(s,i.remainder),f=this.s(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const p=s.next();yp(this,s),this.N(p),this.y();return}this.D(s,f),this.h.validate(e),this.N(s),this.y();return}if(i.nodeStartOffset+s.piece.length===e+t){this.C(s,d),this.O(s),this.y();return}this.E(s,d,f),this.y();return}const o=[],a=this.s(s,i.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,r.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let d=l;d!==te&&d!==n;d=d.next())o.push(d);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new mi(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,hs(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.w(e);let s=this.T(t,r[r.length-1]);for(let n=r.length-2;n>=0;n--)s=this.T(s,r[n]);this.N(s),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),r=this.S(t,i[0]);let s=r;for(let n=1;n<i.length;n++)s=this.S(s,i[n]);this.N(r)}s(e,t,i){const r=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[r.start.line]+r.start.column+t;let c=r.start.line,l=r.end.line,u=0,d=0,f=0;for(;c<=l&&(u=c+(l-c)/2|0,f=n[u],u!==l);)if(d=n[u+1],a<f)l=u-1;else if(a>=d)c=u+1;else break;return i?(i.line=u,i.column=a-f,null):{line:u,column:a-f}}t(e,t,i){if(i.column===0)return i.line-t.line;const r=this.a[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],n=r[i.line]+i.column;if(s>n+1)return i.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)yp(this,e[t])}w(e){if(e.length>ds){const l=[];for(;e.length>ds;){const d=e.charCodeAt(ds-1);let f;d===13||d>=55296&&d<=56319?(f=e.substring(0,ds-1),e=e.substring(ds-1)):(f=e.substring(0,ds),e=e.substring(ds));const p=fs(f);l.push(new mi(this.a.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this.a.push(new oo(f,p))}const u=fs(e);return l.push(new mi(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new oo(e,u)),l}let t=this.a[0].buffer.length;const i=fs(e,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new mi(0,r,a,this.t(0,r,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,r="";const s=this.h.get2(e);if(s){i=s.node;const n=this.B(i,e-s.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=o.substring(a+n,a+i.piece.length);else{const c=this.B(i,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;i!==te;)if(i.left!==te&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return n+=i.size_left,this.h.set({node:i,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);r=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==te;){const n=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return r+=n.substring(a,a+o-t),r}else{const o=this.u(i.piece.bufferIndex,i.piece.start);r+=n.substr(o,i.piece.length)}i=i.next()}return r}y(){let e=this.root,t=1,i=0;for(;e!==te;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,r=this.s(e,t),s=r.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const n=this.t(e.piece.bufferIndex,i.start,r);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:r.column}}B(e,t){if(t<0)return 0;const i=e.piece,r=this.a[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}C(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.end),n=t,o=this.u(i.bufferIndex,n),a=this.t(i.bufferIndex,i.start,n),c=a-r,l=o-s,u=i.length+l;e.piece=new mi(i.bufferIndex,i.start,n,a,u),hs(this,e,l,c)}D(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.start),n=t,o=this.t(i.bufferIndex,n,i.end),a=this.u(i.bufferIndex,n),c=o-r,l=s-a,u=i.length+l;e.piece=new mi(i.bufferIndex,n,i.end,o,u),hs(this,e,l,c)}E(e,t,i){const r=e.piece,s=r.start,n=r.end,o=r.length,a=r.lineFeedCnt,c=t,l=this.t(r.bufferIndex,r.start,c),u=this.u(r.bufferIndex,t)-this.u(r.bufferIndex,s);e.piece=new mi(r.bufferIndex,r.start,c,l,u),hs(this,e,u-o,l-a);const d=new mi(r.bufferIndex,i,n,this.t(r.bufferIndex,i,n),this.u(r.bufferIndex,n)-this.u(r.bufferIndex,i)),f=this.S(e,d);this.N(f)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),r=this.a[0].buffer.length;this.a[0].buffer+=t;const s=fs(t,!1);for(let f=0;f<s.length;f++)s[f]+=r;if(i){const f=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-f}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),d=u-l;e.piece=new mi(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,hs(this,e,t.length,d)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==te;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this.h.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,r=0;for(;i!==te;)if(i.left!==te&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.B(i,e-i.lf_left-2),n=this.B(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,n),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.B(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==te;){if(i.piece.lineFeedCnt>0){const s=this.B(i,0),n=this.J(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(i.piece.length>=t-1){const s=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],r=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===te||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===te||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],r=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new mi(e.piece.bufferIndex,e.piece.start,s,o,n),hs(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new mi(t.piece.bufferIndex,a,t.piece.end,l,c),hs(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let d=0;d<i.length;d++)yp(this,i[d])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)yp(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},n=r.length-1,o=this.t(r.bufferIndex,s,r.end);i.piece=new mi(r.bufferIndex,s,r.end,o,n),hs(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===te)return t(te);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===te)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,r=this.u(i.bufferIndex,i.start),s=this.u(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),r=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,r)}S(e,t){const i=new qw(t,1);if(i.left=te,i.right=te,i.parent=te,i.size_left=0,i.lf_left=0,this.root===te)this.root=i,i.color=0;else if(e.right===te)e.right=i,i.parent=e;else{const s=Gw(e.right);s.left=i,i.parent=s}return Rk(this,i),i}T(e,t){const i=new qw(t,1);if(i.left=te,i.right=te,i.parent=te,i.size_left=0,i.lf_left=0,this.root===te)this.root=i,i.color=0;else if(e.left===te)e.left=i,i.parent=e;else{const r=Tk(e.left);r.right=i,i.parent=r}return Rk(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},Nk;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Nk||(Nk={}));function Yw(e){let t=0,i=0,r=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(i=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,r=n+1):a===10&&(s|=1,t===0&&(i=n),t++,r=n+1)}return t===0&&(i=e.length),[t,i,e.length-r,s]}var Xw;function dU(){return Xw||(Xw=new TextDecoder("UTF-16LE")),Xw}function fU(e,t,i){const r=new Uint16Array(e.buffer,t,i);return i>0&&(r[0]===65279||r[0]===65534)?pU(e,t,i):dU().decode(r)}function pU(e,t,i){const r=[];let s=0;for(let n=0;n<i;n++){const o=bI(e,t);t+=2,r[s++]=String.fromCharCode(o)}return r.join("")}function xp(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var gU=class Fr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,r,s){this.oldPosition=t,this.oldText=i,this.newPosition=r,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${xp(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${xp(this.oldText)}")`:`(replace@${this.oldPosition} "${xp(this.oldText)}" with "${xp(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,r){const s=i.length;Au(t,s,r),r+=4;for(let n=0;n<s;n++)yI(t,i.charCodeAt(n),r),r+=2;return r}static d(t,i){const r=Pu(t,i);return i+=4,fU(t,i,r)}writeSize(){return 8+Fr.a(this.oldText)+Fr.a(this.newText)}write(t,i){return Au(t,this.oldPosition,i),i+=4,Au(t,this.newPosition,i),i+=4,i=Fr.c(t,this.oldText,i),i=Fr.c(t,this.newText,i),i}static read(t,i,r){const s=Pu(t,i);i+=4;const n=Pu(t,i);i+=4;const o=Fr.d(t,i);i+=Fr.a(o);const a=Fr.d(t,i);return i+=Fr.a(a),r.push(new Fr(s,o,n,a)),i}},mU=class bu extends ne{constructor(t,i,r,s,n,o,a){super(),this.m=this.B(new P),this.onDidChangeContent=this.m.event,this.f=i,this.j=!o,this.g=s,this.h=n,this.c=new hU(t,r,a)}equals(t){return!(t instanceof bu)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const r=t+i,s=this.getPositionAt(t),n=this.getPositionAt(r);return new Oe(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const r=this.n(i);return this.c.getValueInRange(t,r)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const r=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-r+n}getCharacterCountInRange(t,i=0){if(this.j){let r=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)qu(a.charCodeAt(u))?(r=r+1,u=u+1):r=r+1}return r+=this.n(i).length*(n-s),r}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=Eg(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=P3(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,r){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let w=0;w<t.length;w++){const x=t[w];a&&x._isTracked&&(a=!1);const k=x.range;if(x.text){let W=!0;o||(W=!F3(x.text),o=W),!s&&W&&(s=o4(x.text)),!n&&W&&(n=a4(x.text))}let $="",A=0,G=0,N=0;if(x.text){let W;[A,G,N,W]=Yw(x.text);const X=this.getEOL();W===0||W===(X===`\r
`?2:1)?$=x.text:$=x.text.replace(/\r\n|\r|\n/g,X)}c[w]={sortIndex:w,identifier:x.identifier||null,range:k,rangeOffset:this.getOffsetAt(k.startLineNumber,k.startColumn),rangeLength:this.getValueLengthInRange(k),text:$,eolCount:A,firstLineLength:G,lastLineLength:N,forceMoveMarkers:!!x.forceMoveMarkers,isAutoWhitespaceEdit:x.isAutoWhitespaceEdit||!1}}c.sort(bu.u);let l=!1;for(let w=0,x=c.length-1;w<x;w++){const k=c[w].range.getEndPosition(),$=c[w+1].range.getStartPosition();if($.isBeforeOrEqual(k)){if($.isBefore(k))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=r||i?bu._getInverseEditRanges(c):[],d=[];if(i)for(let w=0;w<c.length;w++){const x=c[w],k=u[w];if(x.isAutoWhitespaceEdit&&x.range.isEmpty())for(let $=k.startLineNumber;$<=k.endLineNumber;$++){let A="";$===k.startLineNumber&&(A=this.getLineContent(x.range.startLineNumber),Eg(A)!==-1)||d.push({lineNumber:$,oldContent:A})}}let f=null;if(r){let w=0;f=[];for(let x=0;x<c.length;x++){const k=c[x],$=u[x],A=this.getValueInRange(k.range),G=k.rangeOffset+w;w+=k.text.length-A.length,f[x]={sortIndex:k.sortIndex,identifier:k.identifier,range:$,text:A,textChange:new gU(k.rangeOffset,A,G,k.text)}}l||f.sort((x,k)=>x.sortIndex-k.sortIndex)}this.g=s,this.h=n,this.j=o;const p=this.t(c);let m=null;if(i&&d.length>0){d.sort((w,x)=>x.lineNumber-w.lineNumber),m=[];for(let w=0,x=d.length;w<x;w++){const k=d[w].lineNumber;if(w>0&&d[w-1].lineNumber===k)continue;const $=d[w].oldContent,A=this.getLineContent(k);A.length===0||A===$||Eg(A)!==-1||m.push(k)}}return this.m.fire(),new YL(f,p,m)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const r=t[0].range,s=t[t.length-1].range,n=new Oe(r.startLineNumber,r.startColumn,s.endLineNumber,s.endColumn);let o=r.startLineNumber,a=r.startColumn;const c=[];for(let p=0,m=t.length;p<m;p++){const w=t[p],x=w.range;i=i||w.forceMoveMarkers,c.push(this.getValueInRange(new Oe(o,a,x.startLineNumber,x.startColumn))),w.text.length>0&&c.push(w.text),o=x.endLineNumber,a=x.endColumn}const l=c.join(""),[u,d,f]=Yw(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:d,lastLineLength:f,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}t(t){t.sort(bu.w);const i=[];for(let r=0;r<t.length;r++){const s=t[r],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new Oe(n,o,a,c);i.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,r,s){return this.c.findMatchesLineByLine(t,i,r,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const r=t.startLineNumber,s=t.startColumn,[n,o,a]=Yw(i);let c;if(i.length>0){const l=n+1;l===1?c=new Oe(r,s,r,s+o):c=new Oe(r,s,r+l-1,a+1)}else c=new Oe(r,s,r,s);return c}static _getInverseEditRanges(t){const i=[];let r=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=r,u=s+(c.range.startColumn-n.range.endColumn)):(l=r+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let d;if(c.text.length>0){const f=c.eolCount+1;f===1?d=new Oe(l,u,l,u+c.firstLineLength):d=new Oe(l,u,l+f-1,c.lastLineLength+1)}else d=new Oe(l,u,l,u);r=d.endLineNumber,s=d.endColumn,i.push(d),n=c}return i}static u(t,i){const r=Oe.compareRangesUsingEnds(t.range,i.range);return r===0?t.sortIndex-i.sortIndex:r}static w(t,i){const r=Oe.compareRangesUsingEnds(t.range,i.range);return r===0?i.sortIndex-t.sortIndex:-r}},vU=class{constructor(e,t,i,r,s,n,o,a,c){this.a=e,this.b=t,this.c=i,this.d=r,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=i.length;s<n;s++){const o=i[s].buffer.replace(/\r\n|\r|\n/g,t),a=fs(o);i[s]=new oo(o,a)}const r=new mU(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},Mk=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&W3(e)&&(this.b=j3,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=cU(this.e,e);this.a.push(new oo(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=o4(e)),this.k||(this.k=a4(e)))}finish(e=!0){return this.o(),new vU(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=fs(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},wU=class extends ne{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new Oe(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new Mk;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:r}=t.create(1);this.b=i,this.B(r)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new Mk;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:r,disposable:s}=i.create(1);return this.B(s),r})),this.a}findInInputs(e){const i=new aE(e,!1,!1,null).parseSearchRequest();if(!i)return[];const r=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(r,i,!0,5e3)}findInOutputs(e){const i=new aE(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(r=>{const s=r.findMatchesLineByLine(this.f(r),i,!0,5e3);if(s.length!==0)return{textBuffer:r,matches:s}}).filter(r=>!!r):[]}};function Fk(e,t){let i=-1;const r=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==i&&s.length>0&&(r.push([...s]),s=[]),s.push(o),i=o.range.endLineNumber}),s.length>0&&r.push([...s]),r.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new NR(a.join(`
`)+`
`,o.map(u=>new Oe(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var GG=Object.freeze({id:"application",order:100,title:h(4195,null),type:"object"}),bU=Object.freeze({id:"workbench",order:7,title:h(4196,null),type:"object"}),yU=Object.freeze({id:"security",scope:1,title:h(4197,null),type:"object",order:7}),JG=Object.freeze({id:"problems",title:h(4198,null),type:"object",order:101}),xU=Object.freeze({id:"window",order:8,title:h(4199,null),type:"object"}),EU={ConfigurationMigration:"base.contributions.configuration.migration"},SU=class{constructor(){this.migrations=[],this.a=new P,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Ep=new SU;Ft.add(EU.ConfigurationMigration,Ep);var Ok=class extends ne{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.B(this.b.onDidChangeWorkspaceFolders(async r=>{for(const s of r.added)await this.f(s,Ep.migrations)})),this.c(Ep.migrations),this.B(Ep.onDidRegisterConfigurationMigration(r=>this.c(r)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(r=>this.g(r,t?.uri))])}async g(t,i){const r=this.a.inspect(t.key,{resource:i}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=r[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const d=await this.h(t,n,u,i,l);for(const f of d??[])c.push([f,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],d])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:d},o)))}}async h(t,i,r,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[i];if(u)return n?u.overrides?.find(({identifiers:d})=>ui(d,n))?.value:u.value},a=await t.migrateFn(r,o);return Array.isArray(a)?a:[[t.key,a]]}};Ok=__decorate([__param(0,Eh),__param(1,Zg)],Ok);var Uk=class extends ne{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new xr,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!ri&&(await this.b.getEnvironment())?.os!==1)return;Ft.as(Cn.Configuration).registerConfiguration({...yU,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:h(4200,null)},default:[],markdownDescription:h(4201,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:h(4202,null),scope:3}}})}};Uk=__decorate([__param(0,dE)],Uk);var uu="window.newWindowProfile",Hk=class extends ne{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.B(this.c.onDidChangeProfiles(r=>this.g())),this.h(),this.j(),this.B(i.onDidChangeConfiguration(r=>{r.source!==7&&r.affectsConfiguration(uu)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Ft.as(Cn.Configuration),i={...xU,properties:{[uu]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(r=>r.name),null],enumItemLabels:[...this.c.profiles.map(r=>""),h(4203,null)],description:h(4204,null),scope:1}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(uu);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(uu);if(!t)return;const i=this.b?this.c.profiles.find(r=>r.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(uu,i?.name)}};Hk=__decorate([__param(0,eT),__param(1,Eh)],Hk);var XG=j("editorResolverService"),kU=Ft.as(Cn.Configuration),$U={...bU,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:h(13543,null),additionalProperties:{type:"string"}}}};kU.registerConfiguration($U);var Kw;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(Kw||(Kw={}));var Bk;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(Bk||(Bk={}));function CU(e,t){if(new Set([z.extension,z.webviewPanel,z.vscodeWorkspaceTrust,z.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Ne.sep)>=0?`${t.scheme}:${t.path}`:er(t);return Ac(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var IU=class yu{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,r,s,n,o,a){this.q=r,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Nt,this.h=new Map,this.j=new P,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new P,this.onDidOpenNotebookDocument=this.m.event,this.n=new P,this.onDidCloseNotebookDocument=this.n.event,this.o=new P,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new pr("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(V.MainThreadNotebook),this.c=t.getProxy(V.MainThreadNotebookDocuments),this.d=t.getProxy(V.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,f=this.g.get(l)?.getCell(u);if(f)return f.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),yu.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,r]of this.h)if(r.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const r=this.g.get(t);if(!r&&!i)throw new Error(`NO notebook document for '${t}'`);return r}static w(t,i){if(!i)return;const r=i.filenamePattern.map(s=>df.from(s)).filter(s=>s!==void 0);if(i.filenamePattern&&!r){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:r,priority:i.exclusive?Kw.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,r){const s=yu.a++,n=typeof r.onDidChangeCellStatusBarItems=="function"?yu.a++:void 0;this.f.set(s,r),this.b.$registerNotebookCellStatusBarItemProvider(s,n,i);let o;return n!==void 0&&(o=r.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Ae(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&zs.from(t.content)});return y.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const r=await this.c.$tryOpenNotebook(t),s=this.g.get(y.revive(r));return bo(s?.apiNotebook)}async showNotebookDocument(t,i){let r;typeof i=="object"?r={position:Pt.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map(Tr.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0,label:typeof i.asRepl=="string"?i.asRepl:typeof i.asRepl=="object"?i.asRepl.label:void 0}:r={preserveFocus:!1,pinned:!0};const s=i?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,r),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,r,s){const n=this.f.get(t),o=y.revive(i),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(r);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new fe,d=this.p.add([u]),p=(Array.isArray(l)?l:[l]).map(m=>Iv.from(m,this.i,u));return{cacheId:d,items:p}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,r,s,n){if(Vu(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:r,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,Pv.from(s),yu.w(t,n)),se(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(i.buffer,r);return new si(zs.from(n))}async $notebookToData(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(zs.to(i.value),r);return ae.wrap(n)}async $saveNotebook(t,i,r,s,n){const o=y.revive(i),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${r}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==r)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new gm(h(2890,null,this.A(o)),6);const l={metadata:m5(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const w=new Cd(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);w.metadata=m5(m.metadata,x=>!(a.options?.transientCellMetadata??{})[x]),l.cells.push(w)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${r} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${r} ${o.toString()}`);const d=this.s.getFileSystemProviderExtUri(o.scheme),f=await this.s.value.stat(o),p={name:d.basename(o),isFile:(f.type&En.File)!==0,isDirectory:(f.type&En.Directory)!==0,isSymbolicLink:(f.type&En.SymbolicLink)!==0,mtime:f.mtime,ctime:f.ctime,size:f.size,readonly:!!((f.permissions??0)&Ho.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((f.permissions??0)&Ho.Locked),etag:R6({mtime:f.mtime,size:f.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${r}, ${o.toString()})`),p}async $searchInNotebooks(t,i,r,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new Xb;await(async(f,p,m)=>{await Promise.all(f.map(async w=>await Promise.all(w.filenamePatterns.map(x=>{const k={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:1,filePattern:x};return this.t.doInternalFileSearchWithCustomCallback(k,p,$=>{$.forEach(A=>{a.has(A)||s.some(N=>w.isFromSettings&&!N.isFromSettings?!1:N.filenamePatterns.some(W=>CU(W,A)))||a.add(A)})}).catch($=>{if($.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw $})}))))})(r,n,i);const l=new Nt;let u=!1;const d=Array.from(a).map(async f=>{const p=[];try{if(n.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((k,$)=>k+$.cellResults.length,0)>i.maxResults){u=!0;return}const m=[],w=this.g.get(f);if(w)w.apiNotebook.getCells().forEach($=>m.push({input:$.document.getText(),outputs:$.outputs.flatMap(A=>A.items.map(G=>G.data.toString()))}));else{const k=await this.s.value.readFile(f),$=ae.fromString(k.toString()),A=await o.deserializeNotebook($.buffer,n);if(n.isCancellationRequested)return;zs.from(A).cells.forEach(N=>m.push({input:N.source,outputs:N.outputs.flatMap(W=>W.items.map(X=>X.valueBytes.toString()))}))}if(n.isCancellationRequested)return;m.forEach((k,$)=>{const A=i.contentPattern.pattern,G=new wU(k.input,void 0,k.outputs),N=G.findInInputs(A),W=G.findInOutputs(A),X=W.flatMap(K=>Fk(K.matches,K.textBuffer)).map((K,Y)=>(K.webviewIndex=Y,K));if(N.length>0||W.length>0){const K={index:$,contentResults:Fk(N,G.inputTextBuffer),webviewResults:X};p.push(K)}});const x={resource:f,cellResults:p};l.set(f,x);return}catch{return}});return await Promise.all(d),{limitHit:u,results:[...l.values()]}}async z(t,i){const r=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==SP&&typeof r.mtime=="number"&&typeof r.size=="number"&&i.mtime<r.mtime&&i.etag!==R6({mtime:i.mtime,size:r.size}))throw new gm(h(2891,null),3,i)}A(t){return t.scheme===z.file?t.fsPath:t.toString()}B(t,i,r){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const s=new Vw(i,this.d,t,r.visibleRanges.map(Tr.to),r.selections.map(Tr.to),typeof r.viewColumn=="number"?Pt.to(r.viewColumn):void 0,r.viewType);this.h.set(i,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const r of t.value.removedDocuments){const s=y.revive(r),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const r=[];for(const s of t.value.addedDocuments){const n=y.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new oU(this.c,this.q,this.r,n,s);r.push(...s.cells.map(a=>_w.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:r}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const r of t.value.addedEditors){if(this.h.has(r.id))return;const s=y.revive(r.documentUri),n=this.g.get(s);n&&this.B(n,r.id,r)}const i=[];if(t.value.removedEditors)for(const r of t.value.removedEditors){const s=this.h.get(r);s&&(this.h.delete(r),this.k?.id===s.id&&(this.k=void 0),i.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const r=new Set;this.l.forEach(s=>r.add(s.id));for(const s of this.h.values()){const n=r.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=U.String.with("notebookType","A notebook type"),r=new de("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new U("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>ae.wrap(n))],new ue("Notebook Data",n=>zs.to(n.value))),s=new de("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new U("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new si(zs.from(n)))],new ue("Bytes",n=>n.buffer));t.registerApiCommand(r),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},DU=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=r,this.a=new ic}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const s=function(o){t.call(i,o)};return s.extension=e,this.a.event(s,void 0,r)}}async $participateInSave(e,t,i){const r=y.revive(e),s=this.c.getNotebookDocument(r);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:lf.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof Tn?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=Pi.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new si(o))}},PU=class{constructor(e){this.c=e,this.a=new P,this.onDidSaveNotebookDocument=this.a.event,this.b=new P,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,r){const n=this.c.getNotebookDocument(y.revive(e)).acceptModelChanged(t.value,i,r);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(y.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(y.revive(e));this.a.fire(t.apiNotebook)}},eb=class{constructor(t,i){this.c=t,this.d=i,this.a=new P,this.b=new P,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const r=this.d.getEditorById(t);i.visibleRanges&&r._acceptVisibleRanges(i.visibleRanges.ranges.map(Tr.to)),i.selections&&r._acceptSelections(i.selections.selections.map(Tr.to)),i.visibleRanges&&this.b.fire({notebookEditor:r.apiEditor,visibleRanges:r.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:r.apiEditor,selections:r.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(Pt.to(t[i]))}};eb=__decorate([__param(0,Ve)],eb);var _a;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(_a||(_a={}));var eJ=j("INotebookExecutionService"),AU=100,jk;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(jk||(jk={}));var tJ=j("INotebookKernelService"),iJ=j("INotebookKernelHistoryService"),tb=class{constructor(t,i,r,s,n){this.m=i,this.n=r,this.o=s,this.q=n,this.b=new Nt,this.c=new Nt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new P,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(V.MainThreadNotebookKernels);const o=new de("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new U("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return"skipIfAlreadySelected"in c?{notebookEditorId:l,skipIfAlreadySelected:c.skipIfAlreadySelected}:{notebookEditorId:l}}return c})],ue.Void),a=new de("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[U.Uri],new ue("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,i,r,s,n,o){for(const N of this.j.values())if(N.controller.id===i&&Fe.equals(t.identifier,N.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${p.id}' of extension: '${t.identifier}'`);let u=!1;const d=new P,f=new P,p={id:Sp(t.identifier,i),notebookType:r,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(ff.from):[]};let m=n??l,w,x;this.a.$addKernel(a,p).catch(N=>{console.log(N),u=!0});let k=0;const $=()=>{if(u)return;const N=++k;Promise.resolve().then(()=>{N===k&&this.a.$updateKernel(a,p)})},A=new Nt,G={get id(){return i},get notebookType(){return p.notebookType},onDidChangeSelectedNotebooks:d.event,get label(){return p.label},set label(N){p.label=N??t.displayName??t.name,$()},get detail(){return p.detail??""},set detail(N){p.detail=N,$()},get description(){return p.description??""},set description(N){p.description=N,$()},get supportedLanguages(){return p.supportedLanguages},set supportedLanguages(N){p.supportedLanguages=N,$()},get supportsExecutionOrder(){return p.supportsExecutionOrder??!1},set supportsExecutionOrder(N){p.supportsExecutionOrder=N,$()},get rendererScripts(){return p.preloads?p.preloads.map(ff.to):[]},get executeHandler(){return m},set executeHandler(N){m=N??l},get interruptHandler(){return w},set interruptHandler(N){w=N,p.supportsInterrupt=!!N,$()},set variableProvider(N){L(t,"notebookVariableProvider"),x=N,p.hasVariableProvider=!!N,N?.onDidChangeVariables(W=>c.a.$variablesUpdated(W.uri)),$()},get variableProvider(){return x},createNotebookCellExecution(N){if(u)throw new Error("notebook controller is DISPOSED");if(!A.has(N.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(A.keys()).map(W=>W.toString())),new Error(`notebook controller is NOT associated to notebook: ${N.notebook.uri.toString()}`);return c._createNotebookCellExecution(N,Sp(t.identifier,this.id))},createNotebookExecution(N){if(L(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!A.has(N.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(A.keys()).map(W=>W.toString())),new Error(`notebook controller is NOT associated to notebook: ${N.uri.toString()}`);return c._createNotebookExecution(N,Sp(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),d.dispose(),f.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(N,W){W===Ad.Hidden&&L(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,N.uri,W)},onDidReceiveMessage:f.event,postMessage(N,W){return L(t,"notebookMessaging"),c.a.$postMessage(a,W&&c.n.getIdByEditor(W),N)},asWebviewUri(N){return L(t,"notebookMessaging"),Kl(N,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:G,onDidReceiveMessage:f,onDidChangeSelection:d,associatedNotebooks:A}),G}getIdByController(t){for(const[i,r]of this.j)if(r.controller===t)return Sp(r.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const r=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(r,i);const n={dispose:()=>{this.f.delete(r),s.a.$removeKernelDetectionTask(r)}};return this.f.set(r,n),n}registerKernelSourceActionProvider(t,i,r){const s=this.i++,n=typeof r.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,r),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,i);let a;return n!==void 0&&(a=r.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,i){const r=this.h.get(t);if(r){const s=new fe;return(await r.provideNotebookKernelSourceActions(i)??[]).map(o=>Dv.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,i,r){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(y.revive(i));r?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),r),s.onDidChangeSelection.fire({selected:r,notebook:n.apiNotebook})}}async $executeCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(y.revive(i)),o=[];for(const a of r){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(y.revive(i));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of r){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),r.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,r,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(y.revive(r)),u=c.controller.variableProvider;if(!u)return;let d;if(s!==void 0){if(d=this.s[s],!d)return}else this.s={};const f=n==="named"?hl.Named:hl.Indexed,p=u.provideVariables(l.apiNotebook,d,f,o,a);let m=0;for await(const w of p){if(a.isCancellationRequested)return;const x={id:this.r++,name:w.variable.name,value:w.variable.value,type:w.variable.type,interfaces:w.variable.interfaces,language:w.variable.language,expression:w.variable.expression,hasNamedChildren:w.hasNamedChildren,indexedChildrenCount:w.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[x.id]=w.variable,this.a.$receiveVariable(i,x),m++>=AU)return}}$acceptKernelMessageFromRenderer(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(i);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:r}))}$cellExecutionChanged(t,i,r){const n=this.n.getNotebookDocument(y.revive(t)).getCell(i);if(n){const o=r?Cv.to(r):fa.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new TU(i,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===gr.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,i){const r=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=r.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(r.uri))throw new Error(`duplicate notebook execution for ${r.uri}`);const n=new LU(i,r,this.a),o=n.onDidChangeState(()=>{n.state===ps.Resolved&&(n.dispose(),o.dispose(),this.c.delete(r.uri))});return this.c.set(r.uri,[n,o]),n.asApiObject()}};tb=__decorate([__param(4,Ve)],tb);var gr;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(gr||(gr={}));var TU=class wC extends ne{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.m=i,this.n=r,this.b=wC.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=gr.Init,this.g=this.B(new lt),this.h=new NU(10,s=>this.s(s)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new si(i))}t(){if(this.f===gr.Init)throw new Error("Must call start before modifying cell output");if(this.f===gr.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}y(t){return t.map(i=>{const r=Id.ensureUniqueMimeTypes(i.items,!0);return r===i.items?_s.from(i):_s.from({items:r,id:i.id,metadata:i.metadata})})}async z(t,i,r){const s=this.w(i),n=this.y(Ni(t));return this.r({editType:_a.Output,cellHandle:s,append:r,outputs:n})}async C(t,i,r){return t=Id.ensureUniqueMimeTypes(Ni(t),!0),this.r({editType:_a.OutputItems,items:t.map($a.from),outputId:i.id,append:r})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(r){t.j=r,t.s([{editType:_a.ExecutionState,executionOrder:t.j}])},start(r){if(t.f===gr.Resolved||t.f===gr.Started)throw new Error("Cannot call start again");t.f=gr.Started,t.c.fire(),t.s({editType:_a.ExecutionState,runStartTime:r})},end(r,s,n){if(t.f===gr.Resolved)throw new Error("Cannot call resolve twice");t.f=gr.Resolved,t.c.fire(),t.h.flush();const o=RU(n);t.n.$completeExecution(t.b,new si({runEndTime:s,lastRunSuccess:r,error:o}))},clearOutput(r){return t.t(),t.z([],r,!1)},appendOutput(r,s){return t.t(),t.z(r,s,!0)},replaceOutput(r,s){return t.t(),t.z(r,s,!1)},appendOutputItems(r,s){return t.t(),t.C(r,s,!0)},replaceOutputItems(r,s){return t.t(),t.C(r,s,!1)}})}};function RU(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,i=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>i(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var ps;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(ps||(ps={}));var LU=class bC extends ne{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.h=i,this.j=r,this.b=bC.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=ps.Init,this.g=this.B(new lt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===ps.Resolved||this.f===ps.Started)throw new Error("Cannot call start again");this.f=ps.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===ps.Resolved)throw new Error("Cannot call resolve twice");this.f=ps.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},NU=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new xr,this.b=Date.now(),tr(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Sp(e,t){return`${e.value}/${t}`}var MU=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(V.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this.c.getEditorById(e);this.a.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(r=>r.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(r,s,n)=>this.d(t).event(r,s,n),postMessage:(r,s)=>{Vw.apiEditorsToExtHost.has(r)&&([r,s]=[s,r]);const n=s&&Vw.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,r)}}}d(e){let t=this.a.get(e);return t||(t=new P({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},FU=class{constructor(e){this.b=new Map,this.a=e.getProxy(V.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(L(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),se(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,r){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(Me(t)?t:y.revive(t),i)}},OU=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,i){const r=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(r,{location:kv.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(Wb),this.d(r,i,!!o)}d(e,t,i){let r;i&&(r=new lt,this.c.set(e,r));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),r?.dispose()};let n;try{n=t(new Wk(this.a,e),i&&r?r.token:tt.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function UU(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var Wk=class extends C0{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([oO(100,(e,t)=>UU(e,t),()=>Object.create(null))],Wk.prototype,"throttledReport",null);var HU=class yC{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(V.MainThreadQuickDiff)}$provideOriginalResource(t,i,r){const s=y.revive(i),n=this.c.get(t);return n?Zt(()=>n.provideOriginalResource(s,r)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,r,s,n,o){const a=yC.a++;this.c.set(a,r);const c=Fe.toKey(t.identifier);return this.b.$registerQuickDiffProvider(a,ma.from(i,this.d),`${c}.${s}`,n,o),{dispose:()=>{this.b.$unregisterQuickDiffProvider(a),this.c.delete(a)}}}};function BU(e,t,i){const r=e.getProxy(V.MainThreadQuickOpen);class s{constructor(p,m){this.e=new Map,this.f=0,this.a=p,this.b=m}showQuickPick(p,m,w,x=tt.None){this.c=void 0;const k=Promise.resolve(m),$=++this.f,A=r.$show($,{title:w?.title,placeHolder:w?.placeHolder,matchOnDescription:w?.matchOnDescription,matchOnDetail:w?.matchOnDetail,ignoreFocusLost:w?.ignoreFocusOut,canPickMany:w?.canPickMany},x),G={},N=A.then(()=>G);return Promise.race([N,k]).then(W=>{if(W===G)return;const X=Ze(p,"quickPickItemTooltip");return k.then(K=>{const Y=[];for(let le=0;le<K.length;le++){const We=K[le];if(typeof We=="string")Y.push({label:We,handle:le});else if(We.kind===ul.Separator)Y.push({type:"separator",label:We.label});else{We.tooltip&&!X&&console.warn(`Extension '${p.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${p.identifier.value}`);const Ce=We.iconPath?l(We.iconPath):void 0;Y.push({label:We.label,iconPath:Ce?.iconPath,iconClass:Ce?.iconClass,description:We.description,detail:We.detail,picked:We.picked,alwaysShow:We.alwaysShow,tooltip:X?me.fromStrict(We.tooltip):void 0,handle:le})}}return w&&typeof w.onDidSelectItem=="function"&&(this.c=le=>{w.onDidSelectItem(K[le])}),r.$setItems($,Y),A.then(le=>{if(typeof le=="number")return K[le];if(Array.isArray(le))return le.map(We=>K[We])})})}).then(void 0,W=>{if(!ys(W))return r.$setError($,W),Promise.reject(W)})}$onItemSelected(p){this.c?.(p)}showInput(p,m=tt.None){return this.d=p?.validateInput,r.$input(p,typeof this.d=="function",m).then(void 0,w=>{if(!ys(w))return Promise.reject(w)})}async $validateInput(p){if(!this.d)return;const m=await this.d(p);if(!m||typeof m=="string")return m;let w;switch(m.severity){case da.Info:w=wt.Info;break;case da.Warning:w=wt.Warning;break;case da.Error:w=wt.Error;break;default:w=m.message?wt.Error:wt.Ignore;break}return{content:m.message,severity:w}}async showWorkspaceFolderPick(p,m=tt.None){const w=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[p]);if(!w)return;const x=await this.a.getWorkspaceFolders2();if(x)return x.find(k=>k.uri.toString()===w.uri.toString())}createQuickPick(p){const m=new u(p,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}createInputBox(p){const m=new d(p,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}$onDidChangeValue(p,m){this.e.get(p)?._fireDidChangeValue(m)}$onDidAccept(p){this.e.get(p)?._fireDidAccept()}$onDidChangeActive(p,m){const w=this.e.get(p);w instanceof u&&w._fireDidChangeActive(m)}$onDidChangeSelection(p,m){const w=this.e.get(p);w instanceof u&&w._fireDidChangeSelection(m)}$onDidTriggerButton(p,m){this.e.get(p)?._fireDidTriggerButton(m)}$onDidTriggerItemButton(p,m,w){const x=this.e.get(p);x instanceof u&&x._fireDidTriggerItemButton(m,w)}$onDidHide(p){this.e.get(p)?._fireDidHide()}}class n{static{this.a=1}constructor(p,m){this.y=p,this.z=m,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new P,this.r=new P,this.s=new P,this.t=new P,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(p){this.b=p,this.A({title:p})}get step(){return this.c}set step(p){this.c=p,this.A({step:p})}get totalSteps(){return this.d}set totalSteps(p){this.d=p,this.A({totalSteps:p})}get enabled(){return this.g}set enabled(p){this.g=p,this.A({enabled:p})}get busy(){return this.j}set busy(p){this.j=p,this.A({busy:p})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(p){this.k=p,this.A({ignoreFocusOut:p})}get value(){return this.l}set value(p){this.l=p,this.A({value:p})}get valueSelection(){return this.m}set valueSelection(p){this.m=p,this.A({valueSelection:p})}get placeholder(){return this.n}set placeholder(p){this.n=p,this.A({placeholder:p})}get buttons(){return this.o}set buttons(p){const m=Ze(this.y,"quickInputButtonLocation");!m&&p.some(w=>w.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=p.slice(),this.p.clear(),p.forEach((w,x)=>{const k=w===ll.Back?-1:x;this.p.set(k,w)}),this.A({buttons:p.map((w,x)=>({...l(w.iconPath),tooltip:w.tooltip,handle:w===ll.Back?-1:x,location:m?w.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(p){this.l=p,this.r.fire(p)}_fireDidTriggerButton(p){const m=this.p.get(p);m&&this.s.fire(m)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=Hr(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),r.$dispose(this._id))}A(p){if(!this.w){for(const m of Object.keys(p)){const w=p[m];this.v[m]=w===void 0?null:w}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){r.$createOrUpdate(this.v),this.v={id:this._id}}}function o(f){if(f instanceof oi)return{id:f.id};const p=c(f),m=a(f);return{dark:typeof p=="string"?y.file(p):p,light:typeof m=="string"?y.file(m):m}}function a(f){return typeof f=="object"&&"light"in f?f.light:f}function c(f){return typeof f=="object"&&"dark"in f?f.dark:f}function l(f){const p=o(f);let m,w;return"id"in p?w=$t.asClassName(p):m=p,{iconPath:m,iconClass:w}}class u extends n{constructor(p,m){super(p,m),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new P,this.M=[],this.N=new P,this.O=new P,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(p){this.C=p.slice(),this.D.clear(),this.E.clear(),p.forEach((x,k)=>{this.D.set(k,x),this.E.set(x,k)});const m=Ze(this.y,"quickPickItemTooltip"),w=[];for(let x=0;x<p.length;x++){const k=p[x];if(k.kind===ul.Separator)w.push({type:"separator",label:k.label});else{k.tooltip&&!m&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const $=k.iconPath?l(k.iconPath):void 0;w.push({handle:x,label:k.label,iconPath:$?.iconPath,iconClass:$?.iconClass,description:k.description,detail:k.detail,picked:k.picked,alwaysShow:k.alwaysShow,tooltip:m?me.fromStrict(k.tooltip):void 0,buttons:k.buttons?.map((A,G)=>({...l(A.iconPath),tooltip:A.tooltip,handle:G}))})}}this.A({items:w})}get canSelectMany(){return this.F}set canSelectMany(p){this.F=p,this.A({canSelectMany:p})}get matchOnDescription(){return this.G}set matchOnDescription(p){this.G=p,this.A({matchOnDescription:p})}get matchOnDetail(){return this.H}set matchOnDetail(p){this.H=p,this.A({matchOnDetail:p})}get sortByLabel(){return this.I}set sortByLabel(p){this.I=p,this.A({sortByLabel:p})}get keepScrollPosition(){return this.J}set keepScrollPosition(p){this.J=p,this.A({keepScrollPosition:p})}get activeItems(){return this.K}set activeItems(p){this.K=p.filter(m=>this.E.has(m)),this.A({activeItems:this.K.map(m=>this.E.get(m))})}get selectedItems(){return this.M}set selectedItems(p){this.M=p.filter(m=>this.E.has(m)),this.A({selectedItems:this.M.map(m=>this.E.get(m))})}_fireDidChangeActive(p){const m=bt(p.map(w=>this.D.get(w)));this.K=m,this.L.fire(m)}_fireDidChangeSelection(p){const m=bt(p.map(w=>this.D.get(w)));this.M=m,this.N.fire(m)}_fireDidTriggerItemButton(p,m){const w=this.D.get(p);if(!w||!w.buttons||!w.buttons.length)return;const x=w.buttons[m];x&&this.O.fire({button:x,item:w})}}class d extends n{constructor(p,m){super(p,m),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(p){this.C=p,this.A({password:p})}get prompt(){return this.D}set prompt(p){this.D=p,this.A({prompt:p})}get validationMessage(){return this.E}set validationMessage(p){this.E=p,p?typeof p=="string"?this.A({validationMessage:p,severity:wt.Error}):this.A({validationMessage:p.message,severity:p.severity??wt.Error}):this.A({validationMessage:void 0,severity:wt.Ignore})}}return new s(t,i)}var zk=new yi(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),sJ=new yi(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),nJ=new yi(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function jU(e,t,i=!1){const r=e||"",s=t||"",n=zk.value.collator.compare(r,s);return zk.value.collatorIsNumeric&&n===0&&r!==s?r<s?-1:1:n}function WU(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function kp(e,t,i=!1){const r=e.split(Yi),s=t.split(Yi),n=r.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return jU(r[l],s[l],i);if(a)return-1;if(c)return 1;const u=WU(r[l],s[l],i);if(u!==0)return u}}var ib;function _k(e){return e instanceof y}function zU(e,t){return e.scheme===z.file&&t.scheme===z.file&&Wr?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function rb(e){if(e)return typeof e.iconPath=="string"?y.file(e.iconPath):y.isUri(e.iconPath)||$t.isThemeIcon(e.iconPath)?e.iconPath:void 0}function ao(e){if(e){if(y.isUri(e))return e;if($t.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function _U(e){const t=ao(e.authorIcon),i=e.references?.map(r=>({...r,icon:ao(r.icon)}));return{...e,authorIcon:t,references:i}}function sb(e){return e?{...e,icon:ao(e.icon)}:void 0}function nb(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:y.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,r=typeof t.iconPath=="string"?t.iconPath:y.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return kp(i,r)}function VU(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=nb(e,t),i!==0)return i;if(e.light&&t.light)i=nb(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=nb(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function qU(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],s=t.arguments[i];if(r!==s&&!(_k(r)&&_k(s)&&zU(r,s)))return r<s?-1:1}return 0}function Vk(e,t){let i=kp(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=qU(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=VU(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(i!==0)return i;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=kp(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(i!==0)return i;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=kp(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function GU(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function JU(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?GU(e.arguments,t.arguments):e.arguments===t.arguments)}function ZU(e,t){return wr(e,t,JU)}var QU=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return L(this.l,"scmValidation"),this.h}set validateInput(e){if(L(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return L(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,r,s){this.l=e,this.m=r,this.n=s,this.d="",this.f=new P,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){L(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},YU=class xC{static{this.d=0}get disposed(){return this.m}get id(){return this.w}get label(){return this.x}set label(t){this.x=t,this.t.$updateGroupLabel(this.v,this.handle,t)}get contextValue(){return this.q}set contextValue(t){this.q=t,this.t.$updateGroup(this.v,this.handle,this.features)}get hideWhenEmpty(){return this.s}set hideWhenEmpty(t){this.s=t,this.t.$updateGroup(this.v,this.handle,this.features)}get features(){return{contextValue:this.contextValue,hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,i,r,s,n,o,a){this.t=t,this.u=i,this.v=r,this.w=s,this.x=n,this.multiDiffEditorEnableViewChanges=o,this.y=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new P,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new P,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.s=void 0,this.handle=xC.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,i){const r=this.j.get(t);return r?Zt(()=>this.u.executeCommand(r.command,...r.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(Vk),r=Vb(this.p,t,Vk).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let d;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const K=new fe;d=this.u.converter.toInternal(c.command,K),this.k.set(l,K)}else this.j.set(l,c.command);const f=Ze(this.y,"scmMultiDiffEditor"),p=f?c.multiDiffEditorOriginalUri:void 0,m=f?c.multiFileDiffEditorModifiedUri:void 0,w=rb(c.decorations),x=c.decorations&&rb(c.decorations.light)||w,k=c.decorations&&rb(c.decorations.dark)||w,$=[x,k],A=c.decorations&&c.decorations.tooltip||"",G=c.decorations&&!!c.decorations.strikeThrough,N=c.decorations&&!!c.decorations.faded,W=c.contextValue||"";return{rawResource:[l,u,$,A,G,N,W,d,p,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=r.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=r.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(d=>d.handle),u=this.o.splice(o,a,...l);for(const d of u)this.h.delete(d),this.j.delete(d),this.k.get(d)?.dispose(),this.k.delete(d)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},ob=class EC{static{this.d=0}#e;get id(){return this.A}get label(){return this.B}get rootUri(){return this.C}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.x,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let i;Ze(this.y,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.x,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get secondaryQuickDiffProvider(){return L(this.y,"quickDiffProvider"),this.k}set secondaryQuickDiffProvider(t){L(this.y,"quickDiffProvider"),this.k=t;const i=t?.label;this.#e.$updateSourceControl(this.x,{hasSecondaryQuickDiffProvider:!!t,secondaryQuickDiffLabel:i})}get historyProvider(){return L(this.y,"scmHistoryProvider"),this.l}set historyProvider(t){L(this.y,"scmHistoryProvider"),this.l=t,this.m.value=new fe,this.#e.$updateSourceControl(this.x,{hasHistoryProvider:!!t}),t&&(this.m.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const i=sb(t?.currentHistoryItemRef),r=sb(t?.currentHistoryItemRemoteRef),s=sb(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.x,i,r,s)})),this.m.value.add(t.onDidChangeHistoryItemRefs(i=>{if(i.added.length===0&&i.modified.length===0&&i.removed.length===0)return;const r=i.added.map(o=>({...o,icon:ao(o.icon)})),s=i.modified.map(o=>({...o,icon:ao(o.icon)})),n=i.removed.map(o=>({...o,icon:ao(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.x,{added:r,modified:s,removed:n,silent:i.silent})})))}get commitTemplate(){return this.n}set commitTemplate(t){t!==this.n&&(this.n=t,this.#e.$updateSourceControl(this.x,{commitTemplate:t}))}get acceptInputCommand(){return this.p}set acceptInputCommand(t){this.o.value=new fe,this.p=t;const i=this.z.converter.toInternal(t,this.o.value);this.#e.$updateSourceControl(this.x,{acceptInputCommand:i})}get actionButton(){return L(this.y,"scmActionButton"),this.s}set actionButton(t){if(L(this.y,"scmActionButton"),ym(this.s,t))return;this.s=t,this.q.value=new fe;const i=t!==void 0?{command:{...this.z.converter.toInternal(t.command,this.q.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(r=>r.map(s=>this.z.converter.toInternal(s,this.q.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.x,{actionButton:i??null})}get statusBarCommands(){return this.u}set statusBarCommands(t){if(this.u&&t&&ZU(this.u,t))return;this.t.value=new fe,this.u=t;const i=(t||[]).map(r=>this.z.converter.toInternal(r,this.t.value));this.#e.$updateSourceControl(this.x,{statusBarCommands:i})}get selected(){return this.v}constructor(t,i,r,s,n,o,a){this.y=t,this.z=s,this.A=n,this.B=o,this.C=a,this.f=new Map,this.h=void 0,this.j=void 0,this.k=void 0,this.m=new xs,this.n=void 0,this.o=new xs,this.p=void 0,this.q=new xs,this.t=new xs,this.u=void 0,this.v=!1,this.w=new P,this.onDidChangeSelection=this.w.event,this.x=EC.d++,this.D=new Map,this.E=new Set,this.#e=r;const c=y.from({scheme:z.vscodeSourceControl,path:`${n}/scm${this.x}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new QU(t,i,this.#e,this.x,c),this.#e.$registerSourceControl(this.x,n,o,a,c)}createResourceGroup(t,i,r){const s=Ze(this.y,"scmMultiDiffEditor")&&r?.multiDiffEditorEnableViewChanges===!0,n=new YU(this.#e,this.z,this.x,t,i,s,this.y),o=ft.once(n.onDidDispose)(()=>this.D.delete(n));return this.D.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],i=[];for(const[r,s]of this.D){s.dispose();const n=r.onDidUpdateResourceStates(()=>{this.E.add(r),this.eventuallyUpdateResourceStates()});ft.once(r.onDidDispose)(()=>{this.E.delete(r),n.dispose(),this.f.delete(r.handle),this.#e.$unregisterGroup(this.x,r.handle)}),t.push([r.handle,r.id,r.label,r.features,r.multiDiffEditorEnableViewChanges]);const o=r._takeResourceStateSnapshot();o.length>0&&i.push([r.handle,o]),this.f.set(r.handle,r)}this.#e.$registerGroups(this.x,t,i),this.D.clear()}eventuallyUpdateResourceStates(){const t=[];this.E.forEach(i=>{const r=i._takeResourceStateSnapshot();r.length!==0&&t.push([i.handle,r])}),t.length>0&&this.#e.$spliceResourceStates(this.x,t),this.E.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.v=t,this.w.fire(t)}dispose(){this.o.dispose(),this.q.dispose(),this.t.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.x)}};__decorate([Dw(100)],ob.prototype,"eventuallyAddResourceGroups",null),__decorate([Dw(100)],ob.prototype,"eventuallyUpdateResourceStates",null);var ab=class{static{ib=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,i,r,s){this.m=i,this.n=r,this.o=s,this.h=new Map,this.j=new Vr,this.k=new P,this.f=t.getProxy(V.MainThreadSCM),this.g=t.getProxy(V.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,i,r,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,r,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=ib.d++,o=new ob(t,this.n,this.f,this.m,i,r,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.j.get(t.identifier),r=i&&i[i.length-1];return r&&r.inputBox}$provideOriginalResource(t,i,r){const s=y.revive(i);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):Zt(()=>n.quickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$provideSecondaryOriginalResource(t,i,r){const s=y.revive(i);this.o.trace("ExtHostSCM#$provideSecondaryOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.secondaryQuickDiffProvider||!n.secondaryQuickDiffProvider.provideOriginalResource?Promise.resolve(null):Zt(()=>n.secondaryQuickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const r=this.h.get(t);return r&&r.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,r,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,i,r);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(i);return o?o.$executeResourceCommand(r,s):Promise.resolve(void 0)}$validateInput(t,i,r){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):Zt(()=>s.inputBox.validateInput(i,r)).then(n=>{if(!n)return Promise.resolve(void 0);const o=me.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,i,r){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(i,r)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(i,r))?.map(o=>({...o,icon:ao(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(i,r))?.map(o=>_U(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,i,r,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(i,r,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};ab=ib=__decorate([__param(3,Ve)],ab);var XU=class SC{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(V.MainThreadShare)}async $provideShare(t,i,r){return await this.c.get(t)?.provideShare({selection:O.to(i.selection),resourceUri:y.revive(i.resourceUri)},r)??void 0}registerShareProvider(t,i){const r=SC.a++;return this.c.set(r,i),this.b.$registerShareProvider(r,ma.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(r),this.c.delete(r)}}}},KU=class kC{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(V.MainThreadSpeech)}async $createSpeechToTextSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new fe,o=new lt;this.d.set(i,o);const a=await s.provideSpeechToTextSession(o.token,r?{language:r}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new fe,o=new lt;this.d.set(i,o);const a=await s.provideTextToSpeechSession(o.token,r?{language:r}:void 0);a&&(this.f.set(i,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const r=this.c.get(t);if(!r)return;const s=new fe,n=new lt;this.d.set(i,n);const o=await r.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,r){const s=kC.a++;return this.c.set(s,r),this.b.$registerProvider(s,i,{extension:t,displayName:t.value}),se(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},eH=class _p{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new el("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new el("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,r,s,n,o=Fs.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new fe,this.#e=t,this.#t=i,n&&s){this.c=rR(s.identifier,n);const l=r.get(this.c);l&&(o=l.alignLeft?Fs.Left:Fs.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(_p.a++);this.e=s,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(on(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&L(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&L(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!_p.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new fe,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.n?i=this.n:i=h(2892,null,this.e.displayName||this.e.name);let r=this.o;this.p&&(r=_p.b.get(this.p.id));let s,n;typeof this.m=="function"?(s=me.fromStrict(this.l),n=!0):(s=me.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,s,n,this.s?.internal,r,this.p,this.g===Fs.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},tH=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Fs.Left,Number.MIN_VALUE),this.a.name=h(2893,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Ae(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},iH=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(V.MainThreadStatusBar),this.b=t,this.c=new tH(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const i=this.e.get(e);if(!i)return;const r=typeof i.tooltip2=="function"?await i.tooltip2(t):i.tooltip2;return t.isCancellationRequested?void 0:me.fromStrict(r)}createStatusBarEntry(e,t,i,r){const s=new eH(this.a,this.b,this.f,e,t,i,r,()=>this.e.delete(s.entryId));return this.e.set(s.entryId,s),s}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let r;return typeof t=="number"?r=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Ae(()=>{i.dispose(),clearTimeout(r)})}},rH=class extends ne{constructor(e,t){super(),this.n=t,this.a=new P,this.b=new P,this.c=new P,this.f=new P,this.g=new P,this.h=new P,this.j=new P,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(V.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(i=>this.j.fire(i))),this.B(this.n.onDidChangeActiveTextEditor(i=>this.h.fire(i)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let r;typeof t=="number"?r={position:Pt.from(t),preserveFocus:i}:typeof t=="object"?r={position:Pt.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?O.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,r),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new MN(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(lr.to);i._acceptSelections(r)}if(t.visibleRanges){const r=bt(t.visibleRanges.map(O.to));i._acceptVisibleRanges(r)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:xa.to(t.options.lineNumbers)}}),t.selections){const r=ta.fromValue(t.selections.source),s=t.selections.selections.map(lr.to);this.a.fire({textEditor:i.value,selections:s,kind:r})}if(t.visibleRanges){const r=bt(t.visibleRanges.map(O.to));this.c.fire({textEditor:i.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const i=this.n.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=Pt.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this.f.fire({textEditor:i.value,viewColumn:r}))}}$acceptEditorDiffInformation(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(!t){i._acceptDiffInformation(void 0),this.g.fire({textEditor:i.value,diffInformation:void 0});return}const r=this,s=t.map(n=>{const o=y.revive(n.original),a=y.revive(n.modified),c=n.changes.map(l=>{const[u,d,f,p]=l;let m;return u===d?m=ia.Addition:f===p?m=ia.Deletion:m=ia.Modification,{original:{startLineNumber:u,endLineNumberExclusive:d},modified:{startLineNumber:f,endLineNumberExclusive:p},kind:m}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return r.n.getDocument(a)?.version!==n.documentVersion}})});i._acceptDiffInformation(s),this.g.fire({textEditor:i.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},cb=class{constructor(t){this.a=new $d(Hs.Dark),this.b=new P}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=Hs.Light;break;case"hcDark":i=Hs.HighContrast;break;case"hcLight":i=Hs.HighContrastLight;break;default:i=Hs.Dark}this.a=new $d(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};cb=__decorate([__param(0,Be)],cb);var cJ=j("IExtHostTimeline"),sH=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(V.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,r)=>{if(i&&i.$mid===12)if(this.b.get(i.source)&&r&&Ze(r,"timeline")){const s=i.uri===void 0?void 0:y.revive(i.uri);return this.c.get(i.source)?.get(qk(s))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,r){return this.b.get(e)?.provider.provideTimeline(y.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const s=new fe,n=this.d(t.id,r,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const d=await t.provideTimeline(c,l,u);if(d==null)return;const f=n(c,l);return{...d,source:t.id,items:d.items.map(f)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},i)}d(e,t,i){return(r,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=qk(r);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,d,f;o.iconPath&&(a instanceof oi?f={id:a.id,color:a.color}:y.isUri(a)?(u=a,d=a):{light:u,dark:d}=a);let p;return Ii.isMarkdownString(c.tooltip)?p=me.from(c.tooltip):Me(c.tooltip)?p=c.tooltip:Ii.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=me.from(c.detail)):Me(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:d,themeIcon:f,tooltip:p,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),se(()=>{for(const r of this.c.values())r.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function qk(e){return e?.toString()}var nH={IconContribution:"base.contributions.icons"},Gk;(function(e){function t(i,r){let s=i.defaults;for(;$t.isThemeIcon(s);){const n=Va.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(Gk||(Gk={}));var Jk;(function(e){function t(r){return{weight:r.weight,style:r.style,src:r.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function i(r){const s=n=>Me(n)?n:void 0;if(r&&Array.isArray(r.src)&&r.src.every(n=>Me(n.format)&&Me(n.location)))return{weight:s(r.weight),style:s(r.style),src:r.src.map(n=>({format:n.format,location:y.parse(n.location)}))}}e.fromJSONObject=i})(Jk||(Jk={}));var oH=/^([\w_-]+)$/,aH=h(2539,null),cH=class extends ne{constructor(){super(),this.a=this.B(new P),this.onDidChange=this.a.event,this.f={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:h(2540,null),pattern:oH.source,patternErrorMessage:aH},fontCharacter:{type:"string",description:h(2541,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.g={type:"string",pattern:`^${$t.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.h={}}registerIcon(e,t,i,r){const s=this.b[e];if(s){if(i&&!s.description){s.description=i,this.f.properties[e].markdownDescription=`${i} $(${e})`;const a=this.g.enum.indexOf(e);a!==-1&&(this.g.enumDescriptions[a]=i),this.a.fire()}return s}const n={id:e,description:i,defaults:t,deprecationMessage:r};this.b[e]=n;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.f.properties[e]=o,this.g.enum.push(e),this.g.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.f.properties[e];const t=this.g.enum.indexOf(e);t!==-1&&(this.g.enum.splice(t,1),this.g.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.f}getIconReferenceSchema(){return this.g}registerIconFont(e,t){const i=this.h[e];return i||(this.h[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.h[e]}getIconFont(e){return this.h[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;$t.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.b).map(s=>this.b[s]);for(const s of r.filter(n=>!!n.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${$t.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(n=>!$t.isThemeIcon(n.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}},Va=new cH;Ft.add(nH.IconContribution,Va);function $p(e,t,i,r){return Va.registerIcon(e,t,i,r)}function lH(){const e=C2();for(const t in e){const i="\\"+e[t].toString(16);Va.registerIcon(t,{fontCharacter:i})}}lH();var Zk="vscode://schemas/icons",Qk=Ft.as(kh.JSONContribution);Qk.registerSchema(Zk,Va.getIconSchema());var Yk=new Po(()=>Qk.notifySchemaChanged(Zk),200);Va.onDidChange(()=>{Yk.isScheduled()||Yk.schedule()});var lJ=$p("widget-close",re.close,h(2542,null)),uJ=$p("goto-previous-location",re.arrowUp,h(2543,null)),hJ=$p("goto-next-location",re.arrowDown,h(2544,null)),dJ=$t.modify(re.sync,"spin"),fJ=$t.modify(re.loading,"spin"),pJ=h(4445,null),gJ=$p("default-view-icon",re.window,h(4446,null)),Cp;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Cp||(Cp={}));var Xk;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(Xk||(Xk={}));var uH=class extends ne{constructor(){super(...arguments),this.c=this.B(new P),this.onDidRegister=this.c.event,this.f=this.B(new P),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const s=e;return s.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},tI(this.g,t,[]).push(s),i?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),r=i?.indexOf(e);if(r!==-1){i?.splice(r,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Ft.add(Cp.ViewContainersRegistry,new uH);var Ip;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Ip||(Ip={}));function hH(e,t){const i=e.group??Ip.More,r=t.group??Ip.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}var dH=class extends ne{constructor(){super(...arguments),this.c=this.B(new P),this.onViewsRegistered=this.c.event,this.f=this.B(new P),this.onViewsDeregistered=this.f.event,this.g=this.B(new P),this.onDidChangeContainer=this.g.event,this.h=this.B(new P),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new ey}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.r(t,i)),this.c.fire(e)}deregisterViews(e,t){const i=this.s(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const r=this.s(e,i);r.length&&(this.r(r,t),this.g.fire({views:r,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(r=>r.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(r=>r.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),se(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,s]of t)this.n.add(e,s),i.set(r,se(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(hH)}r(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const r of e){if(this.getView(r.id)!==null)throw new Error(h(4447,null,r.id));i.push(r)}}s(e,t){const i=this.m.get(t);if(!i)return[];const r=[],s=[];for(const n of i)e.includes(n)?r.push(n):s.push(n);return r.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),r}};Ft.add(Cp.ViewsRegistry,new dH);var mJ=j("viewDescriptorService"),Kk;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(Kk||(Kk={}));var e$;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(e$||(e$={}));var gs=class extends Error{constructor(e){super(h(4448,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},fH=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function t$(e,t){if(Me(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let i;return Array.isArray(e.highlights)&&(i=e.highlights.filter(r=>r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"),i=i.length?i:void 0),{label:e.label,highlights:i}}}var pH=class extends ne{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new fH;function r(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>r(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>r(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return L(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return L(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(d){Gr(d)&&L(i,"treeViewMarkdownMessage"),a.message=d},get title(){return a.title},set title(d){a.title=d},get description(){return a.description},set description(d){a.description=d},get badge(){return a.badge},set badge(d){d!==void 0&&S1.isViewBadge(d)?a.badge={value:Math.floor(Math.abs(d.value)),tooltip:d.tooltip}:d===void 0&&(a.badge=void 0)},reveal:(d,f)=>a.reveal(d,f),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const i=this.a.get(e);if(!i)return Promise.reject(new gs(e));if(!t){const s=await i.getChildren();return s?[[0,...s]]:void 0}const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=await i.getChildren(n);o&&r.push([s,...o])}return r}async $handleDrop(e,t,i,r,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new gs(e));const l=Da.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,r,s)}async j(e,t,i,r,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(i,e,r);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,i,r){const s=this.a.get(e);if(!s)return Promise.reject(new gs(e));const n=await this.j(new oa,s,t,r,i);if(!(!n||r.isCancellationRequested))return Da.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new gs(e);return t.hasResolve}$resolve(e,t,i){const r=this.a.get(e);if(!r)throw new gs(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.a.get(e);if(!r)throw new gs(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.a.get(e);if(!r)throw new gs(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new gs(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new gs(e);i.setCheckboxState(t)}m(e,t,i){const r=this.B(new gH(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,r),r}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},gH=class Bb extends ne{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!xt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,i,r,s,n,o){if(super(),this.I=t,this.J=r,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new P),this.onDidExpandElement=this.u.event,this.w=this.B(new P),this.onDidCollapseElement=this.w.event,this.y=this.B(new P),this.onDidChangeSelection=this.y.event,this.z=this.B(new P),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new P),this.onDidChangeVisibility=this.C.event,this.D=this.B(new P),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new P),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new lt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const d of o.contributes.views[u])d.id===t&&(this.P=d.name);this.f=i.treeDataProvider,this.g=i.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=ft.debounce(this.F.event,(u,d)=>(u||(u={message:!1,elements:[]}),d.element!==!1&&(a||(a=new Promise(f=>c=f),this.G=this.G.then(()=>a)),Array.isArray(d.element)?u.elements.push(...d.element):u.elements.push(d.element)),d.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:d})=>{d.length&&(this.H=this.H.then(()=>{const f=c;return a=null,this.$(d).then(()=>f())})),u&&this.J.$setMessage(this.I,me.fromStrict(this.O)??"")}))}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let r=this.X(t);return r||(r=await this.Y(i)),r?r.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const r=xt(i.select)?!0:i.select,s=xt(i.focus)?!1:i.focus,n=xt(i.expand)?!1:i.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:r,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:r,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=pf.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,i){const r=this.getExtensionElement(t);r&&(i?this.u.fire(Object.freeze({element:r})):this.w.fire(Object.freeze({element:r})))}setSelectionAndFocus(t,i){const r=!wr(this.s,t);this.s=t;const s=this.t!==i;this.t=i,r&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async r=>{const s=this.getExtensionElement(r.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:r.newState?Dr.Checked:Dr.Unchecked}:Promise.resolve(void 0)}))).filter(r=>r!==void 0);i.forEach(r=>{r.treeItem.checkboxState=r.newState?Dr.Checked:Dr.Unchecked}),this.D.fire({items:i.map(r=>[r.extensionItem,r.newState])})}async handleDrag(t,i,r){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,i,r),i}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,i,r){const s=i?this.getExtensionElement(i):void 0;if(!(!s&&i||!this.g?.handleDrop))return Zt(()=>this.g?.handleDrop?this.g.handleDrop(s,t,r):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,i){if(!this.f.resolveTreeItem)return;const r=this.j.get(t);if(r){const s=this.m.get(r);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,r,i)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(i=>i?this.S(i).then(r=>this.W(i,r[r.length-1]).then(s=>(r.push(s),r))):Promise.resolve([]))}U(t){const i=this.m.get(t);return i?Promise.resolve(i.parent?this.j.get(i.parent.item.handle):void 0):Zt(()=>this.f.getParent(t))}W(t,i){const r=this.m.get(t);return r?Promise.resolve(r):Zt(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,i,!0)).then(s=>this.getChildren(i?i.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let i;if(typeof t=="string"){const r=this.getExtensionElement(t);i=r?this.m.get(r):void 0}else i=t;return i&&i.children||void 0}return this.h}async Y(t){this.rb(t);const i=new lt(this.Z.token);try{const r=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(i.token.isCancellationRequested)return;const n=bt(s||[]),o=await Promise.all(bt(n).map(c=>this.f.getTreeItem(c)));if(i.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,r):null);return bt(a)}finally{i.dispose()}}$(t){if(t.some(r=>!r))return this.Z.dispose(!0),this.Z=new lt,this.tb(),this.J.$refresh(this.I);{const r=this.ab(t);if(r.length)return this.bb(r)}return Promise.resolve(void 0)}ab(t){const i=new Set,r=t.map(n=>this.m.get(n));for(const n of r)if(n&&!i.has(n.item.handle)){let o=n;for(;o&&o.parent&&r.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&i.add(n.item.handle)}const s=[];return i.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const i={};return Promise.all(t.map(r=>this.cb(r).then(s=>{s&&(i[r]=s.item)}))).then(()=>Object.keys(i).length?this.J.$refresh(this.I,i):void 0)}cb(t){const i=this.getExtensionElement(t);if(i){const r=this.m.get(i);if(r)return this.rb(i),Zt(()=>this.f.getTreeItem(i)).then(s=>{if(s){const n=this.ib(i,s,r.parent);return this.pb(i,n,r,r.parent),r.dispose(),n}return null})}return Promise.resolve(null)}db(t,i,r){const s=this.ib(t,i,r);if(i.id&&this.j.has(s.item.handle))throw new Error(h(2896,null,i.id));return this.ob(t,s),this.qb(s,r),s}eb(t){return Ii.isMarkdownString(t)?me.from(t):t}fb(t,i){return i?{...this.L.toInternal(i,t),originalId:i.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let i,r,s;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,r=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:i===Dr.Checked,tooltip:r,accessibilityInformation:s}}hb(t){if(!fd.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,i,r){this.hb(i);const s=this.B(new fe),n=this.kb(t,i,r),o=this.lb(i);return{item:{handle:n,parentHandle:r?r.item.handle:void 0,label:t$(i.label,this.N),description:i.description,resourceUri:i.resourceUri,tooltip:this.eb(i.tooltip),command:this.fb(s,i.command),contextValue:i.contextValue,icon:o,iconDark:this.mb(i)||o,themeIcon:this.jb(i),collapsibleState:xt(i.collapsibleState)?Un.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.gb(i)},extensionItem:i,parent:r,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof oi?t.iconPath:void 0}kb(t,{id:i,label:r,resourceUri:s},n,o){if(i)return`${Bb.b}/${i}`;const a=t$(r,this.N),c=n?n.item.handle:Bb.a;let l=a?a.label:s?er(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,d=this.X(n)||[];let f,p=0;do{if(f=`${c}/${p}:${l}`,o||!this.j.has(f)||u===f)break;p++}while(p<=d.length);return f}lb(t){if(t.iconPath&&!(t.iconPath instanceof oi))return typeof t.iconPath=="string"||y.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof oi)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return y.isUri(t)?t:y.file(t)}ob(t,i){this.j.set(i.item.handle,t),this.m.set(t,i)}pb(t,i,r,s){this.j.delete(i.item.handle),this.m.delete(t),i.item.handle!==r.item.handle&&this.j.delete(r.item.handle),this.ob(t,i);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===r.item.handle)[0];o&&n.splice(n.indexOf(o),1,i)}qb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}i.children=void 0}}else this.tb()}sb(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(i.item.handle),i.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},mH=class $C{static{this.a=new Set([z.http,z.https])}constructor(t){this.c=new Map,this.b=t.getProxy(V.MainThreadUriOpeners)}registerExternalUriOpener(t,i,r,s){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const n=s.schemes.find(o=>!$C.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(i,r),this.b.$registerUriOpener(i,s.schemes,t,s.label),se(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=y.revive(i);return s.canOpenExternalUri(n,r)}async $openUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(y.revive(i.resolvedUri),{sourceUri:y.revive(i.sourceUri)},r)}},vH=class CC{static{this.a=0}constructor(t){this.c=new pn,this.d=new Map,this.b=t.getProxy(V.MainThreadUrls)}registerUriHandler(t,i){const r=t.identifier;if(this.c.has(r))throw new Error(`Protocol handler already registered for extension ${r}`);const s=CC.a++;return this.c.add(r),this.d.set(s,i),this.b.$registerUriHandler(s,r,t.displayName||t.name),se(()=>{this.c.delete(r),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,i){const r=this.d.get(t);if(!r)return Promise.resolve(void 0);try{r.handleUri(y.revive(i))}catch(s){Vt(s)}return Promise.resolve(void 0)}async createAppUri(t){return y.revive(await this.b.$createAppUri(t))}},wH=class extends ne{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,r){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new P),this.onDidDispose=this.#d.event,this.#h=this.B(new P),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#r=i,this.#i=r.viewType,this.#n=r.panelOptions,this.#o=r.viewColumn,this.#s=r.title,this.#l=r.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#r.dispose(),super.dispose())}get webview(){return this.c(),this.#r}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,y.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Pt.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},bH=class IC extends ne{static c(){return Mt()}constructor(t,i,r){super(),this.j=i,this.m=r,this.g=new Map,this.h=new Map,this.f=t.getProxy(V.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,r,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Pt.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=za(t),l=IC.c();this.f.$createWebviewPanel(op(t),l,i,{title:r,panelOptions:yH(n),webviewOptions:zS(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,i,r,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((r,s)=>{const n=t[r],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const r of i){const s=this.getWebviewPanel(r);if(!s)continue;const n=t[r];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Pt.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,r){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:r,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:za(t)}),new Ae(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,r,s){const n=this.h.get(i);if(!n)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,r.webviewOptions,a),l=this.createNewWebviewPanel(t,i,r.title,s,r.panelOptions,c,r.active);await o.deserializeWebviewPanel(l,r.state)}createNewWebviewPanel(t,i,r,s,n,o,a){const c=new wH(t,this.f,o,{viewType:i,title:r,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function yH(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var xH=class extends ne{#e;#t;#i;#r;#n;#s;#a;#o;#c;constructor(e,t,i,r,s,n){super(),this.#n=!1,this.#l=this.B(new P),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new P),this.onDidDispose=this.#u.event,this.#i=i,this.#a=r,this.#e=e,this.#t=t,this.#r=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#r.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#r}get viewType(){return this.#i}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=pf.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},EH=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(V.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(op(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:za(e)}),new Ae(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new xH(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:r},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},SH=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiSettingsSearch)}async $startSearch(e,t,i,r){if(this.a.size===0)throw new Error("No related information providers registered");const s=this.a.get(e);if(!s)throw new Error("Settings search provider not found");const n=new C0(o=>{this.c.$handleSearchResult(e,qv.fromSettingsSearchResult(o))});return s.provideSettingsSearchResults(t,i,n,r)}registerSettingsSearchProvider(e,t){const i=this.b;return this.b++,this.a.set(i,t),this.c.$registerAiSettingsSearchProvider(i),new Ae(()=>{this.c.$unregisterAiSettingsSearchProvider(i),this.a.delete(i)})}};function kH(e){const t=e.get(Qt),i=e.get(No),r=e.get(jf),s=e.get(Zs),n=e.get(os),o=e.get(Wf),a=e.get(as),c=e.get(Ku),l=e.get(Be),u=e.get(h0),d=e.get(f0),f=e.get(yc),p=e.get(Ve),m=e.get(w0),w=e.get(qf),x=e.get(cS),k=e.get(O0),$=e.get(Ql),A=e.get(B0),G=e.get(I0),N=e.get(P0),W=e.get(bw);l.set(ee.ExtHostFileSystemInfo,i),l.set(ee.ExtHostLogLevelServiceShape,f),l.set(ee.ExtHostWorkspace,n),l.set(ee.ExtHostConfiguration,a),l.set(ee.ExtHostExtensionService,s),l.set(ee.ExtHostStorage,u),l.set(ee.ExtHostTunnelService,m),l.set(ee.ExtHostWindow,x),l.set(ee.ExtHostSecretState,k),l.set(ee.ExtHostTelemetry,o),l.set(ee.ExtHostEditorTabs,$),l.set(ee.ExtHostManagedSockets,A),l.set(ee.ExtHostAuthentication,G),l.set(ee.ExtHostChatProvider,N);const X=l.set(ee.ExtHostDecorations,e.get(SE)),K=l.set(ee.ExtHostDocumentsAndEditors,e.get(Ba)),Y=l.set(ee.ExtHostCommands,e.get(to)),le=l.set(ee.ExtHostTerminalService,e.get(Oa)),We=l.set(ee.ExtHostTerminalShellIntegration,e.get(lS)),Ce=l.set(ee.ExtHostDebugService,e.get(rS)),dt=l.set(ee.ExtHostSearch,e.get(aS)),_=l.set(ee.ExtHostTask,e.get(qE)),H=l.set(ee.ExtHostOutputService,e.get(EE)),Q=l.set(ee.ExtHostLocalization,e.get(H0)),q=l.set(ee.ExtHostUrls,new vH(l)),Z=l.set(ee.ExtHostDocuments,new PO(l,K)),ve=l.set(ee.ExtHostDocumentContentProviders,new IO(l,K,p)),Te=l.set(ee.ExtHostDocumentSaveParticipant,new DO(p,Z,l.getProxy(V.MainThreadBulkEdits))),xe=l.set(ee.ExtHostNotebook,new IU(l,Y,K,Z,r,dt,p)),Ge=l.set(ee.ExtHostNotebookDocuments,new PU(xe)),Ut=l.set(ee.ExtHostNotebookEditors,new eb(p,xe)),ut=l.set(ee.ExtHostNotebookKernels,new tb(l,t,xe,Y,p)),zt=l.set(ee.ExtHostNotebookRenderers,new MU(l,xe)),ei=l.set(ee.ExtHostNotebookDocumentSaveParticipant,new DU(p,xe,l.getProxy(V.MainThreadBulkEdits))),st=l.set(ee.ExtHostEditors,new rH(l,K)),Or=l.set(ee.ExtHostTreeViews,new pH(l.getProxy(V.MainThreadTreeViews),Y,p)),ho=l.set(ee.ExtHostEditorInsets,new sO(l.getProxy(V.MainThreadEditorInsets),st,t.remote)),vs=l.set(ee.ExtHostDiagnostics,new Pw(l,p,i,K)),ji=l.set(ee.ExtHostLanguages,new sU(l,Z,Y.converter,c)),Se=l.set(ee.ExtHostLanguageFeatures,new VO(l,c,Z,Y,vs,p,w,o)),ze=l.set(ee.ExtHostCodeMapper,new nO(l)),xu=l.set(ee.ExtHostFileSystem,new OO(l,Se)),wi=l.set(ee.ExtHostFileSystemEventService,new jO(l,p,K)),ai=l.set(ee.ExtHostQuickOpen,BU(l,n,Y)),en=l.set(ee.ExtHostSCM,new ab(l,Y,Z,p)),fo=l.set(ee.ExtHostQuickDiff,new HU(l,c)),Qa=l.set(ee.ExtHostShare,new XU(l,c)),Eu=l.set(ee.ExtHostComments,aO(l,Y,Z)),po=l.set(ee.ExtHostProgress,new OU(l.getProxy(V.MainThreadProgress))),Ya=l.set(ee.ExtHostLabelService,new zO(l)),tn=l.set(ee.ExtHostTheming,new cb(l)),bi=l.set(ee.ExtHostTimeline,new sH(l,Y)),Ur=l.set(ee.ExtHostWebviews,new mO(l,t.remote,n,p,w)),ct=l.set(ee.ExtHostWebviewPanels,new bH(l,Ur,n)),Xt=l.set(ee.ExtHostCustomEditors,new EO(l,Z,d,Ur,ct)),Vp=l.set(ee.ExtHostWebviewViews,new EH(l,Ur)),ws=l.set(ee.ExtHostTesting,e.get(ep)),go=l.set(ee.ExtHostUriOpeners,new mH(l)),Xa=l.set(ee.ExtHostProfileContentHandlers,new FU(l));l.set(ee.ExtHostInteractive,new WO(l,xe,K,Y,p));const C=l.set(ee.ExtHostLanguageModelTools,new rU(l,N)),R=l.set(ee.ExtHostChatAgents2,new QF(l,p,Y,Z,N,vs,C)),F=l.set(ee.ExtHostAiRelatedInformation,new WF(l)),oe=l.set(ee.ExtHostAiEmbeddingVector,new TO(l)),we=l.set(ee.ExtHostAiSettingsSearch,new SH(l)),It=l.set(ee.ExtHostStatusBar,new iH(l,Y.converter)),_e=l.set(ee.ExtHostSpeech,new KU(l)),Rt=l.set(ee.ExtHostEmbeddings,new AO(l));l.set(ee.ExtHostMcp,e.get(bw));const gt=Object.values(ee);l.assertRegistered(gt);const _t=new Cw(l,K),Wi=new tO(l),ht=new Ww(l,p),Lt=new CO(l),ti=new KF(l);return GF.register(Y),function(E,pe,De){function B(v){return(b,S,ge)=>{const et=v(Bt=>{try{b.call(S,Bt)}catch(jC){Wb(new W4(E.identifier,jC,"FAILED to handle event"))}});return ge?.push(et),et}}const he=function(){let v=!E.isUnderDevelopment;function b(){v||(p.info(`Extension '${E.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function S(ge){if(Array.isArray(ge))ge.forEach(S);else if(typeof ge=="string")b();else{const et=ge;typeof et.scheme>"u"&&b(),typeof et.exclusive=="boolean"&&L(E,"documentFiltersExclusive")}return ge}}(),Ht={getSession(v,b,S){return(typeof S?.forceNewSession=="object"&&S.forceNewSession.learnMore||typeof S?.createIfNone=="object"&&S.createIfNone.learnMore)&&L(E,"authLearnMore"),G.getSession(E,v,b,S)},getAccounts(v){return G.getAccounts(v)},async hasSession(v,b){return L(E,"authSession"),!!await G.getSession(E,v,b,{silent:!0})},get onDidChangeSessions(){return B(G.getExtensionScopedSessionsEvent(E.identifier.value))},registerAuthenticationProvider(v,b,S,ge){return G.registerAuthenticationProvider(v,b,S,ge)}},Su={registerCommand(v,b,S){return Y.registerCommand(!0,v,b,S,void 0,E)},registerTextEditorCommand(v,b,S){return Y.registerCommand(!0,v,(...ge)=>{const et=st.getActiveTextEditor();if(!et){p.warn("Cannot execute "+v+" because there is no active text editor.");return}return et.edit(Bt=>{b.apply(S,[et,Bt,...ge])}).then(Bt=>{Bt||p.warn("Edits from command "+v+" were not applied.")},Bt=>{p.warn("An error occurred while running command "+v,Bt)})},void 0,void 0,E)},registerDiffInformationCommand:(v,b,S)=>(L(E,"diffCommand"),Y.registerCommand(!0,v,async(...ge)=>{const et=K.activeEditor(!0);if(!et){p.warn("Cannot execute "+v+" because there is no active text editor.");return}const Bt=await st.getDiffInformation(et.id);b.apply(S,[Bt,...ge])},void 0,void 0,E)),executeCommand(v,...b){return Y.executeCommand(v,...b)},getCommands(v=!1){return Y.getCommands(v)}},bs={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Wi.value},get shell(){return le.getDefaultShell(!1)},get onDidChangeShell(){return B(le.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return B(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return L(E,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return L(E,"telemetry"),B(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return Mx(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,b){return Nx.validateSender(v),o.instantiateLogger(E,v,b)},openExternal(v,b){return x.openUri(v,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return q.createAppUri(v);try{return await x.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(b){if(Dg(v,z.http)||Dg(v,z.https))return v;throw b}},get remoteName(){return Lg(t.remote.authority)},get remoteAuthority(){return L(E,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return p.getLevel()},get onDidChangeLogLevel(){return B(p.onDidChangeLogLevel)},get appQuality(){return L(E,"resolvers"),t.quality},get appCommit(){return L(E,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(bs);const rn={createTestController(v,b,S){return ws.createTestController(E,v,b,S)},createTestObserver(){return L(E,"testObserver"),ws.createTestObserver()},runTests(v){return L(E,"testObserver"),ws.runTests(v)},registerTestFollowupProvider(v){return L(E,"testObserver"),ws.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return L(E,"testObserver"),B(ws.onResultsChanged)},get testResults(){return L(E,"testObserver"),ws.results}},ku=t.remote.isRemote?jn.Workspace:jn.UI,DC={getExtension(v,b){Ze(E,"extensionsAny")||(b=!1);const S=pe.mine.getExtensionDescription(v);if(S)return new Wl(s,E.identifier,S,ku,!1);if(b){const ge=pe.all.getExtensionDescription(v);if(ge)return new Wl(s,E.identifier,ge,ku,!0)}},get all(){const v=[];for(const b of pe.mine.getAllExtensionDescriptions())v.push(new Wl(s,E.identifier,b,ku,!1));return v},get allAcrossExtensionHosts(){L(E,"extensionsAny");const v=new pn(pe.mine.getAllExtensionDescriptions().map(S=>S.identifier)),b=[];for(const S of pe.all.getAllExtensionDescriptions()){const ge=!v.has(S.identifier);b.push(new Wl(s,E.identifier,S,ku,ge))}return b},get onDidChange(){return Ze(E,"extensionsAny")?B(ft.any(pe.mine.onDidChange,pe.all.onDidChange)):B(pe.mine.onDidChange)}},PC={createDiagnosticCollection(v){return vs.createDiagnosticCollection(E.identifier,v)},get onDidChangeDiagnostics(){return B(vs.onDidChangeDiagnostics)},getDiagnostics:v=>vs.getDiagnostics(v),getLanguages(){return ji.getLanguages()},setTextDocumentLanguage(v,b){return ji.changeLanguage(v.uri,b)},match(v,b){const S=$v.from(v);let ge;return kS(S)&&(ge=xe.notebookDocuments.find(et=>et.apiNotebook.getCells().find(Bt=>Bt.document===b))?.apiNotebook),SS(S,b.uri,b.languageId,!0,ge?.uri,ge?.notebookType)},registerCodeActionsProvider(v,b,S){return Se.registerCodeActionProvider(E,he(v),b,S)},registerDocumentPasteEditProvider(v,b,S){return Se.registerDocumentPasteEditProvider(E,he(v),b,S)},registerCodeLensProvider(v,b){return Se.registerCodeLensProvider(E,he(v),b)},registerDefinitionProvider(v,b){return Se.registerDefinitionProvider(E,he(v),b)},registerDeclarationProvider(v,b){return Se.registerDeclarationProvider(E,he(v),b)},registerImplementationProvider(v,b){return Se.registerImplementationProvider(E,he(v),b)},registerTypeDefinitionProvider(v,b){return Se.registerTypeDefinitionProvider(E,he(v),b)},registerHoverProvider(v,b){return Se.registerHoverProvider(E,he(v),b,E.identifier)},registerEvaluatableExpressionProvider(v,b){return Se.registerEvaluatableExpressionProvider(E,he(v),b,E.identifier)},registerInlineValuesProvider(v,b){return Se.registerInlineValuesProvider(E,he(v),b,E.identifier)},registerDocumentHighlightProvider(v,b){return Se.registerDocumentHighlightProvider(E,he(v),b)},registerMultiDocumentHighlightProvider(v,b){return Se.registerMultiDocumentHighlightProvider(E,he(v),b)},registerLinkedEditingRangeProvider(v,b){return Se.registerLinkedEditingRangeProvider(E,he(v),b)},registerReferenceProvider(v,b){return Se.registerReferenceProvider(E,he(v),b)},registerRenameProvider(v,b){return Se.registerRenameProvider(E,he(v),b)},registerNewSymbolNamesProvider(v,b){return L(E,"newSymbolNamesProvider"),Se.registerNewSymbolNamesProvider(E,he(v),b)},registerDocumentSymbolProvider(v,b,S){return Se.registerDocumentSymbolProvider(E,he(v),b,S)},registerWorkspaceSymbolProvider(v){return Se.registerWorkspaceSymbolProvider(E,v)},registerDocumentFormattingEditProvider(v,b){return Se.registerDocumentFormattingEditProvider(E,he(v),b)},registerDocumentRangeFormattingEditProvider(v,b){return Se.registerDocumentRangeFormattingEditProvider(E,he(v),b)},registerOnTypeFormattingEditProvider(v,b,S,...ge){return Se.registerOnTypeFormattingEditProvider(E,he(v),b,[S].concat(ge))},registerDocumentSemanticTokensProvider(v,b,S){return Se.registerDocumentSemanticTokensProvider(E,he(v),b,S)},registerDocumentRangeSemanticTokensProvider(v,b,S){return Se.registerDocumentRangeSemanticTokensProvider(E,he(v),b,S)},registerSignatureHelpProvider(v,b,S,...ge){return typeof S=="object"?Se.registerSignatureHelpProvider(E,he(v),b,S):Se.registerSignatureHelpProvider(E,he(v),b,typeof S>"u"?[]:[S,...ge])},registerCompletionItemProvider(v,b,...S){return Se.registerCompletionItemProvider(E,he(v),b,S)},registerInlineCompletionItemProvider(v,b,S){return b.handleDidShowCompletionItem&&L(E,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&L(E,"inlineCompletionsAdditions"),S&&L(E,"inlineCompletionsAdditions"),Se.registerInlineCompletionsProvider(E,he(v),b,S)},registerInlineEditProvider(v,b){return L(E,"inlineEdit"),Se.registerInlineEditProvider(E,he(v),b)},registerDocumentLinkProvider(v,b){return Se.registerDocumentLinkProvider(E,he(v),b)},registerColorProvider(v,b){return Se.registerColorProvider(E,he(v),b)},registerFoldingRangeProvider(v,b){return Se.registerFoldingRangeProvider(E,he(v),b)},registerSelectionRangeProvider(v,b){return Se.registerSelectionRangeProvider(E,v,b)},registerCallHierarchyProvider(v,b){return Se.registerCallHierarchyProvider(E,v,b)},registerTypeHierarchyProvider(v,b){return Se.registerTypeHierarchyProvider(E,v,b)},setLanguageConfiguration:(v,b)=>Se.setLanguageConfiguration(E,v,b),getTokenInformationAtPosition(v,b){return L(E,"tokenInformation"),ji.tokenAtPosition(v,b)},registerInlayHintsProvider(v,b){return Se.registerInlayHintsProvider(E,v,b)},createLanguageStatusItem(v,b){return ji.createLanguageStatusItem(E,v,b)},registerDocumentDropEditProvider(v,b,S){return Se.registerDocumentOnDropEditProvider(E,v,b,S)}},AC={get activeTextEditor(){return st.getActiveTextEditor()},get visibleTextEditors(){return st.getVisibleTextEditors()},get activeTerminal(){return le.activeTerminal},get terminals(){return le.terminals},async showTextDocument(v,b,S){y.isUri(v)&&v.scheme===z.vscodeRemote&&!v.authority&&w.report("workspace.showTextDocument",E,"A URI of 'vscode-remote' scheme requires an authority.");const ge=await(y.isUri(v)?Promise.resolve(jb.openTextDocument(v)):Promise.resolve(v));return st.showTextDocument(ge,b,S)},createTextEditorDecorationType(v){return st.createTextEditorDecorationType(E,v)},onDidChangeActiveTextEditor(v,b,S){return B(st.onDidChangeActiveTextEditor)(v,b,S)},onDidChangeVisibleTextEditors(v,b,S){return B(st.onDidChangeVisibleTextEditors)(v,b,S)},onDidChangeTextEditorSelection(v,b,S){return B(st.onDidChangeTextEditorSelection)(v,b,S)},onDidChangeTextEditorOptions(v,b,S){return B(st.onDidChangeTextEditorOptions)(v,b,S)},onDidChangeTextEditorVisibleRanges(v,b,S){return B(st.onDidChangeTextEditorVisibleRanges)(v,b,S)},onDidChangeTextEditorViewColumn(v,b,S){return B(st.onDidChangeTextEditorViewColumn)(v,b,S)},onDidChangeTextEditorDiffInformation(v,b,S){return L(E,"textEditorDiffInformation"),B(st.onDidChangeTextEditorDiffInformation)(v,b,S)},onDidCloseTerminal(v,b,S){return B(le.onDidCloseTerminal)(v,b,S)},onDidOpenTerminal(v,b,S){return B(le.onDidOpenTerminal)(v,b,S)},onDidChangeActiveTerminal(v,b,S){return B(le.onDidChangeActiveTerminal)(v,b,S)},onDidChangeTerminalDimensions(v,b,S){return L(E,"terminalDimensions"),B(le.onDidChangeTerminalDimensions)(v,b,S)},onDidChangeTerminalState(v,b,S){return B(le.onDidChangeTerminalState)(v,b,S)},onDidWriteTerminalData(v,b,S){return L(E,"terminalDataWriteEvent"),B(le.onDidWriteTerminalData)(v,b,S)},onDidExecuteTerminalCommand(v,b,S){return L(E,"terminalExecuteCommandEvent"),B(le.onDidExecuteTerminalCommand)(v,b,S)},onDidChangeTerminalShellIntegration(v,b,S){return B(We.onDidChangeTerminalShellIntegration)(v,b,S)},onDidStartTerminalShellExecution(v,b,S){return B(We.onDidStartTerminalShellExecution)(v,b,S)},onDidEndTerminalShellExecution(v,b,S){return B(We.onDidEndTerminalShellExecution)(v,b,S)},get state(){return x.getState()},onDidChangeWindowState(v,b,S){return B(x.onDidChangeWindowState)(v,b,S)},showInformationMessage(v,...b){return ht.showMessage(E,wt.Info,v,b[0],b.slice(1))},showWarningMessage(v,...b){return ht.showMessage(E,wt.Warning,v,b[0],b.slice(1))},showErrorMessage(v,...b){return ht.showMessage(E,wt.Error,v,b[0],b.slice(1))},showQuickPick(v,b,S){return ai.showQuickPick(E,v,b,S)},showWorkspaceFolderPick(v){return ai.showWorkspaceFolderPick(v)},showInputBox(v,b){return ai.showInput(v,b)},showOpenDialog(v){return Lt.showOpenDialog(v)},showSaveDialog(v){return Lt.showSaveDialog(v)},createStatusBarItem(v,b,S){let ge,et,Bt;return typeof v=="string"?(ge=v,et=b,Bt=S):(et=v,Bt=b),It.createStatusBarEntry(E,ge,et,Bt)},setStatusBarMessage(v,b){return It.setStatusBarMessage(v,b)},withScmProgress(v){return w.report("window.withScmProgress",E,"Use 'withProgress' instead."),po.withProgress(E,{location:On.SourceControl},(b,S)=>v({report(ge){}}))},withProgress(v,b){return po.withProgress(E,v,b)},createOutputChannel(v,b){return H.createOutputChannel(v,b,E)},createWebviewPanel(v,b,S,ge){return ct.createWebviewPanel(E,v,b,S,ge)},createWebviewTextEditorInset(v,b,S,ge){return L(E,"editorInsets"),ho.createWebviewEditorInset(v,b,S,ge,E)},createTerminal(v,b,S){return typeof v=="object"?"pty"in v?le.createExtensionTerminal(v):le.createTerminalFromOptions(v):le.createTerminal(v,b,S)},registerTerminalLinkProvider(v){return le.registerLinkProvider(v)},registerTerminalProfileProvider(v,b){return le.registerProfileProvider(E,v,b)},registerTerminalCompletionProvider(v,...b){return L(E,"terminalCompletionProvider"),le.registerTerminalCompletionProvider(E,v,...b)},registerTerminalQuickFixProvider(v,b){return L(E,"terminalQuickFixProvider"),le.registerTerminalQuickFixProvider(v,E.identifier.value,b)},registerTreeDataProvider(v,b){return Or.registerTreeDataProvider(v,b,E)},createTreeView(v,b){return Or.createTreeView(v,b,E)},registerWebviewPanelSerializer:(v,b)=>ct.registerWebviewPanelSerializer(E,v,b),registerCustomEditorProvider:(v,b,S={})=>Xt.registerCustomEditorProvider(E,v,b,S),registerFileDecorationProvider(v){return X.registerFileDecorationProvider(v,E)},registerUriHandler(v){return q.registerUriHandler(E,v)},createQuickPick(){return ai.createQuickPick(E)},createInputBox(){return ai.createInputBox(E)},get activeColorTheme(){return tn.activeColorTheme},onDidChangeActiveColorTheme(v,b,S){return B(tn.onDidChangeActiveColorTheme)(v,b,S)},registerWebviewViewProvider(v,b,S){return Vp.registerWebviewViewProvider(E,v,b,S?.webviewOptions)},get activeNotebookEditor(){return xe.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,b,S){return B(xe.onDidChangeActiveNotebookEditor)(v,b,S)},get visibleNotebookEditors(){return xe.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return B(xe.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,b,S){return B(Ut.onDidChangeNotebookEditorSelection)(v,b,S)},onDidChangeNotebookEditorVisibleRanges(v,b,S){return B(Ut.onDidChangeNotebookEditorVisibleRanges)(v,b,S)},showNotebookDocument(v,b){return xe.showNotebookDocument(v,b)},registerExternalUriOpener(v,b,S){return L(E,"externalUriOpener"),go.registerExternalUriOpener(E.identifier,v,b,S)},registerProfileContentHandler(v,b){return L(E,"profileContentHandlers"),Xa.registerProfileContentHandler(E,v,b)},registerQuickDiffProvider(v,b,S,ge,et){return L(E,"quickDiffProvider"),fo.registerQuickDiffProvider(E,he(v),b,S,ge,et)},get tabGroups(){return $.tabGroups},registerShareProvider(v,b){return L(E,"shareProvider"),Qa.registerShareProvider(he(v),b)},get nativeHandle(){return L(E,"nativeWindowHandle"),x.nativeHandle},createChatStatusItem:v=>(L(E,"chatStatusItem"),ti.createChatStatusItem(E,v))},jb={get rootPath(){return w.report("workspace.rootPath",E,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(v){throw new sn("rootPath")},getWorkspaceFolder(v){return n.getWorkspaceFolder(v)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(v){throw new sn("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(v){throw new sn("workspaceFile")},updateWorkspaceFolders:(v,b,...S)=>n.updateWorkspaceFolders(E,v,b||0,...S),onDidChangeWorkspaceFolders:function(v,b,S){return B(n.onDidChangeWorkspace)(v,b,S)},asRelativePath:(v,b)=>n.getRelativePath(v,b),findFiles:(v,b,S,ge)=>n.findFiles(v,b,S,E.identifier,ge),findFiles2:(v,b,S)=>(L(E,"findFiles2"),n.findFiles2(v,b,E.identifier,S)),findTextInFiles:(v,b,S,ge)=>{L(E,"findTextInFiles");let et,Bt;return typeof b=="object"?(et=b,Bt=S):(et={},Bt=b,ge=S),n.findTextInFiles(v,et||{},Bt,E.identifier,ge)},findTextInFiles2:(v,b,S)=>(L(E,"findTextInFiles2"),L(E,"textSearchProvider2"),n.findTextInFiles2(v,b,E.identifier,S)),save:v=>n.save(v),saveAs:v=>n.saveAs(v),saveAll:v=>n.saveAll(v),applyEdit(v,b){return _t.applyWorkspaceEdit(v,E,b)},createFileSystemWatcher:(v,b,S,ge)=>{const et={ignoreCreateEvents:!!b,ignoreChangeEvents:!!S,ignoreDeleteEvents:!!ge};return wi.createFileSystemWatcher(n,De,E,v,et)},get textDocuments(){return Z.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new sn("textDocuments")},openTextDocument(v,b){let S;if(b=b??v,typeof v=="string")S=Promise.resolve(y.file(v));else if(y.isUri(v))S=Promise.resolve(v);else if(!b||typeof b=="object")S=Z.createDocumentData(b);else throw new Error("illegal argument - uriOrFileNameOrOptions");return S.then(ge=>(p.trace(`openTextDocument from ${E.identifier}`),ge.scheme===z.vscodeRemote&&!ge.authority&&w.report("workspace.openTextDocument",E,"A URI of 'vscode-remote' scheme requires an authority."),Z.ensureDocumentData(ge,b).then(et=>et.document)))},onDidOpenTextDocument:(v,b,S)=>B(Z.onDidAddDocument)(v,b,S),onDidCloseTextDocument:(v,b,S)=>B(Z.onDidRemoveDocument)(v,b,S),onDidChangeTextDocument:(v,b,S)=>B(Z.onDidChangeDocument)(v,b,S),onDidSaveTextDocument:(v,b,S)=>B(Z.onDidSaveDocument)(v,b,S),onWillSaveTextDocument:(v,b,S)=>B(Te.getOnWillSaveTextDocumentEvent(E))(v,b,S),get notebookDocuments(){return xe.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,b){let S;if(y.isUri(v))S=v,await xe.openNotebookDocument(v);else if(typeof v=="string")S=y.revive(await xe.createNotebookDocument({viewType:v,content:b}));else throw new Error("Invalid arguments");return xe.getNotebookDocument(S).apiNotebook},onDidSaveNotebookDocument(v,b,S){return B(Ge.onDidSaveNotebookDocument)(v,b,S)},onDidChangeNotebookDocument(v,b,S){return B(Ge.onDidChangeNotebookDocument)(v,b,S)},onWillSaveNotebookDocument(v,b,S){return B(ei.getOnWillSaveNotebookDocumentEvent(E))(v,b,S)},get onDidOpenNotebookDocument(){return B(xe.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return B(xe.onDidCloseNotebookDocument)},registerNotebookSerializer(v,b,S,ge){return xe.registerNotebookSerializer(E,v,b,S,Ze(E,"notebookLiveShare")?ge:void 0)},onDidChangeConfiguration:(v,b,S)=>B(De.onDidChangeConfiguration)(v,b,S),getConfiguration(v,b){return b=arguments.length===1?void 0:b,De.getConfiguration(v,b,E)},registerTextDocumentContentProvider(v,b){return ve.registerTextDocumentContentProvider(v,b)},registerTaskProvider:(v,b)=>(w.report("window.registerTaskProvider",E,"Use the corresponding function on the 'tasks' namespace instead"),_.registerTaskProvider(E,v,b)),registerFileSystemProvider(v,b,S){return ng(xu.registerFileSystemProvider(E,v,b,S),r.addFileSystemProvider(v,b,S))},get fs(){return r.value},registerFileSearchProvider:(v,b)=>(L(E,"fileSearchProvider"),dt.registerFileSearchProviderOld(v,b)),registerTextSearchProvider:(v,b)=>(L(E,"textSearchProvider"),dt.registerTextSearchProviderOld(v,b)),registerAITextSearchProvider:(v,b)=>(L(E,"aiTextSearchProvider"),L(E,"textSearchProvider2"),dt.registerAITextSearchProvider(v,b)),registerFileSearchProvider2:(v,b)=>(L(E,"fileSearchProvider2"),dt.registerFileSearchProvider(v,b)),registerTextSearchProvider2:(v,b)=>(L(E,"textSearchProvider2"),dt.registerTextSearchProvider(v,b)),registerRemoteAuthorityResolver:(v,b)=>(L(E,"resolvers"),s.registerRemoteAuthorityResolver(v,b)),registerResourceLabelFormatter:v=>(L(E,"resolvers"),Ya.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(L(E,"resolvers"),s.getRemoteExecServer(v)),onDidCreateFiles:(v,b,S)=>B(wi.onDidCreateFile)(v,b,S),onDidDeleteFiles:(v,b,S)=>B(wi.onDidDeleteFile)(v,b,S),onDidRenameFiles:(v,b,S)=>B(wi.onDidRenameFile)(v,b,S),onWillCreateFiles:(v,b,S)=>B(wi.getOnWillCreateFileEvent(E))(v,b,S),onWillDeleteFiles:(v,b,S)=>B(wi.getOnWillDeleteFileEvent(E))(v,b,S),onWillRenameFiles:(v,b,S)=>B(wi.getOnWillRenameFileEvent(E))(v,b,S),openTunnel:v=>(L(E,"tunnels"),m.openTunnel(E,v).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return L(E,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,b,S)=>(L(E,"tunnels"),B(m.onDidChangeTunnels)(v,b,S)),registerPortAttributesProvider:(v,b)=>(L(E,"portsAttributes"),m.registerPortsAttributesProvider(v,b)),registerTunnelProvider:(v,b)=>(L(E,"tunnelFactory"),m.registerTunnelProvider(v,b)),registerTimelineProvider:(v,b)=>(L(E,"timeline"),bi.registerTimelineProvider(v,b,E.identifier,Y.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:v=>(L(E,"workspaceTrust"),n.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,b,S)=>B(n.onDidGrantWorkspaceTrust)(v,b,S),registerEditSessionIdentityProvider:(v,b)=>(L(E,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(v,b)),onWillCreateEditSessionIdentity:(v,b,S)=>(L(E,"editSessionIdentityProvider"),B(n.getOnWillCreateEditSessionIdentityEvent(E))(v,b,S)),registerCanonicalUriProvider:(v,b)=>(L(E,"canonicalUriProvider"),n.registerCanonicalUriProvider(v,b)),getCanonicalUri:(v,b,S)=>(L(E,"canonicalUriProvider"),n.provideCanonicalUri(v,b,S)),decode(v,b){return n.decode(v,b)},encode(v,b){return n.encode(v,b)}},TC={get inputBox(){return w.report("scm.inputBox",E,"Use 'SourceControl.inputBox' instead"),en.getLastInputBox(E)},createSourceControl(v,b,S){return en.createSourceControl(E,v,b,S)}},RC={createCommentController(v,b){return Eu.createCommentController(E,v,b)}},LC={get activeDebugSession(){return Ce.activeDebugSession},get activeDebugConsole(){return Ce.activeDebugConsole},get breakpoints(){return Ce.breakpoints},get activeStackItem(){return Ce.activeStackItem},registerDebugVisualizationProvider(v,b){return L(E,"debugVisualization"),Ce.registerDebugVisualizationProvider(E,v,b)},registerDebugVisualizationTreeProvider(v,b){return L(E,"debugVisualization"),Ce.registerDebugVisualizationTree(E,v,b)},onDidStartDebugSession(v,b,S){return B(Ce.onDidStartDebugSession)(v,b,S)},onDidTerminateDebugSession(v,b,S){return B(Ce.onDidTerminateDebugSession)(v,b,S)},onDidChangeActiveDebugSession(v,b,S){return B(Ce.onDidChangeActiveDebugSession)(v,b,S)},onDidReceiveDebugSessionCustomEvent(v,b,S){return B(Ce.onDidReceiveDebugSessionCustomEvent)(v,b,S)},onDidChangeBreakpoints(v,b,S){return B(Ce.onDidChangeBreakpoints)(v,b,S)},onDidChangeActiveStackItem(v,b,S){return B(Ce.onDidChangeActiveStackItem)(v,b,S)},registerDebugConfigurationProvider(v,b,S){return Ce.registerDebugConfigurationProvider(v,b,S||sp.Initial)},registerDebugAdapterDescriptorFactory(v,b){return Ce.registerDebugAdapterDescriptorFactory(E,v,b)},registerDebugAdapterTrackerFactory(v,b){return Ce.registerDebugAdapterTrackerFactory(v,b)},startDebugging(v,b,S){return!S||typeof S=="object"&&"configuration"in S?Ce.startDebugging(v,b,{parentSession:S}):Ce.startDebugging(v,b,S||{})},stopDebugging(v){return Ce.stopDebugging(v)},addBreakpoints(v){return Ce.addBreakpoints(v)},removeBreakpoints(v){return Ce.removeBreakpoints(v)},asDebugSourceUri(v,b){return Ce.asDebugSourceUri(v,b)}},NC={registerTaskProvider:(v,b)=>_.registerTaskProvider(E,v,b),fetchTasks:v=>_.fetchTasks(v),executeTask:v=>_.executeTask(E,v),get taskExecutions(){return _.taskExecutions},onDidStartTask:(v,b,S)=>B(_.onDidStartTask)(v,b,S),onDidEndTask:(v,b,S)=>B(_.onDidEndTask)(v,b,S),onDidStartTaskProcess:(v,b,S)=>B(_.onDidStartTaskProcess)(v,b,S),onDidEndTaskProcess:(v,b,S)=>B(_.onDidEndTaskProcess)(v,b,S),onDidStartTaskProblemMatchers:(v,b,S)=>(L(E,"taskProblemMatcherStatus"),B(_.onDidStartTaskProblemMatchers)(v,b,S)),onDidEndTaskProblemMatchers:(v,b,S)=>(L(E,"taskProblemMatcherStatus"),B(_.onDidEndTaskProblemMatchers)(v,b,S))},MC={createNotebookController(v,b,S,ge,et){return ut.createNotebookController(E,v,b,S,ge,Ze(E,"notebookMessaging")?et:void 0)},registerNotebookCellStatusBarItemProvider:(v,b)=>xe.registerNotebookCellStatusBarItemProvider(E,v,b),createRendererMessaging(v){return zt.createRendererMessaging(E,v)},createNotebookControllerDetectionTask(v){return L(E,"notebookKernelSource"),ut.createNotebookControllerDetectionTask(E,v)},registerKernelSourceActionProvider(v,b){return L(E,"notebookKernelSource"),ut.registerKernelSourceActionProvider(E,v,b)},onDidChangeNotebookCellExecutionState(v,b,S){return L(E,"notebookCellExecutionState"),B(ut.onDidChangeNotebookCellExecutionState)(v,b,S)}},FC={t(...v){if(typeof v[0]=="string"){const b=v.shift(),S=!v||typeof v[0]!="object"?v:v[0];return Q.getMessage(E.identifier.value,{message:b,args:S})}return Q.getMessage(E.identifier.value,v[0])},get bundle(){return Q.getBundle(E.identifier.value)},get uri(){return Q.getBundleUri(E.identifier.value)}},OC={transferActiveChat(v){return L(E,"interactive"),R.transferActiveChat(v)}},UC={getRelatedInformation(v,b){return L(E,"aiRelatedInformation"),F.getRelatedInformation(E,v,b)},registerRelatedInformationProvider(v,b){return L(E,"aiRelatedInformation"),F.registerRelatedInformationProvider(E,v,b)},registerEmbeddingVectorProvider(v,b){return L(E,"aiRelatedInformation"),oe.registerEmbeddingVectorProvider(E,v,b)},registerSettingsSearchProvider(v){return L(E,"aiSettingsSearch"),we.registerSettingsSearchProvider(E,v)}},HC={registerMappedEditsProvider(v,b){return L(E,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(v){return L(E,"mappedEditsProvider"),ze.registerMappedEditsProvider(E,v)},createChatParticipant(v,b){return R.createChatAgent(E,v,b)},createDynamicChatParticipant(v,b,S){return L(E,"chatParticipantPrivate"),R.createDynamicChatAgent(E,v,b,S)},registerChatParticipantDetectionProvider(v){return L(E,"chatParticipantPrivate"),R.registerChatParticipantDetectionProvider(E,v)},registerRelatedFilesProvider(v,b){return L(E,"chatEditing"),R.registerRelatedFilesProvider(E,v,b)},onDidDisposeChatSession:(v,b,S)=>(L(E,"chatParticipantPrivate"),B(R.onDidDisposeChatSession)(v,b,S))},qp={selectChatModels:v=>N.selectLanguageModels(E,v??{}),onDidChangeChatModels:(v,b,S)=>N.onDidChangeProviders(v,b,S),registerChatModelProvider:(v,b,S)=>(L(E,"chatProvider"),N.registerLanguageModel(E,v,b,S)),get embeddingModels(){return L(E,"embeddings"),Rt.embeddingsModels},onDidChangeEmbeddingModels:(v,b,S)=>(L(E,"embeddings"),Rt.onDidChange(v,b,S)),registerEmbeddingsProvider(v,b){return L(E,"embeddings"),Rt.registerEmbeddingsProvider(E,v,b)},async computeEmbeddings(v,b,S){return L(E,"embeddings"),Rt.computeEmbeddings(v,b,S)},registerTool(v,b){return C.registerTool(E,v,b)},invokeTool(v,b,S){return C.invokeTool(E,v,b,S)},get tools(){return C.getTools(E)},fileIsIgnored(v,b){return N.fileIsIgnored(E,v,b)},registerIgnoredFileProvider(v){return N.registerIgnoredFileProvider(E,v)},registerMcpServerDefinitionProvider(v,b){return L(E,"mcpConfigurationProvider"),W.registerMcpConfigurationProvider(E,v,b)}};qp.registerMcpConfigurationProvider=qp.registerMcpServerDefinitionProvider;const BC={registerSpeechProvider(v,b){return L(E,"speech"),_e.registerProvider(E.identifier,v,b)}};return{version:t.version,ai:UC,authentication:Ht,commands:Su,comments:RC,chat:HC,debug:LC,env:bs,extensions:DC,interactive:OC,l10n:FC,languages:PC,lm:qp,notebooks:MC,scm:TC,speech:BC,tasks:NC,tests:rn,window:AC,workspace:jb,Breakpoint:la,TerminalOutputAnchor:i1,ChatResultFeedbackKind:fl,ChatVariableLevel:G1,ChatCompletionItem:kR,ChatReferenceDiagnostic:L8,CallHierarchyIncomingCall:c8,CallHierarchyItem:n1,CallHierarchyOutgoingCall:l8,CancellationError:vr,CancellationTokenSource:lt,CandidatePortSource:yg,CodeAction:Gc,CodeActionKind:at,CodeActionTriggerKind:qc,CodeLens:sd,Color:sa,ColorInformation:ud,ColorPresentation:hd,ColorThemeKind:Hs,CommentMode:P1,CommentState:A1,CommentThreadCollapsibleState:nl,CommentThreadState:ol,CommentThreadApplicability:al,CommentThreadFocus:cl,CompletionItem:ad,CompletionItemKind:ce,CompletionItemTag:Zc,CompletionList:Xo,CompletionTriggerKind:Yo,ConfigurationTarget:aa,CustomExecution:E1,DebugAdapterExecutable:vd,DebugAdapterInlineImplementation:il,DebugAdapterNamedPipeServer:wd,DebugAdapterServer:tl,DebugConfigurationProviderTriggerKind:sp,DebugConsoleMode:kd,DebugVisualization:vR,DecorationRangeBehavior:Mn,Diagnostic:Kh,DiagnosticRelatedInformation:jc,DiagnosticSeverity:Yt,DiagnosticTag:Ln,Disposable:Ae,DocumentHighlight:id,DocumentHighlightKind:Wc,MultiDocumentHighlight:rd,DocumentLink:ld,DocumentSymbol:Vc,EndOfLine:or,EnvironmentVariableMutatorType:Zo,EvaluatableExpression:bd,InlineValueText:yd,InlineValueVariableLookup:xd,InlineValueEvaluatableExpression:Ed,InlineCompletionTriggerKind:rl,EventEmitter:P,ExtensionKind:jn,ExtensionMode:pa,ExternalUriOpenerPriority:O1,FileChangeType:ua,FileDecoration:L1,FileDecoration2:L1,FileSystemError:Dt,FileType:En,FilePermission:Ho,FoldingRange:D1,FoldingRangeKind:ts,FunctionBreakpoint:Bn,InlineCompletionItem:h1,InlineCompletionList:d1,Hover:ed,VerboseHover:td,HoverVerbosityAction:s1,IndentAction:Sw,Location:Hi,MarkdownString:Ii,OverviewRulerLane:R0,ParameterInformation:o1,PortAutoForwardAction:H1,Position:Ie,ProcessExecution:na,ProgressLocation:On,QuickInputButtonLocation:R1,QuickInputButtons:ll,Range:Ee,RelativePattern:ca,Selection:es,SelectionRange:Jc,SemanticTokens:ha,SemanticTokensBuilder:mR,SemanticTokensEdit:g8,SemanticTokensEdits:Sd,SemanticTokensLegend:T1,ShellExecution:Fn,ShellQuoting:x1,SignatureHelp:c1,SignatureHelpTriggerKind:l1,SignatureInformation:a1,SnippetString:Rn,SourceBreakpoint:Hn,StandardTokenType:Bs,StatusBarAlignment:Fs,SymbolInformation:_c,SymbolKind:Ye,SymbolTag:zc,Task:dd,TaskEventKind:b1,TaskGroup:Kc,TaskPanelKind:y1,TaskRevealKind:w1,TaskScope:Os,TerminalLink:sR,TerminalQuickFixTerminalCommand:oR,TerminalQuickFixOpener:nR,TerminalLocation:m1,TerminalProfile:aR,TerminalExitReason:p1,TerminalShellExecutionCommandLineConfidence:Xc,TerminalCompletionItem:cR,TerminalCompletionItemKind:v1,TerminalCompletionList:lR,TerminalShellType:g1,TextDocumentSaveReason:ea,TextEdit:Ms,SnippetTextEdit:r1,TextEditorCursorStyle:hr,TextEditorChangeKind:ia,TextEditorLineNumbersStyle:ar,TextEditorRevealType:cd,TextEditorSelectionChangeKind:ta,SyntaxTokenType:ra,TextDocumentChangeReason:Yc,ThemeColor:el,ThemeIcon:oi,TreeItem:fd,TreeItemCheckboxState:Dr,TreeItemCollapsibleState:Un,TypeHierarchyItem:B1,UIKind:rc,Uri:y,ViewColumn:Qc,WorkspaceEdit:Tn,DocumentPasteTriggerKind:$1,DocumentDropEdit:k1,DocumentDropOrPasteEditKind:Us,DocumentPasteEdit:dR,InlayHint:od,InlayHintLabelPart:nd,InlayHintKind:u1,RemoteAuthorityResolverError:Jo,ResolvedAuthority:iR,ManagedResolvedAuthority:Yh,SourceControlInputBoxValidationType:f1,ExtensionRuntime:Td,TimelineItem:M1,NotebookRange:is,NotebookCellKind:Wn,NotebookCellExecutionState:fa,NotebookCellData:Cd,NotebookData:m8,NotebookRendererScript:w8,NotebookCellStatusBarAlignment:Dd,NotebookEditorRevealType:Pd,NotebookCellOutput:Id,NotebookCellOutputItem:v8,CellErrorStackFrame:wR,NotebookCellStatusBarItem:bR,NotebookControllerAffinity:N1,NotebookControllerAffinity2:Ad,NotebookEdit:Xh,NotebookKernelSourceAction:yR,NotebookVariablesRequestKind:hl,PortAttributes:ER,LinkedEditingRanges:xR,TestResultState:F1,TestRunRequest:Rd,TestMessage:Ld,TestMessageStackFrame:SR,TestTag:dl,TestRunProfileKind:ga,TextSearchCompleteMessageType:Af,DataTransfer:oa,DataTransferItem:pd,TestCoverageCount:Nd,FileCoverage:Fd,StatementCoverage:y8,BranchCoverage:x8,DeclarationCoverage:E8,WorkspaceTrustState:U1,LanguageStatusSeverity:Qo,QuickPickItemKind:ul,InputBoxValidationSeverity:da,TabInputText:j1,TabInputTextDiff:Od,TabInputTextMerge:S8,TabInputCustom:W1,TabInputNotebook:z1,TabInputNotebookDiff:_1,TabInputWebview:k8,TabInputTerminal:$8,TabInputInteractiveWindow:C8,TabInputChat:I8,TabInputTextMultiDiff:D8,TelemetryTrustedValue:Jm,LogLevel:$e,EditSessionIdentityMatch:kw,InteractiveSessionVoteDirection:V1,ChatCopyKind:q1,ChatEditingSessionActionOutcome:zn,InteractiveEditorResponseFeedbackKind:Z1,DebugStackFrame:f8,DebugThread:p8,RelatedInformationType:sv,SpeechToTextStatus:ov,TextToSpeechStatus:av,PartialAcceptTriggerKind:Nn,InlineCompletionEndOfLifeReasonKind:Ko,KeywordRecognitionStatus:cv,ChatImageMimeType:Jd,ChatResponseMarkdownPart:Ud,ChatResponseFileTreePart:Bd,ChatResponseAnchorPart:gl,ChatResponseProgressPart:Q1,ChatResponseProgressPart2:jd,ChatResponseReferencePart:_n,ChatResponseReferencePart2:_n,ChatResponseCodeCitationPart:_d,ChatResponseCodeblockUriPart:zd,ChatResponseWarningPart:ml,ChatResponseTextEditPart:vl,ChatResponseNotebookEditPart:qd,ChatResponseMarkdownWithVulnerabilitiesPart:pl,ChatResponseCommandButtonPart:Wd,ChatResponseConfirmationPart:Hd,ChatResponseMovePart:Vd,ChatResponseExtensionsPart:Y1,ChatResponseReferencePartStatusKind:K1,ChatRequestTurn:X1,ChatRequestTurn2:X1,ChatResponseTurn:P8,ChatLocation:cr,ChatRequestEditorData:A8,ChatRequestNotebookData:T8,ChatReferenceBinaryData:R8,ChatRequestEditedFileEventKind:J1,LanguageModelChatMessageRole:Di,LanguageModelChatMessage:N8,LanguageModelChatMessage2:M8,LanguageModelToolResultPart:Gd,LanguageModelToolResultPart2:ev,LanguageModelTextPart:pt,LanguageModelToolCallPart:Vn,LanguageModelError:rs,LanguageModelToolResult:Zd,LanguageModelToolResult2:F8,LanguageModelDataPart:js,LanguageModelExtraDataPart:iv,ExtendedLanguageModelToolResult:CR,PreparedTerminalToolInvocation:$R,LanguageModelChatToolMode:rv,LanguageModelPromptTsxPart:Pr,NewSymbolName:pR,NewSymbolNameTag:I1,NewSymbolNameTriggerKind:sl,InlineEdit:IR,InlineEditTriggerKind:wl,ExcludeSettingOptions:ns,TextSearchContext2:Gv,TextSearchMatch2:qs,AISearchKeyword:Jv,TextSearchCompleteMessageTypeNew:Af,ChatErrorLevel:tv,McpHttpServerDefinition:PR,McpStdioServerDefinition:DR,SettingsSearchResultKind:nv}}}var Dp,lb=class{constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.i=o,this.j=a,this.a=new Map,this.b=[]}async install(){this.k(),ci("code/extHost/willWaitForConfig");const t=await this.g.getConfigProvider();ci("code/extHost/didWaitForConfig");const i=await this.h.getExtensionPathIndex();this.register(new $H(this.c,i,this.d,t,this.j)),this.register(this.f.createInstance(ub)),this.i.remote.isRemote&&this.register(this.f.createInstance(hb,i,this.i.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};lb=__decorate([__param(2,fc),__param(3,as),__param(4,Zs),__param(5,Qt),__param(6,Ve)],lb);var ub=class{static{Dp=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Dp.a.size){const i=dn(this.c(t.environment.appRoot.fsPath)),r="[a-z0-9_.-]",s=`@${r}+\\/${r}+|${r}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,r,s,n]=i,o=Dp.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),r+o+n}c(t){return t.replace(/\\/g,"/")}};ub=Dp=__decorate([__param(0,Qt)],ub);var $H=class{constructor(e,t,i,r,s){this.c=e,this.d=t,this.e=i,this.f=r,this.g=s,this.nodeModuleName="vscode",this.a=new Vr}load(e,t){const i=this.d.findSubstr(t);if(i){let r=this.a.get(i.identifier);return r||(r=this.c(i,this.e,this.f),this.a.set(i.identifier,r)),r}if(!this.b){let r="";this.d.forEach((s,n)=>r+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${r}`),this.b=this.c(_T,this.e,this.f)}return this.b}},hb=class{constructor(t,i,r){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=r.getProxy(V.MainThreadTelemetry);const s=r.getProxy(V.MainThreadWindow);this.c=(n,o)=>{const a=y.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,i,r){const s=this.e.findSubstr(i);return s&&(this.a=s.identifier.value,this.h()),this.b=r(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};hb=__decorate([__param(2,Be)],hb);var db=class{constructor(t,i){this.a=t.getProxy(V.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const r=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){r.e(t,i,s,arguments)}})}e(t,i,r,s){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:IH(s,this.b)}),this.c&&this.f(t,r,s)}};db=__decorate([__param(0,Be),__param(1,Qt)],db);var CH=1e5;function IH(e,t){const i=[];if(e.length)for(let r=0;r<e.length;r++){let s=e[r];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}i.push(s)}if(t){const r=new Error().stack;r&&i.push({__$stack:r.split(`
`).slice(3).join(`
`)})}try{const r=h2(i);return r.length>CH?"Output omitted for a large object that exceeds the limits":r}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}var fb=class extends db{constructor(t,i){super(t,i)}f(t,i,r){i.apply(console,r)}};fb=__decorate([__param(0,Be),__param(1,Qt)],fb);var DH=class extends lb{k(){}getModule(e,t){for(const i of this.b){const r=i(e);if(r){e=r;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},PH=class extends z0{constructor(){super(...arguments),this.extensionRuntime=Td.Webworker}async wb(){this.h.createInstance(fb);const e=this.h.invokeFunction(kH);this.r=this.h.createInstance(DH,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Eb()}xb(e){return e.browser}async yb(e,t,i){t=t.with({path:AH(t.path,".js")});const r=e?.identifier.value;r&&performance.mark(`code/extHost/willFetchExtensionCode/${r}`);const s=y.revive(await this.C.$asBrowserUri(t)),n=await fetch(s.toString(!0));if(r&&performance.mark(`code/extHost/didFetchExtensionCode/${r}`),n.status!==200)throw new Error(n.statusText);const o=await n.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(p){throw console.error(r?`Loading code for extension ${r} failed: ${p.message}`:`Loading code failed: ${p.message}`),console.error(`${t.toString(!0)}${typeof p.line=="number"?` line ${p.line}`:""}${typeof p.column=="number"?` column ${p.column}`:""}`),console.error(p),p}e&&await this.w.initializeLocalizedMessages(e);const u={},d={exports:u},f=p=>{const m=this.r.getModule(p,t);if(m===void 0)throw new Error(`Cannot load module '${p}'`);return m};try{return i.codeLoadingStart(),r&&performance.mark(`code/extHost/willLoadExtensionCode/${r}`),l(d,u,f),d.exports!==u?d.exports:u}finally{r&&performance.mark(`code/extHost/didLoadExtensionCode/${r}`),i.codeLoadingStop()}}zb(e,t,i){throw new Error("ESM modules are not supported in the web worker extension host")}async $setRemoteEnvironment(e){}async Eb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await tr(10)}};function AH(e,t){return e.endsWith(t)?e:e+t}Je(Ve,new Er(xw,[!0],!0)),Je(Zs,PH,0),Je(f0,p0,0),Je(Wf,new Er(x0,[!0],!0));var i$=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var r$=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function s$(e){return/^(file|vscode-remote):/i.test(e)}var n$=fetch.bind(self);function TH(e){self.fetch=async function(t,i){return t instanceof Request||s$(String(t))&&(t=(await e(y.parse(String(t)))).toString(!0)),n$(t,i)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,i,r,s,n){(async()=>(s$(i.toString())&&(i=(await e(y.parse(i.toString()))).toString(!0)),super.open(t,i,r??!0,s,n)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,i){if(/^file:/i.test(t.toString()))t=v4.uriToBrowserUri(y.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const s=`(${function(c){function l(f){return typeof f=="string"||f instanceof URL?String(f).replace(/^file:\/\//i,"vscode-file://vscode-app"):f}const u=fetch.bind(self);self.fetch=function(f,p){return f instanceof Request?u(f,p):u(l(f),p)},self.XMLHttpRequest=class extends XMLHttpRequest{open(f,p,m,w,x){return super.open(f,l(p),m??!0,w,x)}};const d=importScripts.bind(self);self.importScripts=(...f)=>{d(...f.map(l))},d(c)}.toString()}('${t}'))`;i=i||{},i.name=`${name} -> ${i.name||ki(t.toString())}`;const n=new Blob([s],{type:"application/javascript"}),o=URL.createObjectURL(n);return new e(o,i)}}else self.Worker=class extends yN{constructor(e,t){super(r$,e,{name:ki(e.toString()),...t})}};var RH=new class{constructor(){this.pid=void 0}exit(e){i$()}},LH=class{constructor(){const e=new MessageChannel,t=new P;let i=!1;r$(e.port2,[e.port2]),e.port1.onmessage=r=>{const{data:s}=r;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const n=ae.wrap(new Uint8Array(s,0,s.byteLength));if(jI(n,2)){i=!0,o$("received terminate message from renderer");return}t.fire(n)},this.protocol={onMessage:t.event,send:r=>{if(!i){const s=r.buffer.buffer.slice(r.buffer.byteOffset,r.buffer.byteOffset+r.buffer.byteLength);e.port1.postMessage(s,[s])}}}}};function NH(e){return new Promise(t=>{const i=e.onMessage(r=>{i.dispose();const s=JSON.parse(r.toString());e.send(gy(0)),t({protocol:e,initData:s})});e.send(gy(1))})}var o$=e=>i$();function MH(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function FH(){ci("code/extHost/willConnectToRenderer");const e=new LH;return{onmessage(t){MH(t)&&NH(e.protocol).then(i=>{ci("code/extHost/didWaitForInitData");const r=new wN(i.protocol,i.initData,RH,null,t.data);TH(s=>r.asBrowserUri(s)),o$=s=>r.terminate(s)})}}}var OH=FH();self.onmessage=e=>OH.onmessage(e.data);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/848b80aeb52026648a8ff9f7c45a9b0a80641e2e/core/vs/workbench/api/worker/extensionHostWorkerMain.js.map
